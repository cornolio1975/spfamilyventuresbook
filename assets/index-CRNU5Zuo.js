(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var $1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function km(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Yd={exports:{}},wu={};var Cv;function Z1(){if(Cv)return wu;Cv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,u){var p=null;if(u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),"key"in l){u={};for(var _ in l)_!=="key"&&(u[_]=l[_])}else u=l;return l=u.ref,{$$typeof:a,type:s,key:p,ref:l!==void 0?l:null,props:u}}return wu.Fragment=t,wu.jsx=r,wu.jsxs=r,wu}var jv;function J1(){return jv||(jv=1,Yd.exports=Z1()),Yd.exports}var g=J1(),Xd={exports:{}},ht={};var Dv;function W1(){if(Dv)return ht;Dv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),p=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.iterator;function $(F){return F===null||typeof F!="object"?null:(F=O&&F[O]||F["@@iterator"],typeof F=="function"?F:null)}var se={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oe=Object.assign,B={};function Q(F,be,Ie){this.props=F,this.context=be,this.refs=B,this.updater=Ie||se}Q.prototype.isReactComponent={},Q.prototype.setState=function(F,be){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,be,"setState")},Q.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ee(){}ee.prototype=Q.prototype;function fe(F,be,Ie){this.props=F,this.context=be,this.refs=B,this.updater=Ie||se}var Se=fe.prototype=new ee;Se.constructor=fe,oe(Se,Q.prototype),Se.isPureReactComponent=!0;var Ue=Array.isArray;function Ge(){}var k={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function P(F,be,Ie){var Re=Ie.ref;return{$$typeof:a,type:F,key:be,ref:Re!==void 0?Re:null,props:Ie}}function I(F,be){return P(F.type,be,F.props)}function z(F){return typeof F=="object"&&F!==null&&F.$$typeof===a}function X(F){var be={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Ie){return be[Ie]})}var V=/\/+/g;function at(F,be){return typeof F=="object"&&F!==null&&F.key!=null?X(""+F.key):be.toString(36)}function dt(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Ge,Ge):(F.status="pending",F.then(function(be){F.status==="pending"&&(F.status="fulfilled",F.value=be)},function(be){F.status==="pending"&&(F.status="rejected",F.reason=be)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function J(F,be,Ie,Re,Fe){var $e=typeof F;($e==="undefined"||$e==="boolean")&&(F=null);var rt=!1;if(F===null)rt=!0;else switch($e){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(F.$$typeof){case a:case t:rt=!0;break;case A:return rt=F._init,J(rt(F._payload),be,Ie,Re,Fe)}}if(rt)return Fe=Fe(F),rt=Re===""?"."+at(F,0):Re,Ue(Fe)?(Ie="",rt!=null&&(Ie=rt.replace(V,"$&/")+"/"),J(Fe,be,Ie,"",function(fn){return fn})):Fe!=null&&(z(Fe)&&(Fe=I(Fe,Ie+(Fe.key==null||F&&F.key===Fe.key?"":(""+Fe.key).replace(V,"$&/")+"/")+rt)),be.push(Fe)),1;rt=0;var Ft=Re===""?".":Re+":";if(Ue(F))for(var Oe=0;Oe<F.length;Oe++)Re=F[Oe],$e=Ft+at(Re,Oe),rt+=J(Re,be,Ie,$e,Fe);else if(Oe=$(F),typeof Oe=="function")for(F=Oe.call(F),Oe=0;!(Re=F.next()).done;)Re=Re.value,$e=Ft+at(Re,Oe++),rt+=J(Re,be,Ie,$e,Fe);else if($e==="object"){if(typeof F.then=="function")return J(dt(F),be,Ie,Re,Fe);throw be=String(F),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return rt}function Ae(F,be,Ie){if(F==null)return F;var Re=[],Fe=0;return J(F,Re,"","",function($e){return be.call(Ie,$e,Fe++)}),Re}function Ne(F){if(F._status===-1){var be=F._result;be=be(),be.then(function(Ie){(F._status===0||F._status===-1)&&(F._status=1,F._result=Ie)},function(Ie){(F._status===0||F._status===-1)&&(F._status=2,F._result=Ie)}),F._status===-1&&(F._status=0,F._result=be)}if(F._status===1)return F._result.default;throw F._result}var it=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},tt={map:Ae,forEach:function(F,be,Ie){Ae(F,function(){be.apply(this,arguments)},Ie)},count:function(F){var be=0;return Ae(F,function(){be++}),be},toArray:function(F){return Ae(F,function(be){return be})||[]},only:function(F){if(!z(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return ht.Activity=N,ht.Children=tt,ht.Component=Q,ht.Fragment=r,ht.Profiler=l,ht.PureComponent=fe,ht.StrictMode=s,ht.Suspense=v,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ht.__COMPILER_RUNTIME={__proto__:null,c:function(F){return k.H.useMemoCache(F)}},ht.cache=function(F){return function(){return F.apply(null,arguments)}},ht.cacheSignal=function(){return null},ht.cloneElement=function(F,be,Ie){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Re=oe({},F.props),Fe=F.key;if(be!=null)for($e in be.key!==void 0&&(Fe=""+be.key),be)!M.call(be,$e)||$e==="key"||$e==="__self"||$e==="__source"||$e==="ref"&&be.ref===void 0||(Re[$e]=be[$e]);var $e=arguments.length-2;if($e===1)Re.children=Ie;else if(1<$e){for(var rt=Array($e),Ft=0;Ft<$e;Ft++)rt[Ft]=arguments[Ft+2];Re.children=rt}return P(F.type,Fe,Re)},ht.createContext=function(F){return F={$$typeof:p,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:u,_context:F},F},ht.createElement=function(F,be,Ie){var Re,Fe={},$e=null;if(be!=null)for(Re in be.key!==void 0&&($e=""+be.key),be)M.call(be,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(Fe[Re]=be[Re]);var rt=arguments.length-2;if(rt===1)Fe.children=Ie;else if(1<rt){for(var Ft=Array(rt),Oe=0;Oe<rt;Oe++)Ft[Oe]=arguments[Oe+2];Fe.children=Ft}if(F&&F.defaultProps)for(Re in rt=F.defaultProps,rt)Fe[Re]===void 0&&(Fe[Re]=rt[Re]);return P(F,$e,Fe)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(F){return{$$typeof:_,render:F}},ht.isValidElement=z,ht.lazy=function(F){return{$$typeof:A,_payload:{_status:-1,_result:F},_init:Ne}},ht.memo=function(F,be){return{$$typeof:b,type:F,compare:be===void 0?null:be}},ht.startTransition=function(F){var be=k.T,Ie={};k.T=Ie;try{var Re=F(),Fe=k.S;Fe!==null&&Fe(Ie,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(Ge,it)}catch($e){it($e)}finally{be!==null&&Ie.types!==null&&(be.types=Ie.types),k.T=be}},ht.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ht.use=function(F){return k.H.use(F)},ht.useActionState=function(F,be,Ie){return k.H.useActionState(F,be,Ie)},ht.useCallback=function(F,be){return k.H.useCallback(F,be)},ht.useContext=function(F){return k.H.useContext(F)},ht.useDebugValue=function(){},ht.useDeferredValue=function(F,be){return k.H.useDeferredValue(F,be)},ht.useEffect=function(F,be){return k.H.useEffect(F,be)},ht.useEffectEvent=function(F){return k.H.useEffectEvent(F)},ht.useId=function(){return k.H.useId()},ht.useImperativeHandle=function(F,be,Ie){return k.H.useImperativeHandle(F,be,Ie)},ht.useInsertionEffect=function(F,be){return k.H.useInsertionEffect(F,be)},ht.useLayoutEffect=function(F,be){return k.H.useLayoutEffect(F,be)},ht.useMemo=function(F,be){return k.H.useMemo(F,be)},ht.useOptimistic=function(F,be){return k.H.useOptimistic(F,be)},ht.useReducer=function(F,be,Ie){return k.H.useReducer(F,be,Ie)},ht.useRef=function(F){return k.H.useRef(F)},ht.useState=function(F){return k.H.useState(F)},ht.useSyncExternalStore=function(F,be,Ie){return k.H.useSyncExternalStore(F,be,Ie)},ht.useTransition=function(){return k.H.useTransition()},ht.version="19.2.0",ht}var Iv;function kh(){return Iv||(Iv=1,Xd.exports=W1()),Xd.exports}var ie=kh();const So=km(ie);var $d={exports:{}},Tu={},Zd={exports:{}},Jd={};var Ov;function eE(){return Ov||(Ov=1,(function(a){function t(J,Ae){var Ne=J.length;J.push(Ae);e:for(;0<Ne;){var it=Ne-1>>>1,tt=J[it];if(0<l(tt,Ae))J[it]=Ae,J[Ne]=tt,Ne=it;else break e}}function r(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var Ae=J[0],Ne=J.pop();if(Ne!==Ae){J[0]=Ne;e:for(var it=0,tt=J.length,F=tt>>>1;it<F;){var be=2*(it+1)-1,Ie=J[be],Re=be+1,Fe=J[Re];if(0>l(Ie,Ne))Re<tt&&0>l(Fe,Ie)?(J[it]=Fe,J[Re]=Ne,it=Re):(J[it]=Ie,J[be]=Ne,it=be);else if(Re<tt&&0>l(Fe,Ne))J[it]=Fe,J[Re]=Ne,it=Re;else break e}}return Ae}function l(J,Ae){var Ne=J.sortIndex-Ae.sortIndex;return Ne!==0?Ne:J.id-Ae.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var p=Date,_=p.now();a.unstable_now=function(){return p.now()-_}}var v=[],b=[],A=1,N=null,O=3,$=!1,se=!1,oe=!1,B=!1,Q=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function Se(J){for(var Ae=r(b);Ae!==null;){if(Ae.callback===null)s(b);else if(Ae.startTime<=J)s(b),Ae.sortIndex=Ae.expirationTime,t(v,Ae);else break;Ae=r(b)}}function Ue(J){if(oe=!1,Se(J),!se)if(r(v)!==null)se=!0,Ge||(Ge=!0,X());else{var Ae=r(b);Ae!==null&&dt(Ue,Ae.startTime-J)}}var Ge=!1,k=-1,M=5,P=-1;function I(){return B?!0:!(a.unstable_now()-P<M)}function z(){if(B=!1,Ge){var J=a.unstable_now();P=J;var Ae=!0;try{e:{se=!1,oe&&(oe=!1,ee(k),k=-1),$=!0;var Ne=O;try{t:{for(Se(J),N=r(v);N!==null&&!(N.expirationTime>J&&I());){var it=N.callback;if(typeof it=="function"){N.callback=null,O=N.priorityLevel;var tt=it(N.expirationTime<=J);if(J=a.unstable_now(),typeof tt=="function"){N.callback=tt,Se(J),Ae=!0;break t}N===r(v)&&s(v),Se(J)}else s(v);N=r(v)}if(N!==null)Ae=!0;else{var F=r(b);F!==null&&dt(Ue,F.startTime-J),Ae=!1}}break e}finally{N=null,O=Ne,$=!1}Ae=void 0}}finally{Ae?X():Ge=!1}}}var X;if(typeof fe=="function")X=function(){fe(z)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,at=V.port2;V.port1.onmessage=z,X=function(){at.postMessage(null)}}else X=function(){Q(z,0)};function dt(J,Ae){k=Q(function(){J(a.unstable_now())},Ae)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(J){J.callback=null},a.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<J?Math.floor(1e3/J):5},a.unstable_getCurrentPriorityLevel=function(){return O},a.unstable_next=function(J){switch(O){case 1:case 2:case 3:var Ae=3;break;default:Ae=O}var Ne=O;O=Ae;try{return J()}finally{O=Ne}},a.unstable_requestPaint=function(){B=!0},a.unstable_runWithPriority=function(J,Ae){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Ne=O;O=J;try{return Ae()}finally{O=Ne}},a.unstable_scheduleCallback=function(J,Ae,Ne){var it=a.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?it+Ne:it):Ne=it,J){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=Ne+tt,J={id:A++,callback:Ae,priorityLevel:J,startTime:Ne,expirationTime:tt,sortIndex:-1},Ne>it?(J.sortIndex=Ne,t(b,J),r(v)===null&&J===r(b)&&(oe?(ee(k),k=-1):oe=!0,dt(Ue,Ne-it))):(J.sortIndex=tt,t(v,J),se||$||(se=!0,Ge||(Ge=!0,X()))),J},a.unstable_shouldYield=I,a.unstable_wrapCallback=function(J){var Ae=O;return function(){var Ne=O;O=Ae;try{return J.apply(this,arguments)}finally{O=Ne}}}})(Jd)),Jd}var Mv;function tE(){return Mv||(Mv=1,Zd.exports=eE()),Zd.exports}var Wd={exports:{}},yr={};var Vv;function nE(){if(Vv)return yr;Vv=1;var a=kh();function t(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)b+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(v,b,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:N==null?null:""+N,children:v,containerInfo:b,implementation:A}}var p=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return yr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yr.createPortal=function(v,b){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(t(299));return u(v,b,null,A)},yr.flushSync=function(v){var b=p.T,A=s.p;try{if(p.T=null,s.p=2,v)return v()}finally{p.T=b,s.p=A,s.d.f()}},yr.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(v,b))},yr.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},yr.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var A=b.as,N=_(A,b.crossOrigin),O=typeof b.integrity=="string"?b.integrity:void 0,$=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;A==="style"?s.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:N,integrity:O,fetchPriority:$}):A==="script"&&s.d.X(v,{crossOrigin:N,integrity:O,fetchPriority:$,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},yr.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var A=_(b.as,b.crossOrigin);s.d.M(v,{crossOrigin:A,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(v)},yr.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var A=b.as,N=_(A,b.crossOrigin);s.d.L(v,A,{crossOrigin:N,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},yr.preloadModule=function(v,b){if(typeof v=="string")if(b){var A=_(b.as,b.crossOrigin);s.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:A,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(v)},yr.requestFormReset=function(v){s.d.r(v)},yr.unstable_batchedUpdates=function(v,b){return v(b)},yr.useFormState=function(v,b,A){return p.H.useFormState(v,b,A)},yr.useFormStatus=function(){return p.H.useHostTransitionStatus()},yr.version="19.2.0",yr}var kv;function rE(){if(kv)return Wd.exports;kv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Wd.exports=nE(),Wd.exports}var Pv;function aE(){if(Pv)return Tu;Pv=1;var a=tE(),t=kh(),r=rE();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function p(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function v(e){if(u(e)!==e)throw Error(s(188))}function b(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,o=n;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){i=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return v(f),e;if(m===o)return v(f),n;m=m.sibling}throw Error(s(188))}if(i.return!==o.return)i=f,o=m;else{for(var w=!1,C=f.child;C;){if(C===i){w=!0,i=f,o=m;break}if(C===o){w=!0,o=f,i=m;break}C=C.sibling}if(!w){for(C=m.child;C;){if(C===i){w=!0,i=m,o=f;break}if(C===o){w=!0,o=m,i=f;break}C=C.sibling}if(!w)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var N=Object.assign,O=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),se=Symbol.for("react.portal"),oe=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var V=Symbol.for("react.client.reference");function at(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===V?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oe:return"Fragment";case Q:return"Profiler";case B:return"StrictMode";case Ue:return"Suspense";case Ge:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case se:return"Portal";case fe:return e.displayName||"Context";case ee:return(e._context.displayName||"Context")+".Consumer";case Se:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return n=e.displayName||null,n!==null?n:at(e.type)||"Memo";case M:n=e._payload,e=e._init;try{return at(e(n))}catch{}}return null}var dt=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},it=[],tt=-1;function F(e){return{current:e}}function be(e){0>tt||(e.current=it[tt],it[tt]=null,tt--)}function Ie(e,n){tt++,it[tt]=e.current,e.current=n}var Re=F(null),Fe=F(null),$e=F(null),rt=F(null);function Ft(e,n){switch(Ie($e,n),Ie(Fe,e),Ie(Re,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Jy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Jy(n),e=Wy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}be(Re),Ie(Re,e)}function Oe(){be(Re),be(Fe),be($e)}function fn(e){e.memoizedState!==null&&Ie(rt,e);var n=Re.current,i=Wy(n,e.type);n!==i&&(Ie(Fe,e),Ie(Re,i))}function On(e){Fe.current===e&&(be(Re),be(Fe)),rt.current===e&&(be(rt),bu._currentValue=Ne)}var Qe,Je;function Ht(e){if(Qe===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Qe=n&&n[1]||"",Je=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+e+Je}var yt=!1;function Ut(e,n){if(!e||yt)return"";yt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(ge){var me=ge}Reflect.construct(e,[],Ee)}else{try{Ee.call()}catch(ge){me=ge}e.call(Ee.prototype)}}else{try{throw Error()}catch(ge){me=ge}(Ee=e())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(ge){if(ge&&me&&typeof ge.stack=="string")return[ge.stack,me.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),w=m[0],C=m[1];if(w&&C){var U=w.split(`
`),he=C.split(`
`);for(f=o=0;o<U.length&&!U[o].includes("DetermineComponentFrameRoot");)o++;for(;f<he.length&&!he[f].includes("DetermineComponentFrameRoot");)f++;if(o===U.length||f===he.length)for(o=U.length-1,f=he.length-1;1<=o&&0<=f&&U[o]!==he[f];)f--;for(;1<=o&&0<=f;o--,f--)if(U[o]!==he[f]){if(o!==1||f!==1)do if(o--,f--,0>f||U[o]!==he[f]){var ve=`
`+U[o].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),ve}while(1<=o&&0<=f);break}}}finally{yt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ht(i):""}function on(e,n){switch(e.tag){case 26:case 27:case 5:return Ht(e.type);case 16:return Ht("Lazy");case 13:return e.child!==n&&n!==null?Ht("Suspense Fallback"):Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return Ut(e.type,!1);case 11:return Ut(e.type.render,!1);case 1:return Ut(e.type,!0);case 31:return Ht("Activity");default:return""}}function Xn(e){try{var n="",i=null;do n+=on(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Rt=Object.prototype.hasOwnProperty,Mt=a.unstable_scheduleCallback,wn=a.unstable_cancelCallback,Lo=a.unstable_shouldYield,ri=a.unstable_requestPaint,$n=a.unstable_now,Zr=a.unstable_getCurrentPriorityLevel,Jr=a.unstable_ImmediatePriority,Wr=a.unstable_UserBlockingPriority,ba=a.unstable_NormalPriority,Ei=a.unstable_LowPriority,rs=a.unstable_IdlePriority,wi=a.log,_a=a.unstable_setDisableYieldValue,fr=null,Tn=null;function Sn(e){if(typeof wi=="function"&&_a(e),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(fr,e)}catch{}}var Be=Math.clz32?Math.clz32:Ti,ai=Math.log,Rr=Math.LN2;function Ti(e){return e>>>=0,e===0?32:31-(ai(e)/Rr|0)|0}var ke=256,Ba=262144,dn=4194304;function Cr(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ea(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var f=0,m=e.suspendedLanes,w=e.pingedLanes;e=e.warmLanes;var C=o&134217727;return C!==0?(o=C&~m,o!==0?f=Cr(o):(w&=C,w!==0?f=Cr(w):i||(i=C&~e,i!==0&&(f=Cr(i))))):(C=o&~m,C!==0?f=Cr(C):w!==0?f=Cr(w):i||(i=o&~e,i!==0&&(f=Cr(i)))),f===0?0:n!==0&&n!==f&&(n&m)===0&&(m=f&-f,i=n&-n,m>=i||m===32&&(i&4194048)!==0)?n:f}function Er(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ul(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(){var e=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),e}function ir(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function jr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function to(e,n,i,o,f,m){var w=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,U=e.expirationTimes,he=e.hiddenUpdates;for(i=w&~i;0<i;){var ve=31-Be(i),Ee=1<<ve;C[ve]=0,U[ve]=-1;var me=he[ve];if(me!==null)for(he[ve]=null,ve=0;ve<me.length;ve++){var ge=me[ve];ge!==null&&(ge.lane&=-536870913)}i&=~Ee}o!==0&&xa(e,o,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(w&~n))}function xa(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Be(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Bt(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-Be(i),f=1<<o;f&n|e[o]&n&&(e[o]|=n),i&=~f}}function ln(e,n){var i=n&-n;return i=(i&42)!==0?1:Si(i),(i&(e.suspendedLanes|n))!==0?0:i}function Si(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ai(){var e=Ae.p;return e!==0?e:(e=window.event,e===void 0?32:Ev(e.type))}function dr(e,n){var i=Ae.p;try{return Ae.p=e,n()}finally{Ae.p=i}}var ta=Math.random().toString(36).slice(2),Kt="__reactFiber$"+ta,nn="__reactProps$"+ta,Kn="__reactContainer$"+ta,qa="__reactEvents$"+ta,Bl="__reactListeners$"+ta,na="__reactHandles$"+ta,no="__reactResources$"+ta,Zn="__reactMarker$"+ta;function Ni(e){delete e[Kt],delete e[nn],delete e[qa],delete e[Bl],delete e[na]}function Ir(e){var n=e[Kt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Kn]||i[Kt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=sv(e);e!==null;){if(i=e[Kt])return i;e=sv(e)}return n}e=i,i=e.parentNode}return null}function Dt(e){if(e=e[Kt]||e[Kn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function An(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Mn(e){var n=e[no];return n||(n=e[no]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function mn(e){e[Zn]=!0}var Ea=new Set,ii={};function Or(e,n){Mr(e,n),Mr(e+"Capture",n)}function Mr(e,n){for(ii[e]=n,e=0;e<n.length;e++)Ea.add(n[e])}var ra=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},si={};function ro(e){return Rt.call(si,e)?!0:Rt.call(as,e)?!1:ra.test(e)?si[e]=!0:(as[e]=!0,!1)}function mt(e,n,i){if(ro(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function mr(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function pn(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function gn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vr(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function is(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(w){i=""+w,m.call(this,w)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Vt(e){if(!e._valueTracker){var n=Vr(e)?"checked":"value";e._valueTracker=is(e,n,""+e[n])}}function oi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=Vr(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function xt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var aa=/[\n"\\]/g;function Vn(e){return e.replace(aa,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ia(e,n,i,o,f,m,w,C){e.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.type=w:e.removeAttribute("type"),n!=null?w==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+gn(n)):e.value!==""+gn(n)&&(e.value=""+gn(n)):w!=="submit"&&w!=="reset"||e.removeAttribute("value"),n!=null?Ri(e,w,gn(n)):i!=null?Ri(e,w,gn(i)):o!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+gn(C):e.removeAttribute("name")}function ss(e,n,i,o,f,m,w,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Vt(e);return}i=i!=null?""+gn(i):"",n=n!=null?""+gn(n):i,C||n===e.value||(e.value=n),e.defaultValue=n}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=C?e.checked:!!o,e.defaultChecked=!!o,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.name=w),Vt(e)}function Ri(e,n,i){n==="number"&&xt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function sa(e,n,i,o){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&o&&(e[i].defaultSelected=!0)}else{for(i=""+gn(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function ao(e,n,i){if(n!=null&&(n=""+gn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+gn(i):""}function oa(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(s(92));if(dt(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=gn(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Vt(e)}function sr(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Uo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||Uo.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function os(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in n)o=n[f],n.hasOwnProperty(f)&&i[f]!==o&&_t(e,f,o)}else for(var m in n)n.hasOwnProperty(m)&&_t(e,m,n[m])}function ls(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_n=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(e){return _n.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pr(){}var kr=null;function wr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fa=null,Gt=null;function Jn(e){var n=Dt(e);if(n&&(e=n.stateNode)){var i=e[nn]||null;e:switch(e=n.stateNode,n.type){case"input":if(ia(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Vn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var f=o[nn]||null;if(!f)throw Error(s(90));ia(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&oi(o)}break e;case"textarea":ao(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&sa(e,!!i.multiple,n,!1)}}}var wa=!1;function Pr(e,n,i){if(wa)return e(n,i);wa=!0;try{var o=e(n);return o}finally{if(wa=!1,(Fa!==null||Gt!==null)&&(Oc(),Fa&&(n=Fa,e=Gt,Gt=Fa=null,Jn(n),e)))for(n=0;n<e.length;n++)Jn(e[n])}}function Tr(e,n){var i=e.stateNode;if(i===null)return null;var o=i[nn]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(Nn)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{Ci=!1}var Lr=null,us=null,Ha=null;function Ka(){if(Ha)return Ha;var e,n=us,i=n.length,o,f="value"in Lr?Lr.value:Lr.textContent,m=f.length;for(e=0;e<i&&n[e]===f[e];e++);var w=i-e;for(o=1;o<=w&&n[i-o]===f[m-o];o++);return Ha=f.slice(e,1<o?1-o:void 0)}function Ga(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ta(){return!0}function ua(){return!1}function yn(e){function n(i,o,f,m,w){this._reactName=i,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ta:ua,this.isPropagationStopped=ua,this}return N(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),n}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=yn(Qa),ca=N({},Qa,{view:0,detail:0}),li=yn(ca),Aa,cs,Na,hs=N({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Na&&(Na&&e.type==="mousemove"?(Aa=e.screenX-Na.screenX,cs=e.screenY-Na.screenY):cs=Aa=0,Na=e),Aa)},movementY:function(e){return"movementY"in e?e.movementY:cs}}),ji=yn(hs),Ya=N({},hs,{dataTransfer:0}),io=yn(Ya),Di=N({},ca,{relatedTarget:0}),Ra=yn(Di),ui=N({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),so=yn(ui),fs=N({},Qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xa=yn(fs),ds=N({},Qa,{data:0}),zr=yn(ds),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ci(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Rn[e])?!!n[e]:!1}function Ur(){return ci}var Wn=N({},ca,{key:function(e){if(e.key){var n=ms[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(e){return e.type==="keypress"?Ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ii=yn(Wn),oo=N({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=yn(oo),c=N({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),x=yn(c),T=N({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=yn(T),le=N({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pe=yn(le),Me=N({},Qa,{newState:0,oldState:0}),ut=yn(Me),vn=[9,13,27,32],Ct=Nn&&"CompositionEvent"in window,Qt=null;Nn&&"documentMode"in document&&(Qt=document.documentMode);var Br=Nn&&"TextEvent"in window&&!Qt,qr=Nn&&(!Ct||Qt&&8<Qt&&11>=Qt),Sr=" ",ha=!1;function hi(e,n){switch(e){case"keyup":return vn.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oi=!1;function Wu(e,n){switch(e){case"compositionend":return gs(n);case"keypress":return n.which!==32?null:(ha=!0,Sr);case"textInput":return e=n.data,e===Sr&&ha?null:e;default:return null}}function lf(e,n){if(Oi)return e==="compositionend"||!Ct&&hi(e,n)?(e=Ka(),Ha=us=Lr=null,Oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return qr&&n.locale!=="ko"?null:n.data;default:return null}}var ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ec[e.type]:n==="textarea"}function ql(e,n,i,o){Fa?Gt?Gt.push(o):Gt=[o]:Fa=o,n=Uc(n,"onChange"),0<n.length&&(i=new Sa("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var ys=null,lo=null;function uf(e){Gy(e,0)}function Fo(e){var n=An(e);if(oi(n))return e}function uo(e,n){if(e==="change")return n}var ja=!1;if(Nn){var rn;if(Nn){var vs="oninput"in document;if(!vs){var Ar=document.createElement("div");Ar.setAttribute("oninput","return;"),vs=typeof Ar.oninput=="function"}rn=vs}else rn=!1;ja=rn&&(!document.documentMode||9<document.documentMode)}function tc(){ys&&(ys.detachEvent("onpropertychange",Ho),lo=ys=null)}function Ho(e){if(e.propertyName==="value"&&Fo(lo)){var n=[];ql(n,lo,e,wr(e)),Pr(uf,n)}}function nc(e,n,i){e==="focusin"?(tc(),ys=n,lo=i,ys.attachEvent("onpropertychange",Ho)):e==="focusout"&&tc()}function Mi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fo(lo)}function Fl(e,n){if(e==="click")return Fo(n)}function bs(e,n){if(e==="input"||e==="change")return Fo(n)}function fi(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var gr=typeof Object.is=="function"?Object.is:fi;function h(e,n){if(gr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var f=i[o];if(!Rt.call(n,f)||!gr(e[f],n[f]))return!1}return!0}function d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function y(e,n){var i=d(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=d(i)}}function E(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?E(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function S(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xt(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=xt(e.document)}return n}function R(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var D=Nn&&"documentMode"in document&&11>=document.documentMode,L=null,H=null,K=null,te=!1;function q(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;te||L==null||L!==xt(o)||(o=L,"selectionStart"in o&&R(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),K&&h(K,o)||(K=o,o=Uc(H,"onSelect"),0<o.length&&(n=new Sa("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=L)))}function re(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var G={animationend:re("Animation","AnimationEnd"),animationiteration:re("Animation","AnimationIteration"),animationstart:re("Animation","AnimationStart"),transitionrun:re("Transition","TransitionRun"),transitionstart:re("Transition","TransitionStart"),transitioncancel:re("Transition","TransitionCancel"),transitionend:re("Transition","TransitionEnd")},Z={},W={};Nn&&(W=document.createElement("div").style,"AnimationEvent"in window||(delete G.animationend.animation,delete G.animationiteration.animation,delete G.animationstart.animation),"TransitionEvent"in window||delete G.transitionend.transition);function ne(e){if(Z[e])return Z[e];if(!G[e])return e;var n=G[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in W)return Z[e]=n[i];return e}var ue=ne("animationend"),de=ne("animationiteration"),ye=ne("animationstart"),xe=ne("transitionrun"),De=ne("transitionstart"),ze=ne("transitioncancel"),Ce=ne("transitionend"),Ve=new Map,Pe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pe.push("scrollEnd");function je(e,n){Ve.set(e,n),Or(n,[e])}var qe=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},We=[],lt=0,pt=0;function er(){for(var e=lt,n=pt=lt=0;n<e;){var i=We[n];We[n++]=null;var o=We[n];We[n++]=null;var f=We[n];We[n++]=null;var m=We[n];if(We[n++]=null,o!==null&&f!==null){var w=o.pending;w===null?f.next=f:(f.next=w.next,w.next=f),o.pending=f}m!==0&&co(i,f,m)}}function ot(e,n,i,o){We[lt++]=e,We[lt++]=n,We[lt++]=i,We[lt++]=o,pt|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function kn(e,n,i,o){return ot(e,n,i,o),Pn(e)}function un(e,n){return ot(e,null,null,n),Pn(e)}function co(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var f=!1,m=e.return;m!==null;)m.childLanes|=i,o=m.alternate,o!==null&&(o.childLanes|=i),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&n!==null&&(f=31-Be(i),e=m.hiddenUpdates,o=e[f],o===null?e[f]=[n]:o.push(n),n.lane=i|536870912),m):null}function Pn(e){if(50<fu)throw fu=0,vd=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Fr={};function Hl(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,n,i,o){return new Hl(e,n,i,o)}function cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vi(e,n){var i=e.alternate;return i===null?(i=fa(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Rp(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function rc(e,n,i,o,f,m){var w=0;if(o=e,typeof e=="function")cf(e)&&(w=1);else if(typeof e=="string")w=L1(e,i,Re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case P:return e=fa(31,i,n,f),e.elementType=P,e.lanes=m,e;case oe:return ho(i.children,f,m,n);case B:w=8,f|=24;break;case Q:return e=fa(12,i,n,f|2),e.elementType=Q,e.lanes=m,e;case Ue:return e=fa(13,i,n,f),e.elementType=Ue,e.lanes=m,e;case Ge:return e=fa(19,i,n,f),e.elementType=Ge,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:w=10;break e;case ee:w=9;break e;case Se:w=11;break e;case k:w=14;break e;case M:w=16,o=null;break e}w=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=fa(w,i,n,f),n.elementType=e,n.type=o,n.lanes=m,n}function ho(e,n,i,o){return e=fa(7,e,o,n),e.lanes=i,e}function hf(e,n,i){return e=fa(6,e,null,n),e.lanes=i,e}function Cp(e){var n=fa(18,null,null,0);return n.stateNode=e,n}function ff(e,n,i){return n=fa(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var jp=new WeakMap;function Da(e,n){if(typeof e=="object"&&e!==null){var i=jp.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Xn(n)},jp.set(e,n),n)}return{value:e,source:n,stack:Xn(n)}}var Ko=[],Go=0,ac=null,Kl=0,Ia=[],Oa=0,_s=null,di=1,mi="";function ki(e,n){Ko[Go++]=Kl,Ko[Go++]=ac,ac=e,Kl=n}function Dp(e,n,i){Ia[Oa++]=di,Ia[Oa++]=mi,Ia[Oa++]=_s,_s=e;var o=di;e=mi;var f=32-Be(o)-1;o&=~(1<<f),i+=1;var m=32-Be(n)+f;if(30<m){var w=f-f%5;m=(o&(1<<w)-1).toString(32),o>>=w,f-=w,di=1<<32-Be(n)+f|i<<f|o,mi=m+e}else di=1<<m|i<<f|o,mi=e}function df(e){e.return!==null&&(ki(e,1),Dp(e,1,0))}function mf(e){for(;e===ac;)ac=Ko[--Go],Ko[Go]=null,Kl=Ko[--Go],Ko[Go]=null;for(;e===_s;)_s=Ia[--Oa],Ia[Oa]=null,mi=Ia[--Oa],Ia[Oa]=null,di=Ia[--Oa],Ia[Oa]=null}function Ip(e,n){Ia[Oa++]=di,Ia[Oa++]=mi,Ia[Oa++]=_s,di=n.id,mi=n.overflow,_s=e}var or=null,an=null,jt=!1,xs=null,Ma=!1,pf=Error(s(519));function Es(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Da(n,e)),pf}function Op(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[Kt]=e,n[nn]=o,i){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(i=0;i<mu.length;i++)wt(mu[i],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":wt("invalid",n),ss(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":wt("invalid",n);break;case"textarea":wt("invalid",n),oa(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||$y(n.textContent,i)?(o.popover!=null&&(wt("beforetoggle",n),wt("toggle",n)),o.onScroll!=null&&wt("scroll",n),o.onScrollEnd!=null&&wt("scrollend",n),o.onClick!=null&&(n.onclick=pr),n=!0):n=!1,n||Es(e,!0)}function Mp(e){for(or=e.return;or;)switch(or.tag){case 5:case 31:case 13:Ma=!1;return;case 27:case 3:Ma=!0;return;default:or=or.return}}function Qo(e){if(e!==or)return!1;if(!jt)return Mp(e),jt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Od(e.type,e.memoizedProps)),i=!i),i&&an&&Es(e),Mp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=iv(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=iv(e)}else n===27?(n=an,ks(e.type)?(e=Ld,Ld=null,an=e):an=n):an=or?ka(e.stateNode.nextSibling):null;return!0}function fo(){an=or=null,jt=!1}function gf(){var e=xs;return e!==null&&(Qr===null?Qr=e:Qr.push.apply(Qr,e),xs=null),e}function Gl(e){xs===null?xs=[e]:xs.push(e)}var yf=F(null),mo=null,Pi=null;function ws(e,n,i){Ie(yf,n._currentValue),n._currentValue=i}function Li(e){e._currentValue=yf.current,be(yf)}function vf(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function bf(e,n,i,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var U=0;U<n.length;U++)if(C.context===n[U]){m.lanes|=i,C=m.alternate,C!==null&&(C.lanes|=i),vf(m.return,i,e),o||(w=null);break e}m=C.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=i,m=w.alternate,m!==null&&(m.lanes|=i),vf(w,i,e),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===e){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Yo(e,n,i,o){e=null;for(var f=n,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var C=f.type;gr(f.pendingProps.value,w.value)||(e!==null?e.push(C):e=[C])}}else if(f===rt.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(bu):e=[bu])}f=f.return}e!==null&&bf(n,e,i,o),n.flags|=262144}function ic(e){for(e=e.firstContext;e!==null;){if(!gr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function po(e){mo=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function lr(e){return Vp(mo,e)}function sc(e,n){return mo===null&&po(e),Vp(e,n)}function Vp(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Pi===null){if(e===null)throw Error(s(308));Pi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Pi=Pi.next=n;return i}var Mx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Vx=a.unstable_scheduleCallback,kx=a.unstable_NormalPriority,Ln={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _f(){return{controller:new Mx,data:new Map,refCount:0}}function Ql(e){e.refCount--,e.refCount===0&&Vx(kx,function(){e.controller.abort()})}var Yl=null,xf=0,Xo=0,$o=null;function Px(e,n){if(Yl===null){var i=Yl=[];xf=0,Xo=Td(),$o={status:"pending",value:void 0,then:function(o){i.push(o)}}}return xf++,n.then(kp,kp),n}function kp(){if(--xf===0&&Yl!==null){$o!==null&&($o.status="fulfilled");var e=Yl;Yl=null,Xo=0,$o=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Lx(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(o.status="rejected",o.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),o}var Pp=J.S;J.S=function(e,n){_y=$n(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Px(e,n),Pp!==null&&Pp(e,n)};var go=F(null);function Ef(){var e=go.current;return e!==null?e:Wt.pooledCache}function oc(e,n){n===null?Ie(go,go.current):Ie(go,n.pool)}function Lp(){var e=Ef();return e===null?null:{parent:Ln._currentValue,pool:e}}var Zo=Error(s(460)),wf=Error(s(474)),lc=Error(s(542)),uc={then:function(){}};function zp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Up(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(pr,pr),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,qp(e),e;default:if(typeof n.status=="string")n.then(pr,pr);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=o}},function(o){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,qp(e),e}throw vo=n,Zo}}function yo(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(vo=i,Zo):i}}var vo=null;function Bp(){if(vo===null)throw Error(s(459));var e=vo;return vo=null,e}function qp(e){if(e===Zo||e===lc)throw Error(s(483))}var Jo=null,Xl=0;function cc(e){var n=Xl;return Xl+=1,Jo===null&&(Jo=[]),Up(Jo,e,n)}function $l(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function hc(e,n){throw n.$$typeof===O?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Fp(e){function n(ae,Y){if(e){var ce=ae.deletions;ce===null?(ae.deletions=[Y],ae.flags|=16):ce.push(Y)}}function i(ae,Y){if(!e)return null;for(;Y!==null;)n(ae,Y),Y=Y.sibling;return null}function o(ae){for(var Y=new Map;ae!==null;)ae.key!==null?Y.set(ae.key,ae):Y.set(ae.index,ae),ae=ae.sibling;return Y}function f(ae,Y){return ae=Vi(ae,Y),ae.index=0,ae.sibling=null,ae}function m(ae,Y,ce){return ae.index=ce,e?(ce=ae.alternate,ce!==null?(ce=ce.index,ce<Y?(ae.flags|=67108866,Y):ce):(ae.flags|=67108866,Y)):(ae.flags|=1048576,Y)}function w(ae){return e&&ae.alternate===null&&(ae.flags|=67108866),ae}function C(ae,Y,ce,_e){return Y===null||Y.tag!==6?(Y=hf(ce,ae.mode,_e),Y.return=ae,Y):(Y=f(Y,ce),Y.return=ae,Y)}function U(ae,Y,ce,_e){var et=ce.type;return et===oe?ve(ae,Y,ce.props.children,_e,ce.key):Y!==null&&(Y.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===M&&yo(et)===Y.type)?(Y=f(Y,ce.props),$l(Y,ce),Y.return=ae,Y):(Y=rc(ce.type,ce.key,ce.props,null,ae.mode,_e),$l(Y,ce),Y.return=ae,Y)}function he(ae,Y,ce,_e){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ce.containerInfo||Y.stateNode.implementation!==ce.implementation?(Y=ff(ce,ae.mode,_e),Y.return=ae,Y):(Y=f(Y,ce.children||[]),Y.return=ae,Y)}function ve(ae,Y,ce,_e,et){return Y===null||Y.tag!==7?(Y=ho(ce,ae.mode,_e,et),Y.return=ae,Y):(Y=f(Y,ce),Y.return=ae,Y)}function Ee(ae,Y,ce){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=hf(""+Y,ae.mode,ce),Y.return=ae,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return ce=rc(Y.type,Y.key,Y.props,null,ae.mode,ce),$l(ce,Y),ce.return=ae,ce;case se:return Y=ff(Y,ae.mode,ce),Y.return=ae,Y;case M:return Y=yo(Y),Ee(ae,Y,ce)}if(dt(Y)||X(Y))return Y=ho(Y,ae.mode,ce,null),Y.return=ae,Y;if(typeof Y.then=="function")return Ee(ae,cc(Y),ce);if(Y.$$typeof===fe)return Ee(ae,sc(ae,Y),ce);hc(ae,Y)}return null}function me(ae,Y,ce,_e){var et=Y!==null?Y.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return et!==null?null:C(ae,Y,""+ce,_e);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case $:return ce.key===et?U(ae,Y,ce,_e):null;case se:return ce.key===et?he(ae,Y,ce,_e):null;case M:return ce=yo(ce),me(ae,Y,ce,_e)}if(dt(ce)||X(ce))return et!==null?null:ve(ae,Y,ce,_e,null);if(typeof ce.then=="function")return me(ae,Y,cc(ce),_e);if(ce.$$typeof===fe)return me(ae,Y,sc(ae,ce),_e);hc(ae,ce)}return null}function ge(ae,Y,ce,_e,et){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return ae=ae.get(ce)||null,C(Y,ae,""+_e,et);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case $:return ae=ae.get(_e.key===null?ce:_e.key)||null,U(Y,ae,_e,et);case se:return ae=ae.get(_e.key===null?ce:_e.key)||null,he(Y,ae,_e,et);case M:return _e=yo(_e),ge(ae,Y,ce,_e,et)}if(dt(_e)||X(_e))return ae=ae.get(ce)||null,ve(Y,ae,_e,et,null);if(typeof _e.then=="function")return ge(ae,Y,ce,cc(_e),et);if(_e.$$typeof===fe)return ge(ae,Y,ce,sc(Y,_e),et);hc(Y,_e)}return null}function Ye(ae,Y,ce,_e){for(var et=null,kt=null,Xe=Y,vt=Y=0,St=null;Xe!==null&&vt<ce.length;vt++){Xe.index>vt?(St=Xe,Xe=null):St=Xe.sibling;var Pt=me(ae,Xe,ce[vt],_e);if(Pt===null){Xe===null&&(Xe=St);break}e&&Xe&&Pt.alternate===null&&n(ae,Xe),Y=m(Pt,Y,vt),kt===null?et=Pt:kt.sibling=Pt,kt=Pt,Xe=St}if(vt===ce.length)return i(ae,Xe),jt&&ki(ae,vt),et;if(Xe===null){for(;vt<ce.length;vt++)Xe=Ee(ae,ce[vt],_e),Xe!==null&&(Y=m(Xe,Y,vt),kt===null?et=Xe:kt.sibling=Xe,kt=Xe);return jt&&ki(ae,vt),et}for(Xe=o(Xe);vt<ce.length;vt++)St=ge(Xe,ae,vt,ce[vt],_e),St!==null&&(e&&St.alternate!==null&&Xe.delete(St.key===null?vt:St.key),Y=m(St,Y,vt),kt===null?et=St:kt.sibling=St,kt=St);return e&&Xe.forEach(function(Bs){return n(ae,Bs)}),jt&&ki(ae,vt),et}function nt(ae,Y,ce,_e){if(ce==null)throw Error(s(151));for(var et=null,kt=null,Xe=Y,vt=Y=0,St=null,Pt=ce.next();Xe!==null&&!Pt.done;vt++,Pt=ce.next()){Xe.index>vt?(St=Xe,Xe=null):St=Xe.sibling;var Bs=me(ae,Xe,Pt.value,_e);if(Bs===null){Xe===null&&(Xe=St);break}e&&Xe&&Bs.alternate===null&&n(ae,Xe),Y=m(Bs,Y,vt),kt===null?et=Bs:kt.sibling=Bs,kt=Bs,Xe=St}if(Pt.done)return i(ae,Xe),jt&&ki(ae,vt),et;if(Xe===null){for(;!Pt.done;vt++,Pt=ce.next())Pt=Ee(ae,Pt.value,_e),Pt!==null&&(Y=m(Pt,Y,vt),kt===null?et=Pt:kt.sibling=Pt,kt=Pt);return jt&&ki(ae,vt),et}for(Xe=o(Xe);!Pt.done;vt++,Pt=ce.next())Pt=ge(Xe,ae,vt,Pt.value,_e),Pt!==null&&(e&&Pt.alternate!==null&&Xe.delete(Pt.key===null?vt:Pt.key),Y=m(Pt,Y,vt),kt===null?et=Pt:kt.sibling=Pt,kt=Pt);return e&&Xe.forEach(function(X1){return n(ae,X1)}),jt&&ki(ae,vt),et}function Jt(ae,Y,ce,_e){if(typeof ce=="object"&&ce!==null&&ce.type===oe&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case $:e:{for(var et=ce.key;Y!==null;){if(Y.key===et){if(et=ce.type,et===oe){if(Y.tag===7){i(ae,Y.sibling),_e=f(Y,ce.props.children),_e.return=ae,ae=_e;break e}}else if(Y.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===M&&yo(et)===Y.type){i(ae,Y.sibling),_e=f(Y,ce.props),$l(_e,ce),_e.return=ae,ae=_e;break e}i(ae,Y);break}else n(ae,Y);Y=Y.sibling}ce.type===oe?(_e=ho(ce.props.children,ae.mode,_e,ce.key),_e.return=ae,ae=_e):(_e=rc(ce.type,ce.key,ce.props,null,ae.mode,_e),$l(_e,ce),_e.return=ae,ae=_e)}return w(ae);case se:e:{for(et=ce.key;Y!==null;){if(Y.key===et)if(Y.tag===4&&Y.stateNode.containerInfo===ce.containerInfo&&Y.stateNode.implementation===ce.implementation){i(ae,Y.sibling),_e=f(Y,ce.children||[]),_e.return=ae,ae=_e;break e}else{i(ae,Y);break}else n(ae,Y);Y=Y.sibling}_e=ff(ce,ae.mode,_e),_e.return=ae,ae=_e}return w(ae);case M:return ce=yo(ce),Jt(ae,Y,ce,_e)}if(dt(ce))return Ye(ae,Y,ce,_e);if(X(ce)){if(et=X(ce),typeof et!="function")throw Error(s(150));return ce=et.call(ce),nt(ae,Y,ce,_e)}if(typeof ce.then=="function")return Jt(ae,Y,cc(ce),_e);if(ce.$$typeof===fe)return Jt(ae,Y,sc(ae,ce),_e);hc(ae,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Y!==null&&Y.tag===6?(i(ae,Y.sibling),_e=f(Y,ce),_e.return=ae,ae=_e):(i(ae,Y),_e=hf(ce,ae.mode,_e),_e.return=ae,ae=_e),w(ae)):i(ae,Y)}return function(ae,Y,ce,_e){try{Xl=0;var et=Jt(ae,Y,ce,_e);return Jo=null,et}catch(Xe){if(Xe===Zo||Xe===lc)throw Xe;var kt=fa(29,Xe,null,ae.mode);return kt.lanes=_e,kt.return=ae,kt}finally{}}}var bo=Fp(!0),Hp=Fp(!1),Ts=!1;function Tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function As(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Lt&2)!==0){var f=o.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),o.pending=n,n=Pn(e),co(e,null,i),n}return ot(e,o,n,i),Pn(e)}function Zl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Bt(e,i)}}function Af(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,i=i.next}while(i!==null);m===null?f=m=n:m=m.next=n}else f=m=n;i={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Nf=!1;function Jl(){if(Nf){var e=$o;if(e!==null)throw e}}function Wl(e,n,i,o){Nf=!1;var f=e.updateQueue;Ts=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var U=C,he=U.next;U.next=null,w===null?m=he:w.next=he,w=U;var ve=e.alternate;ve!==null&&(ve=ve.updateQueue,C=ve.lastBaseUpdate,C!==w&&(C===null?ve.firstBaseUpdate=he:C.next=he,ve.lastBaseUpdate=U))}if(m!==null){var Ee=f.baseState;w=0,ve=he=U=null,C=m;do{var me=C.lane&-536870913,ge=me!==C.lane;if(ge?(Tt&me)===me:(o&me)===me){me!==0&&me===Xo&&(Nf=!0),ve!==null&&(ve=ve.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Ye=e,nt=C;me=n;var Jt=i;switch(nt.tag){case 1:if(Ye=nt.payload,typeof Ye=="function"){Ee=Ye.call(Jt,Ee,me);break e}Ee=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=nt.payload,me=typeof Ye=="function"?Ye.call(Jt,Ee,me):Ye,me==null)break e;Ee=N({},Ee,me);break e;case 2:Ts=!0}}me=C.callback,me!==null&&(e.flags|=64,ge&&(e.flags|=8192),ge=f.callbacks,ge===null?f.callbacks=[me]:ge.push(me))}else ge={lane:me,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ve===null?(he=ve=ge,U=Ee):ve=ve.next=ge,w|=me;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ge=C,C=ge.next,ge.next=null,f.lastBaseUpdate=ge,f.shared.pending=null}}while(!0);ve===null&&(U=Ee),f.baseState=U,f.firstBaseUpdate=he,f.lastBaseUpdate=ve,m===null&&(f.shared.lanes=0),Ds|=w,e.lanes=w,e.memoizedState=Ee}}function Kp(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Gp(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Kp(i[e],n)}var Wo=F(null),fc=F(0);function Qp(e,n){e=Qi,Ie(fc,e),Ie(Wo,n),Qi=e|n.baseLanes}function Rf(){Ie(fc,Qi),Ie(Wo,Wo.current)}function Cf(){Qi=fc.current,be(Wo),be(fc)}var da=F(null),Va=null;function Ns(e){var n=e.alternate;Ie(Cn,Cn.current&1),Ie(da,e),Va===null&&(n===null||Wo.current!==null||n.memoizedState!==null)&&(Va=e)}function jf(e){Ie(Cn,Cn.current),Ie(da,e),Va===null&&(Va=e)}function Yp(e){e.tag===22?(Ie(Cn,Cn.current),Ie(da,e),Va===null&&(Va=e)):Rs()}function Rs(){Ie(Cn,Cn.current),Ie(da,da.current)}function ma(e){be(da),Va===e&&(Va=null),be(Cn)}var Cn=F(0);function dc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||kd(i)||Pd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var zi=0,gt=null,$t=null,zn=null,mc=!1,el=!1,_o=!1,pc=0,eu=0,tl=null,zx=0;function xn(){throw Error(s(321))}function Df(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!gr(e[i],n[i]))return!1;return!0}function If(e,n,i,o,f,m){return zi=m,gt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,J.H=e===null||e.memoizedState===null?Dg:Qf,_o=!1,m=i(o,f),_o=!1,el&&(m=$p(n,i,o,f)),Xp(e),m}function Xp(e){J.H=ru;var n=$t!==null&&$t.next!==null;if(zi=0,zn=$t=gt=null,mc=!1,eu=0,tl=null,n)throw Error(s(300));e===null||Un||(e=e.dependencies,e!==null&&ic(e)&&(Un=!0))}function $p(e,n,i,o){gt=e;var f=0;do{if(el&&(tl=null),eu=0,el=!1,25<=f)throw Error(s(301));if(f+=1,zn=$t=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=Ig,m=n(i,o)}while(el);return m}function Ux(){var e=J.H,n=e.useState()[0];return n=typeof n.then=="function"?tu(n):n,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(gt.flags|=1024),n}function Of(){var e=pc!==0;return pc=0,e}function Mf(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Vf(e){if(mc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}mc=!1}zi=0,zn=$t=gt=null,el=!1,eu=pc=0,tl=null}function Nr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?gt.memoizedState=zn=e:zn=zn.next=e,zn}function jn(){if($t===null){var e=gt.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var n=zn===null?gt.memoizedState:zn.next;if(n!==null)zn=n,$t=e;else{if(e===null)throw gt.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},zn===null?gt.memoizedState=zn=e:zn=zn.next=e}return zn}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(e){var n=eu;return eu+=1,tl===null&&(tl=[]),e=Up(tl,e,n),n=gt,(zn===null?n.memoizedState:zn.next)===null&&(n=n.alternate,J.H=n===null||n.memoizedState===null?Dg:Qf),e}function yc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tu(e);if(e.$$typeof===fe)return lr(e)}throw Error(s(438,String(e)))}function kf(e){var n=null,i=gt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=gt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=gc(),gt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=I;return n.index++,i}function Ui(e,n){return typeof n=="function"?n(e):n}function vc(e){var n=jn();return Pf(n,$t,e)}function Pf(e,n,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var f=e.baseQueue,m=o.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}n.baseQueue=f=m,o.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{n=f.next;var C=w=null,U=null,he=n,ve=!1;do{var Ee=he.lane&-536870913;if(Ee!==he.lane?(Tt&Ee)===Ee:(zi&Ee)===Ee){var me=he.revertLane;if(me===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ee===Xo&&(ve=!0);else if((zi&me)===me){he=he.next,me===Xo&&(ve=!0);continue}else Ee={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},U===null?(C=U=Ee,w=m):U=U.next=Ee,gt.lanes|=me,Ds|=me;Ee=he.action,_o&&i(m,Ee),m=he.hasEagerState?he.eagerState:i(m,Ee)}else me={lane:Ee,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},U===null?(C=U=me,w=m):U=U.next=me,gt.lanes|=Ee,Ds|=Ee;he=he.next}while(he!==null&&he!==n);if(U===null?w=m:U.next=C,!gr(m,e.memoizedState)&&(Un=!0,ve&&(i=$o,i!==null)))throw i;e.memoizedState=m,e.baseState=w,e.baseQueue=U,o.lastRenderedState=m}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Lf(e){var n=jn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,f=i.pending,m=n.memoizedState;if(f!==null){i.pending=null;var w=f=f.next;do m=e(m,w.action),w=w.next;while(w!==f);gr(m,n.memoizedState)||(Un=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),i.lastRenderedState=m}return[m,o]}function Zp(e,n,i){var o=gt,f=jn(),m=jt;if(m){if(i===void 0)throw Error(s(407));i=i()}else i=n();var w=!gr(($t||f).memoizedState,i);if(w&&(f.memoizedState=i,Un=!0),f=f.queue,Bf(eg.bind(null,o,f,e),[e]),f.getSnapshot!==n||w||zn!==null&&zn.memoizedState.tag&1){if(o.flags|=2048,nl(9,{destroy:void 0},Wp.bind(null,o,f,i,n),null),Wt===null)throw Error(s(349));m||(zi&127)!==0||Jp(o,n,i)}return i}function Jp(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=gt.updateQueue,n===null?(n=gc(),gt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Wp(e,n,i,o){n.value=i,n.getSnapshot=o,tg(n)&&ng(e)}function eg(e,n,i){return i(function(){tg(n)&&ng(e)})}function tg(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!gr(e,i)}catch{return!0}}function ng(e){var n=un(e,2);n!==null&&Yr(n,e,2)}function zf(e){var n=Nr();if(typeof e=="function"){var i=e;if(e=i(),_o){Sn(!0);try{i()}finally{Sn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},n}function rg(e,n,i,o){return e.baseState=i,Pf(e,$t,typeof o=="function"?o:Ui)}function Bx(e,n,i,o,f){if(xc(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};J.T!==null?i(!0):m.isTransition=!1,o(m),i=n.pending,i===null?(m.next=n.pending=m,ag(n,m)):(m.next=i.next,n.pending=i.next=m)}}function ag(e,n){var i=n.action,o=n.payload,f=e.state;if(n.isTransition){var m=J.T,w={};J.T=w;try{var C=i(f,o),U=J.S;U!==null&&U(w,C),ig(e,n,C)}catch(he){Uf(e,n,he)}finally{m!==null&&w.types!==null&&(m.types=w.types),J.T=m}}else try{m=i(f,o),ig(e,n,m)}catch(he){Uf(e,n,he)}}function ig(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){sg(e,n,o)},function(o){return Uf(e,n,o)}):sg(e,n,i)}function sg(e,n,i){n.status="fulfilled",n.value=i,og(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,ag(e,i)))}function Uf(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,og(n),n=n.next;while(n!==o)}e.action=null}function og(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function lg(e,n){return n}function ug(e,n){if(jt){var i=Wt.formState;if(i!==null){e:{var o=gt;if(jt){if(an){t:{for(var f=an,m=Ma;f.nodeType!==8;){if(!m){f=null;break t}if(f=ka(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){an=ka(f.nextSibling),o=f.data==="F!";break e}}Es(o)}o=!1}o&&(n=i[0])}}return i=Nr(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lg,lastRenderedState:n},i.queue=o,i=Rg.bind(null,gt,o),o.dispatch=i,o=zf(!1),m=Gf.bind(null,gt,!1,o.queue),o=Nr(),f={state:n,dispatch:null,action:e,pending:null},o.queue=f,i=Bx.bind(null,gt,f,m,i),f.dispatch=i,o.memoizedState=e,[n,i,!1]}function cg(e){var n=jn();return hg(n,$t,e)}function hg(e,n,i){if(n=Pf(e,n,lg)[0],e=vc(Ui)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=tu(n)}catch(w){throw w===Zo?lc:w}else o=n;n=jn();var f=n.queue,m=f.dispatch;return i!==n.memoizedState&&(gt.flags|=2048,nl(9,{destroy:void 0},qx.bind(null,f,i),null)),[o,m,e]}function qx(e,n){e.action=n}function fg(e){var n=jn(),i=$t;if(i!==null)return hg(n,i,e);jn(),n=n.memoizedState,i=jn();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function nl(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=gt.updateQueue,n===null&&(n=gc(),gt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function dg(){return jn().memoizedState}function bc(e,n,i,o){var f=Nr();gt.flags|=e,f.memoizedState=nl(1|n,{destroy:void 0},i,o===void 0?null:o)}function _c(e,n,i,o){var f=jn();o=o===void 0?null:o;var m=f.memoizedState.inst;$t!==null&&o!==null&&Df(o,$t.memoizedState.deps)?f.memoizedState=nl(n,m,i,o):(gt.flags|=e,f.memoizedState=nl(1|n,m,i,o))}function mg(e,n){bc(8390656,8,e,n)}function Bf(e,n){_c(2048,8,e,n)}function Fx(e){gt.flags|=4;var n=gt.updateQueue;if(n===null)n=gc(),gt.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function pg(e){var n=jn().memoizedState;return Fx({ref:n,nextImpl:e}),function(){if((Lt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function gg(e,n){return _c(4,2,e,n)}function yg(e,n){return _c(4,4,e,n)}function vg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function bg(e,n,i){i=i!=null?i.concat([e]):null,_c(4,4,vg.bind(null,n,e),i)}function qf(){}function _g(e,n){var i=jn();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&Df(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function xg(e,n){var i=jn();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&Df(n,o[1]))return o[0];if(o=e(),_o){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[o,n],o}function Ff(e,n,i){return i===void 0||(zi&1073741824)!==0&&(Tt&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Ey(),gt.lanes|=e,Ds|=e,i)}function Eg(e,n,i,o){return gr(i,n)?i:Wo.current!==null?(e=Ff(e,i,o),gr(e,n)||(Un=!0),e):(zi&42)===0||(zi&1073741824)!==0&&(Tt&261930)===0?(Un=!0,e.memoizedState=i):(e=Ey(),gt.lanes|=e,Ds|=e,n)}function wg(e,n,i,o,f){var m=Ae.p;Ae.p=m!==0&&8>m?m:8;var w=J.T,C={};J.T=C,Gf(e,!1,n,i);try{var U=f(),he=J.S;if(he!==null&&he(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ve=Lx(U,o);nu(e,n,ve,ya(e))}else nu(e,n,o,ya(e))}catch(Ee){nu(e,n,{then:function(){},status:"rejected",reason:Ee},ya())}finally{Ae.p=m,w!==null&&C.types!==null&&(w.types=C.types),J.T=w}}function Hx(){}function Hf(e,n,i,o){if(e.tag!==5)throw Error(s(476));var f=Tg(e).queue;wg(e,f,n,Ne,i===null?Hx:function(){return Sg(e),i(o)})}function Tg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:Ne},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Sg(e){var n=Tg(e);n.next===null&&(n=e.alternate.memoizedState),nu(e,n.next.queue,{},ya())}function Kf(){return lr(bu)}function Ag(){return jn().memoizedState}function Ng(){return jn().memoizedState}function Kx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=ya();e=Ss(i);var o=As(n,e,i);o!==null&&(Yr(o,n,i),Zl(o,n,i)),n={cache:_f()},e.payload=n;return}n=n.return}}function Gx(e,n,i){var o=ya();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},xc(e)?Cg(n,i):(i=kn(e,n,i,o),i!==null&&(Yr(i,e,o),jg(i,n,o)))}function Rg(e,n,i){var o=ya();nu(e,n,i,o)}function nu(e,n,i,o){var f={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(xc(e))Cg(n,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var w=n.lastRenderedState,C=m(w,i);if(f.hasEagerState=!0,f.eagerState=C,gr(C,w))return ot(e,n,f,0),Wt===null&&er(),!1}catch{}finally{}if(i=kn(e,n,f,o),i!==null)return Yr(i,e,o),jg(i,n,o),!0}return!1}function Gf(e,n,i,o){if(o={lane:2,revertLane:Td(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},xc(e)){if(n)throw Error(s(479))}else n=kn(e,i,o,2),n!==null&&Yr(n,e,2)}function xc(e){var n=e.alternate;return e===gt||n!==null&&n===gt}function Cg(e,n){el=mc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function jg(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Bt(e,i)}}var ru={readContext:lr,use:yc,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn};ru.useEffectEvent=xn;var Dg={readContext:lr,use:yc,useCallback:function(e,n){return Nr().memoizedState=[e,n===void 0?null:n],e},useContext:lr,useEffect:mg,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,bc(4194308,4,vg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return bc(4194308,4,e,n)},useInsertionEffect:function(e,n){bc(4,2,e,n)},useMemo:function(e,n){var i=Nr();n=n===void 0?null:n;var o=e();if(_o){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=Nr();if(i!==void 0){var f=i(n);if(_o){Sn(!0);try{i(n)}finally{Sn(!1)}}}else f=n;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=Gx.bind(null,gt,e),[o.memoizedState,e]},useRef:function(e){var n=Nr();return e={current:e},n.memoizedState=e},useState:function(e){e=zf(e);var n=e.queue,i=Rg.bind(null,gt,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:qf,useDeferredValue:function(e,n){var i=Nr();return Ff(i,e,n)},useTransition:function(){var e=zf(!1);return e=wg.bind(null,gt,e.queue,!0,!1),Nr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=gt,f=Nr();if(jt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Wt===null)throw Error(s(349));(Tt&127)!==0||Jp(o,n,i)}f.memoizedState=i;var m={value:i,getSnapshot:n};return f.queue=m,mg(eg.bind(null,o,m,e),[e]),o.flags|=2048,nl(9,{destroy:void 0},Wp.bind(null,o,m,i,n),null),i},useId:function(){var e=Nr(),n=Wt.identifierPrefix;if(jt){var i=mi,o=di;i=(o&~(1<<32-Be(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=pc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=zx++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Kf,useFormState:ug,useActionState:ug,useOptimistic:function(e){var n=Nr();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Gf.bind(null,gt,!0,i),i.dispatch=n,[e,n]},useMemoCache:kf,useCacheRefresh:function(){return Nr().memoizedState=Kx.bind(null,gt)},useEffectEvent:function(e){var n=Nr(),i={impl:e};return n.memoizedState=i,function(){if((Lt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Qf={readContext:lr,use:yc,useCallback:_g,useContext:lr,useEffect:Bf,useImperativeHandle:bg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:xg,useReducer:vc,useRef:dg,useState:function(){return vc(Ui)},useDebugValue:qf,useDeferredValue:function(e,n){var i=jn();return Eg(i,$t.memoizedState,e,n)},useTransition:function(){var e=vc(Ui)[0],n=jn().memoizedState;return[typeof e=="boolean"?e:tu(e),n]},useSyncExternalStore:Zp,useId:Ag,useHostTransitionStatus:Kf,useFormState:cg,useActionState:cg,useOptimistic:function(e,n){var i=jn();return rg(i,$t,e,n)},useMemoCache:kf,useCacheRefresh:Ng};Qf.useEffectEvent=pg;var Ig={readContext:lr,use:yc,useCallback:_g,useContext:lr,useEffect:Bf,useImperativeHandle:bg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:xg,useReducer:Lf,useRef:dg,useState:function(){return Lf(Ui)},useDebugValue:qf,useDeferredValue:function(e,n){var i=jn();return $t===null?Ff(i,e,n):Eg(i,$t.memoizedState,e,n)},useTransition:function(){var e=Lf(Ui)[0],n=jn().memoizedState;return[typeof e=="boolean"?e:tu(e),n]},useSyncExternalStore:Zp,useId:Ag,useHostTransitionStatus:Kf,useFormState:fg,useActionState:fg,useOptimistic:function(e,n){var i=jn();return $t!==null?rg(i,$t,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:kf,useCacheRefresh:Ng};Ig.useEffectEvent=pg;function Yf(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:N({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Xf={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=ya(),f=Ss(o);f.payload=n,i!=null&&(f.callback=i),n=As(e,f,o),n!==null&&(Yr(n,e,o),Zl(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=ya(),f=Ss(o);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=As(e,f,o),n!==null&&(Yr(n,e,o),Zl(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=ya(),o=Ss(i);o.tag=2,n!=null&&(o.callback=n),n=As(e,o,i),n!==null&&(Yr(n,e,i),Zl(n,e,i))}};function Og(e,n,i,o,f,m,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,w):n.prototype&&n.prototype.isPureReactComponent?!h(i,o)||!h(f,m):!0}function Mg(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&Xf.enqueueReplaceState(n,n.state,null)}function xo(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=N({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function Vg(e){qe(e)}function kg(e){console.error(e)}function Pg(e){qe(e)}function Ec(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Lg(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function $f(e,n,i){return i=Ss(i),i.tag=3,i.payload={element:null},i.callback=function(){Ec(e,n)},i}function zg(e){return e=Ss(e),e.tag=3,e}function Ug(e,n,i,o){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;e.payload=function(){return f(m)},e.callback=function(){Lg(n,i,o)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(e.callback=function(){Lg(n,i,o),typeof f!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})})}function Qx(e,n,i,o,f){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&Yo(n,i,f,!0),i=da.current,i!==null){switch(i.tag){case 31:case 13:return Va===null?Mc():i.alternate===null&&En===0&&(En=3),i.flags&=-257,i.flags|=65536,i.lanes=f,o===uc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),xd(e,o,f)),!1;case 22:return i.flags|=65536,o===uc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),xd(e,o,f)),!1}throw Error(s(435,i.tag))}return xd(e,o,f),Mc(),!1}if(jt)return n=da.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,o!==pf&&(e=Error(s(422),{cause:o}),Gl(Da(e,i)))):(o!==pf&&(n=Error(s(423),{cause:o}),Gl(Da(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=Da(o,i),f=$f(e.stateNode,o,f),Af(e,f),En!==4&&(En=2)),!1;var m=Error(s(520),{cause:o});if(m=Da(m,i),hu===null?hu=[m]:hu.push(m),En!==4&&(En=2),n===null)return!0;o=Da(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=$f(i.stateNode,o,e),Af(i,e),!1;case 1:if(n=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Is===null||!Is.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=zg(f),Ug(f,e,i,o),Af(i,f),!1}i=i.return}while(i!==null);return!1}var Zf=Error(s(461)),Un=!1;function ur(e,n,i,o){n.child=e===null?Hp(n,null,i,o):bo(n,e.child,i,o)}function Bg(e,n,i,o,f){i=i.render;var m=n.ref;if("ref"in o){var w={};for(var C in o)C!=="ref"&&(w[C]=o[C])}else w=o;return po(n),o=If(e,n,i,w,m,f),C=Of(),e!==null&&!Un?(Mf(e,n,f),Bi(e,n,f)):(jt&&C&&df(n),n.flags|=1,ur(e,n,o,f),n.child)}function qg(e,n,i,o,f){if(e===null){var m=i.type;return typeof m=="function"&&!cf(m)&&m.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=m,Fg(e,n,m,o,f)):(e=rc(i.type,null,o,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!id(e,f)){var w=m.memoizedProps;if(i=i.compare,i=i!==null?i:h,i(w,o)&&e.ref===n.ref)return Bi(e,n,f)}return n.flags|=1,e=Vi(m,o),e.ref=n.ref,e.return=n,n.child=e}function Fg(e,n,i,o,f){if(e!==null){var m=e.memoizedProps;if(h(m,o)&&e.ref===n.ref)if(Un=!1,n.pendingProps=o=m,id(e,f))(e.flags&131072)!==0&&(Un=!0);else return n.lanes=e.lanes,Bi(e,n,f)}return Jf(e,n,i,o,f)}function Hg(e,n,i,o){var f=o.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,e!==null){for(o=n.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,n.child=null;return Kg(e,n,m,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&oc(n,m!==null?m.cachePool:null),m!==null?Qp(n,m):Rf(),Yp(n);else return o=n.lanes=536870912,Kg(e,n,m!==null?m.baseLanes|i:i,i,o)}else m!==null?(oc(n,m.cachePool),Qp(n,m),Rs(),n.memoizedState=null):(e!==null&&oc(n,null),Rf(),Rs());return ur(e,n,f,i),n.child}function au(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Kg(e,n,i,o,f){var m=Ef();return m=m===null?null:{parent:Ln._currentValue,pool:m},n.memoizedState={baseLanes:i,cachePool:m},e!==null&&oc(n,null),Rf(),Yp(n),e!==null&&Yo(e,n,o,!0),n.childLanes=f,null}function wc(e,n){return n=Sc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Gg(e,n,i){return bo(n,e.child,null,i),e=wc(n,n.pendingProps),e.flags|=2,ma(n),n.memoizedState=null,e}function Yx(e,n,i){var o=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(jt){if(o.mode==="hidden")return e=wc(n,o),n.lanes=536870912,au(null,e);if(jf(n),(e=an)?(e=av(e,Ma),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_s!==null?{id:di,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},i=Cp(e),i.return=n,n.child=i,or=n,an=null)):e=null,e===null)throw Es(n);return n.lanes=536870912,null}return wc(n,o)}var m=e.memoizedState;if(m!==null){var w=m.dehydrated;if(jf(n),f)if(n.flags&256)n.flags&=-257,n=Gg(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Un||Yo(e,n,i,!1),f=(i&e.childLanes)!==0,Un||f){if(o=Wt,o!==null&&(w=ln(o,i),w!==0&&w!==m.retryLane))throw m.retryLane=w,un(e,w),Yr(o,e,w),Zf;Mc(),n=Gg(e,n,i)}else e=m.treeContext,an=ka(w.nextSibling),or=n,jt=!0,xs=null,Ma=!1,e!==null&&Ip(n,e),n=wc(n,o),n.flags|=4096;return n}return e=Vi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Tc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Jf(e,n,i,o,f){return po(n),i=If(e,n,i,o,void 0,f),o=Of(),e!==null&&!Un?(Mf(e,n,f),Bi(e,n,f)):(jt&&o&&df(n),n.flags|=1,ur(e,n,i,f),n.child)}function Qg(e,n,i,o,f,m){return po(n),n.updateQueue=null,i=$p(n,o,i,f),Xp(e),o=Of(),e!==null&&!Un?(Mf(e,n,m),Bi(e,n,m)):(jt&&o&&df(n),n.flags|=1,ur(e,n,i,m),n.child)}function Yg(e,n,i,o,f){if(po(n),n.stateNode===null){var m=Fr,w=i.contextType;typeof w=="object"&&w!==null&&(m=lr(w)),m=new i(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Xf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},Tf(n),w=i.contextType,m.context=typeof w=="object"&&w!==null?lr(w):Fr,m.state=n.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(Yf(n,i,w,o),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&Xf.enqueueReplaceState(m,m.state,null),Wl(n,o,m,f),Jl(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){m=n.stateNode;var C=n.memoizedProps,U=xo(i,C);m.props=U;var he=m.context,ve=i.contextType;w=Fr,typeof ve=="object"&&ve!==null&&(w=lr(ve));var Ee=i.getDerivedStateFromProps;ve=typeof Ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,ve||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||he!==w)&&Mg(n,m,o,w),Ts=!1;var me=n.memoizedState;m.state=me,Wl(n,o,m,f),Jl(),he=n.memoizedState,C||me!==he||Ts?(typeof Ee=="function"&&(Yf(n,i,Ee,o),he=n.memoizedState),(U=Ts||Og(n,i,U,o,me,he,w))?(ve||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=he),m.props=o,m.state=he,m.context=w,o=U):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,Sf(e,n),w=n.memoizedProps,ve=xo(i,w),m.props=ve,Ee=n.pendingProps,me=m.context,he=i.contextType,U=Fr,typeof he=="object"&&he!==null&&(U=lr(he)),C=i.getDerivedStateFromProps,(he=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==Ee||me!==U)&&Mg(n,m,o,U),Ts=!1,me=n.memoizedState,m.state=me,Wl(n,o,m,f),Jl();var ge=n.memoizedState;w!==Ee||me!==ge||Ts||e!==null&&e.dependencies!==null&&ic(e.dependencies)?(typeof C=="function"&&(Yf(n,i,C,o),ge=n.memoizedState),(ve=Ts||Og(n,i,ve,o,me,ge,U)||e!==null&&e.dependencies!==null&&ic(e.dependencies))?(he||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ge,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ge,U)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=ge),m.props=o,m.state=ge,m.context=U,o=ve):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=1024),o=!1)}return m=o,Tc(e,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&o?(n.child=bo(n,e.child,null,f),n.child=bo(n,null,i,f)):ur(e,n,i,f),n.memoizedState=m.state,e=n.child):e=Bi(e,n,f),e}function Xg(e,n,i,o){return fo(),n.flags|=256,ur(e,n,i,o),n.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ed(e){return{baseLanes:e,cachePool:Lp()}}function td(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=ga),e}function $g(e,n,i){var o=n.pendingProps,f=!1,m=(n.flags&128)!==0,w;if((w=m)||(w=e!==null&&e.memoizedState===null?!1:(Cn.current&2)!==0),w&&(f=!0,n.flags&=-129),w=(n.flags&32)!==0,n.flags&=-33,e===null){if(jt){if(f?Ns(n):Rs(),(e=an)?(e=av(e,Ma),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_s!==null?{id:di,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},i=Cp(e),i.return=n,n.child=i,or=n,an=null)):e=null,e===null)throw Es(n);return Pd(e)?n.lanes=32:n.lanes=536870912,null}var C=o.children;return o=o.fallback,f?(Rs(),f=n.mode,C=Sc({mode:"hidden",children:C},f),o=ho(o,f,i,null),C.return=n,o.return=n,C.sibling=o,n.child=C,o=n.child,o.memoizedState=ed(i),o.childLanes=td(e,w,i),n.memoizedState=Wf,au(null,o)):(Ns(n),nd(n,C))}var U=e.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(m)n.flags&256?(Ns(n),n.flags&=-257,n=rd(e,n,i)):n.memoizedState!==null?(Rs(),n.child=e.child,n.flags|=128,n=null):(Rs(),C=o.fallback,f=n.mode,o=Sc({mode:"visible",children:o.children},f),C=ho(C,f,i,null),C.flags|=2,o.return=n,C.return=n,o.sibling=C,n.child=o,bo(n,e.child,null,i),o=n.child,o.memoizedState=ed(i),o.childLanes=td(e,w,i),n.memoizedState=Wf,n=au(null,o));else if(Ns(n),Pd(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var he=w.dgst;w=he,o=Error(s(419)),o.stack="",o.digest=w,Gl({value:o,source:null,stack:null}),n=rd(e,n,i)}else if(Un||Yo(e,n,i,!1),w=(i&e.childLanes)!==0,Un||w){if(w=Wt,w!==null&&(o=ln(w,i),o!==0&&o!==U.retryLane))throw U.retryLane=o,un(e,o),Yr(w,e,o),Zf;kd(C)||Mc(),n=rd(e,n,i)}else kd(C)?(n.flags|=192,n.child=e.child,n=null):(e=U.treeContext,an=ka(C.nextSibling),or=n,jt=!0,xs=null,Ma=!1,e!==null&&Ip(n,e),n=nd(n,o.children),n.flags|=4096);return n}return f?(Rs(),C=o.fallback,f=n.mode,U=e.child,he=U.sibling,o=Vi(U,{mode:"hidden",children:o.children}),o.subtreeFlags=U.subtreeFlags&65011712,he!==null?C=Vi(he,C):(C=ho(C,f,i,null),C.flags|=2),C.return=n,o.return=n,o.sibling=C,n.child=o,au(null,o),o=n.child,C=e.child.memoizedState,C===null?C=ed(i):(f=C.cachePool,f!==null?(U=Ln._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=Lp(),C={baseLanes:C.baseLanes|i,cachePool:f}),o.memoizedState=C,o.childLanes=td(e,w,i),n.memoizedState=Wf,au(e.child,o)):(Ns(n),i=e.child,e=i.sibling,i=Vi(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(w=n.deletions,w===null?(n.deletions=[e],n.flags|=16):w.push(e)),n.child=i,n.memoizedState=null,i)}function nd(e,n){return n=Sc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Sc(e,n){return e=fa(22,e,null,n),e.lanes=0,e}function rd(e,n,i){return bo(n,e.child,null,i),e=nd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Zg(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),vf(e.return,n,i)}function ad(e,n,i,o,f,m){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:f,treeForkCount:m}:(w.isBackwards=n,w.rendering=null,w.renderingStartTime=0,w.last=o,w.tail=i,w.tailMode=f,w.treeForkCount=m)}function Jg(e,n,i){var o=n.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var w=Cn.current,C=(w&2)!==0;if(C?(w=w&1|2,n.flags|=128):w&=1,Ie(Cn,w),ur(e,n,o,i),o=jt?Kl:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zg(e,i,n);else if(e.tag===19)Zg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&dc(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),ad(n,!1,f,i,m,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&dc(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}ad(n,!0,i,null,m,o);break;case"together":ad(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Bi(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ds|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Yo(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=Vi(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Vi(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function id(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ic(e)))}function Xx(e,n,i){switch(n.tag){case 3:Ft(n,n.stateNode.containerInfo),ws(n,Ln,e.memoizedState.cache),fo();break;case 27:case 5:fn(n);break;case 4:Ft(n,n.stateNode.containerInfo);break;case 10:ws(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,jf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ns(n),n.flags|=128,null):(i&n.child.childLanes)!==0?$g(e,n,i):(Ns(n),e=Bi(e,n,i),e!==null?e.sibling:null);Ns(n);break;case 19:var f=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(Yo(e,n,i,!1),o=(i&n.childLanes)!==0),f){if(o)return Jg(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ie(Cn,Cn.current),o)break;return null;case 22:return n.lanes=0,Hg(e,n,i,n.pendingProps);case 24:ws(n,Ln,e.memoizedState.cache)}return Bi(e,n,i)}function Wg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Un=!0;else{if(!id(e,i)&&(n.flags&128)===0)return Un=!1,Xx(e,n,i);Un=(e.flags&131072)!==0}else Un=!1,jt&&(n.flags&1048576)!==0&&Dp(n,Kl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=yo(n.elementType),n.type=e,typeof e=="function")cf(e)?(o=xo(e,o),n.tag=1,n=Yg(null,n,e,o,i)):(n.tag=0,n=Jf(null,n,e,o,i));else{if(e!=null){var f=e.$$typeof;if(f===Se){n.tag=11,n=Bg(null,n,e,o,i);break e}else if(f===k){n.tag=14,n=qg(null,n,e,o,i);break e}}throw n=at(e)||e,Error(s(306,n,""))}}return n;case 0:return Jf(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,f=xo(o,n.pendingProps),Yg(e,n,o,f,i);case 3:e:{if(Ft(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var m=n.memoizedState;f=m.element,Sf(e,n),Wl(n,o,null,i);var w=n.memoizedState;if(o=w.cache,ws(n,Ln,o),o!==m.cache&&bf(n,[Ln],i,!0),Jl(),o=w.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:w.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Xg(e,n,o,i);break e}else if(o!==f){f=Da(Error(s(424)),n),Gl(f),n=Xg(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(an=ka(e.firstChild),or=n,jt=!0,xs=null,Ma=!0,i=Hp(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(fo(),o===f){n=Bi(e,n,i);break e}ur(e,n,o,i)}n=n.child}return n;case 26:return Tc(e,n),e===null?(i=cv(n.type,null,n.pendingProps,null))?n.memoizedState=i:jt||(i=n.type,e=n.pendingProps,o=Bc($e.current).createElement(i),o[Kt]=n,o[nn]=e,cr(o,i,e),mn(o),n.stateNode=o):n.memoizedState=cv(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return fn(n),e===null&&jt&&(o=n.stateNode=ov(n.type,n.pendingProps,$e.current),or=n,Ma=!0,f=an,ks(n.type)?(Ld=f,an=ka(o.firstChild)):an=f),ur(e,n,n.pendingProps.children,i),Tc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&jt&&((f=o=an)&&(o=S1(o,n.type,n.pendingProps,Ma),o!==null?(n.stateNode=o,or=n,an=ka(o.firstChild),Ma=!1,f=!0):f=!1),f||Es(n)),fn(n),f=n.type,m=n.pendingProps,w=e!==null?e.memoizedProps:null,o=m.children,Od(f,m)?o=null:w!==null&&Od(f,w)&&(n.flags|=32),n.memoizedState!==null&&(f=If(e,n,Ux,null,null,i),bu._currentValue=f),Tc(e,n),ur(e,n,o,i),n.child;case 6:return e===null&&jt&&((e=i=an)&&(i=A1(i,n.pendingProps,Ma),i!==null?(n.stateNode=i,or=n,an=null,e=!0):e=!1),e||Es(n)),null;case 13:return $g(e,n,i);case 4:return Ft(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=bo(n,null,o,i):ur(e,n,o,i),n.child;case 11:return Bg(e,n,n.type,n.pendingProps,i);case 7:return ur(e,n,n.pendingProps,i),n.child;case 8:return ur(e,n,n.pendingProps.children,i),n.child;case 12:return ur(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,ws(n,n.type,o.value),ur(e,n,o.children,i),n.child;case 9:return f=n.type._context,o=n.pendingProps.children,po(n),f=lr(f),o=o(f),n.flags|=1,ur(e,n,o,i),n.child;case 14:return qg(e,n,n.type,n.pendingProps,i);case 15:return Fg(e,n,n.type,n.pendingProps,i);case 19:return Jg(e,n,i);case 31:return Yx(e,n,i);case 22:return Hg(e,n,i,n.pendingProps);case 24:return po(n),o=lr(Ln),e===null?(f=Ef(),f===null&&(f=Wt,m=_f(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),n.memoizedState={parent:o,cache:f},Tf(n),ws(n,Ln,f)):((e.lanes&i)!==0&&(Sf(e,n),Wl(n,null,null,i),Jl()),f=e.memoizedState,m=n.memoizedState,f.parent!==o?(f={parent:o,cache:o},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),ws(n,Ln,o)):(o=m.cache,ws(n,Ln,o),o!==f.cache&&bf(n,[Ln],i,!0))),ur(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function qi(e){e.flags|=4}function sd(e,n,i,o,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Ay())e.flags|=8192;else throw vo=uc,wf}else e.flags&=-16777217}function ey(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!pv(n))if(Ay())e.flags|=8192;else throw vo=uc,wf}function Ac(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?zo():536870912,e.lanes|=n,sl|=n)}function iu(e,n){if(!jt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function sn(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function $x(e,n,i){var o=n.pendingProps;switch(mf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(n),null;case 1:return sn(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Li(Ln),Oe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Qo(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),sn(n),null;case 26:var f=n.type,m=n.memoizedState;return e===null?(qi(n),m!==null?(sn(n),ey(n,m)):(sn(n),sd(n,f,null,o,i))):m?m!==e.memoizedState?(qi(n),sn(n),ey(n,m)):(sn(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&qi(n),sn(n),sd(n,f,e,o,i)),null;case 27:if(On(n),i=$e.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return sn(n),null}e=Re.current,Qo(n)?Op(n):(e=ov(f,o,i),n.stateNode=e,qi(n))}return sn(n),null;case 5:if(On(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return sn(n),null}if(m=Re.current,Qo(n))Op(n);else{var w=Bc($e.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?w.createElement("select",{is:o.is}):w.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?w.createElement(f,{is:o.is}):w.createElement(f)}}m[Kt]=n,m[nn]=o;e:for(w=n.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===n)break e;for(;w.sibling===null;){if(w.return===null||w.return===n)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}n.stateNode=m;e:switch(cr(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&qi(n)}}return sn(n),sd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=$e.current,Qo(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,f=or,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Kt]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||$y(e.nodeValue,i)),e||Es(n,!0)}else e=Bc(e).createTextNode(o),e[Kt]=n,n.stateNode=e}return sn(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=Qo(n),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Kt]=n}else fo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;sn(n),e=!1}else i=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(ma(n),n):(ma(n),null);if((n.flags&128)!==0)throw Error(s(558))}return sn(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Qo(n),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Kt]=n}else fo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;sn(n),f=!1}else f=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(ma(n),n):(ma(n),null)}return ma(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Ac(n,n.updateQueue),sn(n),null);case 4:return Oe(),e===null&&Rd(n.stateNode.containerInfo),sn(n),null;case 10:return Li(n.type),sn(n),null;case 19:if(be(Cn),o=n.memoizedState,o===null)return sn(n),null;if(f=(n.flags&128)!==0,m=o.rendering,m===null)if(f)iu(o,!1);else{if(En!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=dc(e),m!==null){for(n.flags|=128,iu(o,!1),e=m.updateQueue,n.updateQueue=e,Ac(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Rp(i,e),i=i.sibling;return Ie(Cn,Cn.current&1|2),jt&&ki(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&$n()>Dc&&(n.flags|=128,f=!0,iu(o,!1),n.lanes=4194304)}else{if(!f)if(e=dc(m),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Ac(n,e),iu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!jt)return sn(n),null}else 2*$n()-o.renderingStartTime>Dc&&i!==536870912&&(n.flags|=128,f=!0,iu(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(e=o.last,e!==null?e.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$n(),e.sibling=null,i=Cn.current,Ie(Cn,f?i&1|2:i&1),jt&&ki(n,o.treeForkCount),e):(sn(n),null);case 22:case 23:return ma(n),Cf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(sn(n),n.subtreeFlags&6&&(n.flags|=8192)):sn(n),i=n.updateQueue,i!==null&&Ac(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&be(go),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Li(Ln),sn(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Zx(e,n){switch(mf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Li(Ln),Oe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return On(n),null;case 31:if(n.memoizedState!==null){if(ma(n),n.alternate===null)throw Error(s(340));fo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ma(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));fo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return be(Cn),null;case 4:return Oe(),null;case 10:return Li(n.type),null;case 22:case 23:return ma(n),Cf(),e!==null&&be(go),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Li(Ln),null;case 25:return null;default:return null}}function ty(e,n){switch(mf(n),n.tag){case 3:Li(Ln),Oe();break;case 26:case 27:case 5:On(n);break;case 4:Oe();break;case 31:n.memoizedState!==null&&ma(n);break;case 13:ma(n);break;case 19:be(Cn);break;case 10:Li(n.type);break;case 22:case 23:ma(n),Cf(),e!==null&&be(go);break;case 24:Li(Ln)}}function su(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var f=o.next;i=f;do{if((i.tag&e)===e){o=void 0;var m=i.create,w=i.inst;o=m(),w.destroy=o}i=i.next}while(i!==f)}}catch(C){Xt(n,n.return,C)}}function Cs(e,n,i){try{var o=n.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&e)===e){var w=o.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,f=n;var U=i,he=C;try{he()}catch(ve){Xt(f,U,ve)}}}o=o.next}while(o!==m)}}catch(ve){Xt(n,n.return,ve)}}function ny(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Gp(n,i)}catch(o){Xt(e,e.return,o)}}}function ry(e,n,i){i.props=xo(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Xt(e,n,o)}}function ou(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(f){Xt(e,n,f)}}function pi(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(f){Xt(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Xt(e,n,f)}else i.current=null}function ay(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(f){Xt(e,e.return,f)}}function od(e,n,i){try{var o=e.stateNode;b1(o,e.type,i,n),o[nn]=n}catch(f){Xt(e,e.return,f)}}function iy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ks(e.type)||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ks(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ud(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=pr));else if(o!==4&&(o===27&&ks(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(ud(e,n,i),e=e.sibling;e!==null;)ud(e,n,i),e=e.sibling}function Nc(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&ks(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Nc(e,n,i),e=e.sibling;e!==null;)Nc(e,n,i),e=e.sibling}function sy(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);cr(n,o,i),n[Kt]=e,n[nn]=i}catch(m){Xt(e,e.return,m)}}var Fi=!1,Bn=!1,cd=!1,oy=typeof WeakSet=="function"?WeakSet:Set,tr=null;function Jx(e,n){if(e=e.containerInfo,Dd=Yc,e=S(e),R(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var w=0,C=-1,U=-1,he=0,ve=0,Ee=e,me=null;t:for(;;){for(var ge;Ee!==i||f!==0&&Ee.nodeType!==3||(C=w+f),Ee!==m||o!==0&&Ee.nodeType!==3||(U=w+o),Ee.nodeType===3&&(w+=Ee.nodeValue.length),(ge=Ee.firstChild)!==null;)me=Ee,Ee=ge;for(;;){if(Ee===e)break t;if(me===i&&++he===f&&(C=w),me===m&&++ve===o&&(U=w),(ge=Ee.nextSibling)!==null)break;Ee=me,me=Ee.parentNode}Ee=ge}i=C===-1||U===-1?null:{start:C,end:U}}else i=null}i=i||{start:0,end:0}}else i=null;for(Id={focusedElem:e,selectionRange:i},Yc=!1,tr=n;tr!==null;)if(n=tr,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,tr=e;else for(;tr!==null;){switch(n=tr,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,i=n,f=m.memoizedProps,m=m.memoizedState,o=i.stateNode;try{var Ye=xo(i.type,f);e=o.getSnapshotBeforeUpdate(Ye,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(nt){Xt(i,i.return,nt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Vd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,tr=e;break}tr=n.return}}function ly(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Ki(e,i),o&4&&su(5,i);break;case 1:if(Ki(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(w){Xt(i,i.return,w)}else{var f=xo(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(w){Xt(i,i.return,w)}}o&64&&ny(i),o&512&&ou(i,i.return);break;case 3:if(Ki(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Gp(e,n)}catch(w){Xt(i,i.return,w)}}break;case 27:n===null&&o&4&&sy(i);case 26:case 5:Ki(e,i),n===null&&o&4&&ay(i),o&512&&ou(i,i.return);break;case 12:Ki(e,i);break;case 31:Ki(e,i),o&4&&hy(e,i);break;case 13:Ki(e,i),o&4&&fy(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=o1.bind(null,i),N1(e,i))));break;case 22:if(o=i.memoizedState!==null||Fi,!o){n=n!==null&&n.memoizedState!==null||Bn,f=Fi;var m=Bn;Fi=o,(Bn=n)&&!m?Gi(e,i,(i.subtreeFlags&8772)!==0):Ki(e,i),Fi=f,Bn=m}break;case 30:break;default:Ki(e,i)}}function uy(e){var n=e.alternate;n!==null&&(e.alternate=null,uy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ni(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cn=null,Hr=!1;function Hi(e,n,i){for(i=i.child;i!==null;)cy(e,n,i),i=i.sibling}function cy(e,n,i){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(fr,i)}catch{}switch(i.tag){case 26:Bn||pi(i,n),Hi(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Bn||pi(i,n);var o=cn,f=Hr;ks(i.type)&&(cn=i.stateNode,Hr=!1),Hi(e,n,i),gu(i.stateNode),cn=o,Hr=f;break;case 5:Bn||pi(i,n);case 6:if(o=cn,f=Hr,cn=null,Hi(e,n,i),cn=o,Hr=f,cn!==null)if(Hr)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(i.stateNode)}catch(m){Xt(i,n,m)}else try{cn.removeChild(i.stateNode)}catch(m){Xt(i,n,m)}break;case 18:cn!==null&&(Hr?(e=cn,nv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ml(e)):nv(cn,i.stateNode));break;case 4:o=cn,f=Hr,cn=i.stateNode.containerInfo,Hr=!0,Hi(e,n,i),cn=o,Hr=f;break;case 0:case 11:case 14:case 15:Cs(2,i,n),Bn||Cs(4,i,n),Hi(e,n,i);break;case 1:Bn||(pi(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&ry(i,n,o)),Hi(e,n,i);break;case 21:Hi(e,n,i);break;case 22:Bn=(o=Bn)||i.memoizedState!==null,Hi(e,n,i),Bn=o;break;default:Hi(e,n,i)}}function hy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ml(e)}catch(i){Xt(n,n.return,i)}}}function fy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ml(e)}catch(i){Xt(n,n.return,i)}}function Wx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new oy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new oy),n;default:throw Error(s(435,e.tag))}}function Rc(e,n){var i=Wx(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var f=l1.bind(null,e,o);o.then(f,f)}})}function Kr(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var f=i[o],m=e,w=n,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(ks(C.type)){cn=C.stateNode,Hr=!1;break e}break;case 5:cn=C.stateNode,Hr=!1;break e;case 3:case 4:cn=C.stateNode.containerInfo,Hr=!0;break e}C=C.return}if(cn===null)throw Error(s(160));cy(m,w,f),cn=null,Hr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)dy(n,e),n=n.sibling}var $a=null;function dy(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Kr(n,e),Gr(e),o&4&&(Cs(3,e,e.return),su(3,e),Cs(5,e,e.return));break;case 1:Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),o&64&&Fi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var f=$a;if(Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),o&4){var m=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Zn]||m[Kt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),cr(m,o,i),m[Kt]=e,mn(m),o=m;break e;case"link":var w=dv("link","href",f).get(o+(i.href||""));if(w){for(var C=0;C<w.length;C++)if(m=w[C],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(C,1);break t}}m=f.createElement(o),cr(m,o,i),f.head.appendChild(m);break;case"meta":if(w=dv("meta","content",f).get(o+(i.content||""))){for(C=0;C<w.length;C++)if(m=w[C],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(C,1);break t}}m=f.createElement(o),cr(m,o,i),f.head.appendChild(m);break;default:throw Error(s(468,o))}m[Kt]=e,mn(m),o=m}e.stateNode=o}else mv(f,e.type,e.stateNode);else e.stateNode=fv(f,o,e.memoizedProps);else m!==o?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,o===null?mv(f,e.type,e.stateNode):fv(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&od(e,e.memoizedProps,i.memoizedProps)}break;case 27:Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),i!==null&&o&4&&od(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),e.flags&32){f=e.stateNode;try{sr(f,"")}catch(Ye){Xt(e,e.return,Ye)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,od(e,f,i!==null?i.memoizedProps:f)),o&1024&&(cd=!0);break;case 6:if(Kr(n,e),Gr(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Ye){Xt(e,e.return,Ye)}}break;case 3:if(Hc=null,f=$a,$a=qc(n.containerInfo),Kr(n,e),$a=f,Gr(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ml(n.containerInfo)}catch(Ye){Xt(e,e.return,Ye)}cd&&(cd=!1,my(e));break;case 4:o=$a,$a=qc(e.stateNode.containerInfo),Kr(n,e),Gr(e),$a=o;break;case 12:Kr(n,e),Gr(e);break;case 31:Kr(n,e),Gr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 13:Kr(n,e),Gr(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(jc=$n()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 22:f=e.memoizedState!==null;var U=i!==null&&i.memoizedState!==null,he=Fi,ve=Bn;if(Fi=he||f,Bn=ve||U,Kr(n,e),Bn=ve,Fi=he,Gr(e),o&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||U||Fi||Bn||Eo(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){U=i=n;try{if(m=U.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=U.stateNode;var Ee=U.memoizedProps.style,me=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;C.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(Ye){Xt(U,U.return,Ye)}}}else if(n.tag===6){if(i===null){U=n;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(Ye){Xt(U,U.return,Ye)}}}else if(n.tag===18){if(i===null){U=n;try{var ge=U.stateNode;f?rv(ge,!0):rv(U.stateNode,!1)}catch(Ye){Xt(U,U.return,Ye)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Rc(e,i))));break;case 19:Kr(n,e),Gr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 30:break;case 21:break;default:Kr(n,e),Gr(e)}}function Gr(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(iy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,m=ld(e);Nc(e,m,f);break;case 5:var w=i.stateNode;i.flags&32&&(sr(w,""),i.flags&=-33);var C=ld(e);Nc(e,C,w);break;case 3:case 4:var U=i.stateNode.containerInfo,he=ld(e);ud(e,he,U);break;default:throw Error(s(161))}}catch(ve){Xt(e,e.return,ve)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function my(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;my(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ki(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ly(e,n.alternate,n),n=n.sibling}function Eo(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Cs(4,n,n.return),Eo(n);break;case 1:pi(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&ry(n,n.return,i),Eo(n);break;case 27:gu(n.stateNode);case 26:case 5:pi(n,n.return),Eo(n);break;case 22:n.memoizedState===null&&Eo(n);break;case 30:Eo(n);break;default:Eo(n)}e=e.sibling}}function Gi(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,f=e,m=n,w=m.flags;switch(m.tag){case 0:case 11:case 15:Gi(f,m,i),su(4,m);break;case 1:if(Gi(f,m,i),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(he){Xt(o,o.return,he)}if(o=m,f=o.updateQueue,f!==null){var C=o.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)Kp(U[f],C)}catch(he){Xt(o,o.return,he)}}i&&w&64&&ny(m),ou(m,m.return);break;case 27:sy(m);case 26:case 5:Gi(f,m,i),i&&o===null&&w&4&&ay(m),ou(m,m.return);break;case 12:Gi(f,m,i);break;case 31:Gi(f,m,i),i&&w&4&&hy(f,m);break;case 13:Gi(f,m,i),i&&w&4&&fy(f,m);break;case 22:m.memoizedState===null&&Gi(f,m,i),ou(m,m.return);break;case 30:break;default:Gi(f,m,i)}n=n.sibling}}function hd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Ql(i))}function fd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ql(e))}function Za(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)py(e,n,i,o),n=n.sibling}function py(e,n,i,o){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Za(e,n,i,o),f&2048&&su(9,n);break;case 1:Za(e,n,i,o);break;case 3:Za(e,n,i,o),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ql(e)));break;case 12:if(f&2048){Za(e,n,i,o),e=n.stateNode;try{var m=n.memoizedProps,w=m.id,C=m.onPostCommit;typeof C=="function"&&C(w,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){Xt(n,n.return,U)}}else Za(e,n,i,o);break;case 31:Za(e,n,i,o);break;case 13:Za(e,n,i,o);break;case 23:break;case 22:m=n.stateNode,w=n.alternate,n.memoizedState!==null?m._visibility&2?Za(e,n,i,o):lu(e,n):m._visibility&2?Za(e,n,i,o):(m._visibility|=2,rl(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),f&2048&&hd(w,n);break;case 24:Za(e,n,i,o),f&2048&&fd(n.alternate,n);break;default:Za(e,n,i,o)}}function rl(e,n,i,o,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,w=n,C=i,U=o,he=w.flags;switch(w.tag){case 0:case 11:case 15:rl(m,w,C,U,f),su(8,w);break;case 23:break;case 22:var ve=w.stateNode;w.memoizedState!==null?ve._visibility&2?rl(m,w,C,U,f):lu(m,w):(ve._visibility|=2,rl(m,w,C,U,f)),f&&he&2048&&hd(w.alternate,w);break;case 24:rl(m,w,C,U,f),f&&he&2048&&fd(w.alternate,w);break;default:rl(m,w,C,U,f)}n=n.sibling}}function lu(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,f=o.flags;switch(o.tag){case 22:lu(i,o),f&2048&&hd(o.alternate,o);break;case 24:lu(i,o),f&2048&&fd(o.alternate,o);break;default:lu(i,o)}n=n.sibling}}var uu=8192;function al(e,n,i){if(e.subtreeFlags&uu)for(e=e.child;e!==null;)gy(e,n,i),e=e.sibling}function gy(e,n,i){switch(e.tag){case 26:al(e,n,i),e.flags&uu&&e.memoizedState!==null&&z1(i,$a,e.memoizedState,e.memoizedProps);break;case 5:al(e,n,i);break;case 3:case 4:var o=$a;$a=qc(e.stateNode.containerInfo),al(e,n,i),$a=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=uu,uu=16777216,al(e,n,i),uu=o):al(e,n,i));break;default:al(e,n,i)}}function yy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function cu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];tr=o,by(o,e)}yy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vy(e),e=e.sibling}function vy(e){switch(e.tag){case 0:case 11:case 15:cu(e),e.flags&2048&&Cs(9,e,e.return);break;case 3:cu(e);break;case 12:cu(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Cc(e)):cu(e);break;default:cu(e)}}function Cc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];tr=o,by(o,e)}yy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Cs(8,n,n.return),Cc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Cc(n));break;default:Cc(n)}e=e.sibling}}function by(e,n){for(;tr!==null;){var i=tr;switch(i.tag){case 0:case 11:case 15:Cs(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ql(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,tr=o;else e:for(i=e;tr!==null;){o=tr;var f=o.sibling,m=o.return;if(uy(o),o===i){tr=null;break e}if(f!==null){f.return=m,tr=f;break e}tr=m}}}var e1={getCacheForType:function(e){var n=lr(Ln),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return lr(Ln).controller.signal}},t1=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Wt=null,Et=null,Tt=0,Yt=0,pa=null,js=!1,il=!1,dd=!1,Qi=0,En=0,Ds=0,wo=0,md=0,ga=0,sl=0,hu=null,Qr=null,pd=!1,jc=0,_y=0,Dc=1/0,Ic=null,Is=null,Gn=0,Os=null,ol=null,Yi=0,gd=0,yd=null,xy=null,fu=0,vd=null;function ya(){return(Lt&2)!==0&&Tt!==0?Tt&-Tt:J.T!==null?Td():Ai()}function Ey(){if(ga===0)if((Tt&536870912)===0||jt){var e=Ba;Ba<<=1,(Ba&3932160)===0&&(Ba=262144),ga=e}else ga=536870912;return e=da.current,e!==null&&(e.flags|=32),ga}function Yr(e,n,i){(e===Wt&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)&&(ll(e,0),Ms(e,Tt,ga,!1)),jr(e,i),((Lt&2)===0||e!==Wt)&&(e===Wt&&((Lt&2)===0&&(wo|=i),En===4&&Ms(e,Tt,ga,!1)),gi(e))}function wy(e,n,i){if((Lt&6)!==0)throw Error(s(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Er(e,n),f=o?a1(e,n):_d(e,n,!0),m=o;do{if(f===0){il&&!o&&Ms(e,n,0,!1);break}else{if(i=e.current.alternate,m&&!n1(i)){f=_d(e,n,!1),m=!1;continue}if(f===2){if(m=n,e.errorRecoveryDisabledLanes&m)var w=0;else w=e.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){n=w;e:{var C=e;f=hu;var U=C.current.memoizedState.isDehydrated;if(U&&(ll(C,w).flags|=256),w=_d(C,w,!1),w!==2){if(dd&&!U){C.errorRecoveryDisabledLanes|=m,wo|=m,f=4;break e}m=Qr,Qr=f,m!==null&&(Qr===null?Qr=m:Qr.push.apply(Qr,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){ll(e,0),Ms(e,n,0,!0);break}e:{switch(o=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ms(o,n,ga,!js);break e;case 2:Qr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=jc+300-$n(),10<f)){if(Ms(o,n,ga,!js),ea(o,0,!0)!==0)break e;Yi=n,o.timeoutHandle=ev(Ty.bind(null,o,i,Qr,Ic,pd,n,ga,wo,sl,js,m,"Throttled",-0,0),f);break e}Ty(o,i,Qr,Ic,pd,n,ga,wo,sl,js,m,null,-0,0)}}break}while(!0);gi(e)}function Ty(e,n,i,o,f,m,w,C,U,he,ve,Ee,me,ge){if(e.timeoutHandle=-1,Ee=n.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pr},gy(n,m,Ee);var Ye=(m&62914560)===m?jc-$n():(m&4194048)===m?_y-$n():0;if(Ye=U1(Ee,Ye),Ye!==null){Yi=m,e.cancelPendingCommit=Ye(Iy.bind(null,e,n,m,i,o,f,w,C,U,ve,Ee,null,me,ge)),Ms(e,m,w,!he);return}}Iy(e,n,m,i,o,f,w,C,U)}function n1(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var f=i[o],m=f.getSnapshot;f=f.value;try{if(!gr(m(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ms(e,n,i,o){n&=~md,n&=~wo,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var f=n;0<f;){var m=31-Be(f),w=1<<m;o[m]=-1,f&=~w}i!==0&&xa(e,i,n)}function Oc(){return(Lt&6)===0?(du(0),!1):!0}function bd(){if(Et!==null){if(Yt===0)var e=Et.return;else e=Et,Pi=mo=null,Vf(e),Jo=null,Xl=0,e=Et;for(;e!==null;)ty(e.alternate,e),e=e.return;Et=null}}function ll(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,E1(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Yi=0,bd(),Wt=e,Et=i=Vi(e.current,null),Tt=n,Yt=0,pa=null,js=!1,il=Er(e,n),dd=!1,sl=ga=md=wo=Ds=En=0,Qr=hu=null,pd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var f=31-Be(o),m=1<<f;n|=e[f],o&=~m}return Qi=n,er(),i}function Sy(e,n){gt=null,J.H=ru,n===Zo||n===lc?(n=Bp(),Yt=3):n===wf?(n=Bp(),Yt=4):Yt=n===Zf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,pa=n,Et===null&&(En=1,Ec(e,Da(n,e.current)))}function Ay(){var e=da.current;return e===null?!0:(Tt&4194048)===Tt?Va===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?e===Va:!1}function Ny(){var e=J.H;return J.H=ru,e===null?ru:e}function Ry(){var e=J.A;return J.A=e1,e}function Mc(){En=4,js||(Tt&4194048)!==Tt&&da.current!==null||(il=!0),(Ds&134217727)===0&&(wo&134217727)===0||Wt===null||Ms(Wt,Tt,ga,!1)}function _d(e,n,i){var o=Lt;Lt|=2;var f=Ny(),m=Ry();(Wt!==e||Tt!==n)&&(Ic=null,ll(e,n)),n=!1;var w=En;e:do try{if(Yt!==0&&Et!==null){var C=Et,U=pa;switch(Yt){case 8:bd(),w=6;break e;case 3:case 2:case 9:case 6:da.current===null&&(n=!0);var he=Yt;if(Yt=0,pa=null,ul(e,C,U,he),i&&il){w=0;break e}break;default:he=Yt,Yt=0,pa=null,ul(e,C,U,he)}}r1(),w=En;break}catch(ve){Sy(e,ve)}while(!0);return n&&e.shellSuspendCounter++,Pi=mo=null,Lt=o,J.H=f,J.A=m,Et===null&&(Wt=null,Tt=0,er()),w}function r1(){for(;Et!==null;)Cy(Et)}function a1(e,n){var i=Lt;Lt|=2;var o=Ny(),f=Ry();Wt!==e||Tt!==n?(Ic=null,Dc=$n()+500,ll(e,n)):il=Er(e,n);e:do try{if(Yt!==0&&Et!==null){n=Et;var m=pa;t:switch(Yt){case 1:Yt=0,pa=null,ul(e,n,m,1);break;case 2:case 9:if(zp(m)){Yt=0,pa=null,jy(n);break}n=function(){Yt!==2&&Yt!==9||Wt!==e||(Yt=7),gi(e)},m.then(n,n);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:zp(m)?(Yt=0,pa=null,jy(n)):(Yt=0,pa=null,ul(e,n,m,7));break;case 5:var w=null;switch(Et.tag){case 26:w=Et.memoizedState;case 5:case 27:var C=Et;if(w?pv(w):C.stateNode.complete){Yt=0,pa=null;var U=C.sibling;if(U!==null)Et=U;else{var he=C.return;he!==null?(Et=he,Vc(he)):Et=null}break t}}Yt=0,pa=null,ul(e,n,m,5);break;case 6:Yt=0,pa=null,ul(e,n,m,6);break;case 8:bd(),En=6;break e;default:throw Error(s(462))}}i1();break}catch(ve){Sy(e,ve)}while(!0);return Pi=mo=null,J.H=o,J.A=f,Lt=i,Et!==null?0:(Wt=null,Tt=0,er(),En)}function i1(){for(;Et!==null&&!Lo();)Cy(Et)}function Cy(e){var n=Wg(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,n===null?Vc(e):Et=n}function jy(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Qg(i,n,n.pendingProps,n.type,void 0,Tt);break;case 11:n=Qg(i,n,n.pendingProps,n.type.render,n.ref,Tt);break;case 5:Vf(n);default:ty(i,n),n=Et=Rp(n,Qi),n=Wg(i,n,Qi)}e.memoizedProps=e.pendingProps,n===null?Vc(e):Et=n}function ul(e,n,i,o){Pi=mo=null,Vf(n),Jo=null,Xl=0;var f=n.return;try{if(Qx(e,f,n,i,Tt)){En=1,Ec(e,Da(i,e.current)),Et=null;return}}catch(m){if(f!==null)throw Et=f,m;En=1,Ec(e,Da(i,e.current)),Et=null;return}n.flags&32768?(jt||o===1?e=!0:il||(Tt&536870912)!==0?e=!1:(js=e=!0,(o===2||o===9||o===3||o===6)&&(o=da.current,o!==null&&o.tag===13&&(o.flags|=16384))),Dy(n,e)):Vc(n)}function Vc(e){var n=e;do{if((n.flags&32768)!==0){Dy(n,js);return}e=n.return;var i=$x(n.alternate,n,Qi);if(i!==null){Et=i;return}if(n=n.sibling,n!==null){Et=n;return}Et=n=e}while(n!==null);En===0&&(En=5)}function Dy(e,n){do{var i=Zx(e.alternate,e);if(i!==null){i.flags&=32767,Et=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Et=e;return}Et=e=i}while(e!==null);En=6,Et=null}function Iy(e,n,i,o,f,m,w,C,U){e.cancelPendingCommit=null;do kc();while(Gn!==0);if((Lt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=pt,to(e,i,m,w,C,U),e===Wt&&(Et=Wt=null,Tt=0),ol=n,Os=e,Yi=i,gd=m,yd=f,xy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,u1(ba,function(){return Py(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=J.T,J.T=null,f=Ae.p,Ae.p=2,w=Lt,Lt|=4;try{Jx(e,n,i)}finally{Lt=w,Ae.p=f,J.T=o}}Gn=1,Oy(),My(),Vy()}}function Oy(){if(Gn===1){Gn=0;var e=Os,n=ol,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=J.T,J.T=null;var o=Ae.p;Ae.p=2;var f=Lt;Lt|=4;try{dy(n,e);var m=Id,w=S(e.containerInfo),C=m.focusedElem,U=m.selectionRange;if(w!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(U!==null&&R(C)){var he=U.start,ve=U.end;if(ve===void 0&&(ve=he),"selectionStart"in C)C.selectionStart=he,C.selectionEnd=Math.min(ve,C.value.length);else{var Ee=C.ownerDocument||document,me=Ee&&Ee.defaultView||window;if(me.getSelection){var ge=me.getSelection(),Ye=C.textContent.length,nt=Math.min(U.start,Ye),Jt=U.end===void 0?nt:Math.min(U.end,Ye);!ge.extend&&nt>Jt&&(w=Jt,Jt=nt,nt=w);var ae=y(C,nt),Y=y(C,Jt);if(ae&&Y&&(ge.rangeCount!==1||ge.anchorNode!==ae.node||ge.anchorOffset!==ae.offset||ge.focusNode!==Y.node||ge.focusOffset!==Y.offset)){var ce=Ee.createRange();ce.setStart(ae.node,ae.offset),ge.removeAllRanges(),nt>Jt?(ge.addRange(ce),ge.extend(Y.node,Y.offset)):(ce.setEnd(Y.node,Y.offset),ge.addRange(ce))}}}}for(Ee=[],ge=C;ge=ge.parentNode;)ge.nodeType===1&&Ee.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Ee.length;C++){var _e=Ee[C];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Yc=!!Dd,Id=Dd=null}finally{Lt=f,Ae.p=o,J.T=i}}e.current=n,Gn=2}}function My(){if(Gn===2){Gn=0;var e=Os,n=ol,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=J.T,J.T=null;var o=Ae.p;Ae.p=2;var f=Lt;Lt|=4;try{ly(e,n.alternate,n)}finally{Lt=f,Ae.p=o,J.T=i}}Gn=3}}function Vy(){if(Gn===4||Gn===3){Gn=0,ri();var e=Os,n=ol,i=Yi,o=xy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Gn=5:(Gn=0,ol=Os=null,ky(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Is=null),Dr(i),n=n.stateNode,Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(fr,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=J.T,f=Ae.p,Ae.p=2,J.T=null;try{for(var m=e.onRecoverableError,w=0;w<o.length;w++){var C=o[w];m(C.value,{componentStack:C.stack})}}finally{J.T=n,Ae.p=f}}(Yi&3)!==0&&kc(),gi(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===vd?fu++:(fu=0,vd=e):fu=0,du(0)}}function ky(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ql(n)))}function kc(){return Oy(),My(),Vy(),Py()}function Py(){if(Gn!==5)return!1;var e=Os,n=gd;gd=0;var i=Dr(Yi),o=J.T,f=Ae.p;try{Ae.p=32>i?32:i,J.T=null,i=yd,yd=null;var m=Os,w=Yi;if(Gn=0,ol=Os=null,Yi=0,(Lt&6)!==0)throw Error(s(331));var C=Lt;if(Lt|=4,vy(m.current),py(m,m.current,w,i),Lt=C,du(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(fr,m)}catch{}return!0}finally{Ae.p=f,J.T=o,ky(e,n)}}function Ly(e,n,i){n=Da(i,n),n=$f(e.stateNode,n,2),e=As(e,n,2),e!==null&&(jr(e,2),gi(e))}function Xt(e,n,i){if(e.tag===3)Ly(e,e,i);else for(;n!==null;){if(n.tag===3){Ly(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Is===null||!Is.has(o))){e=Da(i,e),i=zg(2),o=As(n,i,2),o!==null&&(Ug(i,o,n,e),jr(o,2),gi(o));break}}n=n.return}}function xd(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new t1;var f=new Set;o.set(n,f)}else f=o.get(n),f===void 0&&(f=new Set,o.set(n,f));f.has(i)||(dd=!0,f.add(i),e=s1.bind(null,e,n,i),n.then(e,e))}function s1(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Wt===e&&(Tt&i)===i&&(En===4||En===3&&(Tt&62914560)===Tt&&300>$n()-jc?(Lt&2)===0&&ll(e,0):md|=i,sl===Tt&&(sl=0)),gi(e)}function zy(e,n){n===0&&(n=zo()),e=un(e,n),e!==null&&(jr(e,n),gi(e))}function o1(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),zy(e,i)}function l1(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),zy(e,i)}function u1(e,n){return Mt(e,n)}var Pc=null,cl=null,Ed=!1,Lc=!1,wd=!1,Vs=0;function gi(e){e!==cl&&e.next===null&&(cl===null?Pc=cl=e:cl=cl.next=e),Lc=!0,Ed||(Ed=!0,h1())}function du(e,n){if(!wd&&Lc){wd=!0;do for(var i=!1,o=Pc;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var w=o.suspendedLanes,C=o.pingedLanes;m=(1<<31-Be(42|e)+1)-1,m&=f&~(w&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Fy(o,m))}else m=Tt,m=ea(o,o===Wt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Er(o,m)||(i=!0,Fy(o,m));o=o.next}while(i);wd=!1}}function c1(){Uy()}function Uy(){Lc=Ed=!1;var e=0;Vs!==0&&x1()&&(e=Vs);for(var n=$n(),i=null,o=Pc;o!==null;){var f=o.next,m=By(o,n);m===0?(o.next=null,i===null?Pc=f:i.next=f,f===null&&(cl=i)):(i=o,(e!==0||(m&3)!==0)&&(Lc=!0)),o=f}Gn!==0&&Gn!==5||du(e),Vs!==0&&(Vs=0)}function By(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var w=31-Be(m),C=1<<w,U=f[w];U===-1?((C&i)===0||(C&o)!==0)&&(f[w]=Ul(C,n)):U<=n&&(e.expiredLanes|=C),m&=~C}if(n=Wt,i=Tt,i=ea(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&wn(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Er(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&wn(o),Dr(i)){case 2:case 8:i=Wr;break;case 32:i=ba;break;case 268435456:i=rs;break;default:i=ba}return o=qy.bind(null,e),i=Mt(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&wn(o),e.callbackPriority=2,e.callbackNode=null,2}function qy(e,n){if(Gn!==0&&Gn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(kc()&&e.callbackNode!==i)return null;var o=Tt;return o=ea(e,e===Wt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(wy(e,o,n),By(e,$n()),e.callbackNode!=null&&e.callbackNode===i?qy.bind(null,e):null)}function Fy(e,n){if(kc())return null;wy(e,n,!0)}function h1(){w1(function(){(Lt&6)!==0?Mt(Jr,c1):Uy()})}function Td(){if(Vs===0){var e=Xo;e===0&&(e=ke,ke<<=1,(ke&261888)===0&&(ke=256)),Vs=e}return Vs}function Hy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:la(""+e)}function Ky(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function f1(e,n,i,o,f){if(n==="submit"&&i&&i.stateNode===f){var m=Hy((f[nn]||null).action),w=o.submitter;w&&(n=(n=w[nn]||null)?Hy(n.formAction):w.getAttribute("formAction"),n!==null&&(m=n,w=null));var C=new Sa("action","action",null,o,f);e.push({event:C,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Vs!==0){var U=w?Ky(f,w):new FormData(f);Hf(i,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(C.preventDefault(),U=w?Ky(f,w):new FormData(f),Hf(i,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var Sd=0;Sd<Pe.length;Sd++){var Ad=Pe[Sd],d1=Ad.toLowerCase(),m1=Ad[0].toUpperCase()+Ad.slice(1);je(d1,"on"+m1)}je(ue,"onAnimationEnd"),je(de,"onAnimationIteration"),je(ye,"onAnimationStart"),je("dblclick","onDoubleClick"),je("focusin","onFocus"),je("focusout","onBlur"),je(xe,"onTransitionRun"),je(De,"onTransitionStart"),je(ze,"onTransitionCancel"),je(Ce,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Or("onBeforeInput",["compositionend","keypress","textInput","paste"]),Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function Gy(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],f=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var w=o.length-1;0<=w;w--){var C=o[w],U=C.instance,he=C.currentTarget;if(C=C.listener,U!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=he;try{m(f)}catch(ve){qe(ve)}f.currentTarget=null,m=U}else for(w=0;w<o.length;w++){if(C=o[w],U=C.instance,he=C.currentTarget,C=C.listener,U!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=he;try{m(f)}catch(ve){qe(ve)}f.currentTarget=null,m=U}}}}function wt(e,n){var i=n[qa];i===void 0&&(i=n[qa]=new Set);var o=e+"__bubble";i.has(o)||(Qy(n,e,2,!1),i.add(o))}function Nd(e,n,i){var o=0;n&&(o|=4),Qy(i,e,o,n)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Rd(e){if(!e[zc]){e[zc]=!0,Ea.forEach(function(i){i!=="selectionchange"&&(p1.has(i)||Nd(i,!1,e),Nd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[zc]||(n[zc]=!0,Nd("selectionchange",!1,n))}}function Qy(e,n,i,o){switch(Ev(n)){case 2:var f=F1;break;case 8:f=H1;break;default:f=Fd}i=f.bind(null,n,i,e),f=void 0,!Ci||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Cd(e,n,i,o,f){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var w=o.tag;if(w===3||w===4){var C=o.stateNode.containerInfo;if(C===f)break;if(w===4)for(w=o.return;w!==null;){var U=w.tag;if((U===3||U===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;C!==null;){if(w=Ir(C),w===null)return;if(U=w.tag,U===5||U===6||U===26||U===27){o=m=w;continue e}C=C.parentNode}}o=o.return}Pr(function(){var he=m,ve=wr(i),Ee=[];e:{var me=Ve.get(e);if(me!==void 0){var ge=Sa,Ye=e;switch(e){case"keypress":if(Ga(i)===0)break e;case"keydown":case"keyup":ge=Ii;break;case"focusin":Ye="focus",ge=Ra;break;case"focusout":Ye="blur",ge=Ra;break;case"beforeblur":case"afterblur":ge=Ra;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=x;break;case ue:case de:case ye:ge=so;break;case Ce:ge=j;break;case"scroll":case"scrollend":ge=li;break;case"wheel":ge=pe;break;case"copy":case"cut":case"paste":ge=Xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Ca;break;case"toggle":case"beforetoggle":ge=ut}var nt=(n&4)!==0,Jt=!nt&&(e==="scroll"||e==="scrollend"),ae=nt?me!==null?me+"Capture":null:me;nt=[];for(var Y=he,ce;Y!==null;){var _e=Y;if(ce=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||ce===null||ae===null||(_e=Tr(Y,ae),_e!=null&&nt.push(pu(Y,_e,ce))),Jt)break;Y=Y.return}0<nt.length&&(me=new ge(me,Ye,null,i,ve),Ee.push({event:me,listeners:nt}))}}if((n&7)===0){e:{if(me=e==="mouseover"||e==="pointerover",ge=e==="mouseout"||e==="pointerout",me&&i!==kr&&(Ye=i.relatedTarget||i.fromElement)&&(Ir(Ye)||Ye[Kn]))break e;if((ge||me)&&(me=ve.window===ve?ve:(me=ve.ownerDocument)?me.defaultView||me.parentWindow:window,ge?(Ye=i.relatedTarget||i.toElement,ge=he,Ye=Ye?Ir(Ye):null,Ye!==null&&(Jt=u(Ye),nt=Ye.tag,Ye!==Jt||nt!==5&&nt!==27&&nt!==6)&&(Ye=null)):(ge=null,Ye=he),ge!==Ye)){if(nt=ji,_e="onMouseLeave",ae="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(nt=Ca,_e="onPointerLeave",ae="onPointerEnter",Y="pointer"),Jt=ge==null?me:An(ge),ce=Ye==null?me:An(Ye),me=new nt(_e,Y+"leave",ge,i,ve),me.target=Jt,me.relatedTarget=ce,_e=null,Ir(ve)===he&&(nt=new nt(ae,Y+"enter",Ye,i,ve),nt.target=ce,nt.relatedTarget=Jt,_e=nt),Jt=_e,ge&&Ye)t:{for(nt=g1,ae=ge,Y=Ye,ce=0,_e=ae;_e;_e=nt(_e))ce++;_e=0;for(var et=Y;et;et=nt(et))_e++;for(;0<ce-_e;)ae=nt(ae),ce--;for(;0<_e-ce;)Y=nt(Y),_e--;for(;ce--;){if(ae===Y||Y!==null&&ae===Y.alternate){nt=ae;break t}ae=nt(ae),Y=nt(Y)}nt=null}else nt=null;ge!==null&&Yy(Ee,me,ge,nt,!1),Ye!==null&&Jt!==null&&Yy(Ee,Jt,Ye,nt,!0)}}e:{if(me=he?An(he):window,ge=me.nodeName&&me.nodeName.toLowerCase(),ge==="select"||ge==="input"&&me.type==="file")var kt=uo;else if(qo(me))if(ja)kt=bs;else{kt=Mi;var Xe=nc}else ge=me.nodeName,!ge||ge.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?he&&ls(he.elementType)&&(kt=uo):kt=Fl;if(kt&&(kt=kt(e,he))){ql(Ee,kt,i,ve);break e}Xe&&Xe(e,me,he),e==="focusout"&&he&&me.type==="number"&&he.memoizedProps.value!=null&&Ri(me,"number",me.value)}switch(Xe=he?An(he):window,e){case"focusin":(qo(Xe)||Xe.contentEditable==="true")&&(L=Xe,H=he,K=null);break;case"focusout":K=H=L=null;break;case"mousedown":te=!0;break;case"contextmenu":case"mouseup":case"dragend":te=!1,q(Ee,i,ve);break;case"selectionchange":if(D)break;case"keydown":case"keyup":q(Ee,i,ve)}var vt;if(Ct)e:{switch(e){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Oi?hi(e,i)&&(St="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(St="onCompositionStart");St&&(qr&&i.locale!=="ko"&&(Oi||St!=="onCompositionStart"?St==="onCompositionEnd"&&Oi&&(vt=Ka()):(Lr=ve,us="value"in Lr?Lr.value:Lr.textContent,Oi=!0)),Xe=Uc(he,St),0<Xe.length&&(St=new zr(St,e,null,i,ve),Ee.push({event:St,listeners:Xe}),vt?St.data=vt:(vt=gs(i),vt!==null&&(St.data=vt)))),(vt=Br?Wu(e,i):lf(e,i))&&(St=Uc(he,"onBeforeInput"),0<St.length&&(Xe=new zr("onBeforeInput","beforeinput",null,i,ve),Ee.push({event:Xe,listeners:St}),Xe.data=vt)),f1(Ee,e,he,i,ve)}Gy(Ee,n)})}function pu(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Uc(e,n){for(var i=n+"Capture",o=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Tr(e,i),f!=null&&o.unshift(pu(e,f,m)),f=Tr(e,n),f!=null&&o.push(pu(e,f,m))),e.tag===3)return o;e=e.return}return[]}function g1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Yy(e,n,i,o,f){for(var m=n._reactName,w=[];i!==null&&i!==o;){var C=i,U=C.alternate,he=C.stateNode;if(C=C.tag,U!==null&&U===o)break;C!==5&&C!==26&&C!==27||he===null||(U=he,f?(he=Tr(i,m),he!=null&&w.unshift(pu(i,he,U))):f||(he=Tr(i,m),he!=null&&w.push(pu(i,he,U)))),i=i.return}w.length!==0&&e.push({event:n,listeners:w})}var y1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function Xy(e){return(typeof e=="string"?e:""+e).replace(y1,`
`).replace(v1,"")}function $y(e,n){return n=Xy(n),Xy(e)===n}function Zt(e,n,i,o,f,m){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||sr(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&sr(e,""+o);break;case"className":mr(e,"class",o);break;case"tabIndex":mr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(e,i,o);break;case"style":os(e,o,m);break;case"data":if(n!=="object"){mr(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=la(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(n!=="input"&&Zt(e,n,"name",f.name,f,null),Zt(e,n,"formEncType",f.formEncType,f,null),Zt(e,n,"formMethod",f.formMethod,f,null),Zt(e,n,"formTarget",f.formTarget,f,null)):(Zt(e,n,"encType",f.encType,f,null),Zt(e,n,"method",f.method,f,null),Zt(e,n,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=la(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=pr);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=la(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":wt("beforetoggle",e),wt("toggle",e),mt(e,"popover",o);break;case"xlinkActuate":pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":pn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":pn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":pn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":pn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":mt(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Bo.get(i)||i,mt(e,i,o))}}function jd(e,n,i,o,f,m){switch(i){case"style":os(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?sr(e,o):(typeof o=="number"||typeof o=="bigint")&&sr(e,""+o);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ii.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),m=e[nn]||null,m=m!=null?m[i]:null,typeof m=="function"&&e.removeEventListener(n,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,f);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):mt(e,i,o)}}}function cr(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var o=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var w=i[m];if(w!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,m,w,i,null)}}f&&Zt(e,n,"srcSet",i.srcSet,i,null),o&&Zt(e,n,"src",i.src,i,null);return;case"input":wt("invalid",e);var C=m=w=f=null,U=null,he=null;for(o in i)if(i.hasOwnProperty(o)){var ve=i[o];if(ve!=null)switch(o){case"name":f=ve;break;case"type":w=ve;break;case"checked":U=ve;break;case"defaultChecked":he=ve;break;case"value":m=ve;break;case"defaultValue":C=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(s(137,n));break;default:Zt(e,n,o,ve,i,null)}}ss(e,m,C,U,he,w,f,!1);return;case"select":wt("invalid",e),o=w=m=null;for(f in i)if(i.hasOwnProperty(f)&&(C=i[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":w=C;break;case"multiple":o=C;default:Zt(e,n,f,C,i,null)}n=m,i=w,e.multiple=!!o,n!=null?sa(e,!!o,n,!1):i!=null&&sa(e,!!o,i,!0);return;case"textarea":wt("invalid",e),m=f=o=null;for(w in i)if(i.hasOwnProperty(w)&&(C=i[w],C!=null))switch(w){case"value":o=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Zt(e,n,w,C,i,null)}oa(e,o,f,m);return;case"option":for(U in i)if(i.hasOwnProperty(U)&&(o=i[U],o!=null))switch(U){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Zt(e,n,U,o,i,null)}return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(o=0;o<mu.length;o++)wt(mu[o],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in i)if(i.hasOwnProperty(he)&&(o=i[he],o!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,he,o,i,null)}return;default:if(ls(n)){for(ve in i)i.hasOwnProperty(ve)&&(o=i[ve],o!==void 0&&jd(e,n,ve,o,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(o=i[C],o!=null&&Zt(e,n,C,o,i,null))}function b1(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,C=null,U=null,he=null,ve=null;for(ge in i){var Ee=i[ge];if(i.hasOwnProperty(ge)&&Ee!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":U=Ee;default:o.hasOwnProperty(ge)||Zt(e,n,ge,null,o,Ee)}}for(var me in o){var ge=o[me];if(Ee=i[me],o.hasOwnProperty(me)&&(ge!=null||Ee!=null))switch(me){case"type":m=ge;break;case"name":f=ge;break;case"checked":he=ge;break;case"defaultChecked":ve=ge;break;case"value":w=ge;break;case"defaultValue":C=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,n));break;default:ge!==Ee&&Zt(e,n,me,ge,o,Ee)}}ia(e,w,C,U,he,ve,m,f);return;case"select":ge=w=C=me=null;for(m in i)if(U=i[m],i.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ge=U;default:o.hasOwnProperty(m)||Zt(e,n,m,null,o,U)}for(f in o)if(m=o[f],U=i[f],o.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":me=m;break;case"defaultValue":C=m;break;case"multiple":w=m;default:m!==U&&Zt(e,n,f,m,o,U)}n=C,i=w,o=ge,me!=null?sa(e,!!i,me,!1):!!o!=!!i&&(n!=null?sa(e,!!i,n,!0):sa(e,!!i,i?[]:"",!1));return;case"textarea":ge=me=null;for(C in i)if(f=i[C],i.hasOwnProperty(C)&&f!=null&&!o.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Zt(e,n,C,null,o,f)}for(w in o)if(f=o[w],m=i[w],o.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":me=f;break;case"defaultValue":ge=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Zt(e,n,w,f,o,m)}ao(e,me,ge);return;case"option":for(var Ye in i)if(me=i[Ye],i.hasOwnProperty(Ye)&&me!=null&&!o.hasOwnProperty(Ye))switch(Ye){case"selected":e.selected=!1;break;default:Zt(e,n,Ye,null,o,me)}for(U in o)if(me=o[U],ge=i[U],o.hasOwnProperty(U)&&me!==ge&&(me!=null||ge!=null))switch(U){case"selected":e.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:Zt(e,n,U,me,o,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in i)me=i[nt],i.hasOwnProperty(nt)&&me!=null&&!o.hasOwnProperty(nt)&&Zt(e,n,nt,null,o,me);for(he in o)if(me=o[he],ge=i[he],o.hasOwnProperty(he)&&me!==ge&&(me!=null||ge!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,n));break;default:Zt(e,n,he,me,o,ge)}return;default:if(ls(n)){for(var Jt in i)me=i[Jt],i.hasOwnProperty(Jt)&&me!==void 0&&!o.hasOwnProperty(Jt)&&jd(e,n,Jt,void 0,o,me);for(ve in o)me=o[ve],ge=i[ve],!o.hasOwnProperty(ve)||me===ge||me===void 0&&ge===void 0||jd(e,n,ve,me,o,ge);return}}for(var ae in i)me=i[ae],i.hasOwnProperty(ae)&&me!=null&&!o.hasOwnProperty(ae)&&Zt(e,n,ae,null,o,me);for(Ee in o)me=o[Ee],ge=i[Ee],!o.hasOwnProperty(Ee)||me===ge||me==null&&ge==null||Zt(e,n,Ee,me,o,ge)}function Zy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var f=i[o],m=f.transferSize,w=f.initiatorType,C=f.duration;if(m&&C&&Zy(w)){for(w=0,C=f.responseEnd,o+=1;o<i.length;o++){var U=i[o],he=U.startTime;if(he>C)break;var ve=U.transferSize,Ee=U.initiatorType;ve&&Zy(Ee)&&(U=U.responseEnd,w+=ve*(U<C?1:(C-he)/(U-he)))}if(--o,n+=8*(m+w)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Dd=null,Id=null;function Bc(e){return e.nodeType===9?e:e.ownerDocument}function Jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function x1(){var e=window.event;return e&&e.type==="popstate"?e===Md?!1:(Md=e,!0):(Md=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,E1=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,w1=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(e){return tv.resolve(null).then(e).catch(T1)}:ev;function T1(e){setTimeout(function(){throw e})}function ks(e){return e==="head"}function nv(e,n){var i=n,o=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(f),ml(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")gu(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,gu(i);for(var m=i.firstChild;m;){var w=m.nextSibling,C=m.nodeName;m[Zn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=w}}else i==="body"&&gu(e.ownerDocument.body);i=f}while(i);ml(n)}function rv(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Vd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Vd(i),Ni(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function S1(e,n,i,o){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Zn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=ka(e.nextSibling),e===null)break}return null}function A1(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ka(e.nextSibling),e===null))return null;return e}function av(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ka(e.nextSibling),e===null))return null;return e}function kd(e){return e.data==="$?"||e.data==="$~"}function Pd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function N1(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ka(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Ld=null;function iv(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return ka(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function sv(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function ov(e,n,i){switch(n=Bc(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function gu(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ni(e)}var Pa=new Map,lv=new Set;function qc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xi=Ae.d;Ae.d={f:R1,r:C1,D:j1,C:D1,L:I1,m:O1,X:V1,S:M1,M:k1};function R1(){var e=Xi.f(),n=Oc();return e||n}function C1(e){var n=Dt(e);n!==null&&n.tag===5&&n.type==="form"?Sg(n):Xi.r(e)}var hl=typeof document>"u"?null:document;function uv(e,n,i){var o=hl;if(o&&typeof n=="string"&&n){var f=Vn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),lv.has(f)||(lv.add(f),e={rel:e,crossOrigin:i,href:n},o.querySelector(f)===null&&(n=o.createElement("link"),cr(n,"link",e),mn(n),o.head.appendChild(n)))}}function j1(e){Xi.D(e),uv("dns-prefetch",e,null)}function D1(e,n){Xi.C(e,n),uv("preconnect",e,n)}function I1(e,n,i){Xi.L(e,n,i);var o=hl;if(o&&e&&n){var f='link[rel="preload"][as="'+Vn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Vn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Vn(i.imageSizes)+'"]')):f+='[href="'+Vn(e)+'"]';var m=f;switch(n){case"style":m=fl(e);break;case"script":m=dl(e)}Pa.has(m)||(e=N({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Pa.set(m,e),o.querySelector(f)!==null||n==="style"&&o.querySelector(yu(m))||n==="script"&&o.querySelector(vu(m))||(n=o.createElement("link"),cr(n,"link",e),mn(n),o.head.appendChild(n)))}}function O1(e,n){Xi.m(e,n);var i=hl;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Vn(o)+'"][href="'+Vn(e)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=dl(e)}if(!Pa.has(m)&&(e=N({rel:"modulepreload",href:e},n),Pa.set(m,e),i.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(vu(m)))return}o=i.createElement("link"),cr(o,"link",e),mn(o),i.head.appendChild(o)}}}function M1(e,n,i){Xi.S(e,n,i);var o=hl;if(o&&e){var f=Mn(o).hoistableStyles,m=fl(e);n=n||"default";var w=f.get(m);if(!w){var C={loading:0,preload:null};if(w=o.querySelector(yu(m)))C.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Pa.get(m))&&zd(e,i);var U=w=o.createElement("link");mn(U),cr(U,"link",e),U._p=new Promise(function(he,ve){U.onload=he,U.onerror=ve}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Fc(w,n,o)}w={type:"stylesheet",instance:w,count:1,state:C},f.set(m,w)}}}function V1(e,n){Xi.X(e,n);var i=hl;if(i&&e){var o=Mn(i).hoistableScripts,f=dl(e),m=o.get(f);m||(m=i.querySelector(vu(f)),m||(e=N({src:e,async:!0},n),(n=Pa.get(f))&&Ud(e,n),m=i.createElement("script"),mn(m),cr(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function k1(e,n){Xi.M(e,n);var i=hl;if(i&&e){var o=Mn(i).hoistableScripts,f=dl(e),m=o.get(f);m||(m=i.querySelector(vu(f)),m||(e=N({src:e,async:!0,type:"module"},n),(n=Pa.get(f))&&Ud(e,n),m=i.createElement("script"),mn(m),cr(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function cv(e,n,i,o){var f=(f=$e.current)?qc(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=fl(i.href),i=Mn(f).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=fl(i.href);var m=Mn(f).hoistableStyles,w=m.get(e);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,w),(m=f.querySelector(yu(e)))&&!m._p&&(w.instance=m,w.state.loading=5),Pa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Pa.set(e,i),m||P1(f,e,i,w.state))),n&&o===null)throw Error(s(528,""));return w}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=dl(i),i=Mn(f).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function fl(e){return'href="'+Vn(e)+'"'}function yu(e){return'link[rel="stylesheet"]['+e+"]"}function hv(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function P1(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),cr(n,"link",i),mn(n),e.head.appendChild(n))}function dl(e){return'[src="'+Vn(e)+'"]'}function vu(e){return"script[async]"+e}function fv(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Vn(i.href)+'"]');if(o)return n.instance=o,mn(o),o;var f=N({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),mn(o),cr(o,"style",f),Fc(o,i.precedence,e),n.instance=o;case"stylesheet":f=fl(i.href);var m=e.querySelector(yu(f));if(m)return n.state.loading|=4,n.instance=m,mn(m),m;o=hv(i),(f=Pa.get(f))&&zd(o,f),m=(e.ownerDocument||e).createElement("link"),mn(m);var w=m;return w._p=new Promise(function(C,U){w.onload=C,w.onerror=U}),cr(m,"link",o),n.state.loading|=4,Fc(m,i.precedence,e),n.instance=m;case"script":return m=dl(i.src),(f=e.querySelector(vu(m)))?(n.instance=f,mn(f),f):(o=i,(f=Pa.get(m))&&(o=N({},i),Ud(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),mn(f),cr(f,"link",o),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Fc(o,i.precedence,e));return n.instance}function Fc(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,w=0;w<o.length;w++){var C=o[w];if(C.dataset.precedence===n)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function zd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Hc=null;function dv(e,n,i){if(Hc===null){var o=new Map,f=Hc=new Map;f.set(i,o)}else f=Hc,o=f.get(i),o||(o=new Map,f.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var m=i[f];if(!(m[Zn]||m[Kt]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(n)||"";w=e+w;var C=o.get(w);C?C.push(m):o.set(w,[m])}}return o}function mv(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function L1(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function pv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function z1(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=fl(o.href),m=n.querySelector(yu(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Kc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=m,mn(m);return}m=n.ownerDocument||n,o=hv(o),(f=Pa.get(f))&&zd(o,f),m=m.createElement("link"),mn(m);var w=m;w._p=new Promise(function(C,U){w.onload=C,w.onerror=U}),cr(m,"link",o),i.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Kc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Bd=0;function U1(e,n){return e.stylesheets&&e.count===0&&Qc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Bd===0&&(Bd=62500*_1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Bd?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Gc=null;function Qc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Gc=new Map,n.forEach(B1,e),Gc=null,Kc.call(e))}function B1(e,n){if(!(n.state.loading&4)){var i=Gc.get(e);if(i)var o=i.get(null);else{i=new Map,Gc.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),o=w)}o&&i.set(null,o)}f=n.instance,w=f.getAttribute("data-precedence"),m=i.get(w)||o,m===o&&i.set(null,f),i.set(w,f),this.count++,o=Kc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var bu={$$typeof:fe,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function q1(e,n,i,o,f,m,w,C,U){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function gv(e,n,i,o,f,m,w,C,U,he,ve,Ee){return e=new q1(e,n,i,w,U,he,ve,Ee,C),n=1,m===!0&&(n|=24),m=fa(3,null,null,n),e.current=m,m.stateNode=e,n=_f(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:i,cache:n},Tf(m),e}function yv(e){return e?(e=Fr,e):Fr}function vv(e,n,i,o,f,m){f=yv(f),o.context===null?o.context=f:o.pendingContext=f,o=Ss(n),o.payload={element:i},m=m===void 0?null:m,m!==null&&(o.callback=m),i=As(e,o,n),i!==null&&(Yr(i,e,n),Zl(i,e,n))}function bv(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function qd(e,n){bv(e,n),(e=e.alternate)&&bv(e,n)}function _v(e){if(e.tag===13||e.tag===31){var n=un(e,67108864);n!==null&&Yr(n,e,67108864),qd(e,67108864)}}function xv(e){if(e.tag===13||e.tag===31){var n=ya();n=Si(n);var i=un(e,n);i!==null&&Yr(i,e,n),qd(e,n)}}var Yc=!0;function F1(e,n,i,o){var f=J.T;J.T=null;var m=Ae.p;try{Ae.p=2,Fd(e,n,i,o)}finally{Ae.p=m,J.T=f}}function H1(e,n,i,o){var f=J.T;J.T=null;var m=Ae.p;try{Ae.p=8,Fd(e,n,i,o)}finally{Ae.p=m,J.T=f}}function Fd(e,n,i,o){if(Yc){var f=Hd(o);if(f===null)Cd(e,n,o,Xc,i),wv(e,o);else if(G1(f,e,n,i,o))o.stopPropagation();else if(wv(e,o),n&4&&-1<K1.indexOf(e)){for(;f!==null;){var m=Dt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Cr(m.pendingLanes);if(w!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var U=1<<31-Be(w);C.entanglements[1]|=U,w&=~U}gi(m),(Lt&6)===0&&(Dc=$n()+500,du(0))}}break;case 31:case 13:C=un(m,2),C!==null&&Yr(C,m,2),Oc(),qd(m,2)}if(m=Hd(o),m===null&&Cd(e,n,o,Xc,i),m===f)break;f=m}f!==null&&o.stopPropagation()}else Cd(e,n,o,null,i)}}function Hd(e){return e=wr(e),Kd(e)}var Xc=null;function Kd(e){if(Xc=null,e=Ir(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=p(n),e!==null)return e;e=null}else if(i===31){if(e=_(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Xc=e,null}function Ev(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case Jr:return 2;case Wr:return 8;case ba:case Ei:return 32;case rs:return 268435456;default:return 32}default:return 32}}var Gd=!1,Ps=null,Ls=null,zs=null,_u=new Map,xu=new Map,Us=[],K1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(e,n){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":_u.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(n.pointerId)}}function Eu(e,n,i,o,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},n!==null&&(n=Dt(n),n!==null&&_v(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function G1(e,n,i,o,f){switch(n){case"focusin":return Ps=Eu(Ps,e,n,i,o,f),!0;case"dragenter":return Ls=Eu(Ls,e,n,i,o,f),!0;case"mouseover":return zs=Eu(zs,e,n,i,o,f),!0;case"pointerover":var m=f.pointerId;return _u.set(m,Eu(_u.get(m)||null,e,n,i,o,f)),!0;case"gotpointercapture":return m=f.pointerId,xu.set(m,Eu(xu.get(m)||null,e,n,i,o,f)),!0}return!1}function Tv(e){var n=Ir(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=p(i),n!==null){e.blockedOn=n,dr(e.priority,function(){xv(i)});return}}else if(n===31){if(n=_(i),n!==null){e.blockedOn=n,dr(e.priority,function(){xv(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $c(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Hd(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);kr=o,i.target.dispatchEvent(o),kr=null}else return n=Dt(i),n!==null&&_v(n),e.blockedOn=i,!1;n.shift()}return!0}function Sv(e,n,i){$c(e)&&i.delete(n)}function Q1(){Gd=!1,Ps!==null&&$c(Ps)&&(Ps=null),Ls!==null&&$c(Ls)&&(Ls=null),zs!==null&&$c(zs)&&(zs=null),_u.forEach(Sv),xu.forEach(Sv)}function Zc(e,n){e.blockedOn===n&&(e.blockedOn=null,Gd||(Gd=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Q1)))}var Jc=null;function Av(e){Jc!==e&&(Jc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jc===e&&(Jc=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],f=e[n+2];if(typeof o!="function"){if(Kd(o||i)===null)continue;break}var m=Dt(i);m!==null&&(e.splice(n,3),n-=3,Hf(m,{pending:!0,data:f,method:i.method,action:o},o,f))}}))}function ml(e){function n(U){return Zc(U,e)}Ps!==null&&Zc(Ps,e),Ls!==null&&Zc(Ls,e),zs!==null&&Zc(zs,e),_u.forEach(n),xu.forEach(n);for(var i=0;i<Us.length;i++){var o=Us[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Us.length&&(i=Us[0],i.blockedOn===null);)Tv(i),i.blockedOn===null&&Us.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var f=i[o],m=i[o+1],w=f[nn]||null;if(typeof m=="function")w||Av(i);else if(w){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[nn]||null)C=w.formAction;else if(Kd(f)!==null)continue}else C=w.action;typeof C=="function"?i[o+1]=C:(i.splice(o,3),o-=3),Av(i)}}}function Nv(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Qd(e){this._internalRoot=e}Wc.prototype.render=Qd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,o=ya();vv(i,o,e,n,null,null)},Wc.prototype.unmount=Qd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;vv(e.current,2,null,e,null,null),Oc(),n[Kn]=null}};function Wc(e){this._internalRoot=e}Wc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ai();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Us.length&&n!==0&&n<Us[i].priority;i++);Us.splice(i,0,e),i===0&&Tv(e)}};var Rv=t.version;if(Rv!=="19.2.0")throw Error(s(527,Rv,"19.2.0"));Ae.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var Y1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{fr=eh.inject(Y1),Tn=eh}catch{}}return Tu.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,o="",f=Vg,m=kg,w=Pg;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError)),n=gv(e,1,!1,null,null,i,o,null,f,m,w,Nv),e[Kn]=n.current,Rd(e),new Qd(n)},Tu.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var o=!1,f="",m=Vg,w=kg,C=Pg,U=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(U=i.formState)),n=gv(e,1,!0,n,i??null,o,f,U,m,w,C,Nv),n.context=yv(null),i=n.current,o=ya(),o=Si(o),f=Ss(o),f.callback=null,As(i,f,o),i=o,n.current.lanes=i,jr(n,i),gi(n),e[Kn]=n.current,Rd(e),new Wc(n)},Tu.version="19.2.0",Tu}var Lv;function iE(){if(Lv)return $d.exports;Lv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),$d.exports=aE(),$d.exports}var sE=iE();const oE=km(sE);var zv="popstate";function lE(a={}){function t(s,l){let{pathname:u,search:p,hash:_}=s.location;return hm("",{pathname:u,search:p,hash:_},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:Vu(l)}return cE(t,r,null,a)}function hn(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function za(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uE(){return Math.random().toString(36).substring(2,10)}function Uv(a,t){return{usr:a.state,key:a.key,idx:t}}function hm(a,t,r=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?jl(t):t,state:r,key:t&&t.key||s||uE()}}function Vu({pathname:a="/",search:t="",hash:r=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function jl(a){let t={};if(a){let r=a.indexOf("#");r>=0&&(t.hash=a.substring(r),a=a.substring(0,r));let s=a.indexOf("?");s>=0&&(t.search=a.substring(s),a=a.substring(0,s)),a&&(t.pathname=a)}return t}function cE(a,t,r,s={}){let{window:l=document.defaultView,v5Compat:u=!1}=s,p=l.history,_="POP",v=null,b=A();b==null&&(b=0,p.replaceState({...p.state,idx:b},""));function A(){return(p.state||{idx:null}).idx}function N(){_="POP";let B=A(),Q=B==null?null:B-b;b=B,v&&v({action:_,location:oe.location,delta:Q})}function O(B,Q){_="PUSH";let ee=hm(oe.location,B,Q);b=A()+1;let fe=Uv(ee,b),Se=oe.createHref(ee);try{p.pushState(fe,"",Se)}catch(Ue){if(Ue instanceof DOMException&&Ue.name==="DataCloneError")throw Ue;l.location.assign(Se)}u&&v&&v({action:_,location:oe.location,delta:1})}function $(B,Q){_="REPLACE";let ee=hm(oe.location,B,Q);b=A();let fe=Uv(ee,b),Se=oe.createHref(ee);p.replaceState(fe,"",Se),u&&v&&v({action:_,location:oe.location,delta:0})}function se(B){return hE(B)}let oe={get action(){return _},get location(){return a(l,p)},listen(B){if(v)throw new Error("A history only accepts one active listener");return l.addEventListener(zv,N),v=B,()=>{l.removeEventListener(zv,N),v=null}},createHref(B){return t(l,B)},createURL:se,encodeLocation(B){let Q=se(B);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:O,replace:$,go(B){return p.go(B)}};return oe}function hE(a,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),hn(r,"No window.location.(origin|href) available to create URL");let s=typeof a=="string"?a:Vu(a);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function db(a,t,r="/"){return fE(a,t,r,!1)}function fE(a,t,r,s){let l=typeof t=="string"?jl(t):t,u=Ji(l.pathname||"/",r);if(u==null)return null;let p=mb(a);dE(p);let _=null;for(let v=0;_==null&&v<p.length;++v){let b=TE(u);_=EE(p[v],b,s)}return _}function mb(a,t=[],r=[],s="",l=!1){let u=(p,_,v=l,b)=>{let A={relativePath:b===void 0?p.path||"":b,caseSensitive:p.caseSensitive===!0,childrenIndex:_,route:p};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(s)&&v)return;hn(A.relativePath.startsWith(s),`Absolute route path "${A.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(s.length)}let N=$i([s,A.relativePath]),O=r.concat(A);p.children&&p.children.length>0&&(hn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),mb(p.children,t,O,N,v)),!(p.path==null&&!p.index)&&t.push({path:N,score:_E(N,p.index),routesMeta:O})};return a.forEach((p,_)=>{if(p.path===""||!p.path?.includes("?"))u(p,_);else for(let v of pb(p.path))u(p,_,!0,v)}),t}function pb(a){let t=a.split("/");if(t.length===0)return[];let[r,...s]=t,l=r.endsWith("?"),u=r.replace(/\?$/,"");if(s.length===0)return l?[u,""]:[u];let p=pb(s.join("/")),_=[];return _.push(...p.map(v=>v===""?u:[u,v].join("/"))),l&&_.push(...p),_.map(v=>a.startsWith("/")&&v===""?"/":v)}function dE(a){a.sort((t,r)=>t.score!==r.score?r.score-t.score:xE(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var mE=/^:[\w-]+$/,pE=3,gE=2,yE=1,vE=10,bE=-2,Bv=a=>a==="*";function _E(a,t){let r=a.split("/"),s=r.length;return r.some(Bv)&&(s+=bE),t&&(s+=gE),r.filter(l=>!Bv(l)).reduce((l,u)=>l+(mE.test(u)?pE:u===""?yE:vE),s)}function xE(a,t){return a.length===t.length&&a.slice(0,-1).every((s,l)=>s===t[l])?a[a.length-1]-t[t.length-1]:0}function EE(a,t,r=!1){let{routesMeta:s}=a,l={},u="/",p=[];for(let _=0;_<s.length;++_){let v=s[_],b=_===s.length-1,A=u==="/"?t:t.slice(u.length)||"/",N=yh({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},A),O=v.route;if(!N&&b&&r&&!s[s.length-1].route.index&&(N=yh({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!N)return null;Object.assign(l,N.params),p.push({params:l,pathname:$i([u,N.pathname]),pathnameBase:CE($i([u,N.pathnameBase])),route:O}),N.pathnameBase!=="/"&&(u=$i([u,N.pathnameBase]))}return p}function yh(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,s]=wE(a.path,a.caseSensitive,a.end),l=t.match(r);if(!l)return null;let u=l[0],p=u.replace(/(.)\/+$/,"$1"),_=l.slice(1);return{params:s.reduce((b,{paramName:A,isOptional:N},O)=>{if(A==="*"){let se=_[O]||"";p=u.slice(0,u.length-se.length).replace(/(.)\/+$/,"$1")}const $=_[O];return N&&!$?b[A]=void 0:b[A]=($||"").replace(/%2F/g,"/"),b},{}),pathname:u,pathnameBase:p,pattern:a}}function wE(a,t=!1,r=!0){za(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,_,v)=>(s.push({paramName:_,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(s.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function TE(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return za(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function Ji(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=a.charAt(r);return s&&s!=="/"?null:a.slice(r)||"/"}var SE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AE=a=>SE.test(a);function NE(a,t="/"){let{pathname:r,search:s="",hash:l=""}=typeof a=="string"?jl(a):a,u;if(r)if(AE(r))u=r;else{if(r.includes("//")){let p=r;r=r.replace(/\/\/+/g,"/"),za(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${r}`)}r.startsWith("/")?u=qv(r.substring(1),"/"):u=qv(r,t)}else u=t;return{pathname:u,search:jE(s),hash:DE(l)}}function qv(a,t){let r=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function em(a,t,r,s){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RE(a){return a.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Pm(a){let t=RE(a);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function Lm(a,t,r,s=!1){let l;typeof a=="string"?l=jl(a):(l={...a},hn(!l.pathname||!l.pathname.includes("?"),em("?","pathname","search",l)),hn(!l.pathname||!l.pathname.includes("#"),em("#","pathname","hash",l)),hn(!l.search||!l.search.includes("#"),em("#","search","hash",l)));let u=a===""||l.pathname==="",p=u?"/":l.pathname,_;if(p==null)_=r;else{let N=t.length-1;if(!s&&p.startsWith("..")){let O=p.split("/");for(;O[0]==="..";)O.shift(),N-=1;l.pathname=O.join("/")}_=N>=0?t[N]:"/"}let v=NE(l,_),b=p&&p!=="/"&&p.endsWith("/"),A=(u||p===".")&&r.endsWith("/");return!v.pathname.endsWith("/")&&(b||A)&&(v.pathname+="/"),v}var $i=a=>a.join("/").replace(/\/\/+/g,"/"),CE=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),jE=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,DE=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function IE(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gb=["POST","PUT","PATCH","DELETE"];new Set(gb);var OE=["GET",...gb];new Set(OE);var Dl=ie.createContext(null);Dl.displayName="DataRouter";var Ph=ie.createContext(null);Ph.displayName="DataRouterState";ie.createContext(!1);var yb=ie.createContext({isTransitioning:!1});yb.displayName="ViewTransition";var ME=ie.createContext(new Map);ME.displayName="Fetchers";var VE=ie.createContext(null);VE.displayName="Await";var ni=ie.createContext(null);ni.displayName="Navigation";var Hu=ie.createContext(null);Hu.displayName="Location";var Ua=ie.createContext({outlet:null,matches:[],isDataRoute:!1});Ua.displayName="Route";var zm=ie.createContext(null);zm.displayName="RouteError";function kE(a,{relative:t}={}){hn(Il(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=ie.useContext(ni),{hash:l,pathname:u,search:p}=Ku(a,{relative:t}),_=u;return r!=="/"&&(_=u==="/"?r:$i([r,u])),s.createHref({pathname:_,search:p,hash:l})}function Il(){return ie.useContext(Hu)!=null}function ns(){return hn(Il(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(Hu).location}var vb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bb(a){ie.useContext(ni).static||ie.useLayoutEffect(a)}function Ol(){let{isDataRoute:a}=ie.useContext(Ua);return a?JE():PE()}function PE(){hn(Il(),"useNavigate() may be used only in the context of a <Router> component.");let a=ie.useContext(Dl),{basename:t,navigator:r}=ie.useContext(ni),{matches:s}=ie.useContext(Ua),{pathname:l}=ns(),u=JSON.stringify(Pm(s)),p=ie.useRef(!1);return bb(()=>{p.current=!0}),ie.useCallback((v,b={})=>{if(za(p.current,vb),!p.current)return;if(typeof v=="number"){r.go(v);return}let A=Lm(v,JSON.parse(u),l,b.relative==="path");a==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:$i([t,A.pathname])),(b.replace?r.replace:r.push)(A,b.state,b)},[t,r,u,l,a])}var LE=ie.createContext(null);function zE(a){let t=ie.useContext(Ua).outlet;return ie.useMemo(()=>t&&ie.createElement(LE.Provider,{value:a},t),[t,a])}function UE(){let{matches:a}=ie.useContext(Ua),t=a[a.length-1];return t?t.params:{}}function Ku(a,{relative:t}={}){let{matches:r}=ie.useContext(Ua),{pathname:s}=ns(),l=JSON.stringify(Pm(r));return ie.useMemo(()=>Lm(a,JSON.parse(l),s,t==="path"),[a,l,s,t])}function BE(a,t){return _b(a,t)}function _b(a,t,r,s,l){hn(Il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=ie.useContext(ni),{matches:p}=ie.useContext(Ua),_=p[p.length-1],v=_?_.params:{},b=_?_.pathname:"/",A=_?_.pathnameBase:"/",N=_&&_.route;{let ee=N&&N.path||"";xb(b,!N||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let O=ns(),$;if(t){let ee=typeof t=="string"?jl(t):t;hn(A==="/"||ee.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),$=ee}else $=O;let se=$.pathname||"/",oe=se;if(A!=="/"){let ee=A.replace(/^\//,"").split("/");oe="/"+se.replace(/^\//,"").split("/").slice(ee.length).join("/")}let B=db(a,{pathname:oe});za(N||B!=null,`No routes matched location "${$.pathname}${$.search}${$.hash}" `),za(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${$.pathname}${$.search}${$.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=GE(B&&B.map(ee=>Object.assign({},ee,{params:Object.assign({},v,ee.params),pathname:$i([A,u.encodeLocation?u.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?A:$i([A,u.encodeLocation?u.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),p,r,s,l);return t&&Q?ie.createElement(Hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...$},navigationType:"POP"}},Q):Q}function qE(){let a=ZE(),t=IE(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",a),p=ie.createElement(ie.Fragment,null,ie.createElement("p",null," Hey developer "),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:u},"ErrorBoundary")," or"," ",ie.createElement("code",{style:u},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},t),r?ie.createElement("pre",{style:l},r):null,p)}var FE=ie.createElement(qE,null),HE=class extends ie.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){this.props.onError?this.props.onError(a,t):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?ie.createElement(Ua.Provider,{value:this.props.routeContext},ie.createElement(zm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KE({routeContext:a,match:t,children:r}){let s=ie.useContext(Dl);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),ie.createElement(Ua.Provider,{value:a},r)}function GE(a,t=[],r=null,s=null,l=null){if(a==null){if(!r)return null;if(r.errors)a=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let u=a,p=r?.errors;if(p!=null){let A=u.findIndex(N=>N.route.id&&p?.[N.route.id]!==void 0);hn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),u=u.slice(0,Math.min(u.length,A+1))}let _=!1,v=-1;if(r)for(let A=0;A<u.length;A++){let N=u[A];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(v=A),N.route.id){let{loaderData:O,errors:$}=r,se=N.route.loader&&!O.hasOwnProperty(N.route.id)&&(!$||$[N.route.id]===void 0);if(N.route.lazy||se){_=!0,v>=0?u=u.slice(0,v+1):u=[u[0]];break}}}let b=r&&s?(A,N)=>{s(A,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:N})}:void 0;return u.reduceRight((A,N,O)=>{let $,se=!1,oe=null,B=null;r&&($=p&&N.route.id?p[N.route.id]:void 0,oe=N.route.errorElement||FE,_&&(v<0&&O===0?(xb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),se=!0,B=null):v===O&&(se=!0,B=N.route.hydrateFallbackElement||null)));let Q=t.concat(u.slice(0,O+1)),ee=()=>{let fe;return $?fe=oe:se?fe=B:N.route.Component?fe=ie.createElement(N.route.Component,null):N.route.element?fe=N.route.element:fe=A,ie.createElement(KE,{match:N,routeContext:{outlet:A,matches:Q,isDataRoute:r!=null},children:fe})};return r&&(N.route.ErrorBoundary||N.route.errorElement||O===0)?ie.createElement(HE,{location:r.location,revalidation:r.revalidation,component:oe,error:$,children:ee(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:b}):ee()},null)}function Um(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QE(a){let t=ie.useContext(Dl);return hn(t,Um(a)),t}function YE(a){let t=ie.useContext(Ph);return hn(t,Um(a)),t}function XE(a){let t=ie.useContext(Ua);return hn(t,Um(a)),t}function Bm(a){let t=XE(a),r=t.matches[t.matches.length-1];return hn(r.route.id,`${a} can only be used on routes that contain a unique "id"`),r.route.id}function $E(){return Bm("useRouteId")}function ZE(){let a=ie.useContext(zm),t=YE("useRouteError"),r=Bm("useRouteError");return a!==void 0?a:t.errors?.[r]}function JE(){let{router:a}=QE("useNavigate"),t=Bm("useNavigate"),r=ie.useRef(!1);return bb(()=>{r.current=!0}),ie.useCallback(async(l,u={})=>{za(r.current,vb),r.current&&(typeof l=="number"?a.navigate(l):await a.navigate(l,{fromRouteId:t,...u}))},[a,t])}var Fv={};function xb(a,t,r){!t&&!Fv[a]&&(Fv[a]=!0,za(!1,r))}ie.memo(WE);function WE({routes:a,future:t,state:r,unstable_onError:s}){return _b(a,void 0,r,s,t)}function ew({to:a,replace:t,state:r,relative:s}){hn(Il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=ie.useContext(ni);za(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=ie.useContext(Ua),{pathname:p}=ns(),_=Ol(),v=Lm(a,Pm(u),p,s==="path"),b=JSON.stringify(v);return ie.useEffect(()=>{_(JSON.parse(b),{replace:t,state:r,relative:s})},[_,b,s,t,r]),null}function Eb(a){return zE(a.context)}function Xr(a){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tw({basename:a="/",children:t=null,location:r,navigationType:s="POP",navigator:l,static:u=!1}){hn(!Il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),_=ie.useMemo(()=>({basename:p,navigator:l,static:u,future:{}}),[p,l,u]);typeof r=="string"&&(r=jl(r));let{pathname:v="/",search:b="",hash:A="",state:N=null,key:O="default"}=r,$=ie.useMemo(()=>{let se=Ji(v,p);return se==null?null:{location:{pathname:se,search:b,hash:A,state:N,key:O},navigationType:s}},[p,v,b,A,N,O,s]);return za($!=null,`<Router basename="${p}"> is not able to match the URL "${v}${b}${A}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:ie.createElement(ni.Provider,{value:_},ie.createElement(Hu.Provider,{children:t,value:$}))}function nw({children:a,location:t}){return BE(fm(a),t)}function fm(a,t=[]){let r=[];return ie.Children.forEach(a,(s,l)=>{if(!ie.isValidElement(s))return;let u=[...t,l];if(s.type===ie.Fragment){r.push.apply(r,fm(s.props.children,u));return}hn(s.type===Xr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=fm(s.props.children,u)),r.push(p)}),r}var oh="get",lh="application/x-www-form-urlencoded";function Lh(a){return a!=null&&typeof a.tagName=="string"}function rw(a){return Lh(a)&&a.tagName.toLowerCase()==="button"}function aw(a){return Lh(a)&&a.tagName.toLowerCase()==="form"}function iw(a){return Lh(a)&&a.tagName.toLowerCase()==="input"}function sw(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function ow(a,t){return a.button===0&&(!t||t==="_self")&&!sw(a)}var th=null;function lw(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var uw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tm(a){return a!=null&&!uw.has(a)?(za(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lh}"`),null):a}function cw(a,t){let r,s,l,u,p;if(aw(a)){let _=a.getAttribute("action");s=_?Ji(_,t):null,r=a.getAttribute("method")||oh,l=tm(a.getAttribute("enctype"))||lh,u=new FormData(a)}else if(rw(a)||iw(a)&&(a.type==="submit"||a.type==="image")){let _=a.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=a.getAttribute("formaction")||_.getAttribute("action");if(s=v?Ji(v,t):null,r=a.getAttribute("formmethod")||_.getAttribute("method")||oh,l=tm(a.getAttribute("formenctype"))||tm(_.getAttribute("enctype"))||lh,u=new FormData(_,a),!lw()){let{name:b,type:A,value:N}=a;if(A==="image"){let O=b?`${b}.`:"";u.append(`${O}x`,"0"),u.append(`${O}y`,"0")}else b&&u.append(b,N)}}else{if(Lh(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=oh,s=null,l=lh,p=a}return u&&l==="text/plain"&&(p=u,u=void 0),{action:s,method:r.toLowerCase(),encType:l,formData:u,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qm(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function hw(a,t,r){let s=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&Ji(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function fw(a,t){if(a.id in t)return t[a.id];try{let r=await import(a.module);return t[a.id]=r,r}catch(r){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dw(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function mw(a,t,r){let s=await Promise.all(a.map(async l=>{let u=t.routes[l.route.id];if(u){let p=await fw(u,r);return p.links?p.links():[]}return[]}));return vw(s.flat(1).filter(dw).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Hv(a,t,r,s,l,u){let p=(v,b)=>r[b]?v.route.id!==r[b].route.id:!0,_=(v,b)=>r[b].pathname!==v.pathname||r[b].route.path?.endsWith("*")&&r[b].params["*"]!==v.params["*"];return u==="assets"?t.filter((v,b)=>p(v,b)||_(v,b)):u==="data"?t.filter((v,b)=>{let A=s.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(p(v,b)||_(v,b))return!0;if(v.route.shouldRevalidate){let N=v.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function pw(a,t,{includeHydrateFallback:r}={}){return gw(a.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function gw(a){return[...new Set(a)]}function yw(a){let t={},r=Object.keys(a).sort();for(let s of r)t[s]=a[s];return t}function vw(a,t){let r=new Set;return new Set(t),a.reduce((s,l)=>{let u=JSON.stringify(yw(l));return r.has(u)||(r.add(u),s.push({key:u,link:l})),s},[])}function wb(){let a=ie.useContext(Dl);return qm(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function bw(){let a=ie.useContext(Ph);return qm(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Fm=ie.createContext(void 0);Fm.displayName="FrameworkContext";function Tb(){let a=ie.useContext(Fm);return qm(a,"You must render this element inside a <HydratedRouter> element"),a}function _w(a,t){let r=ie.useContext(Fm),[s,l]=ie.useState(!1),[u,p]=ie.useState(!1),{onFocus:_,onBlur:v,onMouseEnter:b,onMouseLeave:A,onTouchStart:N}=t,O=ie.useRef(null);ie.useEffect(()=>{if(a==="render"&&p(!0),a==="viewport"){let oe=Q=>{Q.forEach(ee=>{p(ee.isIntersecting)})},B=new IntersectionObserver(oe,{threshold:.5});return O.current&&B.observe(O.current),()=>{B.disconnect()}}},[a]),ie.useEffect(()=>{if(s){let oe=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(oe)}}},[s]);let $=()=>{l(!0)},se=()=>{l(!1),p(!1)};return r?a!=="intent"?[u,O,{}]:[u,O,{onFocus:Su(_,$),onBlur:Su(v,se),onMouseEnter:Su(b,$),onMouseLeave:Su(A,se),onTouchStart:Su(N,$)}]:[!1,O,{}]}function Su(a,t){return r=>{a&&a(r),r.defaultPrevented||t(r)}}function xw({page:a,...t}){let{router:r}=wb(),s=ie.useMemo(()=>db(r.routes,a,r.basename),[r.routes,a,r.basename]);return s?ie.createElement(ww,{page:a,matches:s,...t}):null}function Ew(a){let{manifest:t,routeModules:r}=Tb(),[s,l]=ie.useState([]);return ie.useEffect(()=>{let u=!1;return mw(a,t,r).then(p=>{u||l(p)}),()=>{u=!0}},[a,t,r]),s}function ww({page:a,matches:t,...r}){let s=ns(),{manifest:l,routeModules:u}=Tb(),{basename:p}=wb(),{loaderData:_,matches:v}=bw(),b=ie.useMemo(()=>Hv(a,t,v,l,s,"data"),[a,t,v,l,s]),A=ie.useMemo(()=>Hv(a,t,v,l,s,"assets"),[a,t,v,l,s]),N=ie.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let se=new Set,oe=!1;if(t.forEach(Q=>{let ee=l.routes[Q.route.id];!ee||!ee.hasLoader||(!b.some(fe=>fe.route.id===Q.route.id)&&Q.route.id in _&&u[Q.route.id]?.shouldRevalidate||ee.hasClientLoader?oe=!0:se.add(Q.route.id))}),se.size===0)return[];let B=hw(a,p,"data");return oe&&se.size>0&&B.searchParams.set("_routes",t.filter(Q=>se.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[B.pathname+B.search]},[p,_,s,l,b,t,a,u]),O=ie.useMemo(()=>pw(A,l),[A,l]),$=Ew(A);return ie.createElement(ie.Fragment,null,N.map(se=>ie.createElement("link",{key:se,rel:"prefetch",as:"fetch",href:se,...r})),O.map(se=>ie.createElement("link",{key:se,rel:"modulepreload",href:se,...r})),$.map(({key:se,link:oe})=>ie.createElement("link",{key:se,nonce:r.nonce,...oe})))}function Tw(...a){return t=>{a.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Sb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sb&&(window.__reactRouterVersion="7.9.6")}catch{}function Sw({basename:a,children:t,window:r}){let s=ie.useRef();s.current==null&&(s.current=lE({window:r,v5Compat:!0}));let l=s.current,[u,p]=ie.useState({action:l.action,location:l.location}),_=ie.useCallback(v=>{ie.startTransition(()=>p(v))},[p]);return ie.useLayoutEffect(()=>l.listen(_),[l,_]),ie.createElement(tw,{basename:a,children:t,location:u.location,navigationType:u.action,navigator:l})}var Ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zh=ie.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:l,reloadDocument:u,replace:p,state:_,target:v,to:b,preventScrollReset:A,viewTransition:N,...O},$){let{basename:se}=ie.useContext(ni),oe=typeof b=="string"&&Ab.test(b),B,Q=!1;if(typeof b=="string"&&oe&&(B=b,Sb))try{let P=new URL(window.location.href),I=b.startsWith("//")?new URL(P.protocol+b):new URL(b),z=Ji(I.pathname,se);I.origin===P.origin&&z!=null?b=z+I.search+I.hash:Q=!0}catch{za(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=kE(b,{relative:l}),[fe,Se,Ue]=_w(s,O),Ge=Cw(b,{replace:p,state:_,target:v,preventScrollReset:A,relative:l,viewTransition:N});function k(P){t&&t(P),P.defaultPrevented||Ge(P)}let M=ie.createElement("a",{...O,...Ue,href:B||ee,onClick:Q||u?t:k,ref:Tw($,Se),target:v,"data-discover":!oe&&r==="render"?"true":void 0});return fe&&!oe?ie.createElement(ie.Fragment,null,M,ie.createElement(xw,{page:ee})):M});zh.displayName="Link";var Aw=ie.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:l=!1,style:u,to:p,viewTransition:_,children:v,...b},A){let N=Ku(p,{relative:b.relative}),O=ns(),$=ie.useContext(Ph),{navigator:se,basename:oe}=ie.useContext(ni),B=$!=null&&Mw(N)&&_===!0,Q=se.encodeLocation?se.encodeLocation(N).pathname:N.pathname,ee=O.pathname,fe=$&&$.navigation&&$.navigation.location?$.navigation.location.pathname:null;r||(ee=ee.toLowerCase(),fe=fe?fe.toLowerCase():null,Q=Q.toLowerCase()),fe&&oe&&(fe=Ji(fe,oe)||fe);const Se=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let Ue=ee===Q||!l&&ee.startsWith(Q)&&ee.charAt(Se)==="/",Ge=fe!=null&&(fe===Q||!l&&fe.startsWith(Q)&&fe.charAt(Q.length)==="/"),k={isActive:Ue,isPending:Ge,isTransitioning:B},M=Ue?t:void 0,P;typeof s=="function"?P=s(k):P=[s,Ue?"active":null,Ge?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(k):u;return ie.createElement(zh,{...b,"aria-current":M,className:P,ref:A,style:I,to:p,viewTransition:_},typeof v=="function"?v(k):v)});Aw.displayName="NavLink";var Nw=ie.forwardRef(({discover:a="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:l,state:u,method:p=oh,action:_,onSubmit:v,relative:b,preventScrollReset:A,viewTransition:N,...O},$)=>{let se=Iw(),oe=Ow(_,{relative:b}),B=p.toLowerCase()==="get"?"get":"post",Q=typeof _=="string"&&Ab.test(_),ee=fe=>{if(v&&v(fe),fe.defaultPrevented)return;fe.preventDefault();let Se=fe.nativeEvent.submitter,Ue=Se?.getAttribute("formmethod")||p;se(Se||fe.currentTarget,{fetcherKey:t,method:Ue,navigate:r,replace:l,state:u,relative:b,preventScrollReset:A,viewTransition:N})};return ie.createElement("form",{ref:$,method:B,action:oe,onSubmit:s?v:ee,...O,"data-discover":!Q&&a==="render"?"true":void 0})});Nw.displayName="Form";function Rw(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nb(a){let t=ie.useContext(Dl);return hn(t,Rw(a)),t}function Cw(a,{target:t,replace:r,state:s,preventScrollReset:l,relative:u,viewTransition:p}={}){let _=Ol(),v=ns(),b=Ku(a,{relative:u});return ie.useCallback(A=>{if(ow(A,t)){A.preventDefault();let N=r!==void 0?r:Vu(v)===Vu(b);_(a,{replace:N,state:s,preventScrollReset:l,relative:u,viewTransition:p})}},[v,_,b,r,s,t,a,l,u,p])}var jw=0,Dw=()=>`__${String(++jw)}__`;function Iw(){let{router:a}=Nb("useSubmit"),{basename:t}=ie.useContext(ni),r=$E();return ie.useCallback(async(s,l={})=>{let{action:u,method:p,encType:_,formData:v,body:b}=cw(s,t);if(l.navigate===!1){let A=l.fetcherKey||Dw();await a.fetch(A,r,l.action||u,{preventScrollReset:l.preventScrollReset,formData:v,body:b,formMethod:l.method||p,formEncType:l.encType||_,flushSync:l.flushSync})}else await a.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:v,body:b,formMethod:l.method||p,formEncType:l.encType||_,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[a,t,r])}function Ow(a,{relative:t}={}){let{basename:r}=ie.useContext(ni),s=ie.useContext(Ua);hn(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),u={...Ku(a||".",{relative:t})},p=ns();if(a==null){u.search=p.search;let _=new URLSearchParams(u.search),v=_.getAll("index");if(v.some(A=>A==="")){_.delete("index"),v.filter(N=>N).forEach(N=>_.append("index",N));let A=_.toString();u.search=A?`?${A}`:""}}return(!a||a===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:$i([r,u.pathname])),Vu(u)}function Mw(a,{relative:t}={}){let r=ie.useContext(yb);hn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Nb("useViewTransitionState"),l=Ku(a,{relative:t});if(!r.isTransitioning)return!1;let u=Ji(r.currentLocation.pathname,s)||r.currentLocation.pathname,p=Ji(r.nextLocation.pathname,s)||r.nextLocation.pathname;return yh(l.pathname,p)!=null||yh(l.pathname,u)!=null}const Vw=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kw=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),Kv=a=>{const t=kw(a);return t.charAt(0).toUpperCase()+t.slice(1)},Rb=(...a)=>a.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),Pw=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Lw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zw=ie.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:u,iconNode:p,..._},v)=>ie.createElement("svg",{ref:v,...Lw,width:t,height:t,stroke:a,strokeWidth:s?Number(r)*24/Number(t):r,className:Rb("lucide",l),...!u&&!Pw(_)&&{"aria-hidden":"true"},..._},[...p.map(([b,A])=>ie.createElement(b,A)),...Array.isArray(u)?u:[u]]));const zt=(a,t)=>{const r=ie.forwardRef(({className:s,...l},u)=>ie.createElement(zw,{ref:u,iconNode:t,className:Rb(`lucide-${Vw(Kv(a))}`,`lucide-${a}`,s),...l}));return r.displayName=Kv(a),r};const Uw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bw=zt("arrow-left",Uw);const qw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fw=zt("arrow-right",qw);const Hw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Kw=zt("calendar",Hw);const Gw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Qw=zt("circle-plus",Gw);const Yw=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],uh=zt("database",Yw);const Xw=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ku=zt("dollar-sign",Xw);const $w=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Uh=zt("download",$w);const Zw=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jw=zt("eye",Zw);const Ww=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],e2=zt("file-text",Ww);const t2=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],n2=zt("layout-dashboard",t2);const r2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Cb=zt("lock",r2);const a2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jb=zt("mail",a2);const i2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Db=zt("map-pin",i2);const s2=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],o2=zt("maximize",s2);const l2=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],vh=zt("package",l2);const u2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ib=zt("phone",u2);const c2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ml=zt("plus",c2);const h2=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],f2=zt("printer",h2);const d2=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ob=zt("receipt",d2);const m2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mb=zt("save",m2);const p2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gu=zt("search",p2);const g2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y2=zt("settings",g2);const v2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Bh=zt("square-pen",v2);const b2=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],_2=zt("store",b2);const x2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ys=zt("trash-2",x2);const E2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Hm=zt("trending-up",E2);const w2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],qh=zt("upload",w2);const T2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vb=zt("user",T2);const S2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bh=zt("users",S2);const A2=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Gv=zt("wallet",A2);const N2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],R2=zt("x",N2);function kb(a){var t,r,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var l=a.length;for(t=0;t<l;t++)a[t]&&(r=kb(a[t]))&&(s&&(s+=" "),s+=r)}else for(r in a)a[r]&&(s&&(s+=" "),s+=r);return s}function C2(){for(var a,t,r=0,s="",l=arguments.length;r<l;r++)(a=arguments[r])&&(t=kb(a))&&(s&&(s+=" "),s+=t);return s}const j2=()=>{};var Qv={};const Pb=function(a){const t=[];let r=0;for(let s=0;s<a.length;s++){let l=a.charCodeAt(s);l<128?t[r++]=l:l<2048?(t[r++]=l>>6|192,t[r++]=l&63|128):(l&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++s)&1023),t[r++]=l>>18|240,t[r++]=l>>12&63|128,t[r++]=l>>6&63|128,t[r++]=l&63|128):(t[r++]=l>>12|224,t[r++]=l>>6&63|128,t[r++]=l&63|128)}return t},D2=function(a){const t=[];let r=0,s=0;for(;r<a.length;){const l=a[r++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=a[r++];t[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=a[r++],p=a[r++],_=a[r++],v=((l&7)<<18|(u&63)<<12|(p&63)<<6|_&63)-65536;t[s++]=String.fromCharCode(55296+(v>>10)),t[s++]=String.fromCharCode(56320+(v&1023))}else{const u=a[r++],p=a[r++];t[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|p&63)}}return t.join("")},Lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<a.length;l+=3){const u=a[l],p=l+1<a.length,_=p?a[l+1]:0,v=l+2<a.length,b=v?a[l+2]:0,A=u>>2,N=(u&3)<<4|_>>4;let O=(_&15)<<2|b>>6,$=b&63;v||($=64,p||(O=64)),s.push(r[A],r[N],r[O],r[$])}return s.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(Pb(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):D2(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<a.length;){const u=r[a.charAt(l++)],_=l<a.length?r[a.charAt(l)]:0;++l;const b=l<a.length?r[a.charAt(l)]:64;++l;const N=l<a.length?r[a.charAt(l)]:64;if(++l,u==null||_==null||b==null||N==null)throw new I2;const O=u<<2|_>>4;if(s.push(O),b!==64){const $=_<<4&240|b>>2;if(s.push($),N!==64){const se=b<<6&192|N;s.push(se)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class I2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O2=function(a){const t=Pb(a);return Lb.encodeByteArray(t,!0)},_h=function(a){return O2(a).replace(/\./g,"")},M2=function(a){try{return Lb.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function V2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const k2=()=>V2().__FIREBASE_DEFAULTS__,P2=()=>{if(typeof process>"u"||typeof Qv>"u")return;const a=Qv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},L2=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&M2(a[1]);return t&&JSON.parse(t)},Km=()=>{try{return j2()||k2()||P2()||L2()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},z2=a=>Km()?.emulatorHosts?.[a],U2=a=>{const t=z2(a);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),s]:[t.substring(0,r),s]},zb=()=>Km()?.config;class B2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,s))}}}function Gm(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q2(a){return(await fetch(a,{credentials:"include"})).ok}function F2(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=t||"demo-project",l=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...a};return[_h(JSON.stringify(r)),_h(JSON.stringify(p)),""].join(".")}const Cu={};function H2(){const a={prod:[],emulator:[]};for(const t of Object.keys(Cu))Cu[t]?a.emulator.push(t):a.prod.push(t);return a}function K2(a){let t=document.getElementById(a),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",a),r=!0),{created:r,element:t}}let Yv=!1;function G2(a,t){if(typeof window>"u"||typeof document>"u"||!Gm(window.location.host)||Cu[a]===t||Cu[a]||Yv)return;Cu[a]=t;function r(O){return`__firebase__banner__${O}`}const s="__firebase__banner",u=H2().prod.length>0;function p(){const O=document.getElementById(s);O&&O.remove()}function _(O){O.style.display="flex",O.style.background="#7faaf0",O.style.position="fixed",O.style.bottom="5px",O.style.left="5px",O.style.padding=".5em",O.style.borderRadius="5px",O.style.alignItems="center"}function v(O,$){O.setAttribute("width","24"),O.setAttribute("id",$),O.setAttribute("height","24"),O.setAttribute("viewBox","0 0 24 24"),O.setAttribute("fill","none"),O.style.marginLeft="-6px"}function b(){const O=document.createElement("span");return O.style.cursor="pointer",O.style.marginLeft="16px",O.style.fontSize="24px",O.innerHTML=" &times;",O.onclick=()=>{Yv=!0,p()},O}function A(O,$){O.setAttribute("id",$),O.innerText="Learn more",O.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",O.setAttribute("target","__blank"),O.style.paddingLeft="5px",O.style.textDecoration="underline"}function N(){const O=K2(s),$=r("text"),se=document.getElementById($)||document.createElement("span"),oe=r("learnmore"),B=document.getElementById(oe)||document.createElement("a"),Q=r("preprendIcon"),ee=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(O.created){const fe=O.element;_(fe),A(B,oe);const Se=b();v(ee,Q),fe.append(ee,se,B,Se),document.body.appendChild(fe)}u?(se.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,se.innerText="Preview backend running in this workspace."),se.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}function Q2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y2(){const a=Km()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X2(){return!Y2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $2(){try{return typeof indexedDB=="object"}catch{return!1}}function Z2(){return new Promise((a,t)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),r||self.indexedDB.deleteDatabase(s),a(!0)},l.onupgradeneeded=()=>{r=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(r){t(r)}})}const J2="FirebaseError";class Vl extends Error{constructor(t,r,s){super(r),this.code=t,this.customData=s,this.name=J2,Object.setPrototypeOf(this,Vl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ub.prototype.create)}}class Ub{constructor(t,r,s){this.service=t,this.serviceName=r,this.errors=s}create(t,...r){const s=r[0]||{},l=`${this.service}/${t}`,u=this.errors[t],p=u?W2(u,s):"Error",_=`${this.serviceName}: ${p} (${l}).`;return new Vl(l,_,s)}}function W2(a,t){return a.replace(eT,(r,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const eT=/\{\$([^}]+)}/g;function xh(a,t){if(a===t)return!0;const r=Object.keys(a),s=Object.keys(t);for(const l of r){if(!s.includes(l))return!1;const u=a[l],p=t[l];if(Xv(u)&&Xv(p)){if(!xh(u,p))return!1}else if(u!==p)return!1}for(const l of s)if(!r.includes(l))return!1;return!0}function Xv(a){return a!==null&&typeof a=="object"}function Co(a){return a&&a._delegate?a._delegate:a}class Pu{constructor(t,r,s){this.name=t,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const To="[DEFAULT]";class tT{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const s=new B2;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:r});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rT(t))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(t=To){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=To){return this.instances.has(t)}getOptions(t=To){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[u,p]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(u);s===_&&p.resolve(l)}return l}onInit(t,r){const s=this.normalizeInstanceIdentifier(r),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&t(u,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const s=this.onInitCallbacks.get(r);if(s)for(const l of s)try{l(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nT(t),options:r}),this.instances.set(t,s),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=To){return this.component?this.component.multipleInstances?t:To:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nT(a){return a===To?void 0:a}function rT(a){return a.instantiationMode==="EAGER"}class aT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new tT(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}var Ot;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ot||(Ot={}));const iT={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},sT=Ot.INFO,oT={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},lT=(a,t,...r)=>{if(t<a.logLevel)return;const s=new Date().toISOString(),l=oT[t];if(l)console[l](`[${s}]  ${a.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Bb{constructor(t){this.name=t,this._logLevel=sT,this._logHandler=lT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?iT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const uT=(a,t)=>t.some(r=>a instanceof r);let $v,Zv;function cT(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hT(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qb=new WeakMap,dm=new WeakMap,Fb=new WeakMap,nm=new WeakMap,Qm=new WeakMap;function fT(a){const t=new Promise((r,s)=>{const l=()=>{a.removeEventListener("success",u),a.removeEventListener("error",p)},u=()=>{r(Fs(a.result)),l()},p=()=>{s(a.error),l()};a.addEventListener("success",u),a.addEventListener("error",p)});return t.then(r=>{r instanceof IDBCursor&&qb.set(r,a)}).catch(()=>{}),Qm.set(t,a),t}function dT(a){if(dm.has(a))return;const t=new Promise((r,s)=>{const l=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",p),a.removeEventListener("abort",p)},u=()=>{r(),l()},p=()=>{s(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",u),a.addEventListener("error",p),a.addEventListener("abort",p)});dm.set(a,t)}let mm={get(a,t,r){if(a instanceof IDBTransaction){if(t==="done")return dm.get(a);if(t==="objectStoreNames")return a.objectStoreNames||Fb.get(a);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Fs(a[t])},set(a,t,r){return a[t]=r,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function mT(a){mm=a(mm)}function pT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const s=a.call(rm(this),t,...r);return Fb.set(s,t.sort?t.sort():[t]),Fs(s)}:hT().includes(a)?function(...t){return a.apply(rm(this),t),Fs(qb.get(this))}:function(...t){return Fs(a.apply(rm(this),t))}}function gT(a){return typeof a=="function"?pT(a):(a instanceof IDBTransaction&&dT(a),uT(a,cT())?new Proxy(a,mm):a)}function Fs(a){if(a instanceof IDBRequest)return fT(a);if(nm.has(a))return nm.get(a);const t=gT(a);return t!==a&&(nm.set(a,t),Qm.set(t,a)),t}const rm=a=>Qm.get(a);function yT(a,t,{blocked:r,upgrade:s,blocking:l,terminated:u}={}){const p=indexedDB.open(a,t),_=Fs(p);return s&&p.addEventListener("upgradeneeded",v=>{s(Fs(p.result),v.oldVersion,v.newVersion,Fs(p.transaction),v)}),r&&p.addEventListener("blocked",v=>r(v.oldVersion,v.newVersion,v)),_.then(v=>{u&&v.addEventListener("close",()=>u()),l&&v.addEventListener("versionchange",b=>l(b.oldVersion,b.newVersion,b))}).catch(()=>{}),_}const vT=["get","getKey","getAll","getAllKeys","count"],bT=["put","add","delete","clear"],am=new Map;function Jv(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(am.get(t))return am.get(t);const r=t.replace(/FromIndex$/,""),s=t!==r,l=bT.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(l||vT.includes(r)))return;const u=async function(p,..._){const v=this.transaction(p,l?"readwrite":"readonly");let b=v.store;return s&&(b=b.index(_.shift())),(await Promise.all([b[r](..._),l&&v.done]))[0]};return am.set(t,u),u}mT(a=>({...a,get:(t,r,s)=>Jv(t,r)||a.get(t,r,s),has:(t,r)=>!!Jv(t,r)||a.has(t,r)}));class _T{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(xT(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function xT(a){return a.getComponent()?.type==="VERSION"}const pm="@firebase/app",Wv="0.14.6";const Wi=new Bb("@firebase/app"),ET="@firebase/app-compat",wT="@firebase/analytics-compat",TT="@firebase/analytics",ST="@firebase/app-check-compat",AT="@firebase/app-check",NT="@firebase/auth",RT="@firebase/auth-compat",CT="@firebase/database",jT="@firebase/data-connect",DT="@firebase/database-compat",IT="@firebase/functions",OT="@firebase/functions-compat",MT="@firebase/installations",VT="@firebase/installations-compat",kT="@firebase/messaging",PT="@firebase/messaging-compat",LT="@firebase/performance",zT="@firebase/performance-compat",UT="@firebase/remote-config",BT="@firebase/remote-config-compat",qT="@firebase/storage",FT="@firebase/storage-compat",HT="@firebase/firestore",KT="@firebase/ai",GT="@firebase/firestore-compat",QT="firebase",YT="12.6.0";const gm="[DEFAULT]",XT={[pm]:"fire-core",[ET]:"fire-core-compat",[TT]:"fire-analytics",[wT]:"fire-analytics-compat",[AT]:"fire-app-check",[ST]:"fire-app-check-compat",[NT]:"fire-auth",[RT]:"fire-auth-compat",[CT]:"fire-rtdb",[jT]:"fire-data-connect",[DT]:"fire-rtdb-compat",[IT]:"fire-fn",[OT]:"fire-fn-compat",[MT]:"fire-iid",[VT]:"fire-iid-compat",[kT]:"fire-fcm",[PT]:"fire-fcm-compat",[LT]:"fire-perf",[zT]:"fire-perf-compat",[UT]:"fire-rc",[BT]:"fire-rc-compat",[qT]:"fire-gcs",[FT]:"fire-gcs-compat",[HT]:"fire-fst",[GT]:"fire-fst-compat",[KT]:"fire-vertex","fire-js":"fire-js",[QT]:"fire-js-all"};const Eh=new Map,$T=new Map,ym=new Map;function e0(a,t){try{a.container.addComponent(t)}catch(r){Wi.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,r)}}function wh(a){const t=a.name;if(ym.has(t))return Wi.debug(`There were multiple attempts to register component ${t}.`),!1;ym.set(t,a);for(const r of Eh.values())e0(r,a);for(const r of $T.values())e0(r,a);return!0}function ZT(a,t){const r=a.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),a.container.getProvider(t)}function JT(a){return a==null?!1:a.settings!==void 0}const WT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new Ub("app","Firebase",WT);class eS{constructor(t,r,s){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Pu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}const tS=YT;function Hb(a,t={}){let r=a;typeof t!="object"&&(t={name:t});const s={name:gm,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Hs.create("bad-app-name",{appName:String(l)});if(r||(r=zb()),!r)throw Hs.create("no-options");const u=Eh.get(l);if(u){if(xh(r,u.options)&&xh(s,u.config))return u;throw Hs.create("duplicate-app",{appName:l})}const p=new aT(l);for(const v of ym.values())p.addComponent(v);const _=new eS(r,s,p);return Eh.set(l,_),_}function nS(a=gm){const t=Eh.get(a);if(!t&&a===gm&&zb())return Hb();if(!t)throw Hs.create("no-app",{appName:a});return t}function _l(a,t,r){let s=XT[a]??a;r&&(s+=`-${r}`);const l=s.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const p=[`Unable to register library "${s}" with version "${t}":`];l&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&p.push("and"),u&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Wi.warn(p.join(" "));return}wh(new Pu(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const rS="firebase-heartbeat-database",aS=1,Lu="firebase-heartbeat-store";let im=null;function Kb(){return im||(im=yT(rS,aS,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(Lu)}catch(r){console.warn(r)}}}}).catch(a=>{throw Hs.create("idb-open",{originalErrorMessage:a.message})})),im}async function iS(a){try{const r=(await Kb()).transaction(Lu),s=await r.objectStore(Lu).get(Gb(a));return await r.done,s}catch(t){if(t instanceof Vl)Wi.warn(t.message);else{const r=Hs.create("idb-get",{originalErrorMessage:t?.message});Wi.warn(r.message)}}}async function t0(a,t){try{const s=(await Kb()).transaction(Lu,"readwrite");await s.objectStore(Lu).put(t,Gb(a)),await s.done}catch(r){if(r instanceof Vl)Wi.warn(r.message);else{const s=Hs.create("idb-set",{originalErrorMessage:r?.message});Wi.warn(s.message)}}}function Gb(a){return`${a.name}!${a.options.appId}`}const sS=1024,oS=30;class lS{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new cS(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=n0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>oS){const l=hS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Wi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=n0(),{heartbeatsToSend:r,unsentEntries:s}=uS(this._heartbeatsCache.heartbeats),l=_h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Wi.warn(t),""}}}function n0(){return new Date().toISOString().substring(0,10)}function uS(a,t=sS){const r=[];let s=a.slice();for(const l of a){const u=r.find(p=>p.agent===l.agent);if(u){if(u.dates.push(l.date),r0(r)>t){u.dates.pop();break}}else if(r.push({agent:l.agent,dates:[l.date]}),r0(r)>t){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class cS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $2()?Z2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await iS(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function r0(a){return _h(JSON.stringify({version:2,heartbeats:a})).length}function hS(a){if(a.length===0)return-1;let t=0,r=a[0].date;for(let s=1;s<a.length;s++)a[s].date<r&&(r=a[s].date,t=s);return t}function fS(a){wh(new Pu("platform-logger",t=>new _T(t),"PRIVATE")),wh(new Pu("heartbeat",t=>new lS(t),"PRIVATE")),_l(pm,Wv,a),_l(pm,Wv,"esm2020"),_l("fire-js","")}fS("");var dS="firebase",mS="12.6.0";_l(dS,mS,"app");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ks,Qb;(function(){var a;function t(k,M){function P(){}P.prototype=M.prototype,k.F=M.prototype,k.prototype=new P,k.prototype.constructor=k,k.D=function(I,z,X){for(var V=Array(arguments.length-2),at=2;at<arguments.length;at++)V[at-2]=arguments[at];return M.prototype[z].apply(I,V)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,r),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(k,M,P){P||(P=0);const I=Array(16);if(typeof M=="string")for(var z=0;z<16;++z)I[z]=M.charCodeAt(P++)|M.charCodeAt(P++)<<8|M.charCodeAt(P++)<<16|M.charCodeAt(P++)<<24;else for(z=0;z<16;++z)I[z]=M[P++]|M[P++]<<8|M[P++]<<16|M[P++]<<24;M=k.g[0],P=k.g[1],z=k.g[2];let X=k.g[3],V;V=M+(X^P&(z^X))+I[0]+3614090360&4294967295,M=P+(V<<7&4294967295|V>>>25),V=X+(z^M&(P^z))+I[1]+3905402710&4294967295,X=M+(V<<12&4294967295|V>>>20),V=z+(P^X&(M^P))+I[2]+606105819&4294967295,z=X+(V<<17&4294967295|V>>>15),V=P+(M^z&(X^M))+I[3]+3250441966&4294967295,P=z+(V<<22&4294967295|V>>>10),V=M+(X^P&(z^X))+I[4]+4118548399&4294967295,M=P+(V<<7&4294967295|V>>>25),V=X+(z^M&(P^z))+I[5]+1200080426&4294967295,X=M+(V<<12&4294967295|V>>>20),V=z+(P^X&(M^P))+I[6]+2821735955&4294967295,z=X+(V<<17&4294967295|V>>>15),V=P+(M^z&(X^M))+I[7]+4249261313&4294967295,P=z+(V<<22&4294967295|V>>>10),V=M+(X^P&(z^X))+I[8]+1770035416&4294967295,M=P+(V<<7&4294967295|V>>>25),V=X+(z^M&(P^z))+I[9]+2336552879&4294967295,X=M+(V<<12&4294967295|V>>>20),V=z+(P^X&(M^P))+I[10]+4294925233&4294967295,z=X+(V<<17&4294967295|V>>>15),V=P+(M^z&(X^M))+I[11]+2304563134&4294967295,P=z+(V<<22&4294967295|V>>>10),V=M+(X^P&(z^X))+I[12]+1804603682&4294967295,M=P+(V<<7&4294967295|V>>>25),V=X+(z^M&(P^z))+I[13]+4254626195&4294967295,X=M+(V<<12&4294967295|V>>>20),V=z+(P^X&(M^P))+I[14]+2792965006&4294967295,z=X+(V<<17&4294967295|V>>>15),V=P+(M^z&(X^M))+I[15]+1236535329&4294967295,P=z+(V<<22&4294967295|V>>>10),V=M+(z^X&(P^z))+I[1]+4129170786&4294967295,M=P+(V<<5&4294967295|V>>>27),V=X+(P^z&(M^P))+I[6]+3225465664&4294967295,X=M+(V<<9&4294967295|V>>>23),V=z+(M^P&(X^M))+I[11]+643717713&4294967295,z=X+(V<<14&4294967295|V>>>18),V=P+(X^M&(z^X))+I[0]+3921069994&4294967295,P=z+(V<<20&4294967295|V>>>12),V=M+(z^X&(P^z))+I[5]+3593408605&4294967295,M=P+(V<<5&4294967295|V>>>27),V=X+(P^z&(M^P))+I[10]+38016083&4294967295,X=M+(V<<9&4294967295|V>>>23),V=z+(M^P&(X^M))+I[15]+3634488961&4294967295,z=X+(V<<14&4294967295|V>>>18),V=P+(X^M&(z^X))+I[4]+3889429448&4294967295,P=z+(V<<20&4294967295|V>>>12),V=M+(z^X&(P^z))+I[9]+568446438&4294967295,M=P+(V<<5&4294967295|V>>>27),V=X+(P^z&(M^P))+I[14]+3275163606&4294967295,X=M+(V<<9&4294967295|V>>>23),V=z+(M^P&(X^M))+I[3]+4107603335&4294967295,z=X+(V<<14&4294967295|V>>>18),V=P+(X^M&(z^X))+I[8]+1163531501&4294967295,P=z+(V<<20&4294967295|V>>>12),V=M+(z^X&(P^z))+I[13]+2850285829&4294967295,M=P+(V<<5&4294967295|V>>>27),V=X+(P^z&(M^P))+I[2]+4243563512&4294967295,X=M+(V<<9&4294967295|V>>>23),V=z+(M^P&(X^M))+I[7]+1735328473&4294967295,z=X+(V<<14&4294967295|V>>>18),V=P+(X^M&(z^X))+I[12]+2368359562&4294967295,P=z+(V<<20&4294967295|V>>>12),V=M+(P^z^X)+I[5]+4294588738&4294967295,M=P+(V<<4&4294967295|V>>>28),V=X+(M^P^z)+I[8]+2272392833&4294967295,X=M+(V<<11&4294967295|V>>>21),V=z+(X^M^P)+I[11]+1839030562&4294967295,z=X+(V<<16&4294967295|V>>>16),V=P+(z^X^M)+I[14]+4259657740&4294967295,P=z+(V<<23&4294967295|V>>>9),V=M+(P^z^X)+I[1]+2763975236&4294967295,M=P+(V<<4&4294967295|V>>>28),V=X+(M^P^z)+I[4]+1272893353&4294967295,X=M+(V<<11&4294967295|V>>>21),V=z+(X^M^P)+I[7]+4139469664&4294967295,z=X+(V<<16&4294967295|V>>>16),V=P+(z^X^M)+I[10]+3200236656&4294967295,P=z+(V<<23&4294967295|V>>>9),V=M+(P^z^X)+I[13]+681279174&4294967295,M=P+(V<<4&4294967295|V>>>28),V=X+(M^P^z)+I[0]+3936430074&4294967295,X=M+(V<<11&4294967295|V>>>21),V=z+(X^M^P)+I[3]+3572445317&4294967295,z=X+(V<<16&4294967295|V>>>16),V=P+(z^X^M)+I[6]+76029189&4294967295,P=z+(V<<23&4294967295|V>>>9),V=M+(P^z^X)+I[9]+3654602809&4294967295,M=P+(V<<4&4294967295|V>>>28),V=X+(M^P^z)+I[12]+3873151461&4294967295,X=M+(V<<11&4294967295|V>>>21),V=z+(X^M^P)+I[15]+530742520&4294967295,z=X+(V<<16&4294967295|V>>>16),V=P+(z^X^M)+I[2]+3299628645&4294967295,P=z+(V<<23&4294967295|V>>>9),V=M+(z^(P|~X))+I[0]+4096336452&4294967295,M=P+(V<<6&4294967295|V>>>26),V=X+(P^(M|~z))+I[7]+1126891415&4294967295,X=M+(V<<10&4294967295|V>>>22),V=z+(M^(X|~P))+I[14]+2878612391&4294967295,z=X+(V<<15&4294967295|V>>>17),V=P+(X^(z|~M))+I[5]+4237533241&4294967295,P=z+(V<<21&4294967295|V>>>11),V=M+(z^(P|~X))+I[12]+1700485571&4294967295,M=P+(V<<6&4294967295|V>>>26),V=X+(P^(M|~z))+I[3]+2399980690&4294967295,X=M+(V<<10&4294967295|V>>>22),V=z+(M^(X|~P))+I[10]+4293915773&4294967295,z=X+(V<<15&4294967295|V>>>17),V=P+(X^(z|~M))+I[1]+2240044497&4294967295,P=z+(V<<21&4294967295|V>>>11),V=M+(z^(P|~X))+I[8]+1873313359&4294967295,M=P+(V<<6&4294967295|V>>>26),V=X+(P^(M|~z))+I[15]+4264355552&4294967295,X=M+(V<<10&4294967295|V>>>22),V=z+(M^(X|~P))+I[6]+2734768916&4294967295,z=X+(V<<15&4294967295|V>>>17),V=P+(X^(z|~M))+I[13]+1309151649&4294967295,P=z+(V<<21&4294967295|V>>>11),V=M+(z^(P|~X))+I[4]+4149444226&4294967295,M=P+(V<<6&4294967295|V>>>26),V=X+(P^(M|~z))+I[11]+3174756917&4294967295,X=M+(V<<10&4294967295|V>>>22),V=z+(M^(X|~P))+I[2]+718787259&4294967295,z=X+(V<<15&4294967295|V>>>17),V=P+(X^(z|~M))+I[9]+3951481745&4294967295,k.g[0]=k.g[0]+M&4294967295,k.g[1]=k.g[1]+(z+(V<<21&4294967295|V>>>11))&4294967295,k.g[2]=k.g[2]+z&4294967295,k.g[3]=k.g[3]+X&4294967295}s.prototype.v=function(k,M){M===void 0&&(M=k.length);const P=M-this.blockSize,I=this.C;let z=this.h,X=0;for(;X<M;){if(z==0)for(;X<=P;)l(this,k,X),X+=this.blockSize;if(typeof k=="string"){for(;X<M;)if(I[z++]=k.charCodeAt(X++),z==this.blockSize){l(this,I),z=0;break}}else for(;X<M;)if(I[z++]=k[X++],z==this.blockSize){l(this,I),z=0;break}}this.h=z,this.o+=M},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var M=1;M<k.length-8;++M)k[M]=0;M=this.o*8;for(var P=k.length-8;P<k.length;++P)k[P]=M&255,M/=256;for(this.v(k),k=Array(16),M=0,P=0;P<4;++P)for(let I=0;I<32;I+=8)k[M++]=this.g[P]>>>I&255;return k};function u(k,M){var P=_;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=M(k)}function p(k,M){this.h=M;const P=[];let I=!0;for(let z=k.length-1;z>=0;z--){const X=k[z]|0;I&&X==M||(P[z]=X,I=!1)}this.g=P}var _={};function v(k){return-128<=k&&k<128?u(k,function(M){return new p([M|0],M<0?-1:0)}):new p([k|0],k<0?-1:0)}function b(k){if(isNaN(k)||!isFinite(k))return N;if(k<0)return B(b(-k));const M=[];let P=1;for(let I=0;k>=P;I++)M[I]=k/P|0,P*=4294967296;return new p(M,0)}function A(k,M){if(k.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k.charAt(0)=="-")return B(A(k.substring(1),M));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=b(Math.pow(M,8));let I=N;for(let X=0;X<k.length;X+=8){var z=Math.min(8,k.length-X);const V=parseInt(k.substring(X,X+z),M);z<8?(z=b(Math.pow(M,z)),I=I.j(z).add(b(V))):(I=I.j(P),I=I.add(b(V)))}return I}var N=v(0),O=v(1),$=v(16777216);a=p.prototype,a.m=function(){if(oe(this))return-B(this).m();let k=0,M=1;for(let P=0;P<this.g.length;P++){const I=this.i(P);k+=(I>=0?I:4294967296+I)*M,M*=4294967296}return k},a.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(se(this))return"0";if(oe(this))return"-"+B(this).toString(k);const M=b(Math.pow(k,6));var P=this;let I="";for(;;){const z=Se(P,M).g;P=Q(P,z.j(M));let X=((P.g.length>0?P.g[0]:P.h)>>>0).toString(k);if(P=z,se(P))return X+I;for(;X.length<6;)X="0"+X;I=X+I}},a.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function se(k){if(k.h!=0)return!1;for(let M=0;M<k.g.length;M++)if(k.g[M]!=0)return!1;return!0}function oe(k){return k.h==-1}a.l=function(k){return k=Q(this,k),oe(k)?-1:se(k)?0:1};function B(k){const M=k.g.length,P=[];for(let I=0;I<M;I++)P[I]=~k.g[I];return new p(P,~k.h).add(O)}a.abs=function(){return oe(this)?B(this):this},a.add=function(k){const M=Math.max(this.g.length,k.g.length),P=[];let I=0;for(let z=0;z<=M;z++){let X=I+(this.i(z)&65535)+(k.i(z)&65535),V=(X>>>16)+(this.i(z)>>>16)+(k.i(z)>>>16);I=V>>>16,X&=65535,V&=65535,P[z]=V<<16|X}return new p(P,P[P.length-1]&-2147483648?-1:0)};function Q(k,M){return k.add(B(M))}a.j=function(k){if(se(this)||se(k))return N;if(oe(this))return oe(k)?B(this).j(B(k)):B(B(this).j(k));if(oe(k))return B(this.j(B(k)));if(this.l($)<0&&k.l($)<0)return b(this.m()*k.m());const M=this.g.length+k.g.length,P=[];for(var I=0;I<2*M;I++)P[I]=0;for(I=0;I<this.g.length;I++)for(let z=0;z<k.g.length;z++){const X=this.i(I)>>>16,V=this.i(I)&65535,at=k.i(z)>>>16,dt=k.i(z)&65535;P[2*I+2*z]+=V*dt,ee(P,2*I+2*z),P[2*I+2*z+1]+=X*dt,ee(P,2*I+2*z+1),P[2*I+2*z+1]+=V*at,ee(P,2*I+2*z+1),P[2*I+2*z+2]+=X*at,ee(P,2*I+2*z+2)}for(k=0;k<M;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=M;k<2*M;k++)P[k]=0;return new p(P,0)};function ee(k,M){for(;(k[M]&65535)!=k[M];)k[M+1]+=k[M]>>>16,k[M]&=65535,M++}function fe(k,M){this.g=k,this.h=M}function Se(k,M){if(se(M))throw Error("division by zero");if(se(k))return new fe(N,N);if(oe(k))return M=Se(B(k),M),new fe(B(M.g),B(M.h));if(oe(M))return M=Se(k,B(M)),new fe(B(M.g),M.h);if(k.g.length>30){if(oe(k)||oe(M))throw Error("slowDivide_ only works with positive integers.");for(var P=O,I=M;I.l(k)<=0;)P=Ue(P),I=Ue(I);var z=Ge(P,1),X=Ge(I,1);for(I=Ge(I,2),P=Ge(P,2);!se(I);){var V=X.add(I);V.l(k)<=0&&(z=z.add(P),X=V),I=Ge(I,1),P=Ge(P,1)}return M=Q(k,z.j(M)),new fe(z,M)}for(z=N;k.l(M)>=0;){for(P=Math.max(1,Math.floor(k.m()/M.m())),I=Math.ceil(Math.log(P)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),X=b(P),V=X.j(M);oe(V)||V.l(k)>0;)P-=I,X=b(P),V=X.j(M);se(X)&&(X=O),z=z.add(X),k=Q(k,V)}return new fe(z,k)}a.B=function(k){return Se(this,k).h},a.and=function(k){const M=Math.max(this.g.length,k.g.length),P=[];for(let I=0;I<M;I++)P[I]=this.i(I)&k.i(I);return new p(P,this.h&k.h)},a.or=function(k){const M=Math.max(this.g.length,k.g.length),P=[];for(let I=0;I<M;I++)P[I]=this.i(I)|k.i(I);return new p(P,this.h|k.h)},a.xor=function(k){const M=Math.max(this.g.length,k.g.length),P=[];for(let I=0;I<M;I++)P[I]=this.i(I)^k.i(I);return new p(P,this.h^k.h)};function Ue(k){const M=k.g.length+1,P=[];for(let I=0;I<M;I++)P[I]=k.i(I)<<1|k.i(I-1)>>>31;return new p(P,k.h)}function Ge(k,M){const P=M>>5;M%=32;const I=k.g.length-P,z=[];for(let X=0;X<I;X++)z[X]=M>0?k.i(X+P)>>>M|k.i(X+P+1)<<32-M:k.i(X+P);return new p(z,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Qb=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=b,p.fromString=A,Ks=p}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Yb,Au,Xb,ch,vm,$b,Zb,Jb;(function(){var a,t=Object.defineProperty;function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof nh=="object"&&nh];for(var x=0;x<c.length;++x){var T=c[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=r(this);function l(c,x){if(x)e:{var T=s;c=c.split(".");for(var j=0;j<c.length-1;j++){var le=c[j];if(!(le in T))break e;T=T[le]}c=c[c.length-1],j=T[c],x=x(j),x!=j&&x!=null&&t(T,c,{configurable:!0,writable:!0,value:x})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(x){var T=[],j;for(j in x)Object.prototype.hasOwnProperty.call(x,j)&&T.push([j,x[j]]);return T}});var u=u||{},p=this||self;function _(c){var x=typeof c;return x=="object"&&c!=null||x=="function"}function v(c,x,T){return c.call.apply(c.bind,arguments)}function b(c,x,T){return b=v,b.apply(null,arguments)}function A(c,x){var T=Array.prototype.slice.call(arguments,1);return function(){var j=T.slice();return j.push.apply(j,arguments),c.apply(this,j)}}function N(c,x){function T(){}T.prototype=x.prototype,c.Z=x.prototype,c.prototype=new T,c.prototype.constructor=c,c.Ob=function(j,le,pe){for(var Me=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Me[ut-2]=arguments[ut];return x.prototype[le].apply(j,Me)}}var O=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function $(c){const x=c.length;if(x>0){const T=Array(x);for(let j=0;j<x;j++)T[j]=c[j];return T}return[]}function se(c,x){for(let j=1;j<arguments.length;j++){const le=arguments[j];var T=typeof le;if(T=T!="object"?T:le?Array.isArray(le)?"array":T:"null",T=="array"||T=="object"&&typeof le.length=="number"){T=c.length||0;const pe=le.length||0;c.length=T+pe;for(let Me=0;Me<pe;Me++)c[T+Me]=le[Me]}else c.push(le)}}class oe{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function B(c){p.setTimeout(()=>{throw c},0)}function Q(){var c=k;let x=null;return c.g&&(x=c.g,c.g=c.g.next,c.g||(c.h=null),x.next=null),x}class ee{constructor(){this.h=this.g=null}add(x,T){const j=fe.get();j.set(x,T),this.h?this.h.next=j:this.g=j,this.h=j}}var fe=new oe(()=>new Se,c=>c.reset());class Se{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Ge=!1,k=new ee,M=()=>{const c=Promise.resolve(void 0);Ue=()=>{c.then(P)}};function P(){for(var c;c=Q();){try{c.h.call(c.g)}catch(T){B(T)}var x=fe;x.j(c),x.h<100&&(x.h++,c.next=x.g,x.g=c)}Ge=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(c,x){this.type=c,this.g=this.target=x,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,x=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};p.addEventListener("test",T,x),p.removeEventListener("test",T,x)}catch{}return c})();function V(c){return/^[\s\xa0]*$/.test(c)}function at(c,x){z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,x)}N(at,z),at.prototype.init=function(c,x){const T=this.type=c.type,j=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=x,x=c.relatedTarget,x||(T=="mouseover"?x=c.fromElement:T=="mouseout"&&(x=c.toElement)),this.relatedTarget=x,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&at.Z.h.call(this)},at.prototype.h=function(){at.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),J=0;function Ae(c,x,T,j,le){this.listener=c,this.proxy=null,this.src=x,this.type=T,this.capture=!!j,this.ha=le,this.key=++J,this.da=this.fa=!1}function Ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function it(c,x,T){for(const j in c)x.call(T,c[j],j,c)}function tt(c,x){for(const T in c)x.call(void 0,c[T],T,c)}function F(c){const x={};for(const T in c)x[T]=c[T];return x}const be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(c,x){let T,j;for(let le=1;le<arguments.length;le++){j=arguments[le];for(T in j)c[T]=j[T];for(let pe=0;pe<be.length;pe++)T=be[pe],Object.prototype.hasOwnProperty.call(j,T)&&(c[T]=j[T])}}function Re(c){this.src=c,this.g={},this.h=0}Re.prototype.add=function(c,x,T,j,le){const pe=c.toString();c=this.g[pe],c||(c=this.g[pe]=[],this.h++);const Me=$e(c,x,j,le);return Me>-1?(x=c[Me],T||(x.fa=!1)):(x=new Ae(x,this.src,pe,!!j,le),x.fa=T,c.push(x)),x};function Fe(c,x){const T=x.type;if(T in c.g){var j=c.g[T],le=Array.prototype.indexOf.call(j,x,void 0),pe;(pe=le>=0)&&Array.prototype.splice.call(j,le,1),pe&&(Ne(x),c.g[T].length==0&&(delete c.g[T],c.h--))}}function $e(c,x,T,j){for(let le=0;le<c.length;++le){const pe=c[le];if(!pe.da&&pe.listener==x&&pe.capture==!!T&&pe.ha==j)return le}return-1}var rt="closure_lm_"+(Math.random()*1e6|0),Ft={};function Oe(c,x,T,j,le){if(Array.isArray(x)){for(let pe=0;pe<x.length;pe++)Oe(c,x[pe],T,j,le);return null}return T=Xn(T),c&&c[dt]?c.J(x,T,_(j)?!!j.capture:!1,le):fn(c,x,T,!1,j,le)}function fn(c,x,T,j,le,pe){if(!x)throw Error("Invalid event type");const Me=_(le)?!!le.capture:!!le;let ut=Ut(c);if(ut||(c[rt]=ut=new Re(c)),T=ut.add(x,T,j,Me,pe),T.proxy)return T;if(j=On(),T.proxy=j,j.src=c,j.listener=T,c.addEventListener)X||(le=Me),le===void 0&&(le=!1),c.addEventListener(x.toString(),j,le);else if(c.attachEvent)c.attachEvent(Ht(x.toString()),j);else if(c.addListener&&c.removeListener)c.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return T}function On(){function c(T){return x.call(c.src,c.listener,T)}const x=yt;return c}function Qe(c,x,T,j,le){if(Array.isArray(x))for(var pe=0;pe<x.length;pe++)Qe(c,x[pe],T,j,le);else j=_(j)?!!j.capture:!!j,T=Xn(T),c&&c[dt]?(c=c.i,pe=String(x).toString(),pe in c.g&&(x=c.g[pe],T=$e(x,T,j,le),T>-1&&(Ne(x[T]),Array.prototype.splice.call(x,T,1),x.length==0&&(delete c.g[pe],c.h--)))):c&&(c=Ut(c))&&(x=c.g[x.toString()],c=-1,x&&(c=$e(x,T,j,le)),(T=c>-1?x[c]:null)&&Je(T))}function Je(c){if(typeof c!="number"&&c&&!c.da){var x=c.src;if(x&&x[dt])Fe(x.i,c);else{var T=c.type,j=c.proxy;x.removeEventListener?x.removeEventListener(T,j,c.capture):x.detachEvent?x.detachEvent(Ht(T),j):x.addListener&&x.removeListener&&x.removeListener(j),(T=Ut(x))?(Fe(T,c),T.h==0&&(T.src=null,x[rt]=null)):Ne(c)}}}function Ht(c){return c in Ft?Ft[c]:Ft[c]="on"+c}function yt(c,x){if(c.da)c=!0;else{x=new at(x,this);const T=c.listener,j=c.ha||c.src;c.fa&&Je(c),c=T.call(j,x)}return c}function Ut(c){return c=c[rt],c instanceof Re?c:null}var on="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xn(c){return typeof c=="function"?c:(c[on]||(c[on]=function(x){return c.handleEvent(x)}),c[on])}function Rt(){I.call(this),this.i=new Re(this),this.M=this,this.G=null}N(Rt,I),Rt.prototype[dt]=!0,Rt.prototype.removeEventListener=function(c,x,T,j){Qe(this,c,x,T,j)};function Mt(c,x){var T,j=c.G;if(j)for(T=[];j;j=j.G)T.push(j);if(c=c.M,j=x.type||x,typeof x=="string")x=new z(x,c);else if(x instanceof z)x.target=x.target||c;else{var le=x;x=new z(j,c),Ie(x,le)}le=!0;let pe,Me;if(T)for(Me=T.length-1;Me>=0;Me--)pe=x.g=T[Me],le=wn(pe,j,!0,x)&&le;if(pe=x.g=c,le=wn(pe,j,!0,x)&&le,le=wn(pe,j,!1,x)&&le,T)for(Me=0;Me<T.length;Me++)pe=x.g=T[Me],le=wn(pe,j,!1,x)&&le}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var c=this.i;for(const x in c.g){const T=c.g[x];for(let j=0;j<T.length;j++)Ne(T[j]);delete c.g[x],c.h--}}this.G=null},Rt.prototype.J=function(c,x,T,j){return this.i.add(String(c),x,!1,T,j)},Rt.prototype.K=function(c,x,T,j){return this.i.add(String(c),x,!0,T,j)};function wn(c,x,T,j){if(x=c.i.g[String(x)],!x)return!0;x=x.concat();let le=!0;for(let pe=0;pe<x.length;++pe){const Me=x[pe];if(Me&&!Me.da&&Me.capture==T){const ut=Me.listener,vn=Me.ha||Me.src;Me.fa&&Fe(c.i,Me),le=ut.call(vn,j)!==!1&&le}}return le&&!j.defaultPrevented}function Lo(c,x){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:p.setTimeout(c,x||0)}function ri(c){c.g=Lo(()=>{c.g=null,c.i&&(c.i=!1,ri(c))},c.l);const x=c.h;c.h=null,c.m.apply(null,x)}class $n extends I{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ri(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(c){I.call(this),this.h=c,this.g={}}N(Zr,I);var Jr=[];function Wr(c){it(c.g,function(x,T){this.g.hasOwnProperty(T)&&Je(x)},c),c.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),Wr(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ba=p.JSON.stringify,Ei=p.JSON.parse,rs=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function wi(){}function _a(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tn(){z.call(this,"d")}N(Tn,z);function Sn(){z.call(this,"c")}N(Sn,z);var Be={},ai=null;function Rr(){return ai=ai||new Rt}Be.Ia="serverreachability";function Ti(c){z.call(this,Be.Ia,c)}N(Ti,z);function ke(c){const x=Rr();Mt(x,new Ti(x))}Be.STAT_EVENT="statevent";function Ba(c,x){z.call(this,Be.STAT_EVENT,c),this.stat=x}N(Ba,z);function dn(c){const x=Rr();Mt(x,new Ba(x,c))}Be.Ja="timingevent";function Cr(c,x){z.call(this,Be.Ja,c),this.size=x}N(Cr,z);function ea(c,x){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},x)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Ul(c,x,T,j,le,pe){c.info(function(){if(c.g)if(pe){var Me="",ut=pe.split("&");for(let Ct=0;Ct<ut.length;Ct++){var vn=ut[Ct].split("=");if(vn.length>1){const Qt=vn[0];vn=vn[1];const Br=Qt.split("_");Me=Br.length>=2&&Br[1]=="type"?Me+(Qt+"="+vn+"&"):Me+(Qt+"=redacted&")}}}else Me=null;else Me=pe;return"XMLHTTP REQ ("+j+") [attempt "+le+"]: "+x+`
`+T+`
`+Me})}function zo(c,x,T,j,le,pe,Me){c.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+le+"]: "+x+`
`+T+`
`+pe+" "+Me})}function ir(c,x,T,j){c.info(function(){return"XMLHTTP TEXT ("+x+"): "+to(c,T)+(j?" "+j:"")})}function jr(c,x){c.info(function(){return"TIMEOUT: "+x})}Er.prototype.info=function(){};function to(c,x){if(!c.g)return x;if(!x)return null;try{const pe=JSON.parse(x);if(pe){for(c=0;c<pe.length;c++)if(Array.isArray(pe[c])){var T=pe[c];if(!(T.length<2)){var j=T[1];if(Array.isArray(j)&&!(j.length<1)){var le=j[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Me=1;Me<j.length;Me++)j[Me]=""}}}}return ba(pe)}catch{return x}}var xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ln;function Si(){}N(Si,wi),Si.prototype.g=function(){return new XMLHttpRequest},ln=new Si;function Dr(c){return encodeURIComponent(String(c))}function Ai(c){var x=1;c=c.split(":");const T=[];for(;x>0&&c.length;)T.push(c.shift()),x--;return c.length&&T.push(c.join(":")),T}function dr(c,x,T,j){this.j=c,this.i=x,this.l=T,this.S=j||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ta}function ta(){this.i=null,this.g="",this.h=!1}var Kt={},nn={};function Kn(c,x,T){c.M=1,c.A=oi(pn(x)),c.u=T,c.R=!0,qa(c,null)}function qa(c,x){c.F=Date.now(),Zn(c),c.B=pn(c.A);var T=c.B,j=c.S;Array.isArray(j)||(j=[String(j)]),ls(T.i,"t",j),c.C=0,T=c.j.L,c.h=new ta,c.g=Rn(c.j,T?x:null,!c.u),c.P>0&&(c.O=new $n(b(c.Y,c,c.g),c.P)),x=c.V,T=c.g,j=c.ba;var le="readystatechange";Array.isArray(le)||(le&&(Jr[0]=le.toString()),le=Jr);for(let pe=0;pe<le.length;pe++){const Me=Oe(T,le[pe],j||x.handleEvent,!1,x.h||x);if(!Me)break;x.g[Me.key]=Me}x=c.J?F(c.J):{},c.u?(c.v||(c.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,x)):(c.v="GET",c.g.ea(c.B,c.v,null,x)),ke(),Ul(c.i,c.v,c.B,c.l,c.S,c.u)}dr.prototype.ba=function(c){c=c.target;const x=this.O;x&&ua(c)==3?x.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{const ut=ua(this.g),vn=this.g.ya(),Ct=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||yn(this.g)))){this.K||ut!=4||vn==7||(vn==8||Ct<=0?ke(3):ke(2)),Ir(this);var x=this.g.ca();this.X=x;var T=Bl(this);if(this.o=x==200,zo(this.i,this.v,this.B,this.l,this.S,ut,x),this.o){if(this.U&&!this.L){t:{if(this.g){var j,le=this.g;if((j=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(j)){var pe=j;break t}}pe=null}if(c=pe)ir(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mn(this,c);else{this.o=!1,this.m=3,dn(12),An(this),Dt(this);break e}}if(this.R){c=!0;let Qt;for(;!this.K&&this.C<T.length;)if(Qt=no(this,T),Qt==nn){ut==4&&(this.m=4,dn(14),c=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Kt){this.m=4,dn(15),ir(this.i,this.l,T,"[Invalid Chunk]"),c=!1;break}else ir(this.i,this.l,Qt,null),Mn(this,Qt);if(na(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||T.length!=0||this.h.h||(this.m=1,dn(16),c=!1),this.o=this.o&&c,!c)ir(this.i,this.l,T,"[Invalid Chunked Response]"),An(this),Dt(this);else if(T.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),ui(Me),Me.P=!0,dn(11))}}else ir(this.i,this.l,T,null),Mn(this,T);ut==4&&An(this),this.o&&!this.K&&(ut==4?Xa(this.j,this):(this.o=!1,Zn(this)))}else Qa(this.g),x==400&&T.indexOf("Unknown SID")>0?(this.m=3,dn(12)):(this.m=0,dn(13)),An(this),Dt(this)}}}catch{}finally{}};function Bl(c){if(!na(c))return c.g.la();const x=yn(c.g);if(x==="")return"";let T="";const j=x.length,le=ua(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return An(c),Dt(c),"";c.h.i=new p.TextDecoder}for(let pe=0;pe<j;pe++)c.h.h=!0,T+=c.h.i.decode(x[pe],{stream:!(le&&pe==j-1)});return x.length=0,c.h.g+=T,c.C=0,c.h.g}function na(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function no(c,x){var T=c.C,j=x.indexOf(`
`,T);return j==-1?nn:(T=Number(x.substring(T,j)),isNaN(T)?Kt:(j+=1,j+T>x.length?nn:(x=x.slice(j,j+T),c.C=j+T,x)))}dr.prototype.cancel=function(){this.K=!0,An(this)};function Zn(c){c.T=Date.now()+c.H,Ni(c,c.H)}function Ni(c,x){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ea(b(c.aa,c),x)}function Ir(c){c.D&&(p.clearTimeout(c.D),c.D=null)}dr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(jr(this.i,this.B),this.M!=2&&(ke(),dn(17)),An(this),this.m=2,Dt(this)):Ni(this,this.T-c)};function Dt(c){c.j.I==0||c.K||Xa(c.j,c)}function An(c){Ir(c);var x=c.O;x&&typeof x.dispose=="function"&&x.dispose(),c.O=null,Wr(c.V),c.g&&(x=c.g,c.g=null,x.abort(),x.dispose())}function Mn(c,x){try{var T=c.j;if(T.I!=0&&(T.g==c||Mr(T.h,c))){if(!c.L&&Mr(T.h,c)&&T.I==3){try{var j=T.Ba.g.parse(x)}catch{j=null}if(Array.isArray(j)&&j.length==3){var le=j;if(le[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<c.F)fs(T),Aa(T);else break e;Ra(T),dn(18)}}else T.xa=le[1],0<T.xa-T.K&&le[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ea(b(T.Va,T),6e3));Or(T.h)<=1&&T.ta&&(T.ta=void 0)}else zr(T,11)}else if((c.L||T.g==c)&&fs(T),!V(x))for(le=T.Ba.g.parse(x),x=0;x<le.length;x++){let Ct=le[x];const Qt=Ct[0];if(!(Qt<=T.K))if(T.K=Qt,Ct=Ct[1],T.I==2)if(Ct[0]=="c"){T.M=Ct[1],T.ba=Ct[2];const Br=Ct[3];Br!=null&&(T.ka=Br,T.j.info("VER="+T.ka));const qr=Ct[4];qr!=null&&(T.za=qr,T.j.info("SVER="+T.za));const Sr=Ct[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(j=1.5*Sr,T.O=j,T.j.info("backChannelRequestTimeoutMs_="+j)),j=T;const ha=c.g;if(ha){const hi=ha.g?ha.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var pe=j.h;pe.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(ra(pe,pe.h),pe.h=null))}if(j.G){const gs=ha.g?ha.g.getResponseHeader("X-HTTP-Session-Id"):null;gs&&(j.wa=gs,Vt(j.J,j.G,gs))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-c.F,T.j.info("Handshake RTT: "+T.T+"ms")),j=T;var Me=c;if(j.na=ps(j,j.L?j.ba:null,j.W),Me.L){as(j.h,Me);var ut=Me,vn=j.O;vn&&(ut.H=vn),ut.D&&(Ir(ut),Zn(ut)),j.g=Me}else Di(j);T.i.length>0&&Na(T)}else Ct[0]!="stop"&&Ct[0]!="close"||zr(T,7);else T.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?zr(T,7):li(T):Ct[0]!="noop"&&T.l&&T.l.qa(Ct),T.A=0)}}ke(4)}catch{}}var mn=class{constructor(c,x){this.g=c,this.map=x}};function Ea(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ii(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Or(c){return c.h?1:c.g?c.g.size:0}function Mr(c,x){return c.h?c.h==x:c.g?c.g.has(x):!1}function ra(c,x){c.g?c.g.add(x):c.h=x}function as(c,x){c.h&&c.h==x?c.h=null:c.g&&c.g.has(x)&&c.g.delete(x)}Ea.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function si(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let x=c.i;for(const T of c.g.values())x=x.concat(T.G);return x}return $(c.i)}var ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(c,x){if(c){c=c.split("&");for(let T=0;T<c.length;T++){const j=c[T].indexOf("=");let le,pe=null;j>=0?(le=c[T].substring(0,j),pe=c[T].substring(j+1)):le=c[T],x(le,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function mr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;c instanceof mr?(this.l=c.l,gn(this,c.j),this.o=c.o,this.g=c.g,Vr(this,c.u),this.h=c.h,is(this,Bo(c.i)),this.m=c.m):c&&(x=String(c).match(ro))?(this.l=!1,gn(this,x[1]||"",!0),this.o=xt(x[2]||""),this.g=xt(x[3]||"",!0),Vr(this,x[4]),this.h=xt(x[5]||"",!0),is(this,x[6]||"",!0),this.m=xt(x[7]||"")):(this.l=!1,this.i=new oa(null,this.l))}mr.prototype.toString=function(){const c=[];var x=this.j;x&&c.push(aa(x,ia,!0),":");var T=this.g;return(T||x=="file")&&(c.push("//"),(x=this.o)&&c.push(aa(x,ia,!0),"@"),c.push(Dr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&c.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(aa(T,T.charAt(0)=="/"?Ri:ss,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",aa(T,ao)),c.join("")},mr.prototype.resolve=function(c){const x=pn(this);let T=!!c.j;T?gn(x,c.j):T=!!c.o,T?x.o=c.o:T=!!c.g,T?x.g=c.g:T=c.u!=null;var j=c.h;if(T)Vr(x,c.u);else if(T=!!c.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var le=x.h.lastIndexOf("/");le!=-1&&(j=x.h.slice(0,le+1)+j)}if(le=j,le==".."||le==".")j="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){j=le.lastIndexOf("/",0)==0,le=le.split("/");const pe=[];for(let Me=0;Me<le.length;){const ut=le[Me++];ut=="."?j&&Me==le.length&&pe.push(""):ut==".."?((pe.length>1||pe.length==1&&pe[0]!="")&&pe.pop(),j&&Me==le.length&&pe.push("")):(pe.push(ut),j=!0)}j=pe.join("/")}else j=le}return T?x.h=j:T=c.i.toString()!=="",T?is(x,Bo(c.i)):T=!!c.m,T&&(x.m=c.m),x};function pn(c){return new mr(c)}function gn(c,x,T){c.j=T?xt(x,!0):x,c.j&&(c.j=c.j.replace(/:$/,""))}function Vr(c,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);c.u=x}else c.u=null}function is(c,x,T){x instanceof oa?(c.i=x,la(c.i,c.l)):(T||(x=aa(x,sa)),c.i=new oa(x,c.l))}function Vt(c,x,T){c.i.set(x,T)}function oi(c){return Vt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function xt(c,x){return c?x?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function aa(c,x,T){return typeof c=="string"?(c=encodeURI(c).replace(x,Vn),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Vn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ia=/[#\/\?@]/g,ss=/[#\?:]/g,Ri=/[#\?]/g,sa=/[#\?@]/g,ao=/#/g;function oa(c,x){this.h=this.g=null,this.i=c||null,this.j=!!x}function sr(c){c.g||(c.g=new Map,c.h=0,c.i&&mt(c.i,function(x,T){c.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}a=oa.prototype,a.add=function(c,x){sr(this),this.i=null,c=_n(this,c);let T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(x),this.h+=1,this};function Uo(c,x){sr(c),x=_n(c,x),c.g.has(x)&&(c.i=null,c.h-=c.g.get(x).length,c.g.delete(x))}function _t(c,x){return sr(c),x=_n(c,x),c.g.has(x)}a.forEach=function(c,x){sr(this),this.g.forEach(function(T,j){T.forEach(function(le){c.call(x,le,j,this)},this)},this)};function os(c,x){sr(c);let T=[];if(typeof x=="string")_t(c,x)&&(T=T.concat(c.g.get(_n(c,x))));else for(c=Array.from(c.g.values()),x=0;x<c.length;x++)T=T.concat(c[x]);return T}a.set=function(c,x){return sr(this),this.i=null,c=_n(this,c),_t(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[x]),this.h+=1,this},a.get=function(c,x){return c?(c=os(this,c),c.length>0?String(c[0]):x):x};function ls(c,x,T){Uo(c,x),T.length>0&&(c.i=null,c.g.set(_n(c,x),$(T)),c.h+=T.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],x=Array.from(this.g.keys());for(let j=0;j<x.length;j++){var T=x[j];const le=Dr(T);T=os(this,T);for(let pe=0;pe<T.length;pe++){let Me=le;T[pe]!==""&&(Me+="="+Dr(T[pe])),c.push(Me)}}return this.i=c.join("&")};function Bo(c){const x=new oa;return x.i=c.i,c.g&&(x.g=new Map(c.g),x.h=c.h),x}function _n(c,x){return x=String(x),c.j&&(x=x.toLowerCase()),x}function la(c,x){x&&!c.j&&(sr(c),c.i=null,c.g.forEach(function(T,j){const le=j.toLowerCase();j!=le&&(Uo(this,j),ls(this,le,T))},c)),c.j=x}function pr(c,x){const T=new Er;if(p.Image){const j=new Image;j.onload=A(wr,T,"TestLoadImage: loaded",!0,x,j),j.onerror=A(wr,T,"TestLoadImage: error",!1,x,j),j.onabort=A(wr,T,"TestLoadImage: abort",!1,x,j),j.ontimeout=A(wr,T,"TestLoadImage: timeout",!1,x,j),p.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=c}else x(!1)}function kr(c,x){const T=new Er,j=new AbortController,le=setTimeout(()=>{j.abort(),wr(T,"TestPingServer: timeout",!1,x)},1e4);fetch(c,{signal:j.signal}).then(pe=>{clearTimeout(le),pe.ok?wr(T,"TestPingServer: ok",!0,x):wr(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(le),wr(T,"TestPingServer: error",!1,x)})}function wr(c,x,T,j,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),j(T)}catch{}}function Fa(){this.g=new rs}function Gt(c){this.i=c.Sb||null,this.h=c.ab||!1}N(Gt,wi),Gt.prototype.g=function(){return new Jn(this.i,this.h)};function Jn(c,x){Rt.call(this),this.H=c,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}N(Jn,Rt),a=Jn.prototype,a.open=function(c,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=x,this.readyState=1,Tr(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(x.body=c),(this.H||p).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var x=c.value?c.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!c.done}))&&(this.response=this.responseText+=x)}c.done?Pr(this):Tr(this),this.readyState==3&&wa(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,Pr(this))},a.Na=function(c){this.g&&(this.response=c,Pr(this))},a.ga=function(){this.g&&Pr(this)};function Pr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Tr(c)}a.setRequestHeader=function(c,x){this.A.append(c,x)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=x.next();return c.join(`\r
`)};function Tr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nn(c){let x="";return it(c,function(T,j){x+=j,x+=":",x+=T,x+=`\r
`}),x}function Ci(c,x,T){e:{for(j in T){var j=!1;break e}j=!0}j||(T=Nn(T),typeof c=="string"?T!=null&&Dr(T):Vt(c,x,T))}function bt(c){Rt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}N(bt,Rt);var Lr=/^https?$/i,us=["POST","PUT"];a=bt.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,x,T,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);x=x?x.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ln.g(),this.g.onreadystatechange=O(b(this.Ca,this));try{this.B=!0,this.g.open(x,String(c),!0),this.B=!1}catch(pe){Ha(this,pe);return}if(c=T||"",T=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var le in j)T.set(le,j[le]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const pe of j.keys())T.set(pe,j.get(pe));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(T.keys()).find(pe=>pe.toLowerCase()=="content-type"),le=p.FormData&&c instanceof p.FormData,!(Array.prototype.indexOf.call(us,x,void 0)>=0)||j||le||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,Me]of T)this.g.setRequestHeader(pe,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(pe){Ha(this,pe)}};function Ha(c,x){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=x,c.o=5,Ka(c),Ta(c)}function Ka(c){c.A||(c.A=!0,Mt(c,"complete"),Mt(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Mt(this,"complete"),Mt(this,"abort"),Ta(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),bt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Ga(this):this.Xa())},a.Xa=function(){Ga(this)};function Ga(c){if(c.h&&typeof u<"u"){if(c.v&&ua(c)==4)setTimeout(c.Ca.bind(c),0);else if(Mt(c,"readystatechange"),ua(c)==4){c.h=!1;try{const pe=c.ca();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var j;if(j=pe===0){let Me=String(c.D).match(ro)[1]||null;!Me&&p.self&&p.self.location&&(Me=p.self.location.protocol.slice(0,-1)),j=!Lr.test(Me?Me.toLowerCase():"")}T=j}if(T)Mt(c,"complete"),Mt(c,"success");else{c.o=6;try{var le=ua(c)>2?c.g.statusText:""}catch{le=""}c.l=le+" ["+c.ca()+"]",Ka(c)}}finally{Ta(c)}}}}function Ta(c,x){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const T=c.g;c.g=null,x||Mt(c,"ready");try{T.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function ua(c){return c.g?c.g.readyState:0}a.ca=function(){try{return ua(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var x=this.g.responseText;return c&&x.indexOf(c)==0&&(x=x.substring(c.length)),Ei(x)}};function yn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qa(c){const x={};c=(c.g&&ua(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<c.length;j++){if(V(c[j]))continue;var T=Ai(c[j]);const le=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const pe=x[le]||[];x[le]=pe,pe.push(T)}tt(x,function(j){return j.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(c,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||x}function ca(c){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,c),this.Za=Sa("retryDelaySeedMs",1e4,c),this.Ta=Sa("forwardChannelMaxRetries",2,c),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ea(c&&c.concurrentRequestLimit),this.Ba=new Fa,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ca.prototype,a.ka=8,a.I=1,a.connect=function(c,x,T,j){dn(0),this.W=c,this.H=x||{},T&&j!==void 0&&(this.H.OSID=T,this.H.OAID=j),this.F=this.X,this.J=ps(this,null,this.W),Na(this)};function li(c){if(cs(c),c.I==3){var x=c.V++,T=pn(c.J);if(Vt(T,"SID",c.M),Vt(T,"RID",x),Vt(T,"TYPE","terminate"),Ya(c,T),x=new dr(c,c.j,x),x.M=2,x.A=oi(pn(T)),T=!1,p.navigator&&p.navigator.sendBeacon)try{T=p.navigator.sendBeacon(x.A.toString(),"")}catch{}!T&&p.Image&&(new Image().src=x.A,T=!0),T||(x.g=Rn(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Zn(x)}ms(c)}function Aa(c){c.g&&(ui(c),c.g.cancel(),c.g=null)}function cs(c){Aa(c),c.v&&(p.clearTimeout(c.v),c.v=null),fs(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&p.clearTimeout(c.m),c.m=null)}function Na(c){if(!ii(c.h)&&!c.m){c.m=!0;var x=c.Ea;Ue||M(),Ge||(Ue(),Ge=!0),k.add(x,c),c.D=0}}function hs(c,x){return Or(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=x.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ea(b(c.Ea,c,x),ds(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const le=new dr(this,this.j,c);let pe=this.o;if(this.U&&(pe?(pe=F(pe),Ie(pe,this.U)):pe=this.U),this.u!==null||this.R||(le.J=pe,pe=null),this.S)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var j=this.i[T];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(x+=j,x>4096){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=io(this,le,x),T=pn(this.J),Vt(T,"RID",c),Vt(T,"CVER",22),this.G&&Vt(T,"X-HTTP-Session-Id",this.G),Ya(this,T),pe&&(this.R?x="headers="+Dr(Nn(pe))+"&"+x:this.u&&Ci(T,this.u,pe)),ra(this.h,le),this.Ra&&Vt(T,"TYPE","init"),this.S?(Vt(T,"$req",x),Vt(T,"SID","null"),le.U=!0,Kn(le,T,null)):Kn(le,T,x),this.I=2}}else this.I==3&&(c?ji(this,c):this.i.length==0||ii(this.h)||ji(this))};function ji(c,x){var T;x?T=x.l:T=c.V++;const j=pn(c.J);Vt(j,"SID",c.M),Vt(j,"RID",T),Vt(j,"AID",c.K),Ya(c,j),c.u&&c.o&&Ci(j,c.u,c.o),T=new dr(c,c.j,T,c.D+1),c.u===null&&(T.J=c.o),x&&(c.i=x.G.concat(c.i)),x=io(c,T,1e3),T.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ra(c.h,T),Kn(T,j,x)}function Ya(c,x){c.H&&it(c.H,function(T,j){Vt(x,j,T)}),c.l&&it({},function(T,j){Vt(x,j,T)})}function io(c,x,T){T=Math.min(c.i.length,T);const j=c.l?b(c.l.Ka,c.l,c):null;e:{var le=c.i;let ut=-1;for(;;){const vn=["count="+T];ut==-1?T>0?(ut=le[0].g,vn.push("ofs="+ut)):ut=0:vn.push("ofs="+ut);let Ct=!0;for(let Qt=0;Qt<T;Qt++){var pe=le[Qt].g;const Br=le[Qt].map;if(pe-=ut,pe<0)ut=Math.max(0,le[Qt].g-100),Ct=!1;else try{pe="req"+pe+"_"||"";try{var Me=Br instanceof Map?Br:Object.entries(Br);for(const[qr,Sr]of Me){let ha=Sr;_(Sr)&&(ha=ba(Sr)),vn.push(pe+qr+"="+encodeURIComponent(ha))}}catch(qr){throw vn.push(pe+"type="+encodeURIComponent("_badmap")),qr}}catch{j&&j(Br)}}if(Ct){Me=vn.join("&");break e}}Me=void 0}return c=c.i.splice(0,T),x.G=c,Me}function Di(c){if(!c.g&&!c.v){c.Y=1;var x=c.Da;Ue||M(),Ge||(Ue(),Ge=!0),k.add(x,c),c.A=0}}function Ra(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ea(b(c.Da,c),ds(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,so(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ea(b(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dn(10),Aa(this),so(this))};function ui(c){c.B!=null&&(p.clearTimeout(c.B),c.B=null)}function so(c){c.g=new dr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var x=pn(c.na);Vt(x,"RID","rpc"),Vt(x,"SID",c.M),Vt(x,"AID",c.K),Vt(x,"CI",c.F?"0":"1"),!c.F&&c.ia&&Vt(x,"TO",c.ia),Vt(x,"TYPE","xmlhttp"),Ya(c,x),c.u&&c.o&&Ci(x,c.u,c.o),c.O&&(c.g.H=c.O);var T=c.g;c=c.ba,T.M=1,T.A=oi(pn(x)),T.u=null,T.R=!0,qa(T,c)}a.Va=function(){this.C!=null&&(this.C=null,Aa(this),Ra(this),dn(19))};function fs(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function Xa(c,x){var T=null;if(c.g==x){fs(c),ui(c),c.g=null;var j=2}else if(Mr(c.h,x))T=x.G,as(c.h,x),j=1;else return;if(c.I!=0){if(x.o)if(j==1){T=x.u?x.u.length:0,x=Date.now()-x.F;var le=c.D;j=Rr(),Mt(j,new Cr(j,T)),Na(c)}else Di(c);else if(le=x.m,le==3||le==0&&x.X>0||!(j==1&&hs(c,x)||j==2&&Ra(c)))switch(T&&T.length>0&&(x=c.h,x.i=x.i.concat(T)),le){case 1:zr(c,5);break;case 4:zr(c,10);break;case 3:zr(c,6);break;default:zr(c,2)}}}function ds(c,x){let T=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(T*=2),T*x}function zr(c,x){if(c.j.info("Error code "+x),x==2){var T=b(c.bb,c),j=c.Ua;const le=!j;j=new mr(j||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||gn(j,"https"),oi(j),le?pr(j.toString(),T):kr(j.toString(),T)}else dn(2);c.I=0,c.l&&c.l.pa(x),ms(c),cs(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function ms(c){if(c.I=0,c.ja=[],c.l){const x=si(c.h);(x.length!=0||c.i.length!=0)&&(se(c.ja,x),se(c.ja,c.i),c.h.i.length=0,$(c.i),c.i.length=0),c.l.oa()}}function ps(c,x,T){var j=T instanceof mr?pn(T):new mr(T);if(j.g!="")x&&(j.g=x+"."+j.g),Vr(j,j.u);else{var le=p.location;j=le.protocol,x=x?x+"."+le.hostname:le.hostname,le=+le.port;const pe=new mr(null);j&&gn(pe,j),x&&(pe.g=x),le&&Vr(pe,le),T&&(pe.h=T),j=pe}return T=c.G,x=c.wa,T&&x&&Vt(j,T,x),Vt(j,"VER",c.ka),Ya(c,j),j}function Rn(c,x,T){if(x&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=c.Aa&&!c.ma?new bt(new Gt({ab:T})):new bt(c.ma),x.Fa(c.L),x}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function ci(){}a=ci.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Ur(){}Ur.prototype.g=function(c,x){return new Wn(c,x)};function Wn(c,x){Rt.call(this),this.g=new ca(x),this.l=c,this.h=x&&x.messageUrlParams||null,c=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(c?c["X-WebChannel-Content-Type"]=x.messageContentType:c={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(c?c["X-WebChannel-Client-Profile"]=x.sa:c={"X-WebChannel-Client-Profile":x.sa}),this.g.U=c,(c=x&&x.Qb)&&!V(c)&&(this.g.u=c),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!V(x)&&(this.g.G=x,c=this.h,c!==null&&x in c&&(c=this.h,x in c&&delete c[x])),this.j=new Ca(this)}N(Wn,Rt),Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){li(this.g)},Wn.prototype.o=function(c){var x=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.v&&(T={},T.__data__=ba(c),c=T);x.i.push(new mn(x.Ya++,c)),x.I==3&&Na(x)},Wn.prototype.N=function(){this.g.l=null,delete this.j,li(this.g),delete this.g,Wn.Z.N.call(this)};function Ii(c){Tn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var x=c.__sm__;if(x){e:{for(const T in x){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,x=x!==null&&c in x?x[c]:void 0),this.data=x}else this.data=c}N(Ii,Tn);function oo(){Sn.call(this),this.status=1}N(oo,Sn);function Ca(c){this.g=c}N(Ca,ci),Ca.prototype.ra=function(){Mt(this.g,"a")},Ca.prototype.qa=function(c){Mt(this.g,new Ii(c))},Ca.prototype.pa=function(c){Mt(this.g,new oo)},Ca.prototype.oa=function(){Mt(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,Jb=function(){return new Ur},Zb=function(){return Rr()},$b=Be,vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,ch=xa,Bt.COMPLETE="complete",Xb=Bt,_a.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Au=_a,bt.prototype.listenOnce=bt.prototype.K,bt.prototype.getLastError=bt.prototype.Ha,bt.prototype.getLastErrorCode=bt.prototype.ya,bt.prototype.getStatus=bt.prototype.ca,bt.prototype.getResponseJson=bt.prototype.La,bt.prototype.getResponseText=bt.prototype.la,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Fa,Yb=bt}).apply(typeof nh<"u"?nh:typeof self<"u"?self:typeof window<"u"?window:{});const i0="@firebase/firestore",s0="4.9.2";class br{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");let kl="12.3.0";const jo=new Bb("@firebase/firestore");function pl(){return jo.logLevel}function He(a,...t){if(jo.logLevel<=Ot.DEBUG){const r=t.map(Ym);jo.debug(`Firestore (${kl}): ${a}`,...r)}}function es(a,...t){if(jo.logLevel<=Ot.ERROR){const r=t.map(Ym);jo.error(`Firestore (${kl}): ${a}`,...r)}}function Do(a,...t){if(jo.logLevel<=Ot.WARN){const r=t.map(Ym);jo.warn(`Firestore (${kl}): ${a}`,...r)}}function Ym(a){if(typeof a=="string")return a;try{return(function(r){return JSON.stringify(r)})(a)}catch{return a}}function st(a,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,Wb(a,s,r)}function Wb(a,t,r){let s=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${a.toString(16)})`;if(r!==void 0)try{s+=" CONTEXT: "+JSON.stringify(r)}catch{s+=" CONTEXT: "+r}throw es(s),new Error(s)}function qt(a,t,r,s){let l="Unexpected state";typeof r=="string"?l=r:s=r,a||Wb(t,l,s)}function ft(a,t){return a}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Vl{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class No{constructor(){this.promise=new Promise(((t,r)=>{this.resolve=t,this.reject=r}))}}class e_{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class t_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable((()=>r(br.UNAUTHENTICATED)))}shutdown(){}}class pS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class gS{constructor(t){this.t=t,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){qt(this.o===void 0,42304);let s=this.i;const l=v=>this.i!==s?(s=this.i,r(v)):Promise.resolve();let u=new No;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new No,t.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const v=u;t.enqueueRetryable((async()=>{await v.promise,await l(this.currentUser)}))},_=v=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((v=>_(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?_(v):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new No)}}),0),p()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((s=>this.i!==t?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qt(typeof s.accessToken=="string",31837,{l:s}),new e_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qt(t===null||typeof t=="string",2055,{h:t}),new br(t)}}class yS{constructor(t,r,s){this.P=t,this.T=r,this.I=s,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vS{constructor(t,r,s){this.P=t,this.T=r,this.I=s}getToken(){return Promise.resolve(new yS(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable((()=>r(br.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class o0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bS{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,JT(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){qt(this.o===void 0,3512);const s=u=>{u.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const p=u.token!==this.m;return this.m=u.token,He("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?r(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const l=u=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new o0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((r=>r?(qt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new o0(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _S(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class Fh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=_S(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<r&&(s+=t.charAt(l[u]%62))}return s}}function At(a,t){return a<t?-1:a>t?1:0}function bm(a,t){const r=Math.min(a.length,t.length);for(let s=0;s<r;s++){const l=a.charAt(s),u=t.charAt(s);if(l!==u)return sm(l)===sm(u)?At(l,u):sm(l)?1:-1}return At(a.length,t.length)}const xS=55296,ES=57343;function sm(a){const t=a.charCodeAt(0);return t>=xS&&t<=ES}function El(a,t,r){return a.length===t.length&&a.every(((s,l)=>r(s,t[l])))}const l0="__name__";class yi{constructor(t,r,s){r===void 0?r=0:r>t.length&&st(637,{offset:r,range:t.length}),s===void 0?s=t.length-r:s>t.length-r&&st(1746,{length:s,range:t.length-r}),this.segments=t,this.offset=r,this.len=s}get length(){return this.len}isEqual(t){return yi.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof yi?t.forEach((s=>{r.push(s)})):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,s=this.limit();r<s;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const s=Math.min(t.length,r.length);for(let l=0;l<s;l++){const u=yi.compareSegments(t.get(l),r.get(l));if(u!==0)return u}return At(t.length,r.length)}static compareSegments(t,r){const s=yi.isNumericId(t),l=yi.isNumericId(r);return s&&!l?-1:!s&&l?1:s&&l?yi.extractNumericId(t).compare(yi.extractNumericId(r)):bm(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ks.fromString(t.substring(4,t.length-2))}}class en extends yi{construct(t,r,s){return new en(t,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const s of t){if(s.indexOf("//")>=0)throw new Ke(we.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter((l=>l.length>0)))}return new en(r)}static emptyPath(){return new en([])}}const wS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends yi{construct(t,r,s){return new rr(t,r,s)}static isValidIdentifier(t){return wS.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l0}static keyField(){return new rr([l0])}static fromServerFormat(t){const r=[];let s="",l=0;const u=()=>{if(s.length===0)throw new Ke(we.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let p=!1;for(;l<t.length;){const _=t[l];if(_==="\\"){if(l+1===t.length)throw new Ke(we.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ke(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=v,l+=2}else _==="`"?(p=!p,l++):_!=="."||p?(s+=_,l++):(u(),l++)}if(u(),p)throw new Ke(we.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new rr(r)}static emptyPath(){return new rr([])}}class Ze{constructor(t){this.path=t}static fromPath(t){return new Ze(en.fromString(t))}static fromName(t){return new Ze(en.fromString(t).popFirst(5))}static empty(){return new Ze(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&en.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return en.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ze(new en(t.slice()))}}function n_(a,t,r){if(!r)throw new Ke(we.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function r_(a,t,r,s){if(t===!0&&s===!0)throw new Ke(we.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function u0(a){if(!Ze.isDocumentKey(a))throw new Ke(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function c0(a){if(Ze.isDocumentKey(a))throw new Ke(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function a_(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Hh(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":st(12329,{type:typeof a})}function Gs(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Ke(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Hh(a);throw new Ke(we.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function Hn(a,t){const r={typeString:a};return t&&(r.value=t),r}function Qu(a,t){if(!a_(a))throw new Ke(we.INVALID_ARGUMENT,"JSON must be an object");let r;for(const s in t)if(t[s]){const l=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in a)){r=`JSON missing required field: '${s}'`;break}const p=a[s];if(l&&typeof p!==l){r=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&p!==u.value){r=`Expected '${s}' field to equal '${u.value}'`;break}}if(r)throw new Ke(we.INVALID_ARGUMENT,r);return!0}const h0=-62135596800,f0=1e6;class tn{static now(){return tn.fromMillis(Date.now())}static fromDate(t){return tn.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),s=Math.floor((t-1e3*r)*f0);return new tn(r,s)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ke(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ke(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<h0)throw new Ke(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ke(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f0}_compareTo(t){return this.seconds===t.seconds?At(this.nanoseconds,t.nanoseconds):At(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qu(t,tn._jsonSchema))return new tn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-h0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tn._jsonSchemaVersion="firestore/timestamp/1.0",tn._jsonSchema={type:Hn("string",tn._jsonSchemaVersion),seconds:Hn("number"),nanoseconds:Hn("number")};class ct{static fromTimestamp(t){return new ct(t)}static min(){return new ct(new tn(0,0))}static max(){return new ct(new tn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zu=-1;function TS(a,t){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,l=ct.fromTimestamp(s===1e9?new tn(r+1,0):new tn(r,s));return new Xs(l,Ze.empty(),t)}function SS(a){return new Xs(a.readTime,a.key,zu)}class Xs{constructor(t,r,s){this.readTime=t,this.documentKey=r,this.largestBatchId=s}static min(){return new Xs(ct.min(),Ze.empty(),zu)}static max(){return new Xs(ct.max(),Ze.empty(),zu)}}function AS(a,t){let r=a.readTime.compareTo(t.readTime);return r!==0?r:(r=Ze.comparator(a.documentKey,t.documentKey),r!==0?r:At(a.largestBatchId,t.largestBatchId))}const NS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Pl(a){if(a.code!==we.FAILED_PRECONDITION||a.message!==NS)throw a;He("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Te(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(r,u).next(s,l)}}))}toPromise(){return new Promise(((t,r)=>{this.next(t,r)}))}wrapUserFunction(t){try{const r=t();return r instanceof Te?r:Te.resolve(r)}catch(r){return Te.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction((()=>t(r))):Te.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction((()=>t(r))):Te.reject(r)}static resolve(t){return new Te(((r,s)=>{r(t)}))}static reject(t){return new Te(((r,s)=>{s(t)}))}static waitFor(t){return new Te(((r,s)=>{let l=0,u=0,p=!1;t.forEach((_=>{++l,_.next((()=>{++u,p&&u===l&&r()}),(v=>s(v)))})),p=!0,u===l&&r()}))}static or(t){let r=Te.resolve(!1);for(const s of t)r=r.next((l=>l?Te.resolve(l):s()));return r}static forEach(t,r){const s=[];return t.forEach(((l,u)=>{s.push(r.call(this,l,u))})),this.waitFor(s)}static mapArray(t,r){return new Te(((s,l)=>{const u=t.length,p=new Array(u);let _=0;for(let v=0;v<u;v++){const b=v;r(t[b]).next((A=>{p[b]=A,++_,_===u&&s(p)}),(A=>l(A)))}}))}static doWhile(t,r){return new Te(((s,l)=>{const u=()=>{t()===!0?r().next((()=>{u()}),l):s()};u()}))}}function CS(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ll(a){return a.name==="IndexedDbTransactionError"}class Kh{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>r.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Kh.ce=-1;const Xm=-1;function Gh(a){return a==null}function Th(a){return a===0&&1/a==-1/0}function jS(a){return typeof a=="number"&&Number.isInteger(a)&&!Th(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const i_="";function DS(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=d0(t)),t=IS(a.get(r),t);return d0(t)}function IS(a,t){let r=t;const s=a.length;for(let l=0;l<s;l++){const u=a.charAt(l);switch(u){case"\0":r+="";break;case i_:r+="";break;default:r+=u}}return r}function d0(a){return a+i_+""}function m0(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function Oo(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function s_(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class bn{constructor(t,r){this.comparator=t,this.root=r||hr.EMPTY}insert(t,r){return new bn(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(t){return new bn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hr.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(t){let r=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return r+s.left.size;l<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((r,s)=>(t(r,s),!1)))}toString(){const t=[];return this.inorderTraversal(((r,s)=>(t.push(`${r}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new rh(this.root,t,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new rh(this.root,t,this.comparator,!0)}}class rh{constructor(t,r,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=r?s(t.key,r):1,r&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hr{constructor(t,r,s,l,u){this.key=t,this.value=r,this.color=s??hr.RED,this.left=l??hr.EMPTY,this.right=u??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,s,l,u){return new hr(t??this.key,r??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let l=this;const u=s(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,r,s),null):u===0?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let s,l=this;if(r(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),r(t,l.key)===0){if(l.right.isEmpty())return hr.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw st(27949);return t+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(t,r,s,l,u){return this}insert(t,r,s){return new hr(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yn{constructor(t){this.comparator=t,this.data=new bn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((r,s)=>(t(r),!1)))}forEachInRange(t,r){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;r(l.key)}}forEachWhile(t,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(t){return new p0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach((s=>{r=r.add(s)})),r}isEqual(t){if(!(t instanceof Yn)||this.size!==t.size)return!1;const r=this.data.getIterator(),s=t.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((r=>{t.push(r)})),t}toString(){const t=[];return this.forEach((r=>t.push(r))),"SortedSet("+t.toString()+")"}copy(t){const r=new Yn(this.comparator);return r.data=t,r}}class p0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ja{constructor(t){this.fields=t,t.sort(rr.comparator)}static empty(){return new Ja([])}unionWith(t){let r=new Yn(rr.comparator);for(const s of this.fields)r=r.add(s);for(const s of t)r=r.add(s);return new Ja(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return El(this.fields,t.fields,((r,s)=>r.isEqual(s)))}}class o_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ar{constructor(t){this.binaryString=t}static fromBase64String(t){const r=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new o_("Invalid base64 string: "+u):u}})(t);return new ar(r)}static fromUint8Array(t){const r=(function(l){let u="";for(let p=0;p<l.length;++p)u+=String.fromCharCode(l[p]);return u})(t);return new ar(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const s=new Uint8Array(r.length);for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return At(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const OS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(a){if(qt(!!a,39018),typeof a=="string"){let t=0;const r=OS.exec(a);if(qt(!!r,46558,{timestamp:a}),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Dn(a.seconds),nanos:Dn(a.nanos)}}function Dn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Zs(a){return typeof a=="string"?ar.fromBase64String(a):ar.fromUint8Array(a)}const l_="server_timestamp",u_="__type__",c_="__previous_value__",h_="__local_write_time__";function $m(a){return(a?.mapValue?.fields||{})[u_]?.stringValue===l_}function Qh(a){const t=a.mapValue.fields[c_];return $m(t)?Qh(t):t}function Uu(a){const t=$s(a.mapValue.fields[h_].timestampValue);return new tn(t.seconds,t.nanos)}class MS{constructor(t,r,s,l,u,p,_,v,b,A){this.databaseId=t,this.appId=r,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=A}}const Sh="(default)";class wl{constructor(t,r){this.projectId=t,this.database=r||Sh}static empty(){return new wl("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(t){return t instanceof wl&&t.projectId===this.projectId&&t.database===this.database}}const f_="__type__",VS="__max__",ah={mapValue:{}},d_="__vector__",Ah="value";function Js(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?$m(a)?4:PS(a)?9007199254740991:kS(a)?10:11:st(28295,{value:a})}function xi(a,t){if(a===t)return!0;const r=Js(a);if(r!==Js(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return Uu(a).isEqual(Uu(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const p=$s(l.timestampValue),_=$s(u.timestampValue);return p.seconds===_.seconds&&p.nanos===_.nanos})(a,t);case 5:return a.stringValue===t.stringValue;case 6:return(function(l,u){return Zs(l.bytesValue).isEqual(Zs(u.bytesValue))})(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return(function(l,u){return Dn(l.geoPointValue.latitude)===Dn(u.geoPointValue.latitude)&&Dn(l.geoPointValue.longitude)===Dn(u.geoPointValue.longitude)})(a,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Dn(l.integerValue)===Dn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const p=Dn(l.doubleValue),_=Dn(u.doubleValue);return p===_?Th(p)===Th(_):isNaN(p)&&isNaN(_)}return!1})(a,t);case 9:return El(a.arrayValue.values||[],t.arrayValue.values||[],xi);case 10:case 11:return(function(l,u){const p=l.mapValue.fields||{},_=u.mapValue.fields||{};if(m0(p)!==m0(_))return!1;for(const v in p)if(p.hasOwnProperty(v)&&(_[v]===void 0||!xi(p[v],_[v])))return!1;return!0})(a,t);default:return st(52216,{left:a})}}function Bu(a,t){return(a.values||[]).find((r=>xi(r,t)))!==void 0}function Tl(a,t){if(a===t)return 0;const r=Js(a),s=Js(t);if(r!==s)return At(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return At(a.booleanValue,t.booleanValue);case 2:return(function(u,p){const _=Dn(u.integerValue||u.doubleValue),v=Dn(p.integerValue||p.doubleValue);return _<v?-1:_>v?1:_===v?0:isNaN(_)?isNaN(v)?0:-1:1})(a,t);case 3:return g0(a.timestampValue,t.timestampValue);case 4:return g0(Uu(a),Uu(t));case 5:return bm(a.stringValue,t.stringValue);case 6:return(function(u,p){const _=Zs(u),v=Zs(p);return _.compareTo(v)})(a.bytesValue,t.bytesValue);case 7:return(function(u,p){const _=u.split("/"),v=p.split("/");for(let b=0;b<_.length&&b<v.length;b++){const A=At(_[b],v[b]);if(A!==0)return A}return At(_.length,v.length)})(a.referenceValue,t.referenceValue);case 8:return(function(u,p){const _=At(Dn(u.latitude),Dn(p.latitude));return _!==0?_:At(Dn(u.longitude),Dn(p.longitude))})(a.geoPointValue,t.geoPointValue);case 9:return y0(a.arrayValue,t.arrayValue);case 10:return(function(u,p){const _=u.fields||{},v=p.fields||{},b=_[Ah]?.arrayValue,A=v[Ah]?.arrayValue,N=At(b?.values?.length||0,A?.values?.length||0);return N!==0?N:y0(b,A)})(a.mapValue,t.mapValue);case 11:return(function(u,p){if(u===ah.mapValue&&p===ah.mapValue)return 0;if(u===ah.mapValue)return 1;if(p===ah.mapValue)return-1;const _=u.fields||{},v=Object.keys(_),b=p.fields||{},A=Object.keys(b);v.sort(),A.sort();for(let N=0;N<v.length&&N<A.length;++N){const O=bm(v[N],A[N]);if(O!==0)return O;const $=Tl(_[v[N]],b[A[N]]);if($!==0)return $}return At(v.length,A.length)})(a.mapValue,t.mapValue);default:throw st(23264,{he:r})}}function g0(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return At(a,t);const r=$s(a),s=$s(t),l=At(r.seconds,s.seconds);return l!==0?l:At(r.nanos,s.nanos)}function y0(a,t){const r=a.values||[],s=t.values||[];for(let l=0;l<r.length&&l<s.length;++l){const u=Tl(r[l],s[l]);if(u)return u}return At(r.length,s.length)}function Sl(a){return _m(a)}function _m(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(r){const s=$s(r);return`time(${s.seconds},${s.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(r){return Zs(r).toBase64()})(a.bytesValue):"referenceValue"in a?(function(r){return Ze.fromName(r).toString()})(a.referenceValue):"geoPointValue"in a?(function(r){return`geo(${r.latitude},${r.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(r){let s="[",l=!0;for(const u of r.values||[])l?l=!1:s+=",",s+=_m(u);return s+"]"})(a.arrayValue):"mapValue"in a?(function(r){const s=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const p of s)u?u=!1:l+=",",l+=`${p}:${_m(r.fields[p])}`;return l+"}"})(a.mapValue):st(61005,{value:a})}function hh(a){switch(Js(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qh(a);return t?16+hh(t):16;case 5:return 2*a.stringValue.length;case 6:return Zs(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+hh(u)),0)})(a.arrayValue);case 10:case 11:return(function(s){let l=0;return Oo(s.fields,((u,p)=>{l+=u.length+hh(p)})),l})(a.mapValue);default:throw st(13486,{value:a})}}function v0(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function xm(a){return!!a&&"integerValue"in a}function Zm(a){return!!a&&"arrayValue"in a}function b0(a){return!!a&&"nullValue"in a}function _0(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function fh(a){return!!a&&"mapValue"in a}function kS(a){return(a?.mapValue?.fields||{})[f_]?.stringValue===d_}function ju(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const t={mapValue:{fields:{}}};return Oo(a.mapValue.fields,((r,s)=>t.mapValue.fields[r]=ju(s))),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ju(a.arrayValue.values[r]);return t}return{...a}}function PS(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===VS}class La{constructor(t){this.value=t}static empty(){return new La({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let s=0;s<t.length-1;++s)if(r=(r.mapValue.fields||{})[t.get(s)],!fh(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ju(r)}setAll(t){let r=rr.emptyPath(),s={},l=[];t.forEach(((p,_)=>{if(!r.isImmediateParentOf(_)){const v=this.getFieldsMap(r);this.applyChanges(v,s,l),s={},l=[],r=_.popLast()}p?s[_.lastSegment()]=ju(p):l.push(_.lastSegment())}));const u=this.getFieldsMap(r);this.applyChanges(u,s,l)}delete(t){const r=this.field(t.popLast());fh(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return xi(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=r.mapValue.fields[t.get(s)];fh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[t.get(s)]=l),r=l}return r.mapValue.fields}applyChanges(t,r,s){Oo(r,((l,u)=>t[l]=u));for(const l of s)delete t[l]}clone(){return new La(ju(this.value))}}function m_(a){const t=[];return Oo(a.fields,((r,s)=>{const l=new rr([r]);if(fh(s)){const u=m_(s.mapValue).fields;if(u.length===0)t.push(l);else for(const p of u)t.push(l.child(p))}else t.push(l)})),new Ja(t)}class _r{constructor(t,r,s,l,u,p,_){this.key=t,this.documentType=r,this.version=s,this.readTime=l,this.createTime=u,this.data=p,this.documentState=_}static newInvalidDocument(t){return new _r(t,0,ct.min(),ct.min(),ct.min(),La.empty(),0)}static newFoundDocument(t,r,s,l){return new _r(t,1,r,ct.min(),s,l,0)}static newNoDocument(t,r){return new _r(t,2,r,ct.min(),ct.min(),La.empty(),0)}static newUnknownDocument(t,r){return new _r(t,3,r,ct.min(),ct.min(),La.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=La.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=La.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof _r&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nh{constructor(t,r){this.position=t,this.inclusive=r}}function x0(a,t,r){let s=0;for(let l=0;l<a.position.length;l++){const u=t[l],p=a.position[l];if(u.field.isKeyField()?s=Ze.comparator(Ze.fromName(p.referenceValue),r.key):s=Tl(p,r.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function E0(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!xi(a.position[r],t.position[r]))return!1;return!0}class Rh{constructor(t,r="asc"){this.field=t,this.dir=r}}function LS(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class p_{}class Fn extends p_{constructor(t,r,s){super(),this.field=t,this.op=r,this.value=s}static create(t,r,s){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,s):new US(t,r,s):r==="array-contains"?new FS(t,s):r==="in"?new HS(t,s):r==="not-in"?new KS(t,s):r==="array-contains-any"?new GS(t,s):new Fn(t,r,s)}static createKeyFieldInFilter(t,r,s){return r==="in"?new BS(t,s):new qS(t,s)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Tl(r,this.value)):r!==null&&Js(this.value)===Js(r)&&this.matchesComparison(Tl(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends p_{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new ti(t,r)}matches(t){return g_(this)?this.filters.find((r=>!r.matches(t)))===void 0:this.filters.find((r=>r.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,r)=>t.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function g_(a){return a.op==="and"}function y_(a){return zS(a)&&g_(a)}function zS(a){for(const t of a.filters)if(t instanceof ti)return!1;return!0}function Em(a){if(a instanceof Fn)return a.field.canonicalString()+a.op.toString()+Sl(a.value);if(y_(a))return a.filters.map((t=>Em(t))).join(",");{const t=a.filters.map((r=>Em(r))).join(",");return`${a.op}(${t})`}}function v_(a,t){return a instanceof Fn?(function(s,l){return l instanceof Fn&&s.op===l.op&&s.field.isEqual(l.field)&&xi(s.value,l.value)})(a,t):a instanceof ti?(function(s,l){return l instanceof ti&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,p,_)=>u&&v_(p,l.filters[_])),!0):!1})(a,t):void st(19439)}function b_(a){return a instanceof Fn?(function(r){return`${r.field.canonicalString()} ${r.op} ${Sl(r.value)}`})(a):a instanceof ti?(function(r){return r.op.toString()+" {"+r.getFilters().map(b_).join(" ,")+"}"})(a):"Filter"}class US extends Fn{constructor(t,r,s){super(t,r,s),this.key=Ze.fromName(s.referenceValue)}matches(t){const r=Ze.comparator(t.key,this.key);return this.matchesComparison(r)}}class BS extends Fn{constructor(t,r){super(t,"in",r),this.keys=__("in",r)}matches(t){return this.keys.some((r=>r.isEqual(t.key)))}}class qS extends Fn{constructor(t,r){super(t,"not-in",r),this.keys=__("not-in",r)}matches(t){return!this.keys.some((r=>r.isEqual(t.key)))}}function __(a,t){return(t.arrayValue?.values||[]).map((r=>Ze.fromName(r.referenceValue)))}class FS extends Fn{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Zm(r)&&Bu(r.arrayValue,this.value)}}class HS extends Fn{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Bu(this.value.arrayValue,r)}}class KS extends Fn{constructor(t,r){super(t,"not-in",r)}matches(t){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Bu(this.value.arrayValue,r)}}class GS extends Fn{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Zm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((s=>Bu(this.value.arrayValue,s)))}}class QS{constructor(t,r=null,s=[],l=[],u=null,p=null,_=null){this.path=t,this.collectionGroup=r,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=p,this.endAt=_,this.Te=null}}function w0(a,t=null,r=[],s=[],l=null,u=null,p=null){return new QS(a,t,r,s,l,u,p)}function Jm(a){const t=ft(a);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map((s=>Em(s))).join(","),r+="|ob:",r+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Gh(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Sl(s))).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Sl(s))).join(",")),t.Te=r}return t.Te}function Wm(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!LS(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!v_(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!E0(a.startAt,t.startAt)&&E0(a.endAt,t.endAt)}function wm(a){return Ze.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class Yu{constructor(t,r=null,s=[],l=[],u=null,p="F",_=null,v=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=p,this.startAt=_,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YS(a,t,r,s,l,u,p,_){return new Yu(a,t,r,s,l,u,p,_)}function ep(a){return new Yu(a)}function T0(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function x_(a){return a.collectionGroup!==null}function Du(a){const t=ft(a);if(t.Ie===null){t.Ie=[];const r=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),r.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(p){let _=new Yn(rr.comparator);return p.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(_=_.add(b.field))}))})),_})(t).forEach((u=>{r.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Rh(u,s))})),r.has(rr.keyField().canonicalString())||t.Ie.push(new Rh(rr.keyField(),s))}return t.Ie}function vi(a){const t=ft(a);return t.Ee||(t.Ee=XS(t,Du(a))),t.Ee}function XS(a,t){if(a.limitType==="F")return w0(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Rh(l.field,u)}));const r=a.endAt?new Nh(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Nh(a.startAt.position,a.startAt.inclusive):null;return w0(a.path,a.collectionGroup,t,a.filters,a.limit,r,s)}}function Tm(a,t){const r=a.filters.concat([t]);return new Yu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Sm(a,t,r){return new Yu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function Yh(a,t){return Wm(vi(a),vi(t))&&a.limitType===t.limitType}function E_(a){return`${Jm(vi(a))}|lt:${a.limitType}`}function gl(a){return`Query(target=${(function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map((l=>b_(l))).join(", ")}]`),Gh(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map((l=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(l))).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map((l=>Sl(l))).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map((l=>Sl(l))).join(",")),`Target(${s})`})(vi(a))}; limitType=${a.limitType})`}function Xh(a,t){return t.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ze.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(a,t)&&(function(s,l){for(const u of Du(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(a,t)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(a,t)&&(function(s,l){return!(s.startAt&&!(function(p,_,v){const b=x0(p,_,v);return p.inclusive?b<=0:b<0})(s.startAt,Du(s),l)||s.endAt&&!(function(p,_,v){const b=x0(p,_,v);return p.inclusive?b>=0:b>0})(s.endAt,Du(s),l))})(a,t)}function $S(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function w_(a){return(t,r)=>{let s=!1;for(const l of Du(a)){const u=ZS(l,t,r);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function ZS(a,t,r){const s=a.field.isKeyField()?Ze.comparator(t.key,r.key):(function(u,p,_){const v=p.data.field(u),b=_.data.field(u);return v!==null&&b!==null?Tl(v,b):st(42886)})(a.field,t,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return st(19790,{direction:a.dir})}}class Mo{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,r){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,r]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,r]);l.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[r]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Oo(this.inner,((r,s)=>{for(const[l,u]of s)t(l,u)}))}isEmpty(){return s_(this.inner)}size(){return this.innerSize}}const JS=new bn(Ze.comparator);function ts(){return JS}const T_=new bn(Ze.comparator);function Nu(...a){let t=T_;for(const r of a)t=t.insert(r.key,r);return t}function S_(a){let t=T_;return a.forEach(((r,s)=>t=t.insert(r,s.overlayedDocument))),t}function Ao(){return Iu()}function A_(){return Iu()}function Iu(){return new Mo((a=>a.toString()),((a,t)=>a.isEqual(t)))}const WS=new bn(Ze.comparator),eA=new Yn(Ze.comparator);function Nt(...a){let t=eA;for(const r of a)t=t.add(r);return t}const tA=new Yn(At);function nA(){return tA}function tp(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(t)?"-0":t}}function N_(a){return{integerValue:""+a}}function rA(a,t){return jS(t)?N_(t):tp(a,t)}class $h{constructor(){this._=void 0}}function aA(a,t,r){return a instanceof Ch?(function(l,u){const p={fields:{[u_]:{stringValue:l_},[h_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&$m(u)&&(u=Qh(u)),u&&(p.fields[c_]=u),{mapValue:p}})(r,t):a instanceof qu?C_(a,t):a instanceof Fu?j_(a,t):(function(l,u){const p=R_(l,u),_=S0(p)+S0(l.Ae);return xm(p)&&xm(l.Ae)?N_(_):tp(l.serializer,_)})(a,t)}function iA(a,t,r){return a instanceof qu?C_(a,t):a instanceof Fu?j_(a,t):r}function R_(a,t){return a instanceof jh?(function(s){return xm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Ch extends $h{}class qu extends $h{constructor(t){super(),this.elements=t}}function C_(a,t){const r=D_(t);for(const s of a.elements)r.some((l=>xi(l,s)))||r.push(s);return{arrayValue:{values:r}}}class Fu extends $h{constructor(t){super(),this.elements=t}}function j_(a,t){let r=D_(t);for(const s of a.elements)r=r.filter((l=>!xi(l,s)));return{arrayValue:{values:r}}}class jh extends $h{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function S0(a){return Dn(a.integerValue||a.doubleValue)}function D_(a){return Zm(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function sA(a,t){return a.field.isEqual(t.field)&&(function(s,l){return s instanceof qu&&l instanceof qu||s instanceof Fu&&l instanceof Fu?El(s.elements,l.elements,xi):s instanceof jh&&l instanceof jh?xi(s.Ae,l.Ae):s instanceof Ch&&l instanceof Ch})(a.transform,t.transform)}class oA{constructor(t,r){this.version=t,this.transformResults=r}}class bi{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new bi}static exists(t){return new bi(void 0,t)}static updateTime(t){return new bi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function dh(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class Zh{}function I_(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new np(a.key,bi.none()):new Xu(a.key,a.data,bi.none());{const r=a.data,s=La.empty();let l=new Yn(rr.comparator);for(let u of t.fields)if(!l.has(u)){let p=r.field(u);p===null&&u.length>1&&(u=u.popLast(),p=r.field(u)),p===null?s.delete(u):s.set(u,p),l=l.add(u)}return new Vo(a.key,s,new Ja(l.toArray()),bi.none())}}function lA(a,t,r){a instanceof Xu?(function(l,u,p){const _=l.value.clone(),v=N0(l.fieldTransforms,u,p.transformResults);_.setAll(v),u.convertToFoundDocument(p.version,_).setHasCommittedMutations()})(a,t,r):a instanceof Vo?(function(l,u,p){if(!dh(l.precondition,u))return void u.convertToUnknownDocument(p.version);const _=N0(l.fieldTransforms,u,p.transformResults),v=u.data;v.setAll(O_(l)),v.setAll(_),u.convertToFoundDocument(p.version,v).setHasCommittedMutations()})(a,t,r):(function(l,u,p){u.convertToNoDocument(p.version).setHasCommittedMutations()})(0,t,r)}function Ou(a,t,r,s){return a instanceof Xu?(function(u,p,_,v){if(!dh(u.precondition,p))return _;const b=u.value.clone(),A=R0(u.fieldTransforms,v,p);return b.setAll(A),p.convertToFoundDocument(p.version,b).setHasLocalMutations(),null})(a,t,r,s):a instanceof Vo?(function(u,p,_,v){if(!dh(u.precondition,p))return _;const b=R0(u.fieldTransforms,v,p),A=p.data;return A.setAll(O_(u)),A.setAll(b),p.convertToFoundDocument(p.version,A).setHasLocalMutations(),_===null?null:_.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((N=>N.field)))})(a,t,r,s):(function(u,p,_){return dh(u.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):_})(a,t,r)}function uA(a,t){let r=null;for(const s of a.fieldTransforms){const l=t.data.field(s.field),u=R_(s.transform,l||null);u!=null&&(r===null&&(r=La.empty()),r.set(s.field,u))}return r||null}function A0(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&El(s,l,((u,p)=>sA(u,p)))})(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Xu extends Zh{constructor(t,r,s,l=[]){super(),this.key=t,this.value=r,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Vo extends Zh{constructor(t,r,s,l,u=[]){super(),this.key=t,this.data=r,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function O_(a){const t=new Map;return a.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const s=a.data.field(r);t.set(r,s)}})),t}function N0(a,t,r){const s=new Map;qt(a.length===r.length,32656,{Re:r.length,Ve:a.length});for(let l=0;l<r.length;l++){const u=a[l],p=u.transform,_=t.data.field(u.field);s.set(u.field,iA(p,_,r[l]))}return s}function R0(a,t,r){const s=new Map;for(const l of a){const u=l.transform,p=r.data.field(l.field);s.set(l.field,aA(u,p,t))}return s}class np extends Zh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cA extends Zh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hA{constructor(t,r,s,l){this.batchId=t,this.localWriteTime=r,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,r){const s=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&lA(u,t,s[l])}}applyToLocalView(t,r){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(r=Ou(s,t,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(r=Ou(s,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const s=A_();return this.mutations.forEach((l=>{const u=t.get(l.key),p=u.overlayedDocument;let _=this.applyToLocalView(p,u.mutatedFields);_=r.has(l.key)?null:_;const v=I_(p,_);v!==null&&s.set(l.key,v),p.isValidDocument()||p.convertToNoDocument(ct.min())})),s}keys(){return this.mutations.reduce(((t,r)=>t.add(r.key)),Nt())}isEqual(t){return this.batchId===t.batchId&&El(this.mutations,t.mutations,((r,s)=>A0(r,s)))&&El(this.baseMutations,t.baseMutations,((r,s)=>A0(r,s)))}}class rp{constructor(t,r,s,l){this.batch=t,this.commitVersion=r,this.mutationResults=s,this.docVersions=l}static from(t,r,s){qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return WS})();const u=t.mutations;for(let p=0;p<u.length;p++)l=l.insert(u[p].key,s[p].version);return new rp(t,r,s,l)}}class fA{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class dA{constructor(t,r){this.count=t,this.unchangedNames=r}}var qn,It;function mA(a){switch(a){case we.OK:return st(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return st(15467,{code:a})}}function M_(a){if(a===void 0)return es("GRPC error has no .code"),we.UNKNOWN;switch(a){case qn.OK:return we.OK;case qn.CANCELLED:return we.CANCELLED;case qn.UNKNOWN:return we.UNKNOWN;case qn.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case qn.INTERNAL:return we.INTERNAL;case qn.UNAVAILABLE:return we.UNAVAILABLE;case qn.UNAUTHENTICATED:return we.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case qn.NOT_FOUND:return we.NOT_FOUND;case qn.ALREADY_EXISTS:return we.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return we.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case qn.ABORTED:return we.ABORTED;case qn.OUT_OF_RANGE:return we.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return we.UNIMPLEMENTED;case qn.DATA_LOSS:return we.DATA_LOSS;default:return st(39323,{code:a})}}(It=qn||(qn={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function pA(){return new TextEncoder}const gA=new Ks([4294967295,4294967295],0);function C0(a){const t=pA().encode(a),r=new Qb;return r.update(t),new Uint8Array(r.digest())}function j0(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ks([r,s],0),new Ks([l,u],0)]}class ap{constructor(t,r,s){if(this.bitmap=t,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Ru(`Invalid padding: ${r}`);if(s<0)throw new Ru(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${s}`);if(t.length===0&&r!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Ks.fromNumber(this.ge)}ye(t,r,s){let l=t.add(r.multiply(Ks.fromNumber(s)));return l.compare(gA)===1&&(l=new Ks([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=C0(t),[s,l]=j0(r);for(let u=0;u<this.hashCount;u++){const p=this.ye(s,l,u);if(!this.we(p))return!1}return!0}static create(t,r,s){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),p=new ap(u,l,r);return s.forEach((_=>p.insert(_))),p}insert(t){if(this.ge===0)return;const r=C0(t),[s,l]=j0(r);for(let u=0;u<this.hashCount;u++){const p=this.ye(s,l,u);this.Se(p)}}Se(t){const r=Math.floor(t/8),s=t%8;this.bitmap[r]|=1<<s}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jh{constructor(t,r,s,l,u){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,r,s){const l=new Map;return l.set(t,$u.createSynthesizedTargetChangeForCurrentChange(t,r,s)),new Jh(ct.min(),l,new bn(At),ts(),Nt())}}class $u{constructor(t,r,s,l,u){this.resumeToken=t,this.current=r,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,r,s){return new $u(s,r,Nt(),Nt(),Nt())}}class mh{constructor(t,r,s,l){this.be=t,this.removedTargetIds=r,this.key=s,this.De=l}}class V_{constructor(t,r){this.targetId=t,this.Ce=r}}class k_{constructor(t,r,s=ar.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=r,this.resumeToken=s,this.cause=l}}class D0{constructor(){this.ve=0,this.Fe=I0(),this.Me=ar.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Nt(),r=Nt(),s=Nt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:r=r.add(l);break;case 1:s=s.add(l);break;default:st(38017,{changeType:u})}})),new $u(this.Me,this.xe,t,r,s)}qe(){this.Oe=!1,this.Fe=I0()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yA{constructor(t){this.Ge=t,this.ze=new Map,this.je=ts(),this.Je=ih(),this.He=ih(),this.Ye=new bn(At)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,(r=>{const s=this.nt(r);switch(t.state){case 0:this.rt(r)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),s.Le(t.resumeToken));break;default:st(56790,{state:t.state})}}))}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach(((s,l)=>{this.rt(l)&&r(l)}))}st(t){const r=t.targetId,s=t.Ce.count,l=this.ot(r);if(l){const u=l.target;if(wm(u))if(s===0){const p=new Ze(u.path);this.et(r,p,_r.newNoDocument(p,ct.min()))}else qt(s===1,20013,{expectedCount:s});else{const p=this._t(r);if(p!==s){const _=this.ut(t),v=_?this.ct(_,t,p):1;if(v!==0){this.it(r);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,b)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=r;let p,_;try{p=Zs(s).toUint8Array()}catch(v){if(v instanceof o_)return Do("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{_=new ap(p,l,u)}catch(v){return Do(v instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return _.ge===0?null:_}ct(t,r,s){return r.Ce.count===s-this.Pt(t,r.targetId)?0:2}Pt(t,r){const s=this.Ge.getRemoteKeysForTarget(r);let l=0;return s.forEach((u=>{const p=this.Ge.ht(),_=`projects/${p.projectId}/databases/${p.database}/documents/${u.path.canonicalString()}`;t.mightContain(_)||(this.et(r,u,null),l++)})),l}Tt(t){const r=new Map;this.ze.forEach(((u,p)=>{const _=this.ot(p);if(_){if(u.current&&wm(_.target)){const v=new Ze(_.target.path);this.It(v).has(p)||this.Et(p,v)||this.et(p,v,_r.newNoDocument(v,t))}u.Be&&(r.set(p,u.ke()),u.qe())}}));let s=Nt();this.He.forEach(((u,p)=>{let _=!0;p.forEachWhile((v=>{const b=this.ot(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)})),_&&(s=s.add(u))})),this.je.forEach(((u,p)=>p.setReadTime(t)));const l=new Jh(t,r,this.Ye,this.je,s);return this.je=ts(),this.Je=ih(),this.He=ih(),this.Ye=new bn(At),l}Xe(t,r){if(!this.rt(t))return;const s=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,s),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,r)?l.Qe(r,1):l.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),s&&(this.je=this.je.insert(r,s))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new D0,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Yn(At),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Yn(At),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||He("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new D0),this.Ge.getRemoteKeysForTarget(t).forEach((r=>{this.et(t,r,null)}))}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function ih(){return new bn(Ze.comparator)}function I0(){return new bn(Ze.comparator)}const vA={asc:"ASCENDING",desc:"DESCENDING"},bA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_A={and:"AND",or:"OR"};class xA{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Am(a,t){return a.useProto3Json||Gh(t)?t:{value:t}}function Dh(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function P_(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function EA(a,t){return Dh(a,t.toTimestamp())}function _i(a){return qt(!!a,49232),ct.fromTimestamp((function(r){const s=$s(r);return new tn(s.seconds,s.nanos)})(a))}function ip(a,t){return Nm(a,t).canonicalString()}function Nm(a,t){const r=(function(l){return new en(["projects",l.projectId,"databases",l.database])})(a).child("documents");return t===void 0?r:r.child(t)}function L_(a){const t=en.fromString(a);return qt(F_(t),10190,{key:t.toString()}),t}function Rm(a,t){return ip(a.databaseId,t.path)}function om(a,t){const r=L_(t);if(r.get(1)!==a.databaseId.projectId)throw new Ke(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Ke(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new Ze(U_(r))}function z_(a,t){return ip(a.databaseId,t)}function wA(a){const t=L_(a);return t.length===4?en.emptyPath():U_(t)}function Cm(a){return new en(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function U_(a){return qt(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function O0(a,t,r){return{name:Rm(a,t),fields:r.value.mapValue.fields}}function TA(a,t){let r;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:st(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(b,A){return b.useProto3Json?(qt(A===void 0||typeof A=="string",58123),ar.fromBase64String(A||"")):(qt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),ar.fromUint8Array(A||new Uint8Array))})(a,t.targetChange.resumeToken),p=t.targetChange.cause,_=p&&(function(b){const A=b.code===void 0?we.UNKNOWN:M_(b.code);return new Ke(A,b.message||"")})(p);r=new k_(s,l,u,_||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=om(a,s.document.name),u=_i(s.document.updateTime),p=s.document.createTime?_i(s.document.createTime):ct.min(),_=new La({mapValue:{fields:s.document.fields}}),v=_r.newFoundDocument(l,u,p,_),b=s.targetIds||[],A=s.removedTargetIds||[];r=new mh(b,A,v.key,v)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=om(a,s.document),u=s.readTime?_i(s.readTime):ct.min(),p=_r.newNoDocument(l,u),_=s.removedTargetIds||[];r=new mh([],_,p.key,p)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=om(a,s.document),u=s.removedTargetIds||[];r=new mh([],u,l,null)}else{if(!("filter"in t))return st(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,p=new dA(l,u),_=s.targetId;r=new V_(_,p)}}return r}function SA(a,t){let r;if(t instanceof Xu)r={update:O0(a,t.key,t.value)};else if(t instanceof np)r={delete:Rm(a,t.key)};else if(t instanceof Vo)r={update:O0(a,t.key,t.data),updateMask:MA(t.fieldMask)};else{if(!(t instanceof cA))return st(16599,{Vt:t.type});r={verify:Rm(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map((s=>(function(u,p){const _=p.transform;if(_ instanceof Ch)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof qu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Fu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof jh)return{fieldPath:p.field.canonicalString(),increment:_.Ae};throw st(20930,{transform:p.transform})})(0,s)))),t.precondition.isNone||(r.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:EA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:st(27497)})(a,t.precondition)),r}function AA(a,t){return a&&a.length>0?(qt(t!==void 0,14353),a.map((r=>(function(l,u){let p=l.updateTime?_i(l.updateTime):_i(u);return p.isEqual(ct.min())&&(p=_i(u)),new oA(p,l.transformResults||[])})(r,t)))):[]}function NA(a,t){return{documents:[z_(a,t.path)]}}function RA(a,t){const r={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=z_(a,l);const u=(function(b){if(b.length!==0)return q_(ti.create(b,"and"))})(t.filters);u&&(r.structuredQuery.where=u);const p=(function(b){if(b.length!==0)return b.map((A=>(function(O){return{field:yl(O.field),direction:DA(O.dir)}})(A)))})(t.orderBy);p&&(r.structuredQuery.orderBy=p);const _=Am(a,t.limit);return _!==null&&(r.structuredQuery.limit=_),t.startAt&&(r.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(r.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:r,parent:l}}function CA(a){let t=wA(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let l=null;if(s>0){qt(s===1,65062);const A=r.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let u=[];r.where&&(u=(function(N){const O=B_(N);return O instanceof ti&&y_(O)?O.getFilters():[O]})(r.where));let p=[];r.orderBy&&(p=(function(N){return N.map((O=>(function(se){return new Rh(vl(se.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(se.direction))})(O)))})(r.orderBy));let _=null;r.limit&&(_=(function(N){let O;return O=typeof N=="object"?N.value:N,Gh(O)?null:O})(r.limit));let v=null;r.startAt&&(v=(function(N){const O=!!N.before,$=N.values||[];return new Nh($,O)})(r.startAt));let b=null;return r.endAt&&(b=(function(N){const O=!N.before,$=N.values||[];return new Nh($,O)})(r.endAt)),YS(t,l,p,u,_,"F",v,b)}function jA(a,t){const r=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:l})}})(t.purpose);return r==null?null:{"goog-listen-tags":r}}function B_(a){return a.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=vl(r.unaryFilter.field);return Fn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=vl(r.unaryFilter.field);return Fn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vl(r.unaryFilter.field);return Fn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=vl(r.unaryFilter.field);return Fn.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}})(a):a.fieldFilter!==void 0?(function(r){return Fn.create(vl(r.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(r){return ti.create(r.compositeFilter.filters.map((s=>B_(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return st(1026)}})(r.compositeFilter.op))})(a):st(30097,{filter:a})}function DA(a){return vA[a]}function IA(a){return bA[a]}function OA(a){return _A[a]}function yl(a){return{fieldPath:a.canonicalString()}}function vl(a){return rr.fromServerFormat(a.fieldPath)}function q_(a){return a instanceof Fn?(function(r){if(r.op==="=="){if(_0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NAN"}};if(b0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(_0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NOT_NAN"}};if(b0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(r.field),op:IA(r.op),value:r.value}}})(a):a instanceof ti?(function(r){const s=r.getFilters().map((l=>q_(l)));return s.length===1?s[0]:{compositeFilter:{op:OA(r.op),filters:s}}})(a):st(54877,{filter:a})}function MA(a){const t=[];return a.fields.forEach((r=>t.push(r.canonicalString()))),{fieldPaths:t}}function F_(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class qs{constructor(t,r,s,l,u=ct.min(),p=ct.min(),_=ar.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=r,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_,this.expectedCount=v}withSequenceNumber(t){return new qs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class VA{constructor(t){this.yt=t}}function kA(a){const t=CA({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Sm(t,t.limit,"L"):t}class PA{constructor(){this.Cn=new LA}addToCollectionParentIndex(t,r){return this.Cn.add(r),Te.resolve()}getCollectionParents(t,r){return Te.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Te.resolve()}deleteFieldIndex(t,r){return Te.resolve()}deleteAllFieldIndexes(t){return Te.resolve()}createTargetIndexes(t,r){return Te.resolve()}getDocumentsMatchingTarget(t,r){return Te.resolve(null)}getIndexType(t,r){return Te.resolve(0)}getFieldIndexes(t,r){return Te.resolve([])}getNextCollectionGroupToUpdate(t){return Te.resolve(null)}getMinOffset(t,r){return Te.resolve(Xs.min())}getMinOffsetFromCollectionGroup(t,r){return Te.resolve(Xs.min())}updateCollectionGroup(t,r,s){return Te.resolve()}updateIndexEntries(t,r){return Te.resolve()}}class LA{constructor(){this.index={}}add(t){const r=t.lastSegment(),s=t.popLast(),l=this.index[r]||new Yn(en.comparator),u=!l.has(s);return this.index[r]=l.add(s),u}has(t){const r=t.lastSegment(),s=t.popLast(),l=this.index[r];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Yn(en.comparator)).toArray()}}const M0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H_=41943040;class $r{static withCacheSize(t){return new $r(t,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(H_,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Al{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}const V0="LruGarbageCollector",zA=1048576;function k0([a,t],[r,s]){const l=At(a,r);return l===0?At(t,s):l}class UA{constructor(t){this.Ir=t,this.buffer=new Yn(k0),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();k0(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class BA{constructor(t,r,s){this.garbageCollector=t,this.asyncQueue=r,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){He(V0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ll(r)?He(V0,"Ignoring IndexedDB error during garbage collection: ",r):await Pl(r)}await this.Vr(3e5)}))}}class qA{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next((s=>Math.floor(r/100*s)))}nthSequenceNumber(t,r){if(r===0)return Te.resolve(Kh.ce);const s=new UA(r);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,r,s){return this.mr.removeTargets(t,r,s)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(M0)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M0):this.yr(t,r)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let s,l,u,p,_,v,b;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((N=>(N>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),l=this.params.maximumSequenceNumbersToCollect):l=N,p=Date.now(),this.nthSequenceNumber(t,l)))).next((N=>(s=N,_=Date.now(),this.removeTargets(t,s,r)))).next((N=>(u=N,v=Date.now(),this.removeOrphanedDocuments(t,s)))).next((N=>(b=Date.now(),pl()<=Ot.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-A}ms
	Determined least recently used ${l} in `+(_-p)+`ms
	Removed ${u} targets in `+(v-_)+`ms
	Removed ${N} documents in `+(b-v)+`ms
Total Duration: ${b-A}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:N}))))}}function FA(a,t){return new qA(a,t)}class HA{constructor(){this.changes=new Mo((t=>t.toString()),((t,r)=>t.isEqual(r))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,_r.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?Te.resolve(s):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class KA{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class GA{constructor(t,r,s,l){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,r){let s=null;return this.documentOverlayCache.getOverlay(t,r).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,r)))).next((l=>(s!==null&&Ou(s.mutation,l,Ja.empty(),tn.now()),l)))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next((s=>this.getLocalViewOfDocuments(t,s,Nt()).next((()=>s))))}getLocalViewOfDocuments(t,r,s=Nt()){const l=Ao();return this.populateOverlays(t,l,r).next((()=>this.computeViews(t,r,l,s).next((u=>{let p=Nu();return u.forEach(((_,v)=>{p=p.insert(_,v.overlayedDocument)})),p}))))}getOverlayedDocuments(t,r){const s=Ao();return this.populateOverlays(t,s,r).next((()=>this.computeViews(t,r,s,Nt())))}populateOverlays(t,r,s){const l=[];return s.forEach((u=>{r.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((p,_)=>{r.set(p,_)}))}))}computeViews(t,r,s,l){let u=ts();const p=Iu(),_=(function(){return Iu()})();return r.forEach(((v,b)=>{const A=s.get(b.key);l.has(b.key)&&(A===void 0||A.mutation instanceof Vo)?u=u.insert(b.key,b):A!==void 0?(p.set(b.key,A.mutation.getFieldMask()),Ou(A.mutation,b,A.mutation.getFieldMask(),tn.now())):p.set(b.key,Ja.empty())})),this.recalculateAndSaveOverlays(t,u).next((v=>(v.forEach(((b,A)=>p.set(b,A))),r.forEach(((b,A)=>_.set(b,new KA(A,p.get(b)??null)))),_)))}recalculateAndSaveOverlays(t,r){const s=Iu();let l=new bn(((p,_)=>p-_)),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next((p=>{for(const _ of p)_.keys().forEach((v=>{const b=r.get(v);if(b===null)return;let A=s.get(v)||Ja.empty();A=_.applyToLocalView(b,A),s.set(v,A);const N=(l.get(_.batchId)||Nt()).add(v);l=l.insert(_.batchId,N)}))})).next((()=>{const p=[],_=l.getReverseIterator();for(;_.hasNext();){const v=_.getNext(),b=v.key,A=v.value,N=A_();A.forEach((O=>{if(!u.has(O)){const $=I_(r.get(O),s.get(O));$!==null&&N.set(O,$),u=u.add(O)}})),p.push(this.documentOverlayCache.saveOverlays(t,b,N))}return Te.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,r,s,l){return(function(p){return Ze.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):x_(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,s,l):this.getDocumentsMatchingCollectionQuery(t,r,s,l)}getNextDocuments(t,r,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,s,l).next((u=>{const p=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,s.largestBatchId,l-u.size):Te.resolve(Ao());let _=zu,v=u;return p.next((b=>Te.forEach(b,((A,N)=>(_<N.largestBatchId&&(_=N.largestBatchId),u.get(A)?Te.resolve():this.remoteDocumentCache.getEntry(t,A).next((O=>{v=v.insert(A,O)}))))).next((()=>this.populateOverlays(t,b,u))).next((()=>this.computeViews(t,v,b,Nt()))).next((A=>({batchId:_,changes:S_(A)})))))}))}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ze(r)).next((s=>{let l=Nu();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,r,s,l){const u=r.collectionGroup;let p=Nu();return this.indexManager.getCollectionParents(t,u).next((_=>Te.forEach(_,(v=>{const b=(function(N,O){return new Yu(O,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)})(r,v.child(u));return this.getDocumentsMatchingCollectionQuery(t,b,s,l).next((A=>{A.forEach(((N,O)=>{p=p.insert(N,O)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(t,r,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,s.largestBatchId).next((p=>(u=p,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,s,u,l)))).next((p=>{u.forEach(((v,b)=>{const A=b.getKey();p.get(A)===null&&(p=p.insert(A,_r.newInvalidDocument(A)))}));let _=Nu();return p.forEach(((v,b)=>{const A=u.get(v);A!==void 0&&Ou(A.mutation,b,Ja.empty(),tn.now()),Xh(r,b)&&(_=_.insert(v,b))})),_}))}}class QA{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Te.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,(function(l){return{id:l.id,version:l.version,createTime:_i(l.createTime)}})(r)),Te.resolve()}getNamedQuery(t,r){return Te.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,(function(l){return{name:l.name,query:kA(l.bundledQuery),readTime:_i(l.readTime)}})(r)),Te.resolve()}}class YA{constructor(){this.overlays=new bn(Ze.comparator),this.qr=new Map}getOverlay(t,r){return Te.resolve(this.overlays.get(r))}getOverlays(t,r){const s=Ao();return Te.forEach(r,(l=>this.getOverlay(t,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(t,r,s){return s.forEach(((l,u)=>{this.St(t,r,u)})),Te.resolve()}removeOverlaysForBatchId(t,r,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),Te.resolve()}getOverlaysForCollection(t,r,s){const l=Ao(),u=r.length+1,p=new Ze(r.child("")),_=this.overlays.getIteratorFrom(p);for(;_.hasNext();){const v=_.getNext().value,b=v.getKey();if(!r.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>s&&l.set(v.getKey(),v)}return Te.resolve(l)}getOverlaysForCollectionGroup(t,r,s,l){let u=new bn(((b,A)=>b-A));const p=this.overlays.getIterator();for(;p.hasNext();){const b=p.getNext().value;if(b.getKey().getCollectionGroup()===r&&b.largestBatchId>s){let A=u.get(b.largestBatchId);A===null&&(A=Ao(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const _=Ao(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,A)=>_.set(b,A))),!(_.size()>=l)););return Te.resolve(_)}St(t,r,s){const l=this.overlays.get(s.key);if(l!==null){const p=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new fA(r,s));let u=this.qr.get(r);u===void 0&&(u=Nt(),this.qr.set(r,u)),this.qr.set(r,u.add(s.key))}}class XA{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(t){return Te.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Te.resolve()}}class sp{constructor(){this.Qr=new Yn(nr.$r),this.Ur=new Yn(nr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const s=new nr(t,r);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,r){t.forEach((s=>this.addReference(s,r)))}removeReference(t,r){this.Gr(new nr(t,r))}zr(t,r){t.forEach((s=>this.removeReference(s,r)))}jr(t){const r=new Ze(new en([])),s=new nr(r,t),l=new nr(r,t+1),u=[];return this.Ur.forEachInRange([s,l],(p=>{this.Gr(p),u.push(p.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new Ze(new en([])),s=new nr(r,t),l=new nr(r,t+1);let u=Nt();return this.Ur.forEachInRange([s,l],(p=>{u=u.add(p.key)})),u}containsKey(t){const r=new nr(t,0),s=this.Qr.firstAfterOrEqual(r);return s!==null&&t.isEqual(s.key)}}class nr{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return Ze.comparator(t.key,r.key)||At(t.Yr,r.Yr)}static Kr(t,r){return At(t.Yr,r.Yr)||Ze.comparator(t.key,r.key)}}class $A{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Yn(nr.$r)}checkEmpty(t){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,s,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new hA(u,r,s,l);this.mutationQueue.push(p);for(const _ of l)this.Zr=this.Zr.add(new nr(_.key,u)),this.indexManager.addToCollectionParentIndex(t,_.key.path.popLast());return Te.resolve(p)}lookupMutationBatch(t,r){return Te.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const s=r+1,l=this.ei(s),u=l<0?0:l;return Te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(t){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const s=new nr(r,0),l=new nr(r,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,l],(p=>{const _=this.Xr(p.Yr);u.push(_)})),Te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,r){let s=new Yn(At);return r.forEach((l=>{const u=new nr(l,0),p=new nr(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,p],(_=>{s=s.add(_.Yr)}))})),Te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,r){const s=r.path,l=s.length+1;let u=s;Ze.isDocumentKey(u)||(u=u.child(""));const p=new nr(new Ze(u),0);let _=new Yn(At);return this.Zr.forEachWhile((v=>{const b=v.key.path;return!!s.isPrefixOf(b)&&(b.length===l&&(_=_.add(v.Yr)),!0)}),p),Te.resolve(this.ti(_))}ti(t){const r=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&r.push(l)})),r}removeMutationBatch(t,r){qt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Te.forEach(r.mutations,(l=>{const u=new nr(l.key,r.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,r){const s=new nr(r,0),l=this.Zr.firstAfterOrEqual(s);return Te.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Te.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class ZA{constructor(t){this.ri=t,this.docs=(function(){return new bn(Ze.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const s=r.key,l=this.docs.get(s),u=l?l.size:0,p=this.ri(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:p}),this.size+=p-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const s=this.docs.get(r);return Te.resolve(s?s.document.mutableCopy():_r.newInvalidDocument(r))}getEntries(t,r){let s=ts();return r.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():_r.newInvalidDocument(l))})),Te.resolve(s)}getDocumentsMatchingQuery(t,r,s,l){let u=ts();const p=r.path,_=new Ze(p.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(_);for(;v.hasNext();){const{key:b,value:{document:A}}=v.getNext();if(!p.isPrefixOf(b.path))break;b.path.length>p.length+1||AS(SS(A),s)<=0||(l.has(A.key)||Xh(r,A))&&(u=u.insert(A.key,A.mutableCopy()))}return Te.resolve(u)}getAllFromCollectionGroup(t,r,s,l){st(9500)}ii(t,r){return Te.forEach(this.docs,(s=>r(s)))}newChangeBuffer(t){return new JA(this)}getSize(t){return Te.resolve(this.size)}}class JA extends HA{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?r.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),Te.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}class WA{constructor(t){this.persistence=t,this.si=new Mo((r=>Jm(r)),Wm),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=Al.ur()}forEachTarget(t,r){return this.si.forEach(((s,l)=>r(l))),Te.resolve()}getLastRemoteSnapshotVersion(t){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Te.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(t,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.oi&&(this.oi=r),Te.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Al(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Te.resolve()}updateTargetData(t,r){return this.Pr(r),Te.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Te.resolve()}removeTargets(t,r,s){let l=0;const u=[];return this.si.forEach(((p,_)=>{_.sequenceNumber<=r&&s.get(_.targetId)===null&&(this.si.delete(p),u.push(this.removeMatchingKeysForTargetId(t,_.targetId)),l++)})),Te.waitFor(u).next((()=>l))}getTargetCount(t){return Te.resolve(this.targetCount)}getTargetData(t,r){const s=this.si.get(r)||null;return Te.resolve(s)}addMatchingKeys(t,r,s){return this._i.Wr(r,s),Te.resolve()}removeMatchingKeys(t,r,s){this._i.zr(r,s);const l=this.persistence.referenceDelegate,u=[];return l&&r.forEach((p=>{u.push(l.markPotentiallyOrphaned(t,p))})),Te.waitFor(u)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Te.resolve()}getMatchingKeysForTargetId(t,r){const s=this._i.Hr(r);return Te.resolve(s)}containsKey(t,r){return Te.resolve(this._i.containsKey(r))}}class K_{constructor(t,r){this.ui={},this.overlays={},this.ci=new Kh(0),this.li=!1,this.li=!0,this.hi=new XA,this.referenceDelegate=t(this),this.Pi=new WA(this),this.indexManager=new PA,this.remoteDocumentCache=(function(l){return new ZA(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new VA(r),this.Ii=new QA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new YA,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let s=this.ui[t.toKey()];return s||(s=new $A(r,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,s){He("MemoryPersistence","Starting transaction:",t);const l=new eN(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,r){return Te.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,r))))}}class eN extends RS{constructor(t){super(),this.currentSequenceNumber=t}}class op{constructor(t){this.persistence=t,this.Ri=new sp,this.Vi=null}static mi(t){return new op(t)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(t,r,s){return this.Ri.addReference(s,r),this.fi.delete(s.toString()),Te.resolve()}removeReference(t,r,s){return this.Ri.removeReference(s,r),this.fi.add(s.toString()),Te.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Te.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,r.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,r)))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,(s=>{const l=Ze.fromPath(s);return this.gi(t,l).next((u=>{u||r.removeEntry(l,ct.min())}))})).next((()=>(this.Vi=null,r.apply(t))))}updateLimboDocument(t,r){return this.gi(t,r).next((s=>{s?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(t){return 0}gi(t,r){return Te.or([()=>Te.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class Ih{constructor(t,r){this.persistence=t,this.pi=new Mo((s=>DS(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=FA(this,r)}static mi(t,r){return new Ih(t,r)}Ei(){}di(t){return Te.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>r.next((l=>s+l))))}wr(t){let r=0;return this.pr(t,(s=>{r++})).next((()=>r))}pr(t,r){return Te.forEach(this.pi,((s,l)=>this.br(t,s,l).next((u=>u?Te.resolve():r(l)))))}removeTargets(t,r,s){return this.persistence.getTargetCache().removeTargets(t,r,s)}removeOrphanedDocuments(t,r){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(p=>this.br(t,p,r).next((_=>{_||(s++,u.removeEntry(p,ct.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Te.resolve()}removeTarget(t,r){const s=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,r,s){return this.pi.set(s,t.currentSequenceNumber),Te.resolve()}removeReference(t,r,s){return this.pi.set(s,t.currentSequenceNumber),Te.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Te.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=hh(t.data.value)),r}br(t,r,s){return Te.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const l=this.pi.get(r);return Te.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class lp{constructor(t,r,s,l){this.targetId=t,this.fromCache=r,this.Es=s,this.ds=l}static As(t,r){let s=Nt(),l=Nt();for(const u of r.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new lp(t,r.fromCache,s,l)}}class tN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class nN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return X2()?8:CS(Q2())>0?6:4})()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,s,l){const u={result:null};return this.ys(t,r).next((p=>{u.result=p})).next((()=>{if(!u.result)return this.ws(t,r,l,s).next((p=>{u.result=p}))})).next((()=>{if(u.result)return;const p=new tN;return this.Ss(t,r,p).next((_=>{if(u.result=_,this.Vs)return this.bs(t,r,p,_.size)}))})).next((()=>u.result))}bs(t,r,s,l){return s.documentReadCount<this.fs?(pl()<=Ot.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",gl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(pl()<=Ot.DEBUG&&He("QueryEngine","Query:",gl(r),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(pl()<=Ot.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",gl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,vi(r))):Te.resolve())}ys(t,r){if(T0(r))return Te.resolve(null);let s=vi(r);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(r.limit!==null&&l===1&&(r=Sm(r,null,"F"),s=vi(r)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const p=Nt(...u);return this.ps.getDocuments(t,p).next((_=>this.indexManager.getMinOffset(t,s).next((v=>{const b=this.Ds(r,_);return this.Cs(r,b,p,v.readTime)?this.ys(t,Sm(r,null,"F")):this.vs(t,b,r,v)}))))})))))}ws(t,r,s,l){return T0(r)||l.isEqual(ct.min())?Te.resolve(null):this.ps.getDocuments(t,s).next((u=>{const p=this.Ds(r,u);return this.Cs(r,p,s,l)?Te.resolve(null):(pl()<=Ot.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),gl(r)),this.vs(t,p,r,TS(l,zu)).next((_=>_)))}))}Ds(t,r){let s=new Yn(w_(t));return r.forEach(((l,u)=>{Xh(t,u)&&(s=s.add(u))})),s}Cs(t,r,s,l){if(t.limit===null)return!1;if(s.size!==r.size)return!0;const u=t.limitType==="F"?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,r,s){return pl()<=Ot.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",gl(r)),this.ps.getDocumentsMatchingQuery(t,r,Xs.min(),s)}vs(t,r,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((u=>(r.forEach((p=>{u=u.insert(p.key,p)})),u)))}}const up="LocalStore",rN=3e8;class aN{constructor(t,r,s,l){this.persistence=t,this.Fs=r,this.serializer=l,this.Ms=new bn(At),this.xs=new Mo((u=>Jm(u)),Wm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new GA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>t.collect(r,this.Ms)))}}function iN(a,t,r,s){return new aN(a,t,r,s)}async function G_(a,t){const r=ft(a);return await r.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return r.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,r.Bs(t),r.mutationQueue.getAllMutationBatches(s)))).next((u=>{const p=[],_=[];let v=Nt();for(const b of l){p.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}for(const b of u){_.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}return r.localDocuments.getDocuments(s,v).next((b=>({Ls:b,removedBatchIds:p,addedBatchIds:_})))}))}))}function sN(a,t){const r=ft(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),u=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(_,v,b,A){const N=b.batch,O=N.keys();let $=Te.resolve();return O.forEach((se=>{$=$.next((()=>A.getEntry(v,se))).next((oe=>{const B=b.docVersions.get(se);qt(B!==null,48541),oe.version.compareTo(B)<0&&(N.applyToRemoteDocument(oe,b),oe.isValidDocument()&&(oe.setReadTime(b.commitVersion),A.addEntry(oe)))}))})),$.next((()=>_.mutationQueue.removeMutationBatch(v,N)))})(r,s,t,u).next((()=>u.apply(s))).next((()=>r.mutationQueue.performConsistencyCheck(s))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(_){let v=Nt();for(let b=0;b<_.mutationResults.length;++b)_.mutationResults[b].transformResults.length>0&&(v=v.add(_.batch.mutations[b].key));return v})(t)))).next((()=>r.localDocuments.getDocuments(s,l)))}))}function Q_(a){const t=ft(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>t.Pi.getLastRemoteSnapshotVersion(r)))}function oN(a,t){const r=ft(a),s=t.snapshotVersion;let l=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const p=r.Ns.newChangeBuffer({trackRemovals:!0});l=r.Ms;const _=[];t.targetChanges.forEach(((A,N)=>{const O=l.get(N);if(!O)return;_.push(r.Pi.removeMatchingKeys(u,A.removedDocuments,N).next((()=>r.Pi.addMatchingKeys(u,A.addedDocuments,N))));let $=O.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(N)!==null?$=$.withResumeToken(ar.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):A.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(A.resumeToken,s)),l=l.insert(N,$),(function(oe,B,Q){return oe.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=rN?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(O,$,A)&&_.push(r.Pi.updateTargetData(u,$))}));let v=ts(),b=Nt();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&_.push(r.persistence.referenceDelegate.updateLimboDocument(u,A))})),_.push(lN(u,p,t.documentUpdates).next((A=>{v=A.ks,b=A.qs}))),!s.isEqual(ct.min())){const A=r.Pi.getLastRemoteSnapshotVersion(u).next((N=>r.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));_.push(A)}return Te.waitFor(_).next((()=>p.apply(u))).next((()=>r.localDocuments.getLocalViewOfDocuments(u,v,b))).next((()=>v))})).then((u=>(r.Ms=l,u)))}function lN(a,t,r){let s=Nt(),l=Nt();return r.forEach((u=>s=s.add(u))),t.getEntries(a,s).next((u=>{let p=ts();return r.forEach(((_,v)=>{const b=u.get(_);v.isFoundDocument()!==b.isFoundDocument()&&(l=l.add(_)),v.isNoDocument()&&v.version.isEqual(ct.min())?(t.removeEntry(_,v.readTime),p=p.insert(_,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(v),p=p.insert(_,v)):He(up,"Ignoring outdated watch update for ",_,". Current version:",b.version," Watch version:",v.version)})),{ks:p,qs:l}}))}function uN(a,t){const r=ft(a);return r.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Xm),r.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function cN(a,t){const r=ft(a);return r.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return r.Pi.getTargetData(s,t).next((u=>u?(l=u,Te.resolve(l)):r.Pi.allocateTargetId(s).next((p=>(l=new qs(t,p,"TargetPurposeListen",s.currentSequenceNumber),r.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=r.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(s.targetId,s),r.xs.set(t,s.targetId)),s}))}async function jm(a,t,r){const s=ft(a),l=s.Ms.get(t),u=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",u,(p=>s.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!Ll(p))throw p;He(up,`Failed to update sequence numbers for target ${t}: ${p}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function P0(a,t,r){const s=ft(a);let l=ct.min(),u=Nt();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(v,b,A){const N=ft(v),O=N.xs.get(A);return O!==void 0?Te.resolve(N.Ms.get(O)):N.Pi.getTargetData(b,A)})(s,p,vi(t)).next((_=>{if(_)return l=_.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(p,_.targetId).next((v=>{u=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(p,t,r?l:ct.min(),r?u:Nt()))).next((_=>(hN(s,$S(t),_),{documents:_,Qs:u})))))}function hN(a,t,r){let s=a.Os.get(t)||ct.min();r.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),a.Os.set(t,s)}class L0{constructor(){this.activeTargetIds=nA()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fN{constructor(){this.Mo=new L0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,s){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,s){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new L0,Promise.resolve()}handleUserChange(t,r,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class dN{Oo(t){}shutdown(){}}const z0="ConnectivityMonitor";class U0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(z0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){He(z0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let sh=null;function Dm(){return sh===null?sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():sh++,"0x"+sh.toString(16)}const lm="RestConnection",mN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Sh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,r,s,l,u){const p=Dm(),_=this.zo(t,r.toUriEncodedString());He(lm,`Sending RPC '${t}' ${p}:`,_,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,l,u);const{host:b}=new URL(_),A=Gm(b);return this.Jo(t,_,v,s,A).then((N=>(He(lm,`Received RPC '${t}' ${p}: `,N),N)),(N=>{throw Do(lm,`RPC '${t}' ${p} failed with error: `,N,"url: ",_,"request:",s),N}))}Ho(t,r,s,l,u,p){return this.Go(t,r,s,l,u)}jo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((l,u)=>t[u]=l)),s&&s.headers.forEach(((l,u)=>t[u]=l))}zo(t,r){const s=mN[t];return`${this.Uo}/v1/${r}:${s}`}terminate(){}}class gN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const vr="WebChannelConnection";class yN extends pN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,s,l,u){const p=Dm();return new Promise(((_,v)=>{const b=new Yb;b.setWithCredentials(!0),b.listenOnce(Xb.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case ch.NO_ERROR:const N=b.getResponseJson();He(vr,`XHR for RPC '${t}' ${p} received:`,JSON.stringify(N)),_(N);break;case ch.TIMEOUT:He(vr,`RPC '${t}' ${p} timed out`),v(new Ke(we.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const O=b.getStatus();if(He(vr,`RPC '${t}' ${p} failed with status:`,O,"response text:",b.getResponseText()),O>0){let $=b.getResponseJson();Array.isArray($)&&($=$[0]);const se=$?.error;if(se&&se.status&&se.message){const oe=(function(Q){const ee=Q.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(ee)>=0?ee:we.UNKNOWN})(se.status);v(new Ke(oe,se.message))}else v(new Ke(we.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new Ke(we.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:t,streamId:p,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{He(vr,`RPC '${t}' ${p} completed.`)}}));const A=JSON.stringify(l);He(vr,`RPC '${t}' ${p} sending request:`,l),b.send(r,"POST",A,s,15)}))}T_(t,r,s){const l=Dm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],p=Jb(),_=Zb(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,r,s),v.encodeInitMessageHeaders=!0;const A=u.join("");He(vr,`Creating RPC '${t}' stream ${l}: ${A}`,v);const N=p.createWebChannel(A,v);this.I_(N);let O=!1,$=!1;const se=new gN({Yo:B=>{$?He(vr,`Not sending because RPC '${t}' stream ${l} is closed:`,B):(O||(He(vr,`Opening RPC '${t}' stream ${l} transport.`),N.open(),O=!0),He(vr,`RPC '${t}' stream ${l} sending:`,B),N.send(B))},Zo:()=>N.close()}),oe=(B,Q,ee)=>{B.listen(Q,(fe=>{try{ee(fe)}catch(Se){setTimeout((()=>{throw Se}),0)}}))};return oe(N,Au.EventType.OPEN,(()=>{$||(He(vr,`RPC '${t}' stream ${l} transport opened.`),se.o_())})),oe(N,Au.EventType.CLOSE,(()=>{$||($=!0,He(vr,`RPC '${t}' stream ${l} transport closed`),se.a_(),this.E_(N))})),oe(N,Au.EventType.ERROR,(B=>{$||($=!0,Do(vr,`RPC '${t}' stream ${l} transport errored. Name:`,B.name,"Message:",B.message),se.a_(new Ke(we.UNAVAILABLE,"The operation could not be completed")))})),oe(N,Au.EventType.MESSAGE,(B=>{if(!$){const Q=B.data[0];qt(!!Q,16349);const ee=Q,fe=ee?.error||ee[0]?.error;if(fe){He(vr,`RPC '${t}' stream ${l} received error:`,fe);const Se=fe.status;let Ue=(function(M){const P=qn[M];if(P!==void 0)return M_(P)})(Se),Ge=fe.message;Ue===void 0&&(Ue=we.INTERNAL,Ge="Unknown error status: "+Se+" with message "+fe.message),$=!0,se.a_(new Ke(Ue,Ge)),N.close()}else He(vr,`RPC '${t}' stream ${l} received:`,Q),se.u_(Q)}})),oe(_,$b.STAT_EVENT,(B=>{B.stat===vm.PROXY?He(vr,`RPC '${t}' stream ${l} detected buffering proxy`):B.stat===vm.NOPROXY&&He(vr,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{se.__()}),0),se}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((r=>r===t))}}function um(){return typeof document<"u"?document:null}function Wh(a){return new xA(a,!0)}class Y_{constructor(t,r,s=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=r,this.d_=s,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,r-s);l>0&&He("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const B0="PersistentStream";class X_{constructor(t,r,s,l,u,p,_,v){this.Mi=t,this.S_=s,this.b_=l,this.connection=u,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Y_(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===we.RESOURCE_EXHAUSTED?(es(r.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===r&&this.G_(s,l)}),(s=>{t((()=>{const l=new Ke(we.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,r){const s=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return He(B0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget((()=>this.D_===t?r():(He(B0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vN extends X_{constructor(t,r,s,l,u,p){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,l,p),this.serializer=u}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=TA(this.serializer,t),s=(function(u){if(!("targetChange"in u))return ct.min();const p=u.targetChange;return p.targetIds&&p.targetIds.length?ct.min():p.readTime?_i(p.readTime):ct.min()})(t);return this.listener.H_(r,s)}Y_(t){const r={};r.database=Cm(this.serializer),r.addTarget=(function(u,p){let _;const v=p.target;if(_=wm(v)?{documents:NA(u,v)}:{query:RA(u,v).ft},_.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){_.resumeToken=P_(u,p.resumeToken);const b=Am(u,p.expectedCount);b!==null&&(_.expectedCount=b)}else if(p.snapshotVersion.compareTo(ct.min())>0){_.readTime=Dh(u,p.snapshotVersion.toTimestamp());const b=Am(u,p.expectedCount);b!==null&&(_.expectedCount=b)}return _})(this.serializer,t);const s=jA(this.serializer,t);s&&(r.labels=s),this.q_(r)}Z_(t){const r={};r.database=Cm(this.serializer),r.removeTarget=t,this.q_(r)}}class bN extends X_{constructor(t,r,s,l,u,p){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,l,p),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=AA(t.writeResults,t.commitTime),s=_i(t.commitTime);return this.listener.na(s,r)}ra(){const t={};t.database=Cm(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map((s=>SA(this.serializer,s)))};this.q_(r)}}class _N{}class xN extends _N{constructor(t,r,s,l){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ke(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Go(t,Nm(r,s),l,u,p))).catch((u=>{throw u.name==="FirebaseError"?(u.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ke(we.UNKNOWN,u.toString())}))}Ho(t,r,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,_])=>this.connection.Ho(t,Nm(r,s),l,p,_,u))).catch((p=>{throw p.name==="FirebaseError"?(p.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Ke(we.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EN{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(r),this.aa=!1):He("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Io="RemoteStore";class wN{constructor(t,r,s,l,u){this.localStore=t,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((p=>{s.enqueueAndForget((async()=>{ko(this)&&(He(Io,"Restarting streams for network reachability change."),await(async function(v){const b=ft(v);b.Ea.add(4),await Zu(b),b.Ra.set("Unknown"),b.Ea.delete(4),await ef(b)})(this))}))})),this.Ra=new EN(s,l)}}async function ef(a){if(ko(a))for(const t of a.da)await t(!0)}async function Zu(a){for(const t of a.da)await t(!1)}function $_(a,t){const r=ft(a);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),dp(r)?fp(r):zl(r).O_()&&hp(r,t))}function cp(a,t){const r=ft(a),s=zl(r);r.Ia.delete(t),s.O_()&&Z_(r,t),r.Ia.size===0&&(s.O_()?s.L_():ko(r)&&r.Ra.set("Unknown"))}function hp(a,t){if(a.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ct.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}zl(a).Y_(t)}function Z_(a,t){a.Va.Ue(t),zl(a).Z_(t)}function fp(a){a.Va=new yA({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),At:t=>a.Ia.get(t)||null,ht:()=>a.datastore.serializer.databaseId}),zl(a).start(),a.Ra.ua()}function dp(a){return ko(a)&&!zl(a).x_()&&a.Ia.size>0}function ko(a){return ft(a).Ea.size===0}function J_(a){a.Va=void 0}async function TN(a){a.Ra.set("Online")}async function SN(a){a.Ia.forEach(((t,r)=>{hp(a,t)}))}async function AN(a,t){J_(a),dp(a)?(a.Ra.ha(t),fp(a)):a.Ra.set("Unknown")}async function NN(a,t,r){if(a.Ra.set("Online"),t instanceof k_&&t.state===2&&t.cause)try{await(async function(l,u){const p=u.cause;for(const _ of u.targetIds)l.Ia.has(_)&&(await l.remoteSyncer.rejectListen(_,p),l.Ia.delete(_),l.Va.removeTarget(_))})(a,t)}catch(s){He(Io,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Oh(a,s)}else if(t instanceof mh?a.Va.Ze(t):t instanceof V_?a.Va.st(t):a.Va.tt(t),!r.isEqual(ct.min()))try{const s=await Q_(a.localStore);r.compareTo(s)>=0&&await(function(u,p){const _=u.Va.Tt(p);return _.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const A=u.Ia.get(b);A&&u.Ia.set(b,A.withResumeToken(v.resumeToken,p))}})),_.targetMismatches.forEach(((v,b)=>{const A=u.Ia.get(v);if(!A)return;u.Ia.set(v,A.withResumeToken(ar.EMPTY_BYTE_STRING,A.snapshotVersion)),Z_(u,v);const N=new qs(A.target,v,b,A.sequenceNumber);hp(u,N)})),u.remoteSyncer.applyRemoteEvent(_)})(a,r)}catch(s){He(Io,"Failed to raise snapshot:",s),await Oh(a,s)}}async function Oh(a,t,r){if(!Ll(t))throw t;a.Ea.add(1),await Zu(a),a.Ra.set("Offline"),r||(r=()=>Q_(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{He(Io,"Retrying IndexedDB access"),await r(),a.Ea.delete(1),await ef(a)}))}function W_(a,t){return t().catch((r=>Oh(a,r,t)))}async function tf(a){const t=ft(a),r=Ws(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xm;for(;RN(t);)try{const l=await uN(t.localStore,s);if(l===null){t.Ta.length===0&&r.L_();break}s=l.batchId,CN(t,l)}catch(l){await Oh(t,l)}ex(t)&&tx(t)}function RN(a){return ko(a)&&a.Ta.length<10}function CN(a,t){a.Ta.push(t);const r=Ws(a);r.O_()&&r.X_&&r.ea(t.mutations)}function ex(a){return ko(a)&&!Ws(a).x_()&&a.Ta.length>0}function tx(a){Ws(a).start()}async function jN(a){Ws(a).ra()}async function DN(a){const t=Ws(a);for(const r of a.Ta)t.ea(r.mutations)}async function IN(a,t,r){const s=a.Ta.shift(),l=rp.from(s,t,r);await W_(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await tf(a)}async function ON(a,t){t&&Ws(a).X_&&await(async function(s,l){if((function(p){return mA(p)&&p!==we.ABORTED})(l.code)){const u=s.Ta.shift();Ws(s).B_(),await W_(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await tf(s)}})(a,t),ex(a)&&tx(a)}async function q0(a,t){const r=ft(a);r.asyncQueue.verifyOperationInProgress(),He(Io,"RemoteStore received new credentials");const s=ko(r);r.Ea.add(3),await Zu(r),s&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await ef(r)}async function MN(a,t){const r=ft(a);t?(r.Ea.delete(2),await ef(r)):t||(r.Ea.add(2),await Zu(r),r.Ra.set("Unknown"))}function zl(a){return a.ma||(a.ma=(function(r,s,l){const u=ft(r);return u.sa(),new vN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:TN.bind(null,a),t_:SN.bind(null,a),r_:AN.bind(null,a),H_:NN.bind(null,a)}),a.da.push((async t=>{t?(a.ma.B_(),dp(a)?fp(a):a.Ra.set("Unknown")):(await a.ma.stop(),J_(a))}))),a.ma}function Ws(a){return a.fa||(a.fa=(function(r,s,l){const u=ft(r);return u.sa(),new bN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:jN.bind(null,a),r_:ON.bind(null,a),ta:DN.bind(null,a),na:IN.bind(null,a)}),a.da.push((async t=>{t?(a.fa.B_(),await tf(a)):(await a.fa.stop(),a.Ta.length>0&&(He(Io,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class mp{constructor(t,r,s,l,u){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new No,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,r,s,l,u){const p=Date.now()+s,_=new mp(t,r,p,l,u);return _.start(s),_}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(we.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(a,t){if(es("AsyncQueue",`${t}: ${a}`),Ll(a))return new Ke(we.UNAVAILABLE,`${t}: ${a}`);throw a}class xl{static emptySet(t){return new xl(t.comparator)}constructor(t){this.comparator=t?(r,s)=>t(r,s)||Ze.comparator(r.key,s.key):(r,s)=>Ze.comparator(r.key,s.key),this.keyedMap=Nu(),this.sortedSet=new bn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((r,s)=>(t(r),!1)))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof xl)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((r=>{t.push(r.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const s=new xl;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=r,s}}class F0{constructor(){this.ga=new bn(Ze.comparator)}track(t){const r=t.doc.key,s=this.ga.get(r);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(r,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(r,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(r):t.type===1&&s.type===2?this.ga=this.ga.insert(r,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):st(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal(((r,s)=>{t.push(s)})),t}}class Nl{constructor(t,r,s,l,u,p,_,v,b){this.query=t,this.docs=r,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(t,r,s,l,u){const p=[];return r.forEach((_=>{p.push({type:0,doc:_})})),new Nl(t,r,xl.emptySet(r),p,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,s=t.docChanges;if(r.length!==s.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==s[l].type||!r[l].doc.isEqual(s[l].doc))return!1;return!0}}class VN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class kN{constructor(){this.queries=H0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,s){const l=ft(r),u=l.queries;l.queries=H0(),u.forEach(((p,_)=>{for(const v of _.Sa)v.onError(s)}))})(this,new Ke(we.ABORTED,"Firestore shutting down"))}}function H0(){return new Mo((a=>E_(a)),Yh)}async function PN(a,t){const r=ft(a);let s=3;const l=t.query;let u=r.queries.get(l);u?!u.ba()&&t.Da()&&(s=2):(u=new VN,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await r.onListen(l,!0);break;case 1:u.wa=await r.onListen(l,!1);break;case 2:await r.onFirstRemoteStoreListen(l)}}catch(p){const _=pp(p,`Initialization of query '${gl(t.query)}' failed`);return void t.onError(_)}r.queries.set(l,u),u.Sa.push(t),t.va(r.onlineState),u.wa&&t.Fa(u.wa)&&gp(r)}async function LN(a,t){const r=ft(a),s=t.query;let l=3;const u=r.queries.get(s);if(u){const p=u.Sa.indexOf(t);p>=0&&(u.Sa.splice(p,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function zN(a,t){const r=ft(a);let s=!1;for(const l of t){const u=l.query,p=r.queries.get(u);if(p){for(const _ of p.Sa)_.Fa(l)&&(s=!0);p.wa=l}}s&&gp(r)}function UN(a,t,r){const s=ft(a),l=s.queries.get(t);if(l)for(const u of l.Sa)u.onError(r);s.queries.delete(t)}function gp(a){a.Ca.forEach((t=>{t.next()}))}var Im,K0;(K0=Im||(Im={})).Ma="default",K0.Cache="cache";class BN{constructor(t,r,s){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Nl(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const s=r!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Nl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Im.Cache}}class nx{constructor(t){this.key=t}}class rx{constructor(t){this.key=t}}class qN{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nt(),this.mutatedKeys=Nt(),this.eu=w_(t),this.tu=new xl(this.eu)}get nu(){return this.Ya}ru(t,r){const s=r?r.iu:new F0,l=r?r.tu:this.tu;let u=r?r.mutatedKeys:this.mutatedKeys,p=l,_=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,b=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,N)=>{const O=l.get(A),$=Xh(this.query,N)?N:null,se=!!O&&this.mutatedKeys.has(O.key),oe=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let B=!1;O&&$?O.data.isEqual($.data)?se!==oe&&(s.track({type:3,doc:$}),B=!0):this.su(O,$)||(s.track({type:2,doc:$}),B=!0,(v&&this.eu($,v)>0||b&&this.eu($,b)<0)&&(_=!0)):!O&&$?(s.track({type:0,doc:$}),B=!0):O&&!$&&(s.track({type:1,doc:O}),B=!0,(v||b)&&(_=!0)),B&&($?(p=p.add($),u=oe?u.add(A):u.delete(A)):(p=p.delete(A),u=u.delete(A)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const A=this.query.limitType==="F"?p.last():p.first();p=p.delete(A.key),u=u.delete(A.key),s.track({type:1,doc:A})}return{tu:p,iu:s,Cs:_,mutatedKeys:u}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,s,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const p=t.iu.ya();p.sort(((A,N)=>(function($,se){const oe=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:B})}};return oe($)-oe(se)})(A.type,N.type)||this.eu(A.doc,N.doc))),this.ou(s),l=l??!1;const _=r&&!l?this._u():[],v=this.Xa.size===0&&this.current&&!l?1:0,b=v!==this.Za;return this.Za=v,p.length!==0||b?{snapshot:new Nl(this.query,t.tu,u,p,t.mutatedKeys,v===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:_}:{au:_}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),t.modifiedDocuments.forEach((r=>{})),t.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Nt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const r=[];return t.forEach((s=>{this.Xa.has(s)||r.push(new rx(s))})),this.Xa.forEach((s=>{t.has(s)||r.push(new nx(s))})),r}cu(t){this.Ya=t.Qs,this.Xa=Nt();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yp="SyncEngine";class FN{constructor(t,r,s){this.query=t,this.targetId=r,this.view=s}}class HN{constructor(t){this.key=t,this.hu=!1}}class KN{constructor(t,r,s,l,u,p){this.localStore=t,this.remoteStore=r,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Mo((_=>E_(_)),Yh),this.Iu=new Map,this.Eu=new Set,this.du=new bn(Ze.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GN(a,t,r=!0){const s=ux(a);let l;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await ax(s,t,r,!0),l}async function QN(a,t){const r=ux(a);await ax(r,t,!0,!1)}async function ax(a,t,r,s){const l=await cN(a.localStore,vi(t)),u=l.targetId,p=a.sharedClientState.addLocalQueryTarget(u,r);let _;return s&&(_=await YN(a,t,u,p==="current",l.resumeToken)),a.isPrimaryClient&&r&&$_(a.remoteStore,l),_}async function YN(a,t,r,s,l){a.pu=(N,O,$)=>(async function(oe,B,Q,ee){let fe=B.view.ru(Q);fe.Cs&&(fe=await P0(oe.localStore,B.query,!1).then((({documents:k})=>B.view.ru(k,fe))));const Se=ee&&ee.targetChanges.get(B.targetId),Ue=ee&&ee.targetMismatches.get(B.targetId)!=null,Ge=B.view.applyChanges(fe,oe.isPrimaryClient,Se,Ue);return Q0(oe,B.targetId,Ge.au),Ge.snapshot})(a,N,O,$);const u=await P0(a.localStore,t,!0),p=new qN(t,u.Qs),_=p.ru(u.documents),v=$u.createSynthesizedTargetChangeForCurrentChange(r,s&&a.onlineState!=="Offline",l),b=p.applyChanges(_,a.isPrimaryClient,v);Q0(a,r,b.au);const A=new FN(t,r,p);return a.Tu.set(t,A),a.Iu.has(r)?a.Iu.get(r).push(t):a.Iu.set(r,[t]),b.snapshot}async function XN(a,t,r){const s=ft(a),l=s.Tu.get(t),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((p=>!Yh(p,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await jm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),r&&cp(s.remoteStore,l.targetId),Om(s,l.targetId)})).catch(Pl)):(Om(s,l.targetId),await jm(s.localStore,l.targetId,!0))}async function $N(a,t){const r=ft(a),s=r.Tu.get(t),l=r.Iu.get(s.targetId);r.isPrimaryClient&&l.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),cp(r.remoteStore,s.targetId))}async function ZN(a,t,r){const s=aR(a);try{const l=await(function(p,_){const v=ft(p),b=tn.now(),A=_.reduce((($,se)=>$.add(se.key)),Nt());let N,O;return v.persistence.runTransaction("Locally write mutations","readwrite",($=>{let se=ts(),oe=Nt();return v.Ns.getEntries($,A).next((B=>{se=B,se.forEach(((Q,ee)=>{ee.isValidDocument()||(oe=oe.add(Q))}))})).next((()=>v.localDocuments.getOverlayedDocuments($,se))).next((B=>{N=B;const Q=[];for(const ee of _){const fe=uA(ee,N.get(ee.key).overlayedDocument);fe!=null&&Q.push(new Vo(ee.key,fe,m_(fe.value.mapValue),bi.exists(!0)))}return v.mutationQueue.addMutationBatch($,b,Q,_)})).next((B=>{O=B;const Q=B.applyToLocalDocumentSet(N,oe);return v.documentOverlayCache.saveOverlays($,B.batchId,Q)}))})).then((()=>({batchId:O.batchId,changes:S_(N)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(p,_,v){let b=p.Vu[p.currentUser.toKey()];b||(b=new bn(At)),b=b.insert(_,v),p.Vu[p.currentUser.toKey()]=b})(s,l.batchId,r),await Ju(s,l.changes),await tf(s.remoteStore)}catch(l){const u=pp(l,"Failed to persist write");r.reject(u)}}async function ix(a,t){const r=ft(a);try{const s=await oN(r.localStore,t);t.targetChanges.forEach(((l,u)=>{const p=r.Au.get(u);p&&(qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?qt(p.hu,14607):l.removedDocuments.size>0&&(qt(p.hu,42227),p.hu=!1))})),await Ju(r,s,t)}catch(s){await Pl(s)}}function G0(a,t,r){const s=ft(a);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const l=[];s.Tu.forEach(((u,p)=>{const _=p.view.va(t);_.snapshot&&l.push(_.snapshot)})),(function(p,_){const v=ft(p);v.onlineState=_;let b=!1;v.queries.forEach(((A,N)=>{for(const O of N.Sa)O.va(_)&&(b=!0)})),b&&gp(v)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function JN(a,t,r){const s=ft(a);s.sharedClientState.updateQueryState(t,"rejected",r);const l=s.Au.get(t),u=l&&l.key;if(u){let p=new bn(Ze.comparator);p=p.insert(u,_r.newNoDocument(u,ct.min()));const _=Nt().add(u),v=new Jh(ct.min(),new Map,new bn(At),p,_);await ix(s,v),s.du=s.du.remove(u),s.Au.delete(t),vp(s)}else await jm(s.localStore,t,!1).then((()=>Om(s,t,r))).catch(Pl)}async function WN(a,t){const r=ft(a),s=t.batch.batchId;try{const l=await sN(r.localStore,t);ox(r,s,null),sx(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await Ju(r,l)}catch(l){await Pl(l)}}async function eR(a,t,r){const s=ft(a);try{const l=await(function(p,_){const v=ft(p);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let A;return v.mutationQueue.lookupMutationBatch(b,_).next((N=>(qt(N!==null,37113),A=N.keys(),v.mutationQueue.removeMutationBatch(b,N)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,A,_))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,A))).next((()=>v.localDocuments.getDocuments(b,A)))}))})(s.localStore,t);ox(s,t,r),sx(s,t),s.sharedClientState.updateMutationState(t,"rejected",r),await Ju(s,l)}catch(l){await Pl(l)}}function sx(a,t){(a.mu.get(t)||[]).forEach((r=>{r.resolve()})),a.mu.delete(t)}function ox(a,t,r){const s=ft(a);let l=s.Vu[s.currentUser.toKey()];if(l){const u=l.get(t);u&&(r?u.reject(r):u.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Om(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const s of a.Iu.get(t))a.Tu.delete(s),r&&a.Pu.yu(s,r);a.Iu.delete(t),a.isPrimaryClient&&a.Ru.jr(t).forEach((s=>{a.Ru.containsKey(s)||lx(a,s)}))}function lx(a,t){a.Eu.delete(t.path.canonicalString());const r=a.du.get(t);r!==null&&(cp(a.remoteStore,r),a.du=a.du.remove(t),a.Au.delete(r),vp(a))}function Q0(a,t,r){for(const s of r)s instanceof nx?(a.Ru.addReference(s.key,t),tR(a,s)):s instanceof rx?(He(yp,"Document no longer in limbo: "+s.key),a.Ru.removeReference(s.key,t),a.Ru.containsKey(s.key)||lx(a,s.key)):st(19791,{wu:s})}function tR(a,t){const r=t.key,s=r.path.canonicalString();a.du.get(r)||a.Eu.has(s)||(He(yp,"New document in limbo: "+r),a.Eu.add(s),vp(a))}function vp(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const t=a.Eu.values().next().value;a.Eu.delete(t);const r=new Ze(en.fromString(t)),s=a.fu.next();a.Au.set(s,new HN(r)),a.du=a.du.insert(r,s),$_(a.remoteStore,new qs(vi(ep(r.path)),s,"TargetPurposeLimboResolution",Kh.ce))}}async function Ju(a,t,r){const s=ft(a),l=[],u=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((_,v)=>{p.push(s.pu(v,t,r).then((b=>{if((b||r)&&s.isPrimaryClient){const A=b?!b.fromCache:r?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,A?"current":"not-current")}if(b){l.push(b);const A=lp.As(v.targetId,b);u.push(A)}})))})),await Promise.all(p),s.Pu.H_(l),await(async function(v,b){const A=ft(v);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(N=>Te.forEach(b,(O=>Te.forEach(O.Es,($=>A.persistence.referenceDelegate.addReference(N,O.targetId,$))).next((()=>Te.forEach(O.ds,($=>A.persistence.referenceDelegate.removeReference(N,O.targetId,$)))))))))}catch(N){if(!Ll(N))throw N;He(up,"Failed to update sequence numbers: "+N)}for(const N of b){const O=N.targetId;if(!N.fromCache){const $=A.Ms.get(O),se=$.snapshotVersion,oe=$.withLastLimboFreeSnapshotVersion(se);A.Ms=A.Ms.insert(O,oe)}}})(s.localStore,u))}async function nR(a,t){const r=ft(a);if(!r.currentUser.isEqual(t)){He(yp,"User change. New user:",t.toKey());const s=await G_(r.localStore,t);r.currentUser=t,(function(u,p){u.mu.forEach((_=>{_.forEach((v=>{v.reject(new Ke(we.CANCELLED,p))}))})),u.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ju(r,s.Ls)}}function rR(a,t){const r=ft(a),s=r.Au.get(t);if(s&&s.hu)return Nt().add(s.key);{let l=Nt();const u=r.Iu.get(t);if(!u)return l;for(const p of u){const _=r.Tu.get(p);l=l.unionWith(_.view.nu)}return l}}function ux(a){const t=ft(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=ix.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=JN.bind(null,t),t.Pu.H_=zN.bind(null,t.eventManager),t.Pu.yu=UN.bind(null,t.eventManager),t}function aR(a){const t=ft(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eR.bind(null,t),t}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return iN(this.persistence,new nN,t.initialUser,this.serializer)}Cu(t){return new K_(op.mi,this.serializer)}Du(t){return new fN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class iR extends Mh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){qt(this.persistence.referenceDelegate instanceof Ih,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new BA(s,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?$r.withCacheSize(this.cacheSizeBytes):$r.DEFAULT;return new K_((s=>Ih.mi(s,r)),this.serializer)}}class Mm{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>G0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nR.bind(null,this.syncEngine),await MN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new kN})()}createDatastore(t){const r=Wh(t.databaseInfo.databaseId),s=(function(u){return new yN(u)})(t.databaseInfo);return(function(u,p,_,v){return new xN(u,p,_,v)})(t.authCredentials,t.appCheckCredentials,s,r)}createRemoteStore(t){return(function(s,l,u,p,_){return new wN(s,l,u,p,_)})(this.localStore,this.datastore,t.asyncQueue,(r=>G0(this.syncEngine,r,0)),(function(){return U0.v()?new U0:new dN})())}createSyncEngine(t,r){return(function(l,u,p,_,v,b,A){const N=new KN(l,u,p,_,v,b);return A&&(N.gu=!0),N})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const s=ft(r);He(Io,"RemoteStore shutting down."),s.Ea.add(5),await Zu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mm.provider={build:()=>new Mm};class sR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):es("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout((()=>{this.muted||t(r)}),0)}}const eo="FirestoreClient";class oR{constructor(t,r,s,l,u){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=l,this.user=br.UNAUTHENTICATED,this.clientId=Fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async p=>{He(eo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(He(eo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new No;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=pp(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function cm(a,t){a.asyncQueue.verifyOperationInProgress(),He(eo,"Initializing OfflineComponentProvider");const r=a.configuration;await t.initialize(r);let s=r.initialUser;a.setCredentialChangeListener((async l=>{s.isEqual(l)||(await G_(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=t}async function Y0(a,t){a.asyncQueue.verifyOperationInProgress();const r=await lR(a);He(eo,"Initializing OnlineComponentProvider"),await t.initialize(r,a.configuration),a.setCredentialChangeListener((s=>q0(t.remoteStore,s))),a.setAppCheckTokenChangeListener(((s,l)=>q0(t.remoteStore,l))),a._onlineComponents=t}async function lR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){He(eo,"Using user provided OfflineComponentProvider");try{await cm(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!(function(l){return l.name==="FirebaseError"?l.code===we.FAILED_PRECONDITION||l.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(r))throw r;Do("Error using user provided cache. Falling back to memory cache: "+r),await cm(a,new Mh)}}else He(eo,"Using default OfflineComponentProvider"),await cm(a,new iR(void 0));return a._offlineComponents}async function cx(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(He(eo,"Using user provided OnlineComponentProvider"),await Y0(a,a._uninitializedComponentsProvider._online)):(He(eo,"Using default OnlineComponentProvider"),await Y0(a,new Mm))),a._onlineComponents}function uR(a){return cx(a).then((t=>t.syncEngine))}async function X0(a){const t=await cx(a),r=t.eventManager;return r.onListen=GN.bind(null,t.syncEngine),r.onUnlisten=XN.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=QN.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=$N.bind(null,t.syncEngine),r}function hx(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}const $0=new Map;const fx="firestore.googleapis.com",Z0=!0;class J0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ke(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fx,this.ssl=Z0}else this.host=t.host,this.ssl=t.ssl??Z0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=H_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<zA)throw new Ke(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}r_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hx(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ke(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ke(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ke(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nf{constructor(t,r,s,l){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ke(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new t_;switch(s.type){case"firstParty":return new vS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ke(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const s=$0.get(r);s&&(He("ComponentProvider","Removing Datastore"),$0.delete(r),s.terminate())})(this),Promise.resolve()}}function dx(a,t,r,s={}){a=Gs(a,nf);const l=Gm(t),u=a._getSettings(),p={...u,emulatorOptions:a._getEmulatorOptions()},_=`${t}:${r}`;l&&(q2(`https://${_}`),G2("Firestore",!0)),u.host!==fx&&u.host!==_&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...u,host:_,ssl:l,emulatorOptions:s};if(!xh(v,p)&&(a._setSettings(v),s.mockUserToken)){let b,A;if(typeof s.mockUserToken=="string")b=s.mockUserToken,A=br.MOCK_USER;else{b=F2(s.mockUserToken,a._app?.options.projectId);const N=s.mockUserToken.sub||s.mockUserToken.user_id;if(!N)throw new Ke(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new br(N)}a._authCredentials=new pS(new e_(b,A))}}class Po{constructor(t,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Po(this.firestore,t,this._query)}}class In{constructor(t,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new In(this.firestore,t,this._key)}toJSON(){return{type:In._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,s){if(Qu(r,In._jsonSchema))return new In(t,s||null,new Ze(en.fromString(r.referencePath)))}}In._jsonSchemaVersion="firestore/documentReference/1.0",In._jsonSchema={type:Hn("string",In._jsonSchemaVersion),referencePath:Hn("string")};class Zi extends Po{constructor(t,r,s){super(t,r,ep(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new In(this.firestore,null,new Ze(t))}withConverter(t){return new Zi(this.firestore,t,this._path)}}function mx(a,t,...r){if(a=Co(a),n_("collection","path",t),a instanceof nf){const s=en.fromString(t,...r);return c0(s),new Zi(a,null,s)}{if(!(a instanceof In||a instanceof Zi))throw new Ke(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(en.fromString(t,...r));return c0(s),new Zi(a.firestore,null,s)}}function bp(a,t,...r){if(a=Co(a),arguments.length===1&&(t=Fh.newId()),n_("doc","path",t),a instanceof nf){const s=en.fromString(t,...r);return u0(s),new In(a,null,new Ze(s))}{if(!(a instanceof In||a instanceof Zi))throw new Ke(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(en.fromString(t,...r));return u0(s),new In(a.firestore,a instanceof Zi?a.converter:null,new Ze(s))}}const W0="AsyncQueue";class eb{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Y_(this,"async_queue_retry"),this._c=()=>{const s=um();s&&He(W0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const r=um();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=um();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new No;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ll(t))throw t;He(W0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const r=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",tb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=r,r}enqueueAfterDelay(t,r,s){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const l=mp.createAndSchedule(this,t,r,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&st(47125,{Pc:tb(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((r,s)=>r.targetTimeMs-s.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function tb(a){let t=a.message||"";return a.stack&&(t=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),t}function nb(a){return(function(r,s){if(typeof r!="object"||r===null)return!1;const l=r;for(const u of s)if(u in l&&typeof l[u]=="function")return!0;return!1})(a,["next","error","complete"])}class Rl extends nf{constructor(t,r,s,l){super(t,r,s,l),this.type="firestore",this._queue=new eb,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new eb(t),this._firestoreClient=void 0,await t}}}function px(a,t){const r=typeof a=="object"?a:nS(),s=typeof a=="string"?a:Sh,l=ZT(r,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=U2("firestore");u&&dx(l,...u)}return l}function _p(a){if(a._terminated)throw new Ke(we.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||cR(a),a._firestoreClient}function cR(a){const t=a._freezeSettings(),r=(function(l,u,p,_){return new MS(l,u,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,hx(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,t);a._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),a._firestoreClient=new oR(a._authCredentials,a._appCheckCredentials,a._queue,r,a._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(a._componentsProvider))}class va{constructor(t){this._byteString=t}static fromBase64String(t){try{return new va(ar.fromBase64String(t))}catch(r){throw new Ke(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new va(ar.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:va._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qu(t,va._jsonSchema))return va.fromBase64String(t.bytes)}}va._jsonSchemaVersion="firestore/bytes/1.0",va._jsonSchema={type:Hn("string",va._jsonSchemaVersion),bytes:Hn("string")};class rf{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ke(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xp{constructor(t){this._methodName=t}}class Wa{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ke(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ke(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return At(this._lat,t._lat)||At(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wa._jsonSchemaVersion}}static fromJSON(t){if(Qu(t,Wa._jsonSchema))return new Wa(t.latitude,t.longitude)}}Wa._jsonSchemaVersion="firestore/geoPoint/1.0",Wa._jsonSchema={type:Hn("string",Wa._jsonSchemaVersion),latitude:Hn("number"),longitude:Hn("number")};class ei{constructor(t){this._values=(t||[]).map((r=>r))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qu(t,ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((r=>typeof r=="number")))return new ei(t.vectorValues);throw new Ke(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Hn("string",ei._jsonSchemaVersion),vectorValues:Hn("object")};const hR=/^__.*__$/;class fR{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return this.fieldMask!==null?new Vo(t,this.data,this.fieldMask,r,this.fieldTransforms):new Xu(t,this.data,r,this.fieldTransforms)}}function gx(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:a})}}class Ep{constructor(t,r,s,l,u,p){this.settings=t,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ep({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const r=this.path?.child(t),s=this.Vc({path:r,fc:!1});return s.gc(t),s}yc(t){const r=this.path?.child(t),s=this.Vc({path:r,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Vh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((r=>t.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>t.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(gx(this.Ac)&&hR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class dR{constructor(t,r,s){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=s||Wh(t)}Cc(t,r,s,l=!1){return new Ep({Ac:t,methodName:r,Dc:s,path:rr.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yx(a){const t=a._freezeSettings(),r=Wh(a._databaseId);return new dR(a._databaseId,!!t.ignoreUndefinedProperties,r)}function mR(a,t,r,s,l,u={}){const p=a.Cc(u.merge||u.mergeFields?2:0,t,r,l);_x("Data must be an object, but it was:",p,s);const _=vx(s,p);let v,b;if(u.merge)v=new Ja(p.fieldMask),b=p.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const O=gR(t,N,r);if(!p.contains(O))throw new Ke(we.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);vR(A,O)||A.push(O)}v=new Ja(A),b=p.fieldTransforms.filter((N=>v.covers(N.field)))}else v=null,b=p.fieldTransforms;return new fR(new La(_),v,b)}function pR(a,t,r,s=!1){return wp(r,a.Cc(s?4:3,t))}function wp(a,t){if(bx(a=Co(a)))return _x("Unsupported field value:",t,a),vx(a,t);if(a instanceof xp)return(function(s,l){if(!gx(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const u=[];let p=0;for(const _ of s){let v=wp(_,l.wc(p));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),p++}return{arrayValue:{values:u}}})(a,t)}return(function(s,l){if((s=Co(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rA(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=tn.fromDate(s);return{timestampValue:Dh(l.serializer,u)}}if(s instanceof tn){const u=new tn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(l.serializer,u)}}if(s instanceof Wa)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof va)return{bytesValue:P_(l.serializer,s._byteString)};if(s instanceof In){const u=l.databaseId,p=s.firestore._databaseId;if(!p.isEqual(u))throw l.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof ei)return(function(p,_){return{mapValue:{fields:{[f_]:{stringValue:d_},[Ah]:{arrayValue:{values:p.toArray().map((b=>{if(typeof b!="number")throw _.Sc("VectorValues must only contain numeric values.");return tp(_.serializer,b)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Hh(s)}`)})(a,t)}function vx(a,t){const r={};return s_(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Oo(a,((s,l)=>{const u=wp(l,t.mc(s));u!=null&&(r[s]=u)})),{mapValue:{fields:r}}}function bx(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof tn||a instanceof Wa||a instanceof va||a instanceof In||a instanceof xp||a instanceof ei)}function _x(a,t,r){if(!bx(r)||!a_(r)){const s=Hh(r);throw s==="an object"?t.Sc(a+" a custom object"):t.Sc(a+" "+s)}}function gR(a,t,r){if((t=Co(t))instanceof rf)return t._internalPath;if(typeof t=="string")return xx(a,t);throw Vh("Field path arguments must be of type string or ",a,!1,void 0,r)}const yR=new RegExp("[~\\*/\\[\\]]");function xx(a,t,r){if(t.search(yR)>=0)throw Vh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new rf(...t.split("."))._internalPath}catch{throw Vh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function Vh(a,t,r,s,l){const u=s&&!s.isEmpty(),p=l!==void 0;let _=`Function ${t}() called with invalid data`;r&&(_+=" (via `toFirestore()`)"),_+=". ";let v="";return(u||p)&&(v+=" (found",u&&(v+=` in field ${s}`),p&&(v+=` in document ${l}`),v+=")"),new Ke(we.INVALID_ARGUMENT,_+a+v)}function vR(a,t){return a.some((r=>r.isEqual(t)))}class Ex{constructor(t,r,s,l,u){this._firestore=t,this._userDataWriter=r,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new bR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(wx("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class bR extends Ex{data(){return super.data()}}function wx(a,t){return typeof t=="string"?xx(a,t):t instanceof rf?t._internalPath:t._delegate._internalPath}function _R(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ke(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tp{}class Tx extends Tp{}function Sx(a,t,...r){let s=[];t instanceof Tp&&s.push(t),s=s.concat(r),(function(u){const p=u.filter((v=>v instanceof sf)).length,_=u.filter((v=>v instanceof af)).length;if(p>1||p>0&&_>0)throw new Ke(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)a=l._apply(a);return a}class af extends Tx{constructor(t,r,s){super(),this._field=t,this._op=r,this._value=s,this.type="where"}static _create(t,r,s){return new af(t,r,s)}_apply(t){const r=this._parse(t);return Ax(t._query,r),new Po(t.firestore,t.converter,Tm(t._query,r))}_parse(t){const r=yx(t.firestore);return(function(u,p,_,v,b,A,N){let O;if(b.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new Ke(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){ab(N,A);const se=[];for(const oe of N)se.push(rb(v,u,oe));O={arrayValue:{values:se}}}else O=rb(v,u,N)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||ab(N,A),O=pR(_,p,N,A==="in"||A==="not-in");return Fn.create(b,A,O)})(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}class sf extends Tp{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new sf(t,r)}_parse(t){const r=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return r.length===1?r[0]:ti.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:((function(l,u){let p=l;const _=u.getFlattenedFilters();for(const v of _)Ax(p,v),p=Tm(p,v)})(t._query,r),new Po(t.firestore,t.converter,Tm(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rb(a,t,r){if(typeof(r=Co(r))=="string"){if(r==="")throw new Ke(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(t)&&r.indexOf("/")!==-1)throw new Ke(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=t.path.child(en.fromString(r));if(!Ze.isDocumentKey(s))throw new Ke(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return v0(a,new Ze(s))}if(r instanceof In)return v0(a,r._key);throw new Ke(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(r)}.`)}function ab(a,t){if(!Array.isArray(a)||a.length===0)throw new Ke(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ax(a,t){const r=(function(l,u){for(const p of l)for(const _ of p.getFlattenedFilters())if(u.indexOf(_.op)>=0)return _.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(r!==null)throw r===t.op?new Ke(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ke(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Nx{convertValue(t,r="none"){switch(Js(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Dn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Zs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw st(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const s={};return Oo(t,((l,u)=>{s[l]=this.convertValue(u,r)})),s}convertVectorValue(t){const r=t.fields?.[Ah].arrayValue?.values?.map((s=>Dn(s.doubleValue)));return new ei(r)}convertGeoPoint(t){return new Wa(Dn(t.latitude),Dn(t.longitude))}convertArray(t,r){return(t.values||[]).map((s=>this.convertValue(s,r)))}convertServerTimestamp(t,r){switch(r){case"previous":const s=Qh(t);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Uu(t));default:return null}}convertTimestamp(t){const r=$s(t);return new tn(r.seconds,r.nanos)}convertDocumentKey(t,r){const s=en.fromString(t);qt(F_(s),9688,{name:t});const l=new wl(s.get(1),s.get(3)),u=new Ze(s.popFirst(5));return l.isEqual(r)||es(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),u}}function xR(a,t,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,s}class bl{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qs extends Ex{constructor(t,r,s,l,u,p){super(t,r,s,l,p),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const s=this._document.data.field(wx("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Qs._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:Hn("string",Qs._jsonSchemaVersion),bundleSource:Hn("string","DocumentSnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Mu extends Qs{data(t={}){return super.data(t)}}class Ro{constructor(t,r,s,l){this._firestore=t,this._userDataWriter=r,this._snapshot=l,this.metadata=new bl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((r=>t.push(r))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach((s=>{t.call(r,new Mu(this._firestore,this._userDataWriter,s.key,s,new bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ke(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map((_=>{const v=new Mu(l._firestore,l._userDataWriter,_.doc.key,_.doc,new bl(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);return _.doc,{type:"added",doc:v,oldIndex:-1,newIndex:p++}}))}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((_=>u||_.type!==3)).map((_=>{const v=new Mu(l._firestore,l._userDataWriter,_.doc.key,_.doc,new bl(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);let b=-1,A=-1;return _.type!==0&&(b=p.indexOf(_.doc.key),p=p.delete(_.doc.key)),_.type!==1&&(p=p.add(_.doc),A=p.indexOf(_.doc.key)),{type:ER(_.type),doc:v,oldIndex:b,newIndex:A}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ro._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Fh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(r.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ER(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:a})}}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:Hn("string",Ro._jsonSchemaVersion),bundleSource:Hn("string","QuerySnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Rx extends Nx{constructor(t){super(),this.firestore=t}convertBytes(t){return new va(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new In(this.firestore,null,r)}}function Cx(a,t,r){a=Gs(a,In);const s=Gs(a.firestore,Rl),l=xR(a.converter,t,r);return Sp(s,[mR(yx(s),"setDoc",a._key,l,a.converter!==null,r).toMutation(a._key,bi.none())])}function jx(a){return Sp(Gs(a.firestore,Rl),[new np(a._key,bi.none())])}function Dx(a,...t){a=Co(a);let r={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||nb(t[s])||(r=t[s++]);const l={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(nb(t[s])){const v=t[s];t[s]=v.next?.bind(v),t[s+1]=v.error?.bind(v),t[s+2]=v.complete?.bind(v)}let u,p,_;if(a instanceof In)p=Gs(a.firestore,Rl),_=ep(a._key.path),u={next:v=>{t[s]&&t[s](wR(p,a,v))},error:t[s+1],complete:t[s+2]};else{const v=Gs(a,Po);p=Gs(v.firestore,Rl),_=v._query;const b=new Rx(p);u={next:A=>{t[s]&&t[s](new Ro(p,b,v,A))},error:t[s+1],complete:t[s+2]},_R(a._query)}return(function(b,A,N,O){const $=new sR(O),se=new BN(A,$,N);return b.asyncQueue.enqueueAndForget((async()=>PN(await X0(b),se))),()=>{$.Nu(),b.asyncQueue.enqueueAndForget((async()=>LN(await X0(b),se)))}})(_p(p),_,l,u)}function Sp(a,t){return(function(s,l){const u=new No;return s.asyncQueue.enqueueAndForget((async()=>ZN(await uR(s),l,u))),u.promise})(_p(a),t)}function wR(a,t,r){const s=r.docs.get(t._key),l=new Rx(a);return new Qs(a,l,t._key,s,new bl(r.hasPendingWrites,r.fromCache),t.converter)}(function(t,r=!0){(function(l){kl=l})(tS),wh(new Pu("firestore",((s,{instanceIdentifier:l,options:u})=>{const p=s.getProvider("app").getImmediate(),_=new Rl(new gS(s.getProvider("auth-internal")),new bS(p,s.getProvider("app-check-internal")),(function(b,A){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Ke(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wl(b.options.projectId,A)})(p,l),p);return u={useFetchStreams:r,...u},_._setSettings(u),_}),"PUBLIC").setMultipleInstances(!0)),_l(i0,s0,t),_l(i0,s0,"esm2020")})();const TR=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Nx,Bytes:va,CollectionReference:Zi,DocumentReference:In,DocumentSnapshot:Qs,FieldPath:rf,FieldValue:xp,Firestore:Rl,FirestoreError:Ke,GeoPoint:Wa,Query:Po,QueryCompositeFilterConstraint:sf,QueryConstraint:Tx,QueryDocumentSnapshot:Mu,QueryFieldFilterConstraint:af,QuerySnapshot:Ro,SnapshotMetadata:bl,Timestamp:tn,VectorValue:ei,_AutoId:Fh,_ByteString:ar,_DatabaseId:wl,_DocumentKey:Ze,_EmptyAuthCredentialsProvider:t_,_FieldPath:rr,_cast:Gs,_logWarn:Do,_validateIsNotUsedTogether:r_,collection:mx,connectFirestoreEmulator:dx,deleteDoc:jx,doc:bp,ensureFirestoreConfigured:_p,executeWrite:Sp,getFirestore:px,onSnapshot:Dx,query:Sx,setDoc:Cx},Symbol.toStringTag,{value:"Module"})),SR={apiKey:"AIzaSyDUMSroR4ttcdohVK2Y8qq7yWIBrkAWKWQ",authDomain:"studio-7145332012-9a179.firebaseapp.com",projectId:"studio-7145332012-9a179",storageBucket:"studio-7145332012-9a179.firebasestorage.app",messagingSenderId:"832894479416",appId:"1:832894479416:web:2163932c408afeabdb8acd"},AR=Hb(SR),of=px(AR),NR=Object.freeze(Object.defineProperty({__proto__:null,db:of},Symbol.toStringTag,{value:"Module"}));var ph={exports:{}},RR=ph.exports,ib;function CR(){return ib||(ib=1,(function(a,t){(function(r,s){a.exports=s()})(RR,function(){var r=function(h,d){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(y[S]=E[S])})(h,d)},s=function(){return(s=Object.assign||function(h){for(var d,y=1,E=arguments.length;y<E;y++)for(var S in d=arguments[y])Object.prototype.hasOwnProperty.call(d,S)&&(h[S]=d[S]);return h}).apply(this,arguments)};function l(h,d,y){for(var E,S=0,R=d.length;S<R;S++)!E&&S in d||((E=E||Array.prototype.slice.call(d,0,S))[S]=d[S]);return h.concat(E||Array.prototype.slice.call(d))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$1,p=Object.keys,_=Array.isArray;function v(h,d){return typeof d!="object"||p(d).forEach(function(y){h[y]=d[y]}),h}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,A={}.hasOwnProperty;function N(h,d){return A.call(h,d)}function O(h,d){typeof d=="function"&&(d=d(b(h))),(typeof Reflect>"u"?p:Reflect.ownKeys)(d).forEach(function(y){se(h,y,d[y])})}var $=Object.defineProperty;function se(h,d,y,E){$(h,d,v(y&&N(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},E))}function oe(h){return{from:function(d){return h.prototype=Object.create(d.prototype),se(h.prototype,"constructor",h),{extend:O.bind(null,h.prototype)}}}}var B=Object.getOwnPropertyDescriptor,Q=[].slice;function ee(h,d,y){return Q.call(h,d,y)}function fe(h,d){return d(h)}function Se(h){if(!h)throw new Error("Assertion Failed")}function Ue(h){u.setImmediate?setImmediate(h):setTimeout(h,0)}function Ge(h,d){if(typeof d=="string"&&N(h,d))return h[d];if(!d)return h;if(typeof d!="string"){for(var y=[],E=0,S=d.length;E<S;++E){var R=Ge(h,d[E]);y.push(R)}return y}var D=d.indexOf(".");if(D!==-1){var L=h[d.substr(0,D)];return L==null?void 0:Ge(L,d.substr(D+1))}}function k(h,d,y){if(h&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof d!="string"&&"length"in d){Se(typeof y!="string"&&"length"in y);for(var E=0,S=d.length;E<S;++E)k(h,d[E],y[E])}else{var R,D,L=d.indexOf(".");L!==-1?(R=d.substr(0,L),(D=d.substr(L+1))===""?y===void 0?_(h)&&!isNaN(parseInt(R))?h.splice(R,1):delete h[R]:h[R]=y:k(L=!(L=h[R])||!N(h,R)?h[R]={}:L,D,y)):y===void 0?_(h)&&!isNaN(parseInt(d))?h.splice(d,1):delete h[d]:h[d]=y}}function M(h){var d,y={};for(d in h)N(h,d)&&(y[d]=h[d]);return y}var P=[].concat;function I(h){return P.apply([],h)}var Jr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(I([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(d){return d+h+"Array"})}))).filter(function(h){return u[h]}),z=new Set(Jr.map(function(h){return u[h]})),X=null;function V(h){return X=new WeakMap,h=(function d(y){if(!y||typeof y!="object")return y;var E=X.get(y);if(E)return E;if(_(y)){E=[],X.set(y,E);for(var S=0,R=y.length;S<R;++S)E.push(d(y[S]))}else if(z.has(y.constructor))E=y;else{var D,L=b(y);for(D in E=L===Object.prototype?{}:Object.create(L),X.set(y,E),y)N(y,D)&&(E[D]=d(y[D]))}return E})(h),X=null,h}var at={}.toString;function dt(h){return at.call(h).slice(8,-1)}var J=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ae=typeof J=="symbol"?function(h){var d;return h!=null&&(d=h[J])&&d.apply(h)}:function(){return null};function Ne(h,d){return d=h.indexOf(d),0<=d&&h.splice(d,1),0<=d}var it={};function tt(h){var d,y,E,S;if(arguments.length===1){if(_(h))return h.slice();if(this===it&&typeof h=="string")return[h];if(S=Ae(h)){for(y=[];!(E=S.next()).done;)y.push(E.value);return y}if(h==null)return[h];if(typeof(d=h.length)!="number")return[h];for(y=new Array(d);d--;)y[d]=h[d];return y}for(d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];return y}var F=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ar=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zr),be={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(h,d){this.name=h,this.message=d}function Re(h,d){return h+". Errors: "+Object.keys(d).map(function(y){return d[y].toString()}).filter(function(y,E,S){return S.indexOf(y)===E}).join(`
`)}function Fe(h,d,y,E){this.failures=d,this.failedKeys=E,this.successCount=y,this.message=Re(h,d)}function $e(h,d){this.name="BulkError",this.failures=Object.keys(d).map(function(y){return d[y]}),this.failuresByPos=d,this.message=Re(h,this.failures)}oe(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),oe(Fe).from(Ie),oe($e).from(Ie);var rt=Ar.reduce(function(h,d){return h[d]=d+"Error",h},{}),Ft=Ie,Oe=Ar.reduce(function(h,d){var y=d+"Error";function E(S,R){this.name=y,S?typeof S=="string"?(this.message="".concat(S).concat(R?`
 `+R:""),this.inner=R||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=be[d]||y,this.inner=null)}return oe(E).from(Ft),h[d]=E,h},{});Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError;var fn=Zr.reduce(function(h,d){return h[d+"Error"]=Oe[d],h},{}),On=Ar.reduce(function(h,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(h[d+"Error"]=Oe[d]),h},{});function Qe(){}function Je(h){return h}function Ht(h,d){return h==null||h===Je?d:function(y){return d(h(y))}}function yt(h,d){return function(){h.apply(this,arguments),d.apply(this,arguments)}}function Ut(h,d){return h===Qe?d:function(){var y=h.apply(this,arguments);y!==void 0&&(arguments[0]=y);var E=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var R=d.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?yt(E,this.onsuccess):E),S&&(this.onerror=this.onerror?yt(S,this.onerror):S),R!==void 0?R:y}}function on(h,d){return h===Qe?d:function(){h.apply(this,arguments);var y=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?yt(y,this.onsuccess):y),E&&(this.onerror=this.onerror?yt(E,this.onerror):E)}}function Xn(h,d){return h===Qe?d:function(y){var E=h.apply(this,arguments);v(y,E);var S=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,y=d.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?yt(S,this.onsuccess):S),R&&(this.onerror=this.onerror?yt(R,this.onerror):R),E===void 0?y===void 0?void 0:y:v(E,y)}}function Rt(h,d){return h===Qe?d:function(){return d.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function Mt(h,d){return h===Qe?d:function(){var y=h.apply(this,arguments);if(y&&typeof y.then=="function"){for(var E=this,S=arguments.length,R=new Array(S);S--;)R[S]=arguments[S];return y.then(function(){return d.apply(E,R)})}return d.apply(this,arguments)}}On.ModifyError=Fe,On.DexieError=Ie,On.BulkError=$e;var wn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Lo(h){wn=h}var ri={},$n=100,Jr=typeof Promise>"u"?[]:(function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,b(h),h];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,b(d),h]})(),Zr=Jr[0],Ar=Jr[1],Jr=Jr[2],Ar=Ar&&Ar.then,Wr=Zr&&Zr.constructor,ba=!!Jr,Ei=function(h,d){ai.push([h,d]),wi&&(queueMicrotask(zo),wi=!1)},rs=!0,wi=!0,_a=[],fr=[],Tn=Je,Sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qe,pgp:!1,env:{},finalize:Qe},Be=Sn,ai=[],Rr=0,Ti=[];function ke(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=Be;if(typeof h!="function"){if(h!==ri)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Cr(this,this._value))}this._state=null,this._value=null,++d.ref,(function y(E,S){try{S(function(R){if(E._state===null){if(R===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&ir();R&&typeof R.then=="function"?y(E,function(L,H){R instanceof ke?R._then(L,H):R.then(L,H)}):(E._state=!0,E._value=R,ea(E)),D&&jr()}},Cr.bind(null,E))}catch(R){Cr(E,R)}})(this,h)}var Ba={get:function(){var h=Be,d=dr;function y(E,S){var R=this,D=!h.global&&(h!==Be||d!==dr),L=D&&!Kn(),H=new ke(function(K,te){Er(R,new dn(Ni(E,h,D,L),Ni(S,h,D,L),K,te,h))});return this._consoleTask&&(H._consoleTask=this._consoleTask),H}return y.prototype=ri,y},set:function(h){se(this,"then",h&&h.prototype===ri?Ba:{get:function(){return h},set:Ba.set})}};function dn(h,d,y,E,S){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof d=="function"?d:null,this.resolve=y,this.reject=E,this.psd=S}function Cr(h,d){var y,E;fr.push(d),h._state===null&&(y=h._lib&&ir(),d=Tn(d),h._state=!1,h._value=d,E=h,_a.some(function(S){return S._value===E._value})||_a.push(E),ea(h),y&&jr())}function ea(h){var d=h._listeners;h._listeners=[];for(var y=0,E=d.length;y<E;++y)Er(h,d[y]);var S=h._PSD;--S.ref||S.finalize(),Rr===0&&(++Rr,Ei(function(){--Rr==0&&to()},[]))}function Er(h,d){if(h._state!==null){var y=h._state?d.onFulfilled:d.onRejected;if(y===null)return(h._state?d.resolve:d.reject)(h._value);++d.psd.ref,++Rr,Ei(Ul,[y,h,d])}else h._listeners.push(d)}function Ul(h,d,y){try{var E,S=d._value;!d._state&&fr.length&&(fr=[]),E=wn&&d._consoleTask?d._consoleTask.run(function(){return h(S)}):h(S),d._state||fr.indexOf(S)!==-1||(function(R){for(var D=_a.length;D;)if(_a[--D]._value===R._value)return _a.splice(D,1)})(d),y.resolve(E)}catch(R){y.reject(R)}finally{--Rr==0&&to(),--y.psd.ref||y.psd.finalize()}}function zo(){Zn(Sn,function(){ir()&&jr()})}function ir(){var h=rs;return wi=rs=!1,h}function jr(){var h,d,y;do for(;0<ai.length;)for(h=ai,ai=[],y=h.length,d=0;d<y;++d){var E=h[d];E[0].apply(null,E[1])}while(0<ai.length);wi=rs=!0}function to(){var h=_a;_a=[],h.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var d=Ti.slice(0),y=d.length;y;)d[--y]()}function xa(h){return new ke(ri,!1,h)}function Bt(h,d){var y=Be;return function(){var E=ir(),S=Be;try{return na(y,!0),h.apply(this,arguments)}catch(R){d&&d(R)}finally{na(S,!1),E&&jr()}}}O(ke.prototype,{then:Ba,_then:function(h,d){Er(this,new dn(null,null,h,d,Be))},catch:function(h){if(arguments.length===1)return this.then(null,h);var d=h,y=arguments[1];return typeof d=="function"?this.then(null,function(E){return(E instanceof d?y:xa)(E)}):this.then(null,function(E){return(E&&E.name===d?y:xa)(E)})},finally:function(h){return this.then(function(d){return ke.resolve(h()).then(function(){return d})},function(d){return ke.resolve(h()).then(function(){return xa(d)})})},timeout:function(h,d){var y=this;return h<1/0?new ke(function(E,S){var R=setTimeout(function(){return S(new Oe.Timeout(d))},h);y.then(E,S).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&se(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),Sn.env=no(),O(ke,{all:function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d,y){h.length===0&&d([]);var E=h.length;h.forEach(function(S,R){return ke.resolve(S).then(function(D){h[R]=D,--E||d(h)},y)})})},resolve:function(h){return h instanceof ke?h:h&&typeof h.then=="function"?new ke(function(d,y){h.then(d,y)}):new ke(ri,!0,h)},reject:xa,race:function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d,y){h.map(function(E){return ke.resolve(E).then(d,y)})})},PSD:{get:function(){return Be},set:function(h){return Be=h}},totalEchoes:{get:function(){return dr}},newPSD:Kt,usePSD:Zn,scheduler:{get:function(){return Ei},set:function(h){Ei=h}},rejectionMapper:{get:function(){return Tn},set:function(h){Tn=h}},follow:function(h,d){return new ke(function(y,E){return Kt(function(S,R){var D=Be;D.unhandleds=[],D.onunhandled=R,D.finalize=yt(function(){var L,H=this;L=function(){H.unhandleds.length===0?S():R(H.unhandleds[0])},Ti.push(function K(){L(),Ti.splice(Ti.indexOf(K),1)}),++Rr,Ei(function(){--Rr==0&&to()},[])},D.finalize),h()},d,y,E)})}}),Wr&&(Wr.allSettled&&se(ke,"allSettled",function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d){h.length===0&&d([]);var y=h.length,E=new Array(y);h.forEach(function(S,R){return ke.resolve(S).then(function(D){return E[R]={status:"fulfilled",value:D}},function(D){return E[R]={status:"rejected",reason:D}}).then(function(){return--y||d(E)})})})}),Wr.any&&typeof AggregateError<"u"&&se(ke,"any",function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d,y){h.length===0&&y(new AggregateError([]));var E=h.length,S=new Array(E);h.forEach(function(R,D){return ke.resolve(R).then(function(L){return d(L)},function(L){S[D]=L,--E||y(new AggregateError(S))})})})}),Wr.withResolvers&&(ke.withResolvers=Wr.withResolvers));var ln={awaits:0,echoes:0,id:0},Si=0,Dr=[],Ai=0,dr=0,ta=0;function Kt(h,d,y,E){var S=Be,R=Object.create(S);return R.parent=S,R.ref=0,R.global=!1,R.id=++ta,Sn.env,R.env=ba?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},d&&v(R,d),++S.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Zn(R,h,y,E),R.ref===0&&R.finalize(),E}function nn(){return ln.id||(ln.id=++Si),++ln.awaits,ln.echoes+=$n,ln.id}function Kn(){return!!ln.awaits&&(--ln.awaits==0&&(ln.id=0),ln.echoes=ln.awaits*$n,!0)}function qa(h){return ln.echoes&&h&&h.constructor===Wr?(nn(),h.then(function(d){return Kn(),d},function(d){return Kn(),Dt(d)})):h}function Bl(){var h=Dr[Dr.length-1];Dr.pop(),na(h,!1)}function na(h,d){var y,E=Be;(d?!ln.echoes||Ai++&&h===Be:!Ai||--Ai&&h===Be)||queueMicrotask(d?(function(S){++dr,ln.echoes&&--ln.echoes!=0||(ln.echoes=ln.awaits=ln.id=0),Dr.push(Be),na(S,!0)}).bind(null,h):Bl),h!==Be&&(Be=h,E===Sn&&(Sn.env=no()),ba&&(y=Sn.env.Promise,d=h.env,(E.global||h.global)&&(Object.defineProperty(u,"Promise",d.PromiseProp),y.all=d.all,y.race=d.race,y.resolve=d.resolve,y.reject=d.reject,d.allSettled&&(y.allSettled=d.allSettled),d.any&&(y.any=d.any))))}function no(){var h=u.Promise;return ba?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function Zn(h,d,y,E,S){var R=Be;try{return na(h,!0),d(y,E,S)}finally{na(R,!1)}}function Ni(h,d,y,E){return typeof h!="function"?h:function(){var S=Be;y&&nn(),na(d,!0);try{return h.apply(this,arguments)}finally{na(S,!1),E&&queueMicrotask(Kn)}}}function Ir(h){Promise===Wr&&ln.echoes===0?Ai===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+Ar).indexOf("[native code]")===-1&&(nn=Kn=Qe);var Dt=ke.reject,An="",Mn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mn="String expected.",Ea=[],ii="__dbnames",Or="readonly",Mr="readwrite";function ra(h,d){return h?d?function(){return h.apply(this,arguments)&&d.apply(this,arguments)}:h:d}var as={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function si(h){return typeof h!="string"||/\./.test(h)?function(d){return d}:function(d){return d[h]===void 0&&h in d&&delete(d=V(d))[h],d}}function ro(){throw Oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function mt(h,d){try{var y=mr(h),E=mr(d);if(y!==E)return y==="Array"?1:E==="Array"?-1:y==="binary"?1:E==="binary"?-1:y==="string"?1:E==="string"?-1:y==="Date"?1:E!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return d<h?1:h<d?-1:0;case"binary":return(function(S,R){for(var D=S.length,L=R.length,H=D<L?D:L,K=0;K<H;++K)if(S[K]!==R[K])return S[K]<R[K]?-1:1;return D===L?0:D<L?-1:1})(pn(h),pn(d));case"Array":return(function(S,R){for(var D=S.length,L=R.length,H=D<L?D:L,K=0;K<H;++K){var te=mt(S[K],R[K]);if(te!==0)return te}return D===L?0:D<L?-1:1})(h,d)}}catch{}return NaN}function mr(h){var d=typeof h;return d!="object"?d:ArrayBuffer.isView(h)?"binary":(h=dt(h),h==="ArrayBuffer"?"binary":h)}function pn(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function gn(h,d,y){var E=h.schema.yProps;return E?(d&&0<y.numFailures&&(d=d.filter(function(S,R){return!y.failures[R]})),Promise.all(E.map(function(S){return S=S.updatesTable,d?h.db.table(S).where("k").anyOf(d).delete():h.db.table(S).clear()})).then(function(){return y})):y}var Vr=(is.prototype.execute=function(h){var d=this["@@propmod"];if(d.add!==void 0){var y=d.add;if(_(y))return l(l([],_(h)?h:[],!0),y).sort();if(typeof y=="number")return(Number(h)||0)+y;if(typeof y=="bigint")try{return BigInt(h)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(d.remove!==void 0){var E=d.remove;if(_(E))return _(h)?h.filter(function(S){return!E.includes(S)}).sort():[];if(typeof E=="number")return Number(h)-E;if(typeof E=="bigint")try{return BigInt(h)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return y=(y=d.replacePrefix)===null||y===void 0?void 0:y[0],y&&typeof h=="string"&&h.startsWith(y)?d.replacePrefix[1]+h.substring(y.length):h},is);function is(h){this["@@propmod"]=h}function Vt(h,d){for(var y=p(d),E=y.length,S=!1,R=0;R<E;++R){var D=y[R],L=d[D],H=Ge(h,D);L instanceof Vr?(k(h,D,L.execute(H)),S=!0):H!==L&&(k(h,D,L),S=!0)}return S}var oi=(xt.prototype._trans=function(h,d,y){var E=this._tx||Be.trans,S=this.name,R=wn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function D(K,te,q){if(!q.schema[S])throw new Oe.NotFound("Table "+S+" not part of transaction");return d(q.idbtrans,q)}var L=ir();try{var H=E&&E.db._novip===this.db._novip?E===Be.trans?E._promise(h,D,y):Kt(function(){return E._promise(h,D,y)},{trans:E,transless:Be.transless||Be}):(function K(te,q,re,G){if(te.idbdb&&(te._state.openComplete||Be.letThrough||te._vip)){var Z=te._createTransaction(q,re,te._dbSchema);try{Z.create(),te._state.PR1398_maxLoop=3}catch(W){return W.name===rt.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return K(te,q,re,G)})):Dt(W)}return Z._promise(q,function(W,ne){return Kt(function(){return Be.trans=Z,G(W,ne,Z)})}).then(function(W){if(q==="readwrite")try{Z.idbtrans.commit()}catch{}return q==="readonly"?W:Z._completion.then(function(){return W})})}if(te._state.openComplete)return Dt(new Oe.DatabaseClosed(te._state.dbOpenError));if(!te._state.isBeingOpened){if(!te._state.autoOpen)return Dt(new Oe.DatabaseClosed);te.open().catch(Qe)}return te._state.dbReadyPromise.then(function(){return K(te,q,re,G)})})(this.db,h,[this.name],D);return R&&(H._consoleTask=R,H=H.catch(function(K){return console.trace(K),Dt(K)})),H}finally{L&&jr()}},xt.prototype.get=function(h,d){var y=this;return h&&h.constructor===Object?this.where(h).first(d):h==null?Dt(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return y.core.get({trans:E,key:h}).then(function(S){return y.hook.reading.fire(S)})}).then(d)},xt.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(_(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var d=p(h);if(d.length===1)return this.where(d[0]).equals(h[d[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(L){if(L.compound&&d.every(function(K){return 0<=L.keyPath.indexOf(K)})){for(var H=0;H<d.length;++H)if(d.indexOf(L.keyPath[H])===-1)return!1;return!0}return!1}).sort(function(L,H){return L.keyPath.length-H.keyPath.length})[0];if(y&&this.db._maxKey!==An){var R=y.keyPath.slice(0,d.length);return this.where(R).equals(R.map(function(H){return h[H]}))}!y&&wn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var E=this.schema.idxByName;function S(L,H){return mt(L,H)===0}var D=d.reduce(function(q,H){var K=q[0],te=q[1],q=E[H],re=h[H];return[K||q,K||!q?ra(te,q&&q.multi?function(G){return G=Ge(G,H),_(G)&&G.some(function(Z){return S(re,Z)})}:function(G){return S(re,Ge(G,H))}):te]},[null,null]),R=D[0],D=D[1];return R?this.where(R.name).equals(h[R.keyPath]).filter(D):y?this.filter(D):this.where(d).equals("")},xt.prototype.filter=function(h){return this.toCollection().and(h)},xt.prototype.count=function(h){return this.toCollection().count(h)},xt.prototype.offset=function(h){return this.toCollection().offset(h)},xt.prototype.limit=function(h){return this.toCollection().limit(h)},xt.prototype.each=function(h){return this.toCollection().each(h)},xt.prototype.toArray=function(h){return this.toCollection().toArray(h)},xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xt.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,_(h)?"[".concat(h.join("+"),"]"):h))},xt.prototype.reverse=function(){return this.toCollection().reverse()},xt.prototype.mapToClass=function(h){var d,y=this.db,E=this.name;function S(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof ro&&((function(H,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function te(){this.constructor=H}r(H,K),H.prototype=K===null?Object.create(K):(te.prototype=K.prototype,new te)})(S,d=h),Object.defineProperty(S.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),S.prototype.table=function(){return E},h=S);for(var R=new Set,D=h.prototype;D;D=b(D))Object.getOwnPropertyNames(D).forEach(function(H){return R.add(H)});function L(H){if(!H)return H;var K,te=Object.create(h.prototype);for(K in H)if(!R.has(K))try{te[K]=H[K]}catch{}return te}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=L,this.hook("reading",L),h},xt.prototype.defineClass=function(){return this.mapToClass(function(h){v(this,h)})},xt.prototype.add=function(h,d){var y=this,E=this.schema.primKey,S=E.auto,R=E.keyPath,D=h;return R&&S&&(D=si(R)(h)),this._trans("readwrite",function(L){return y.core.mutate({trans:L,type:"add",keys:d!=null?[d]:null,values:[D]})}).then(function(L){return L.numFailures?ke.reject(L.failures[0]):L.lastResult}).then(function(L){if(R)try{k(h,R,L)}catch{}return L})},xt.prototype.upsert=function(h,d){var y=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(S){return y.core.get({trans:S,key:h}).then(function(R){var D=R??{};return Vt(D,d),E&&k(D,E,h),y.core.mutate({trans:S,type:"put",values:[D],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[d]}}).then(function(L){return L.numFailures?ke.reject(L.failures[0]):!!R})})})},xt.prototype.update=function(h,d){return typeof h!="object"||_(h)?this.where(":id").equals(h).modify(d):(h=Ge(h,this.schema.primKey.keyPath),h===void 0?Dt(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(d))},xt.prototype.put=function(h,d){var y=this,E=this.schema.primKey,S=E.auto,R=E.keyPath,D=h;return R&&S&&(D=si(R)(h)),this._trans("readwrite",function(L){return y.core.mutate({trans:L,type:"put",values:[D],keys:d!=null?[d]:null})}).then(function(L){return L.numFailures?ke.reject(L.failures[0]):L.lastResult}).then(function(L){if(R)try{k(h,R,L)}catch{}return L})},xt.prototype.delete=function(h){var d=this;return this._trans("readwrite",function(y){return d.core.mutate({trans:y,type:"delete",keys:[h]}).then(function(E){return gn(d,[h],E)}).then(function(E){return E.numFailures?ke.reject(E.failures[0]):void 0})})},xt.prototype.clear=function(){var h=this;return this._trans("readwrite",function(d){return h.core.mutate({trans:d,type:"deleteRange",range:as}).then(function(y){return gn(h,null,y)})}).then(function(d){return d.numFailures?ke.reject(d.failures[0]):void 0})},xt.prototype.bulkGet=function(h){var d=this;return this._trans("readonly",function(y){return d.core.getMany({keys:h,trans:y}).then(function(E){return E.map(function(S){return d.hook.reading.fire(S)})})})},xt.prototype.bulkAdd=function(h,d,y){var E=this,S=Array.isArray(d)?d:void 0,R=(y=y||(S?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(D){var K=E.schema.primKey,L=K.auto,K=K.keyPath;if(K&&S)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var H=h.length,K=K&&L?h.map(si(K)):h;return E.core.mutate({trans:D,type:"add",keys:S,values:K,wantResults:R}).then(function(Z){var q=Z.numFailures,re=Z.results,G=Z.lastResult,Z=Z.failures;if(q===0)return R?re:G;throw new $e("".concat(E.name,".bulkAdd(): ").concat(q," of ").concat(H," operations failed"),Z)})})},xt.prototype.bulkPut=function(h,d,y){var E=this,S=Array.isArray(d)?d:void 0,R=(y=y||(S?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(D){var K=E.schema.primKey,L=K.auto,K=K.keyPath;if(K&&S)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var H=h.length,K=K&&L?h.map(si(K)):h;return E.core.mutate({trans:D,type:"put",keys:S,values:K,wantResults:R}).then(function(Z){var q=Z.numFailures,re=Z.results,G=Z.lastResult,Z=Z.failures;if(q===0)return R?re:G;throw new $e("".concat(E.name,".bulkPut(): ").concat(q," of ").concat(H," operations failed"),Z)})})},xt.prototype.bulkUpdate=function(h){var d=this,y=this.core,E=h.map(function(D){return D.key}),S=h.map(function(D){return D.changes}),R=[];return this._trans("readwrite",function(D){return y.getMany({trans:D,keys:E,cache:"clone"}).then(function(L){var H=[],K=[];h.forEach(function(q,re){var G=q.key,Z=q.changes,W=L[re];if(W){for(var ne=0,ue=Object.keys(Z);ne<ue.length;ne++){var de=ue[ne],ye=Z[de];if(de===d.schema.primKey.keyPath){if(mt(ye,G)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else k(W,de,ye)}R.push(re),H.push(G),K.push(W)}});var te=H.length;return y.mutate({trans:D,type:"put",keys:H,values:K,updates:{keys:E,changeSpecs:S}}).then(function(q){var re=q.numFailures,G=q.failures;if(re===0)return te;for(var Z=0,W=Object.keys(G);Z<W.length;Z++){var ne,ue=W[Z],de=R[Number(ue)];de!=null&&(ne=G[ue],delete G[ue],G[de]=ne)}throw new $e("".concat(d.name,".bulkUpdate(): ").concat(re," of ").concat(te," operations failed"),G)})})})},xt.prototype.bulkDelete=function(h){var d=this,y=h.length;return this._trans("readwrite",function(E){return d.core.mutate({trans:E,type:"delete",keys:h}).then(function(S){return gn(d,h,S)})}).then(function(D){var S=D.numFailures,R=D.lastResult,D=D.failures;if(S===0)return R;throw new $e("".concat(d.name,".bulkDelete(): ").concat(S," of ").concat(y," operations failed"),D)})},xt);function xt(){}function aa(h){function d(D,L){if(L){for(var H=arguments.length,K=new Array(H-1);--H;)K[H-1]=arguments[H];return y[D].subscribe.apply(null,K),h}if(typeof D=="string")return y[D]}var y={};d.addEventType=R;for(var E=1,S=arguments.length;E<S;++E)R(arguments[E]);return d;function R(D,L,H){if(typeof D!="object"){var K;L=L||Rt;var te={subscribers:[],fire:H=H||Qe,subscribe:function(q){te.subscribers.indexOf(q)===-1&&(te.subscribers.push(q),te.fire=L(te.fire,q))},unsubscribe:function(q){te.subscribers=te.subscribers.filter(function(re){return re!==q}),te.fire=te.subscribers.reduce(L,H)}};return y[D]=d[D]=te}p(K=D).forEach(function(q){var re=K[q];if(_(re))R(q,K[q][0],K[q][1]);else{if(re!=="asap")throw new Oe.InvalidArgument("Invalid event config");var G=R(q,Je,function(){for(var Z=arguments.length,W=new Array(Z);Z--;)W[Z]=arguments[Z];G.subscribers.forEach(function(ne){Ue(function(){ne.apply(null,W)})})})}})}}function Vn(h,d){return oe(d).from({prototype:h}),d}function ia(h,d){return!(h.filter||h.algorithm||h.or)&&(d?h.justLimit:!h.replayFilter)}function ss(h,d){h.filter=ra(h.filter,d)}function Ri(h,d,y){var E=h.replayFilter;h.replayFilter=E?function(){return ra(E(),d())}:d,h.justLimit=y&&!E}function sa(h,d){if(h.isPrimKey)return d.primaryKey;var y=d.getIndexByKeyPath(h.index);if(!y)throw new Oe.Schema("KeyPath "+h.index+" on object store "+d.name+" is not indexed");return y}function ao(h,d,y){var E=sa(h,d.schema);return d.openCursor({trans:y,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:E,range:h.range}})}function oa(h,d,y,E){var S=h.replayFilter?ra(h.filter,h.replayFilter()):h.filter;if(h.or){var R={},D=function(L,H,K){var te,q;S&&!S(H,K,function(re){return H.stop(re)},function(re){return H.fail(re)})||((q=""+(te=H.primaryKey))=="[object ArrayBuffer]"&&(q=""+new Uint8Array(te)),N(R,q)||(R[q]=!0,d(L,H,K)))};return Promise.all([h.or._iterate(D,y),sr(ao(h,E,y),h.algorithm,D,!h.keysOnly&&h.valueMapper)])}return sr(ao(h,E,y),ra(h.algorithm,S),d,!h.keysOnly&&h.valueMapper)}function sr(h,d,y,E){var S=Bt(E?function(R,D,L){return y(E(R),D,L)}:y);return h.then(function(R){if(R)return R.start(function(){var D=function(){return R.continue()};d&&!d(R,function(L){return D=L},function(L){R.stop(L),D=Qe},function(L){R.fail(L),D=Qe})||S(R.value,R,function(L){return D=L}),D()})})}var Uo=(_t.prototype._read=function(h,d){var y=this._ctx;return y.error?y.table._trans(null,Dt.bind(null,y.error)):y.table._trans("readonly",h).then(d)},_t.prototype._write=function(h){var d=this._ctx;return d.error?d.table._trans(null,Dt.bind(null,d.error)):d.table._trans("readwrite",h,"locked")},_t.prototype._addAlgorithm=function(h){var d=this._ctx;d.algorithm=ra(d.algorithm,h)},_t.prototype._iterate=function(h,d){return oa(this._ctx,h,d,this._ctx.table.core)},_t.prototype.clone=function(h){var d=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return h&&v(y,h),d._ctx=y,d},_t.prototype.raw=function(){return this._ctx.valueMapper=null,this},_t.prototype.each=function(h){var d=this._ctx;return this._read(function(y){return oa(d,h,y,d.table.core)})},_t.prototype.count=function(h){var d=this;return this._read(function(y){var E=d._ctx,S=E.table.core;if(ia(E,!0))return S.count({trans:y,query:{index:sa(E,S.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var R=0;return oa(E,function(){return++R,!1},y,S).then(function(){return R})}).then(h)},_t.prototype.sortBy=function(h,d){var y=h.split(".").reverse(),E=y[0],S=y.length-1;function R(H,K){return K?R(H[y[K]],K-1):H[E]}var D=this._ctx.dir==="next"?1:-1;function L(H,K){return mt(R(H,S),R(K,S))*D}return this.toArray(function(H){return H.sort(L)}).then(d)},_t.prototype.toArray=function(h){var d=this;return this._read(function(y){var E=d._ctx;if(E.dir==="next"&&ia(E,!0)&&0<E.limit){var S=E.valueMapper,R=sa(E,E.table.core.schema);return E.table.core.query({trans:y,limit:E.limit,values:!0,query:{index:R,range:E.range}}).then(function(L){return L=L.result,S?L.map(S):L})}var D=[];return oa(E,function(L){return D.push(L)},y,E.table.core).then(function(){return D})},h)},_t.prototype.offset=function(h){var d=this._ctx;return h<=0||(d.offset+=h,ia(d)?Ri(d,function(){var y=h;return function(E,S){return y===0||(y===1?--y:S(function(){E.advance(y),y=0}),!1)}}):Ri(d,function(){var y=h;return function(){return--y<0}})),this},_t.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),Ri(this._ctx,function(){var d=h;return function(y,E,S){return--d<=0&&E(S),0<=d}},!0),this},_t.prototype.until=function(h,d){return ss(this._ctx,function(y,E,S){return!h(y.value)||(E(S),d)}),this},_t.prototype.first=function(h){return this.limit(1).toArray(function(d){return d[0]}).then(h)},_t.prototype.last=function(h){return this.reverse().first(h)},_t.prototype.filter=function(h){var d;return ss(this._ctx,function(y){return h(y.value)}),(d=this._ctx).isMatch=ra(d.isMatch,h),this},_t.prototype.and=function(h){return this.filter(h)},_t.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},_t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},_t.prototype.desc=function(){return this.reverse()},_t.prototype.eachKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,E){h(E.key,E)})},_t.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},_t.prototype.eachPrimaryKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,E){h(E.primaryKey,E)})},_t.prototype.keys=function(h){var d=this._ctx;d.keysOnly=!d.isMatch;var y=[];return this.each(function(E,S){y.push(S.key)}).then(function(){return y}).then(h)},_t.prototype.primaryKeys=function(h){var d=this._ctx;if(d.dir==="next"&&ia(d,!0)&&0<d.limit)return this._read(function(E){var S=sa(d,d.table.core.schema);return d.table.core.query({trans:E,values:!1,limit:d.limit,query:{index:S,range:d.range}})}).then(function(E){return E.result}).then(h);d.keysOnly=!d.isMatch;var y=[];return this.each(function(E,S){y.push(S.primaryKey)}).then(function(){return y}).then(h)},_t.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},_t.prototype.firstKey=function(h){return this.limit(1).keys(function(d){return d[0]}).then(h)},_t.prototype.lastKey=function(h){return this.reverse().firstKey(h)},_t.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var d={};return ss(this._ctx,function(S){var E=S.primaryKey.toString(),S=N(d,E);return d[E]=!0,!S}),this},_t.prototype.modify=function(h){var d=this,y=this._ctx;return this._write(function(E){var S=typeof h=="function"?h:function(W){return Vt(W,h)},R=y.table.core,K=R.schema.primaryKey,D=K.outbound,L=K.extractKey,H=200,K=d.db._options.modifyChunkSize;K&&(H=typeof K=="object"?K[R.name]||K["*"]||200:K);function te(W,de){var ue=de.failures,de=de.numFailures;re+=W-de;for(var ye=0,xe=p(ue);ye<xe.length;ye++){var De=xe[ye];q.push(ue[De])}}var q=[],re=0,G=[],Z=h===os;return d.clone().primaryKeys().then(function(W){function ne(de){var ye=Math.min(H,W.length-de),xe=W.slice(de,de+ye);return(Z?Promise.resolve([]):R.getMany({trans:E,keys:xe,cache:"immutable"})).then(function(De){var ze=[],Ce=[],Ve=D?[]:null,Pe=Z?xe:[];if(!Z)for(var je=0;je<ye;++je){var qe=De[je],We={value:V(qe),primKey:W[de+je]};S.call(We,We.value,We)!==!1&&(We.value==null?Pe.push(W[de+je]):D||mt(L(qe),L(We.value))===0?(Ce.push(We.value),D&&Ve.push(W[de+je])):(Pe.push(W[de+je]),ze.push(We.value)))}return Promise.resolve(0<ze.length&&R.mutate({trans:E,type:"add",values:ze}).then(function(lt){for(var pt in lt.failures)Pe.splice(parseInt(pt),1);te(ze.length,lt)})).then(function(){return(0<Ce.length||ue&&typeof h=="object")&&R.mutate({trans:E,type:"put",keys:Ve,values:Ce,criteria:ue,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<de}).then(function(lt){return te(Ce.length,lt)})}).then(function(){return(0<Pe.length||ue&&Z)&&R.mutate({trans:E,type:"delete",keys:Pe,criteria:ue,isAdditionalChunk:0<de}).then(function(lt){return gn(y.table,Pe,lt)}).then(function(lt){return te(Pe.length,lt)})}).then(function(){return W.length>de+ye&&ne(de+H)})})}var ue=ia(y)&&y.limit===1/0&&(typeof h!="function"||Z)&&{index:y.index,range:y.range};return ne(0).then(function(){if(0<q.length)throw new Fe("Error modifying one or more objects",q,re,G);return W.length})})})},_t.prototype.delete=function(){var h=this._ctx,d=h.range;return!ia(h)||h.table.schema.yProps||!h.isPrimKey&&d.type!==3?this.modify(os):this._write(function(y){var E=h.table.core.schema.primaryKey,S=d;return h.table.core.count({trans:y,query:{index:E,range:S}}).then(function(R){return h.table.core.mutate({trans:y,type:"deleteRange",range:S}).then(function(H){var L=H.failures,H=H.numFailures;if(H)throw new Fe("Could not delete some values",Object.keys(L).map(function(K){return L[K]}),R-H);return R-H})})})},_t);function _t(){}var os=function(h,d){return d.value=null};function ls(h,d){return h<d?-1:h===d?0:1}function Bo(h,d){return d<h?-1:h===d?0:1}function _n(h,d,y){return h=h instanceof Fa?new h.Collection(h):h,h._ctx.error=new(y||TypeError)(d),h}function la(h){return new h.Collection(h,function(){return wr("")}).limit(0)}function pr(h,d,y,E){var S,R,D,L,H,K,te,q=y.length;if(!y.every(function(Z){return typeof Z=="string"}))return _n(h,mn);function re(Z){S=Z==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},R=Z==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},D=Z==="next"?ls:Bo;var W=y.map(function(ne){return{lower:R(ne),upper:S(ne)}}).sort(function(ne,ue){return D(ne.lower,ue.lower)});L=W.map(function(ne){return ne.upper}),H=W.map(function(ne){return ne.lower}),te=(K=Z)==="next"?"":E}re("next"),h=new h.Collection(h,function(){return kr(L[0],H[q-1]+E)}),h._ondirectionchange=function(Z){re(Z)};var G=0;return h._addAlgorithm(function(Z,W,ne){var ue=Z.key;if(typeof ue!="string")return!1;var de=R(ue);if(d(de,H,G))return!0;for(var ye=null,xe=G;xe<q;++xe){var De=(function(ze,Ce,Ve,Pe,je,qe){for(var We=Math.min(ze.length,Pe.length),lt=-1,pt=0;pt<We;++pt){var er=Ce[pt];if(er!==Pe[pt])return je(ze[pt],Ve[pt])<0?ze.substr(0,pt)+Ve[pt]+Ve.substr(pt+1):je(ze[pt],Pe[pt])<0?ze.substr(0,pt)+Pe[pt]+Ve.substr(pt+1):0<=lt?ze.substr(0,lt)+Ce[lt]+Ve.substr(lt+1):null;je(ze[pt],er)<0&&(lt=pt)}return We<Pe.length&&qe==="next"?ze+Ve.substr(ze.length):We<ze.length&&qe==="prev"?ze.substr(0,Ve.length):lt<0?null:ze.substr(0,lt)+Pe[lt]+Ve.substr(lt+1)})(ue,de,L[xe],H[xe],D,K);De===null&&ye===null?G=xe+1:(ye===null||0<D(ye,De))&&(ye=De)}return W(ye!==null?function(){Z.continue(ye+te)}:ne),!1}),h}function kr(h,d,y,E){return{type:2,lower:h,upper:d,lowerOpen:y,upperOpen:E}}function wr(h){return{type:1,lower:h,upper:h}}var Fa=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(h,d,y,E){y=y!==!1,E=E===!0;try{return 0<this._cmp(h,d)||this._cmp(h,d)===0&&(y||E)&&(!y||!E)?la(this):new this.Collection(this,function(){return kr(h,d,!y,!E)})}catch{return _n(this,Mn)}},Gt.prototype.equals=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return wr(h)})},Gt.prototype.above=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(h,void 0,!0)})},Gt.prototype.aboveOrEqual=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(h,void 0,!1)})},Gt.prototype.below=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(void 0,h,!1,!0)})},Gt.prototype.belowOrEqual=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(void 0,h)})},Gt.prototype.startsWith=function(h){return typeof h!="string"?_n(this,mn):this.between(h,h+An,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):pr(this,function(d,y){return d.indexOf(y[0])===0},[h],An)},Gt.prototype.equalsIgnoreCase=function(h){return pr(this,function(d,y){return d===y[0]},[h],"")},Gt.prototype.anyOfIgnoreCase=function(){var h=tt.apply(it,arguments);return h.length===0?la(this):pr(this,function(d,y){return y.indexOf(d)!==-1},h,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var h=tt.apply(it,arguments);return h.length===0?la(this):pr(this,function(d,y){return y.some(function(E){return d.indexOf(E)===0})},h,An)},Gt.prototype.anyOf=function(){var h=this,d=tt.apply(it,arguments),y=this._cmp;try{d.sort(y)}catch{return _n(this,Mn)}if(d.length===0)return la(this);var E=new this.Collection(this,function(){return kr(d[0],d[d.length-1])});E._ondirectionchange=function(R){y=R==="next"?h._ascending:h._descending,d.sort(y)};var S=0;return E._addAlgorithm(function(R,D,L){for(var H=R.key;0<y(H,d[S]);)if(++S===d.length)return D(L),!1;return y(H,d[S])===0||(D(function(){R.continue(d[S])}),!1)}),E},Gt.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var h=tt.apply(it,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return _n(this,Mn)}var d=h.reduce(function(y,E){return y?y.concat([[y[y.length-1][1],E]]):[[-1/0,E]]},null);return d.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(ue,d){var y=this,E=this._cmp,S=this._ascending,R=this._descending,D=this._min,L=this._max;if(ue.length===0)return la(this);if(!ue.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&S(de[0],de[1])<=0}))return _n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var H=!d||d.includeLowers!==!1,K=d&&d.includeUppers===!0,te,q=S;function re(de,ye){return q(de[0],ye[0])}try{(te=ue.reduce(function(de,ye){for(var xe=0,De=de.length;xe<De;++xe){var ze=de[xe];if(E(ye[0],ze[1])<0&&0<E(ye[1],ze[0])){ze[0]=D(ze[0],ye[0]),ze[1]=L(ze[1],ye[1]);break}}return xe===De&&de.push(ye),de},[])).sort(re)}catch{return _n(this,Mn)}var G=0,Z=K?function(de){return 0<S(de,te[G][1])}:function(de){return 0<=S(de,te[G][1])},W=H?function(de){return 0<R(de,te[G][0])}:function(de){return 0<=R(de,te[G][0])},ne=Z,ue=new this.Collection(this,function(){return kr(te[0][0],te[te.length-1][1],!H,!K)});return ue._ondirectionchange=function(de){q=de==="next"?(ne=Z,S):(ne=W,R),te.sort(re)},ue._addAlgorithm(function(de,ye,xe){for(var De,ze=de.key;ne(ze);)if(++G===te.length)return ye(xe),!1;return!Z(De=ze)&&!W(De)||(y._cmp(ze,te[G][1])===0||y._cmp(ze,te[G][0])===0||ye(function(){q===S?de.continue(te[G][0]):de.continue(te[G][1])}),!1)}),ue},Gt.prototype.startsWithAnyOf=function(){var h=tt.apply(it,arguments);return h.every(function(d){return typeof d=="string"})?h.length===0?la(this):this.inAnyRange(h.map(function(d){return[d,d+An]})):_n(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function Jn(h){return Bt(function(d){return wa(d),h(d.target.error),!1})}function wa(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var Pr="storagemutated",Tr="x-storagemutated-1",Nn=aa(null,Pr),Ci=(bt.prototype._lock=function(){return Se(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this},bt.prototype._unlock=function(){if(Se(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{Zn(h[1],h[0])}catch{}}return this},bt.prototype._locked=function(){return this._reculock&&Be.lockOwnerFor!==this},bt.prototype.create=function(h){var d=this;if(!this.mode)return this;var y=this.db.idbdb,E=this.db._state.dbOpenError;if(Se(!this.idbtrans),!h&&!y)switch(E&&E.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(E);case"MissingAPIError":throw new Oe.MissingAPI(E.message,E);default:throw new Oe.OpenFailed(E)}if(!this.active)throw new Oe.TransactionInactive;return Se(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Bt(function(S){wa(S),d._reject(h.error)}),h.onabort=Bt(function(S){wa(S),d.active&&d._reject(new Oe.Abort(h.error)),d.active=!1,d.on("abort").fire(S)}),h.oncomplete=Bt(function(){d.active=!1,d._resolve(),"mutatedParts"in h&&Nn.storagemutated.fire(h.mutatedParts)}),this},bt.prototype._promise=function(h,d,y){var E=this;if(h==="readwrite"&&this.mode!=="readwrite")return Dt(new Oe.ReadOnly("Transaction is readonly"));if(!this.active)return Dt(new Oe.TransactionInactive);if(this._locked())return new ke(function(R,D){E._blockedFuncs.push([function(){E._promise(h,d,y).then(R,D)},Be])});if(y)return Kt(function(){var R=new ke(function(D,L){E._lock();var H=d(D,L,E);H&&H.then&&H.then(D,L)});return R.finally(function(){return E._unlock()}),R._lib=!0,R});var S=new ke(function(R,D){var L=d(R,D,E);L&&L.then&&L.then(R,D)});return S._lib=!0,S},bt.prototype._root=function(){return this.parent?this.parent._root():this},bt.prototype.waitFor=function(h){var d,y=this._root(),E=ke.resolve(h);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return E}):(y._waitingFor=E,y._waitingQueue=[],d=y.idbtrans.objectStore(y.storeNames[0]),(function R(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(d.get(-1/0).onsuccess=R)})());var S=y._waitingFor;return new ke(function(R,D){E.then(function(L){return y._waitingQueue.push(Bt(R.bind(null,L)))},function(L){return y._waitingQueue.push(Bt(D.bind(null,L)))}).finally(function(){y._waitingFor===S&&(y._waitingFor=null)})})},bt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},bt.prototype.table=function(h){var d=this._memoizedTables||(this._memoizedTables={});if(N(d,h))return d[h];var y=this.schema[h];if(!y)throw new Oe.NotFound("Table "+h+" not part of transaction");return y=new this.db.Table(h,y,this),y.core=this.db.core.table(h),d[h]=y},bt);function bt(){}function Lr(h,d,y,E,S,R,D,L){return{name:h,keyPath:d,unique:y,multi:E,auto:S,compound:R,src:(y&&!D?"&":"")+(E?"*":"")+(S?"++":"")+us(d),type:L}}function us(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function Ha(h,d,y){return{name:h,primKey:d,indexes:y,mappedClass:null,idxByName:(E=function(S){return[S.name,S]},y.reduce(function(S,R,D){return D=E(R,D),D&&(S[D[0]]=D[1]),S},{}))};var E}var Ka=function(h){try{return h.only([[]]),Ka=function(){return[[]]},[[]]}catch{return Ka=function(){return An},An}};function Ga(h){return h==null?function(){}:typeof h=="string"?(d=h).split(".").length===1?function(y){return y[d]}:function(y){return Ge(y,d)}:function(y){return Ge(y,h)};var d}function Ta(h){return[].slice.call(h)}var ua=0;function yn(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function Qa(h,d,H){function E(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var G=ne.lower,Z=ne.upper,W=ne.lowerOpen,ne=ne.upperOpen;return G===void 0?Z===void 0?null:d.upperBound(Z,!!ne):Z===void 0?d.lowerBound(G,!!W):d.bound(G,Z,!!W,!!ne)}function S(re){var G,Z=re.name;return{name:Z,schema:re,mutate:function(W){var ne=W.trans,ue=W.type,de=W.keys,ye=W.values,xe=W.range;return new Promise(function(De,ze){De=Bt(De);var Ce=ne.objectStore(Z),Ve=Ce.keyPath==null,Pe=ue==="put"||ue==="add";if(!Pe&&ue!=="delete"&&ue!=="deleteRange")throw new Error("Invalid operation type: "+ue);var je,qe=(de||ye||{length:1}).length;if(de&&ye&&de.length!==ye.length)throw new Error("Given keys array must have same length as given values array.");if(qe===0)return De({numFailures:0,failures:{},results:[],lastResult:void 0});function We(Pn){++er,wa(Pn)}var lt=[],pt=[],er=0;if(ue==="deleteRange"){if(xe.type===4)return De({numFailures:er,failures:pt,results:[],lastResult:void 0});xe.type===3?lt.push(je=Ce.clear()):lt.push(je=Ce.delete(E(xe)))}else{var Ve=Pe?Ve?[ye,de]:[ye,null]:[de,null],ot=Ve[0],kn=Ve[1];if(Pe)for(var un=0;un<qe;++un)lt.push(je=kn&&kn[un]!==void 0?Ce[ue](ot[un],kn[un]):Ce[ue](ot[un])),je.onerror=We;else for(un=0;un<qe;++un)lt.push(je=Ce[ue](ot[un])),je.onerror=We}function co(Pn){Pn=Pn.target.result,lt.forEach(function(Fr,Hl){return Fr.error!=null&&(pt[Hl]=Fr.error)}),De({numFailures:er,failures:pt,results:ue==="delete"?de:lt.map(function(Fr){return Fr.result}),lastResult:Pn})}je.onerror=function(Pn){We(Pn),co(Pn)},je.onsuccess=co})},getMany:function(W){var ne=W.trans,ue=W.keys;return new Promise(function(de,ye){de=Bt(de);for(var xe,De=ne.objectStore(Z),ze=ue.length,Ce=new Array(ze),Ve=0,Pe=0,je=function(lt){lt=lt.target,Ce[lt._pos]=lt.result,++Pe===Ve&&de(Ce)},qe=Jn(ye),We=0;We<ze;++We)ue[We]!=null&&((xe=De.get(ue[We]))._pos=We,xe.onsuccess=je,xe.onerror=qe,++Ve);Ve===0&&de(Ce)})},get:function(W){var ne=W.trans,ue=W.key;return new Promise(function(de,ye){de=Bt(de);var xe=ne.objectStore(Z).get(ue);xe.onsuccess=function(De){return de(De.target.result)},xe.onerror=Jn(ye)})},query:(G=K,function(W){return new Promise(function(ne,ue){ne=Bt(ne);var de,ye,xe,Ve=W.trans,De=W.values,ze=W.limit,je=W.query,Ce=ze===1/0?void 0:ze,Pe=je.index,je=je.range,Ve=Ve.objectStore(Z),Pe=Pe.isPrimaryKey?Ve:Ve.index(Pe.name),je=E(je);if(ze===0)return ne({result:[]});G?((Ce=De?Pe.getAll(je,Ce):Pe.getAllKeys(je,Ce)).onsuccess=function(qe){return ne({result:qe.target.result})},Ce.onerror=Jn(ue)):(de=0,ye=!De&&"openKeyCursor"in Pe?Pe.openKeyCursor(je):Pe.openCursor(je),xe=[],ye.onsuccess=function(qe){var We=ye.result;return We?(xe.push(De?We.value:We.primaryKey),++de===ze?ne({result:xe}):void We.continue()):ne({result:xe})},ye.onerror=Jn(ue))})}),openCursor:function(W){var ne=W.trans,ue=W.values,de=W.query,ye=W.reverse,xe=W.unique;return new Promise(function(De,ze){De=Bt(De);var Pe=de.index,Ce=de.range,Ve=ne.objectStore(Z),Ve=Pe.isPrimaryKey?Ve:Ve.index(Pe.name),Pe=ye?xe?"prevunique":"prev":xe?"nextunique":"next",je=!ue&&"openKeyCursor"in Ve?Ve.openKeyCursor(E(Ce),Pe):Ve.openCursor(E(Ce),Pe);je.onerror=Jn(ze),je.onsuccess=Bt(function(qe){var We,lt,pt,er,ot=je.result;ot?(ot.___id=++ua,ot.done=!1,We=ot.continue.bind(ot),lt=(lt=ot.continuePrimaryKey)&&lt.bind(ot),pt=ot.advance.bind(ot),er=function(){throw new Error("Cursor not stopped")},ot.trans=ne,ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=function(){throw new Error("Cursor not started")},ot.fail=Bt(ze),ot.next=function(){var kn=this,un=1;return this.start(function(){return un--?kn.continue():kn.stop()}).then(function(){return kn})},ot.start=function(kn){function un(){if(je.result)try{kn()}catch(Pn){ot.fail(Pn)}else ot.done=!0,ot.start=function(){throw new Error("Cursor behind last entry")},ot.stop()}var co=new Promise(function(Pn,Fr){Pn=Bt(Pn),je.onerror=Jn(Fr),ot.fail=Fr,ot.stop=function(Hl){ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=er,Pn(Hl)}});return je.onsuccess=Bt(function(Pn){je.onsuccess=un,un()}),ot.continue=We,ot.continuePrimaryKey=lt,ot.advance=pt,un(),co},De(ot)):De(null)},ze)})},count:function(W){var ne=W.query,ue=W.trans,de=ne.index,ye=ne.range;return new Promise(function(xe,De){var ze=ue.objectStore(Z),Ce=de.isPrimaryKey?ze:ze.index(de.name),ze=E(ye),Ce=ze?Ce.count(ze):Ce.count();Ce.onsuccess=Bt(function(Ve){return xe(Ve.target.result)}),Ce.onerror=Jn(De)})}}}var R,D,L,te=(D=H,L=Ta((R=h).objectStoreNames),{schema:{name:R.name,tables:L.map(function(re){return D.objectStore(re)}).map(function(re){var G=re.keyPath,ne=re.autoIncrement,Z=_(G),W={},ne={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:G==null,compound:Z,keyPath:G,autoIncrement:ne,unique:!0,extractKey:Ga(G)},indexes:Ta(re.indexNames).map(function(ue){return re.index(ue)}).map(function(xe){var de=xe.name,ye=xe.unique,De=xe.multiEntry,xe=xe.keyPath,De={name:de,compound:_(xe),keyPath:xe,unique:ye,multiEntry:De,extractKey:Ga(xe)};return W[yn(xe)]=De}),getIndexByKeyPath:function(ue){return W[yn(ue)]}};return W[":id"]=ne.primaryKey,G!=null&&(W[yn(G)]=ne.primaryKey),ne})},hasGetAll:0<L.length&&"getAll"in D.objectStore(L[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),H=te.schema,K=te.hasGetAll,te=H.tables.map(S),q={};return te.forEach(function(re){return q[re.name]=re}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(re){if(!q[re])throw new Error("Table '".concat(re,"' not found"));return q[re]},MIN_KEY:-1/0,MAX_KEY:Ka(d),schema:H}}function Sa(h,d,y,E){var S=y.IDBKeyRange;return y.indexedDB,{dbcore:(E=Qa(d,S,E),h.dbcore.reduce(function(R,D){return D=D.create,s(s({},R),D(R))},E))}}function ca(h,E){var y=E.db,E=Sa(h._middlewares,y,h._deps,E);h.core=E.dbcore,h.tables.forEach(function(S){var R=S.name;h.core.schema.tables.some(function(D){return D.name===R})&&(S.core=h.core.table(R),h[R]instanceof h.Table&&(h[R].core=S.core))})}function li(h,d,y,E){y.forEach(function(S){var R=E[S];d.forEach(function(D){var L=(function H(K,te){return B(K,te)||(K=b(K))&&H(K,te)})(D,S);(!L||"value"in L&&L.value===void 0)&&(D===h.Transaction.prototype||D instanceof h.Transaction?se(D,S,{get:function(){return this.table(S)},set:function(H){$(this,S,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):D[S]=new h.Table(S,R))})})}function Aa(h,d){d.forEach(function(y){for(var E in y)y[E]instanceof h.Table&&delete y[E]})}function cs(h,d){return h._cfg.version-d._cfg.version}function Na(h,d,y,E){var S=h._dbSchema;y.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Ha("$meta",so("")[0],[]),h._storeNames.push("$meta"));var R=h._createTransaction("readwrite",h._storeNames,S);R.create(y),R._completion.catch(E);var D=R._reject.bind(R),L=Be.transless||Be;Kt(function(){return Be.trans=R,Be.transless=L,d!==0?(ca(h,y),K=d,((H=R).storeNames.includes("$meta")?H.table("$meta").get("version").then(function(te){return te??K}):ke.resolve(K)).then(function(te){return re=te,G=R,Z=y,W=[],te=(q=h)._versions,ne=q._dbSchema=Ra(0,q.idbdb,Z),(te=te.filter(function(ue){return ue._cfg.version>=re})).length!==0?(te.forEach(function(ue){W.push(function(){var de=ne,ye=ue._cfg.dbschema;ui(q,de,Z),ui(q,ye,Z),ne=q._dbSchema=ye;var xe=ji(de,ye);xe.add.forEach(function(Pe){Ya(Z,Pe[0],Pe[1].primKey,Pe[1].indexes)}),xe.change.forEach(function(Pe){if(Pe.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var je=Z.objectStore(Pe.name);Pe.add.forEach(function(qe){return Di(je,qe)}),Pe.change.forEach(function(qe){je.deleteIndex(qe.name),Di(je,qe)}),Pe.del.forEach(function(qe){return je.deleteIndex(qe)})});var De=ue._cfg.contentUpgrade;if(De&&ue._cfg.version>re){ca(q,Z),G._memoizedTables={};var ze=M(ye);xe.del.forEach(function(Pe){ze[Pe]=de[Pe]}),Aa(q,[q.Transaction.prototype]),li(q,[q.Transaction.prototype],p(ze),ze),G.schema=ze;var Ce,Ve=F(De);return Ve&&nn(),xe=ke.follow(function(){var Pe;(Ce=De(G))&&Ve&&(Pe=Kn.bind(null,null),Ce.then(Pe,Pe))}),Ce&&typeof Ce.then=="function"?ke.resolve(Ce):xe.then(function(){return Ce})}}),W.push(function(de){var ye,xe,De=ue._cfg.dbschema;ye=De,xe=de,[].slice.call(xe.db.objectStoreNames).forEach(function(ze){return ye[ze]==null&&xe.db.deleteObjectStore(ze)}),Aa(q,[q.Transaction.prototype]),li(q,[q.Transaction.prototype],q._storeNames,q._dbSchema),G.schema=q._dbSchema}),W.push(function(de){q.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(q.idbdb.version/10)===ue._cfg.version?(q.idbdb.deleteObjectStore("$meta"),delete q._dbSchema.$meta,q._storeNames=q._storeNames.filter(function(ye){return ye!=="$meta"})):de.objectStore("$meta").put(ue._cfg.version,"version"))})}),(function ue(){return W.length?ke.resolve(W.shift()(G.idbtrans)).then(ue):ke.resolve()})().then(function(){io(ne,Z)})):ke.resolve();var q,re,G,Z,W,ne}).catch(D)):(p(S).forEach(function(te){Ya(y,te,S[te].primKey,S[te].indexes)}),ca(h,y),void ke.follow(function(){return h.on.populate.fire(R)}).catch(D));var H,K})}function hs(h,d){io(h._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var y=Ra(0,h.idbdb,d);ui(h,h._dbSchema,d);for(var E=0,S=ji(y,h._dbSchema).change;E<S.length;E++){var R=(function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var L=d.objectStore(D.name);D.add.forEach(function(H){wn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(H.src)),Di(L,H)})})(S[E]);if(typeof R=="object")return R.value}}function ji(h,d){var y,E={del:[],add:[],change:[]};for(y in h)d[y]||E.del.push(y);for(y in d){var S=h[y],R=d[y];if(S){var D={name:y,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||S.primKey.auto!==R.primKey.auto)D.recreate=!0,E.change.push(D);else{var L=S.idxByName,H=R.idxByName,K=void 0;for(K in L)H[K]||D.del.push(K);for(K in H){var te=L[K],q=H[K];te?te.src!==q.src&&D.change.push(q):D.add.push(q)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([y,R])}return E}function Ya(h,d,y,E){var S=h.db.createObjectStore(d,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return E.forEach(function(R){return Di(S,R)}),S}function io(h,d){p(h).forEach(function(y){d.db.objectStoreNames.contains(y)||(wn&&console.debug("Dexie: Creating missing table",y),Ya(d,y,h[y].primKey,h[y].indexes))})}function Di(h,d){h.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function Ra(h,d,y){var E={};return ee(d.objectStoreNames,0).forEach(function(S){for(var R=y.objectStore(S),D=Lr(us(K=R.keyPath),K||"",!0,!1,!!R.autoIncrement,K&&typeof K!="string",!0),L=[],H=0;H<R.indexNames.length;++H){var te=R.index(R.indexNames[H]),K=te.keyPath,te=Lr(te.name,K,!!te.unique,!!te.multiEntry,!1,K&&typeof K!="string",!1);L.push(te)}E[S]=Ha(S,D,L)}),E}function ui(h,d,y){for(var E=y.db.objectStoreNames,S=0;S<E.length;++S){var R=E[S],D=y.objectStore(R);h._hasGetAll="getAll"in D;for(var L=0;L<D.indexNames.length;++L){var H=D.indexNames[L],K=D.index(H).keyPath,te=typeof K=="string"?K:"["+ee(K).join("+")+"]";!d[R]||(K=d[R].idxByName[te])&&(K.name=H,delete d[R].idxByName[te],d[R].idxByName[H]=K)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function so(h){return h.split(",").map(function(d,y){var R=d.split(":"),E=(S=R[1])===null||S===void 0?void 0:S.trim(),S=(d=R[0].trim()).replace(/([&*]|\+\+)/g,""),R=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return Lr(S,R||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),_(R),y===0,E)})}var fs=(Xa.prototype._createTableSchema=Ha,Xa.prototype._parseIndexSyntax=so,Xa.prototype._parseStoresSpec=function(h,d){var y=this;p(h).forEach(function(E){if(h[E]!==null){var S=y._parseIndexSyntax(h[E]),R=S.shift();if(!R)throw new Oe.Schema("Invalid schema for table "+E+": "+h[E]);if(R.unique=!0,R.multi)throw new Oe.Schema("Primary key cannot be multiEntry*");S.forEach(function(D){if(D.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),S=y._createTableSchema(E,R,S),d[E]=S}})},Xa.prototype.stores=function(y){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,y):y;var y=d._versions,E={},S={};return y.forEach(function(R){v(E,R._cfg.storesSource),S=R._cfg.dbschema={},R._parseStoresSpec(E,S)}),d._dbSchema=S,Aa(d,[d._allTables,d,d.Transaction.prototype]),li(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],p(S),S),d._storeNames=p(S),this},Xa.prototype.upgrade=function(h){return this._cfg.contentUpgrade=Mt(this._cfg.contentUpgrade||Qe,h),this},Xa);function Xa(){}function ds(h,d){var y=h._dbNamesDB;return y||(y=h._dbNamesDB=new ja(ii,{addons:[],indexedDB:h,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function zr(h){return h&&typeof h.databases=="function"}function ms(h){return Kt(function(){return Be.letThrough=!0,h()})}function ps(h){return!("from"in h)}var Rn=function(h,d){if(!this){var y=new Rn;return h&&"d"in h&&v(y,h),y}v(this,arguments.length?{d:1,from:h,to:1<arguments.length?d:h}:{d:0})};function ci(h,d,y){var E=mt(d,y);if(!isNaN(E)){if(0<E)throw RangeError();if(ps(h))return v(h,{from:d,to:y,d:1});var S=h.l,E=h.r;if(mt(y,h.from)<0)return S?ci(S,d,y):h.l={from:d,to:y,d:1,l:null,r:null},oo(h);if(0<mt(d,h.to))return E?ci(E,d,y):h.r={from:d,to:y,d:1,l:null,r:null},oo(h);mt(d,h.from)<0&&(h.from=d,h.l=null,h.d=E?E.d+1:1),0<mt(y,h.to)&&(h.to=y,h.r=null,h.d=h.l?h.l.d+1:1),y=!h.r,S&&!h.l&&Ur(h,S),E&&y&&Ur(h,E)}}function Ur(h,d){ps(d)||(function y(E,H){var R=H.from,D=H.to,L=H.l,H=H.r;ci(E,R,D),L&&y(E,L),H&&y(E,H)})(h,d)}function Wn(h,d){var y=Ii(d),E=y.next();if(E.done)return!1;for(var S=E.value,R=Ii(h),D=R.next(S.from),L=D.value;!E.done&&!D.done;){if(mt(L.from,S.to)<=0&&0<=mt(L.to,S.from))return!0;mt(S.from,L.from)<0?S=(E=y.next(L.from)).value:L=(D=R.next(S.from)).value}return!1}function Ii(h){var d=ps(h)?null:{s:0,n:h};return{next:function(y){for(var E=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,E)for(;d.n.l&&mt(y,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!E||mt(y,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function oo(h){var d,y,E=(((d=h.r)===null||d===void 0?void 0:d.d)||0)-(((y=h.l)===null||y===void 0?void 0:y.d)||0),S=1<E?"r":E<-1?"l":"";S&&(d=S=="r"?"l":"r",y=s({},h),E=h[S],h.from=E.from,h.to=E.to,h[S]=E[S],y[S]=E[d],(h[d]=y).d=Ca(y)),h.d=Ca(h)}function Ca(y){var d=y.r,y=y.l;return(d?y?Math.max(d.d,y.d):d.d:y?y.d:0)+1}function c(h,d){return p(d).forEach(function(y){h[y]?Ur(h[y],d[y]):h[y]=(function E(S){var R,D,L={};for(R in S)N(S,R)&&(D=S[R],L[R]=!D||typeof D!="object"||z.has(D.constructor)?D:E(D));return L})(d[y])}),h}function x(h,d){return h.all||d.all||Object.keys(h).some(function(y){return d[y]&&Wn(d[y],h[y])})}O(Rn.prototype,((Ar={add:function(h){return Ur(this,h),this},addKey:function(h){return ci(this,h,h),this},addKeys:function(h){var d=this;return h.forEach(function(y){return ci(d,y,y)}),this},hasKey:function(h){var d=Ii(this).next(h).value;return d&&mt(d.from,h)<=0&&0<=mt(d.to,h)}})[J]=function(){return Ii(this)},Ar));var T={},j={},le=!1;function pe(h){c(j,h),le||(le=!0,setTimeout(function(){le=!1,Me(j,!(j={}))},0))}function Me(h,d){d===void 0&&(d=!1);var y=new Set;if(h.all)for(var E=0,S=Object.values(T);E<S.length;E++)ut(D=S[E],h,y,d);else for(var R in h){var D,L=/^idb\:\/\/(.*)\/(.*)\//.exec(R);L&&(R=L[1],L=L[2],(D=T["idb://".concat(R,"/").concat(L)])&&ut(D,h,y,d))}y.forEach(function(H){return H()})}function ut(h,d,y,E){for(var S=[],R=0,D=Object.entries(h.queries.query);R<D.length;R++){for(var L=D[R],H=L[0],K=[],te=0,q=L[1];te<q.length;te++){var re=q[te];x(d,re.obsSet)?re.subscribers.forEach(function(ne){return y.add(ne)}):E&&K.push(re)}E&&S.push([H,K])}if(E)for(var G=0,Z=S;G<Z.length;G++){var W=Z[G],H=W[0],K=W[1];h.queries.query[H]=K}}function vn(h){var d=h._state,y=h._deps.indexedDB;if(d.isBeingOpened||h.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?Dt(d.dbOpenError):h});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var E=d.openCanceller,S=Math.round(10*h.verno),R=!1;function D(){if(d.openCanceller!==E)throw new Oe.DatabaseClosed("db.open() was cancelled")}function L(){return new ke(function(re,G){if(D(),!y)throw new Oe.MissingAPI;var Z=h.name,W=d.autoSchema||!S?y.open(Z):y.open(Z,S);if(!W)throw new Oe.MissingAPI;W.onerror=Jn(G),W.onblocked=Bt(h._fireOnBlocked),W.onupgradeneeded=Bt(function(ne){var ue;te=W.transaction,d.autoSchema&&!h._options.allowEmptyDB?(W.onerror=wa,te.abort(),W.result.close(),(ue=y.deleteDatabase(Z)).onsuccess=ue.onerror=Bt(function(){G(new Oe.NoSuchDatabase("Database ".concat(Z," doesnt exist")))})):(te.onerror=Jn(G),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,q=ne<1,h.idbdb=W.result,R&&hs(h,te),Na(h,ne/10,te,G))},G),W.onsuccess=Bt(function(){te=null;var ne,ue,de,ye,xe,De=h.idbdb=W.result,ze=ee(De.objectStoreNames);if(0<ze.length)try{var Ce=De.transaction((ye=ze).length===1?ye[0]:ye,"readonly");if(d.autoSchema)ue=De,de=Ce,(ne=h).verno=ue.version/10,de=ne._dbSchema=Ra(0,ue,de),ne._storeNames=ee(ue.objectStoreNames,0),li(ne,[ne._allTables],p(de),de);else if(ui(h,h._dbSchema,Ce),((xe=ji(Ra(0,(xe=h).idbdb,Ce),xe._dbSchema)).add.length||xe.change.some(function(Ve){return Ve.add.length||Ve.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),De.close(),S=De.version+1,R=!0,re(L());ca(h,Ce)}catch{}Ea.push(h),De.onversionchange=Bt(function(Ve){d.vcFired=!0,h.on("versionchange").fire(Ve)}),De.onclose=Bt(function(){h.close({disableAutoOpen:!1})}),q&&(xe=h._deps,Ce=Z,De=xe.indexedDB,xe=xe.IDBKeyRange,zr(De)||Ce===ii||ds(De,xe).put({name:Ce}).catch(Qe)),re()},G)}).catch(function(re){switch(re?.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),L();break;case"VersionError":if(0<S)return S=0,L()}return ke.reject(re)})}var H,K=d.dbReadyResolve,te=null,q=!1;return ke.race([E,(typeof navigator>"u"?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function G(){return indexedDB.databases().finally(re)}H=setInterval(G,100),G()}).finally(function(){return clearInterval(H)}):Promise.resolve()).then(L)]).then(function(){return D(),d.onReadyBeingFired=[],ke.resolve(ms(function(){return h.on.ready.fire(h.vip)})).then(function re(){if(0<d.onReadyBeingFired.length){var G=d.onReadyBeingFired.reduce(Mt,Qe);return d.onReadyBeingFired=[],ke.resolve(ms(function(){return G(h.vip)})).then(re)}})}).finally(function(){d.openCanceller===E&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(re){d.dbOpenError=re;try{te&&te.abort()}catch{}return E===d.openCanceller&&h._close(),Dt(re)}).finally(function(){d.openComplete=!0,K()}).then(function(){var re;return q&&(re={},h.tables.forEach(function(G){G.schema.indexes.forEach(function(Z){Z.name&&(re["idb://".concat(h.name,"/").concat(G.name,"/").concat(Z.name)]=new Rn(-1/0,[[[]]]))}),re["idb://".concat(h.name,"/").concat(G.name,"/")]=re["idb://".concat(h.name,"/").concat(G.name,"/:dels")]=new Rn(-1/0,[[[]]])}),Nn(Pr).fire(re),Me(re,!0)),h})}function Ct(h){function d(R){return h.next(R)}var y=S(d),E=S(function(R){return h.throw(R)});function S(R){return function(H){var L=R(H),H=L.value;return L.done?H:H&&typeof H.then=="function"?H.then(y,E):_(H)?Promise.all(H).then(y,E):y(H)}}return S(d)()}function Qt(h,d,y){for(var E=_(h)?h.slice():[h],S=0;S<y;++S)E.push(d);return E}var Br={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return s(s({},h),{table:function(d){var y=h.table(d),E=y.schema,S={},R=[];function D(q,re,G){var Z=yn(q),W=S[Z]=S[Z]||[],ne=q==null?0:typeof q=="string"?1:q.length,ue=0<re,ue=s(s({},G),{name:ue?"".concat(Z,"(virtual-from:").concat(G.name,")"):G.name,lowLevelIndex:G,isVirtual:ue,keyTail:re,keyLength:ne,extractKey:Ga(q),unique:!ue&&G.unique});return W.push(ue),ue.isPrimaryKey||R.push(ue),1<ne&&D(ne===2?q[0]:q.slice(0,ne-1),re+1,G),W.sort(function(de,ye){return de.keyTail-ye.keyTail}),ue}d=D(E.primaryKey.keyPath,0,E.primaryKey),S[":id"]=[d];for(var L=0,H=E.indexes;L<H.length;L++){var K=H[L];D(K.keyPath,0,K)}function te(q){var re,G=q.query.index;return G.isVirtual?s(s({},q),{query:{index:G.lowLevelIndex,range:(re=q.query.range,G=G.keyTail,{type:re.type===1?2:re.type,lower:Qt(re.lower,re.lowerOpen?h.MAX_KEY:h.MIN_KEY,G),lowerOpen:!0,upper:Qt(re.upper,re.upperOpen?h.MIN_KEY:h.MAX_KEY,G),upperOpen:!0})}}):q}return s(s({},y),{schema:s(s({},E),{primaryKey:d,indexes:R,getIndexByKeyPath:function(q){return(q=S[yn(q)])&&q[0]}}),count:function(q){return y.count(te(q))},query:function(q){return y.query(te(q))},openCursor:function(q){var re=q.query.index,G=re.keyTail,Z=re.isVirtual,W=re.keyLength;return Z?y.openCursor(te(q)).then(function(ue){return ue&&ne(ue)}):y.openCursor(q);function ne(ue){return Object.create(ue,{continue:{value:function(de){de!=null?ue.continue(Qt(de,q.reverse?h.MAX_KEY:h.MIN_KEY,G)):q.unique?ue.continue(ue.key.slice(0,W).concat(q.reverse?h.MIN_KEY:h.MAX_KEY,G)):ue.continue()}},continuePrimaryKey:{value:function(de,ye){ue.continuePrimaryKey(Qt(de,h.MAX_KEY,G),ye)}},primaryKey:{get:function(){return ue.primaryKey}},key:{get:function(){var de=ue.key;return W===1?de[0]:de.slice(0,W)}},value:{get:function(){return ue.value}}})}}})}})}};function qr(h,d,y,E){return y=y||{},E=E||"",p(h).forEach(function(S){var R,D,L;N(d,S)?(R=h[S],D=d[S],typeof R=="object"&&typeof D=="object"&&R&&D?(L=dt(R))!==dt(D)?y[E+S]=d[S]:L==="Object"?qr(R,D,y,E+S+"."):R!==D&&(y[E+S]=d[S]):R!==D&&(y[E+S]=d[S])):y[E+S]=void 0}),p(d).forEach(function(S){N(h,S)||(y[E+S]=d[S])}),y}function Sr(h,d){return d.type==="delete"?d.keys:d.keys||d.values.map(h.extractKey)}var ha={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return s(s({},h),{table:function(d){var y=h.table(d),E=y.schema.primaryKey;return s(s({},y),{mutate:function(S){var R=Be.trans,D=R.table(d).hook,L=D.deleting,H=D.creating,K=D.updating;switch(S.type){case"add":if(H.fire===Qe)break;return R._promise("readwrite",function(){return te(S)},!0);case"put":if(H.fire===Qe&&K.fire===Qe)break;return R._promise("readwrite",function(){return te(S)},!0);case"delete":if(L.fire===Qe)break;return R._promise("readwrite",function(){return te(S)},!0);case"deleteRange":if(L.fire===Qe)break;return R._promise("readwrite",function(){return(function q(re,G,Z){return y.query({trans:re,values:!1,query:{index:E,range:G},limit:Z}).then(function(W){var ne=W.result;return te({type:"delete",keys:ne,trans:re}).then(function(ue){return 0<ue.numFailures?Promise.reject(ue.failures[0]):ne.length<Z?{failures:[],numFailures:0,lastResult:void 0}:q(re,s(s({},G),{lower:ne[ne.length-1],lowerOpen:!0}),Z)})})})(S.trans,S.range,1e4)},!0)}return y.mutate(S);function te(q){var re,G,Z,W=Be.trans,ne=q.keys||Sr(E,q);if(!ne)throw new Error("Keys missing");return(q=q.type==="add"||q.type==="put"?s(s({},q),{keys:ne}):s({},q)).type!=="delete"&&(q.values=l([],q.values)),q.keys&&(q.keys=l([],q.keys)),re=y,Z=ne,((G=q).type==="add"?Promise.resolve([]):re.getMany({trans:G.trans,keys:Z,cache:"immutable"})).then(function(ue){var de=ne.map(function(ye,xe){var De,ze,Ce,Ve=ue[xe],Pe={onerror:null,onsuccess:null};return q.type==="delete"?L.fire.call(Pe,ye,Ve,W):q.type==="add"||Ve===void 0?(De=H.fire.call(Pe,ye,q.values[xe],W),ye==null&&De!=null&&(q.keys[xe]=ye=De,E.outbound||k(q.values[xe],E.keyPath,ye))):(De=qr(Ve,q.values[xe]),(ze=K.fire.call(Pe,De,ye,Ve,W))&&(Ce=q.values[xe],Object.keys(ze).forEach(function(je){N(Ce,je)?Ce[je]=ze[je]:k(Ce,je,ze[je])}))),Pe});return y.mutate(q).then(function(ye){for(var xe=ye.failures,De=ye.results,ze=ye.numFailures,ye=ye.lastResult,Ce=0;Ce<ne.length;++Ce){var Ve=(De||ne)[Ce],Pe=de[Ce];Ve==null?Pe.onerror&&Pe.onerror(xe[Ce]):Pe.onsuccess&&Pe.onsuccess(q.type==="put"&&ue[Ce]?q.values[Ce]:Ve)}return{failures:xe,results:De,numFailures:ze,lastResult:ye}}).catch(function(ye){return de.forEach(function(xe){return xe.onerror&&xe.onerror(ye)}),Promise.reject(ye)})})}}})}})}};function hi(h,d,y){try{if(!d||d.keys.length<h.length)return null;for(var E=[],S=0,R=0;S<d.keys.length&&R<h.length;++S)mt(d.keys[S],h[R])===0&&(E.push(y?V(d.values[S]):d.values[S]),++R);return E.length===h.length?E:null}catch{return null}}var gs={stack:"dbcore",level:-1,create:function(h){return{table:function(d){var y=h.table(d);return s(s({},y),{getMany:function(E){if(!E.cache)return y.getMany(E);var S=hi(E.keys,E.trans._cache,E.cache==="clone");return S?ke.resolve(S):y.getMany(E).then(function(R){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?V(R):R},R})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),y.mutate(E)}})}}}};function Oi(h,d){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function Wu(h,d){switch(h){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var lf={stack:"dbcore",level:0,name:"Observability",create:function(h){var d=h.schema.name,y=new Rn(h.MIN_KEY,h.MAX_KEY);return s(s({},h),{transaction:function(E,S,R){if(Be.subscr&&S!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Be.querier));return h.transaction(E,S,R)},table:function(E){var S=h.table(E),R=S.schema,D=R.primaryKey,q=R.indexes,L=D.extractKey,H=D.outbound,K=D.autoIncrement&&q.filter(function(G){return G.compound&&G.keyPath.includes(D.keyPath)}),te=s(s({},S),{mutate:function(G){function Z(je){return je="idb://".concat(d,"/").concat(E,"/").concat(je),ye[je]||(ye[je]=new Rn)}var W,ne,ue,de=G.trans,ye=G.mutatedParts||(G.mutatedParts={}),xe=Z(""),De=Z(":dels"),ze=G.type,Pe=G.type==="deleteRange"?[G.range]:G.type==="delete"?[G.keys]:G.values.length<50?[Sr(D,G).filter(function(je){return je}),G.values]:[],Ce=Pe[0],Ve=Pe[1],Pe=G.trans._cache;return _(Ce)?(xe.addKeys(Ce),(Pe=ze==="delete"||Ce.length===Ve.length?hi(Ce,Pe):null)||De.addKeys(Ce),(Pe||Ve)&&(W=Z,ne=Pe,ue=Ve,R.indexes.forEach(function(je){var qe=W(je.name||"");function We(pt){return pt!=null?je.extractKey(pt):null}function lt(pt){return je.multiEntry&&_(pt)?pt.forEach(function(er){return qe.addKey(er)}):qe.addKey(pt)}(ne||ue).forEach(function(pt,kn){var ot=ne&&We(ne[kn]),kn=ue&&We(ue[kn]);mt(ot,kn)!==0&&(ot!=null&&lt(ot),kn!=null&&lt(kn))})}))):Ce?(Ve={from:(Ve=Ce.lower)!==null&&Ve!==void 0?Ve:h.MIN_KEY,to:(Ve=Ce.upper)!==null&&Ve!==void 0?Ve:h.MAX_KEY},De.add(Ve),xe.add(Ve)):(xe.add(y),De.add(y),R.indexes.forEach(function(je){return Z(je.name).add(y)})),S.mutate(G).then(function(je){return!Ce||G.type!=="add"&&G.type!=="put"||(xe.addKeys(je.results),K&&K.forEach(function(qe){for(var We=G.values.map(function(ot){return qe.extractKey(ot)}),lt=qe.keyPath.findIndex(function(ot){return ot===D.keyPath}),pt=0,er=je.results.length;pt<er;++pt)We[pt][lt]=je.results[pt];Z(qe.name).addKeys(We)})),de.mutatedParts=c(de.mutatedParts||{},ye),je})}}),q=function(Z){var W=Z.query,Z=W.index,W=W.range;return[Z,new Rn((Z=W.lower)!==null&&Z!==void 0?Z:h.MIN_KEY,(W=W.upper)!==null&&W!==void 0?W:h.MAX_KEY)]},re={get:function(G){return[D,new Rn(G.key)]},getMany:function(G){return[D,new Rn().addKeys(G.keys)]},count:q,query:q,openCursor:q};return p(re).forEach(function(G){te[G]=function(Z){var W=Be.subscr,ne=!!W,ue=Oi(Be,S)&&Wu(G,Z)?Z.obsSet={}:W;if(ne){var de=function(Ve){return Ve="idb://".concat(d,"/").concat(E,"/").concat(Ve),ue[Ve]||(ue[Ve]=new Rn)},ye=de(""),xe=de(":dels"),W=re[G](Z),ne=W[0],W=W[1];if((G==="query"&&ne.isPrimaryKey&&!Z.values?xe:de(ne.name||"")).add(W),!ne.isPrimaryKey){if(G!=="count"){var De=G==="query"&&H&&Z.values&&S.query(s(s({},Z),{values:!1}));return S[G].apply(this,arguments).then(function(Ve){if(G==="query"){if(H&&Z.values)return De.then(function(We){return We=We.result,ye.addKeys(We),Ve});var Pe=Z.values?Ve.result.map(L):Ve.result;(Z.values?ye:xe).addKeys(Pe)}else if(G==="openCursor"){var je=Ve,qe=Z.values;return je&&Object.create(je,{key:{get:function(){return xe.addKey(je.primaryKey),je.key}},primaryKey:{get:function(){var We=je.primaryKey;return xe.addKey(We),We}},value:{get:function(){return qe&&ye.addKey(je.primaryKey),je.value}}})}return Ve})}xe.add(y)}}return S[G].apply(this,arguments)}}),te}})}};function ec(h,d,y){if(y.numFailures===0)return d;if(d.type==="deleteRange")return null;var E=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return y.numFailures===E?null:(d=s({},d),_(d.keys)&&(d.keys=d.keys.filter(function(S,R){return!(R in y.failures)})),"values"in d&&_(d.values)&&(d.values=d.values.filter(function(S,R){return!(R in y.failures)})),d)}function qo(h,d){return y=h,((E=d).lower===void 0||(E.lowerOpen?0<mt(y,E.lower):0<=mt(y,E.lower)))&&(h=h,(d=d).upper===void 0||(d.upperOpen?mt(h,d.upper)<0:mt(h,d.upper)<=0));var y,E}function ql(h,d,re,E,S,R){if(!re||re.length===0)return h;var D=d.query.index,L=D.multiEntry,H=d.query.range,K=E.schema.primaryKey.extractKey,te=D.extractKey,q=(D.lowLevelIndex||D).extractKey,re=re.reduce(function(G,Z){var W=G,ne=[];if(Z.type==="add"||Z.type==="put")for(var ue=new Rn,de=Z.values.length-1;0<=de;--de){var ye,xe=Z.values[de],De=K(xe);ue.hasKey(De)||(ye=te(xe),(L&&_(ye)?ye.some(function(je){return qo(je,H)}):qo(ye,H))&&(ue.addKey(De),ne.push(xe)))}switch(Z.type){case"add":var ze=new Rn().addKeys(d.values?G.map(function(qe){return K(qe)}):G),W=G.concat(d.values?ne.filter(function(qe){return qe=K(qe),!ze.hasKey(qe)&&(ze.addKey(qe),!0)}):ne.map(function(qe){return K(qe)}).filter(function(qe){return!ze.hasKey(qe)&&(ze.addKey(qe),!0)}));break;case"put":var Ce=new Rn().addKeys(Z.values.map(function(qe){return K(qe)}));W=G.filter(function(qe){return!Ce.hasKey(d.values?K(qe):qe)}).concat(d.values?ne:ne.map(function(qe){return K(qe)}));break;case"delete":var Ve=new Rn().addKeys(Z.keys);W=G.filter(function(qe){return!Ve.hasKey(d.values?K(qe):qe)});break;case"deleteRange":var Pe=Z.range;W=G.filter(function(qe){return!qo(K(qe),Pe)})}return W},h);return re===h?h:(re.sort(function(G,Z){return mt(q(G),q(Z))||mt(K(G),K(Z))}),d.limit&&d.limit<1/0&&(re.length>d.limit?re.length=d.limit:h.length===d.limit&&re.length<d.limit&&(S.dirty=!0)),R?Object.freeze(re):re)}function ys(h,d){return mt(h.lower,d.lower)===0&&mt(h.upper,d.upper)===0&&!!h.lowerOpen==!!d.lowerOpen&&!!h.upperOpen==!!d.upperOpen}function lo(h,d){return(function(y,E,S,R){if(y===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=mt(y,E))===0){if(S&&R)return 0;if(S)return 1;if(R)return-1}return E})(h.lower,d.lower,h.lowerOpen,d.lowerOpen)<=0&&0<=(function(y,E,S,R){if(y===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=mt(y,E))===0){if(S&&R)return 0;if(S)return-1;if(R)return 1}return E})(h.upper,d.upper,h.upperOpen,d.upperOpen)}function uf(h,d,y,E){h.subscribers.add(y),E.addEventListener("abort",function(){var S,R;h.subscribers.delete(y),h.subscribers.size===0&&(S=h,R=d,setTimeout(function(){S.subscribers.size===0&&Ne(R,S)},3e3))})}var Fo={stack:"dbcore",level:0,name:"Cache",create:function(h){var d=h.schema.name;return s(s({},h),{transaction:function(y,E,S){var R,D,L=h.transaction(y,E,S);return E==="readwrite"&&(D=(R=new AbortController).signal,S=function(H){return function(){if(R.abort(),E==="readwrite"){for(var K=new Set,te=0,q=y;te<q.length;te++){var re=q[te],G=T["idb://".concat(d,"/").concat(re)];if(G){var Z=h.table(re),W=G.optimisticOps.filter(function(qe){return qe.trans===L});if(L._explicit&&H&&L.mutatedParts)for(var ne=0,ue=Object.values(G.queries.query);ne<ue.length;ne++)for(var de=0,ye=(ze=ue[ne]).slice();de<ye.length;de++)x((Ce=ye[de]).obsSet,L.mutatedParts)&&(Ne(ze,Ce),Ce.subscribers.forEach(function(qe){return K.add(qe)}));else if(0<W.length){G.optimisticOps=G.optimisticOps.filter(function(qe){return qe.trans!==L});for(var xe=0,De=Object.values(G.queries.query);xe<De.length;xe++)for(var ze,Ce,Ve,Pe=0,je=(ze=De[xe]).slice();Pe<je.length;Pe++)(Ce=je[Pe]).res!=null&&L.mutatedParts&&(H&&!Ce.dirty?(Ve=Object.isFrozen(Ce.res),Ve=ql(Ce.res,Ce.req,W,Z,Ce,Ve),Ce.dirty?(Ne(ze,Ce),Ce.subscribers.forEach(function(qe){return K.add(qe)})):Ve!==Ce.res&&(Ce.res=Ve,Ce.promise=ke.resolve({result:Ve}))):(Ce.dirty&&Ne(ze,Ce),Ce.subscribers.forEach(function(qe){return K.add(qe)})))}}}K.forEach(function(qe){return qe()})}}},L.addEventListener("abort",S(!1),{signal:D}),L.addEventListener("error",S(!1),{signal:D}),L.addEventListener("complete",S(!0),{signal:D})),L},table:function(y){var E=h.table(y),S=E.schema.primaryKey;return s(s({},E),{mutate:function(R){var D=Be.trans;if(S.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(R);var L=T["idb://".concat(d,"/").concat(y)];return L?(D=E.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||Sr(S,R).some(function(H){return H==null}))?(L.optimisticOps.push(R),R.mutatedParts&&pe(R.mutatedParts),D.then(function(H){0<H.numFailures&&(Ne(L.optimisticOps,R),(H=ec(0,R,H))&&L.optimisticOps.push(H),R.mutatedParts&&pe(R.mutatedParts))}),D.catch(function(){Ne(L.optimisticOps,R),R.mutatedParts&&pe(R.mutatedParts)})):D.then(function(H){var K=ec(0,s(s({},R),{values:R.values.map(function(te,q){var re;return H.failures[q]?te:(te=(re=S.keyPath)!==null&&re!==void 0&&re.includes(".")?V(te):s({},te),k(te,S.keyPath,H.results[q]),te)})}),H);L.optimisticOps.push(K),queueMicrotask(function(){return R.mutatedParts&&pe(R.mutatedParts)})}),D):E.mutate(R)},query:function(R){if(!Oi(Be,E)||!Wu("query",R))return E.query(R);var D=((K=Be.trans)===null||K===void 0?void 0:K.db._options.cache)==="immutable",q=Be,L=q.requery,H=q.signal,K=(function(Z,W,ne,ue){var de=T["idb://".concat(Z,"/").concat(W)];if(!de)return[];if(!(W=de.queries[ne]))return[null,!1,de,null];var ye=W[(ue.query?ue.query.index.name:null)||""];if(!ye)return[null,!1,de,null];switch(ne){case"query":var xe=ye.find(function(De){return De.req.limit===ue.limit&&De.req.values===ue.values&&ys(De.req.query.range,ue.query.range)});return xe?[xe,!0,de,ye]:[ye.find(function(De){return("limit"in De.req?De.req.limit:1/0)>=ue.limit&&(!ue.values||De.req.values)&&lo(De.req.query.range,ue.query.range)}),!1,de,ye];case"count":return xe=ye.find(function(De){return ys(De.req.query.range,ue.query.range)}),[xe,!!xe,de,ye]}})(d,y,"query",R),te=K[0],q=K[1],re=K[2],G=K[3];return te&&q?te.obsSet=R.obsSet:(q=E.query(R).then(function(Z){var W=Z.result;if(te&&(te.res=W),D){for(var ne=0,ue=W.length;ne<ue;++ne)Object.freeze(W[ne]);Object.freeze(W)}else Z.result=V(W);return Z}).catch(function(Z){return G&&te&&Ne(G,te),Promise.reject(Z)}),te={obsSet:R.obsSet,promise:q,subscribers:new Set,type:"query",req:R,dirty:!1},G?G.push(te):(G=[te],(re=re||(T["idb://".concat(d,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=G)),uf(te,G,L,H),te.promise.then(function(Z){return{result:ql(Z.result,R,re?.optimisticOps,E,te,D)}})}})}})}};function uo(h,d){return new Proxy(h,{get:function(y,E,S){return E==="db"?d:Reflect.get(y,E,S)}})}var ja=(rn.prototype.version=function(h){if(isNaN(h)||h<.1)throw new Oe.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var d=this._versions,y=d.filter(function(E){return E._cfg.version===h})[0];return y||(y=new this.Version(h),d.push(y),d.sort(cs),y.stores({}),this._state.autoSchema=!1,y)},rn.prototype._whenReady=function(h){var d=this;return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?h():new ke(function(y,E){if(d._state.openComplete)return E(new Oe.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void E(new Oe.DatabaseClosed);d.open().catch(Qe)}d._state.dbReadyPromise.then(y,E)}).then(h)},rn.prototype.use=function(h){var d=h.stack,y=h.create,E=h.level,S=h.name;return S&&this.unuse({stack:d,name:S}),h=this._middlewares[d]||(this._middlewares[d]=[]),h.push({stack:d,create:y,level:E??10,name:S}),h.sort(function(R,D){return R.level-D.level}),this},rn.prototype.unuse=function(h){var d=h.stack,y=h.name,E=h.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(S){return E?S.create!==E:!!y&&S.name!==y})),this},rn.prototype.open=function(){var h=this;return Zn(Sn,function(){return vn(h)})},rn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,d=Ea.indexOf(this);if(0<=d&&Ea.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new ke(function(y){h.dbReadyResolve=y}),h.openCanceller=new ke(function(y,E){h.cancelOpen=E}))},rn.prototype.close=function(y){var d=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;d?(y.isBeingOpened&&y.cancelOpen(new Oe.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new Oe.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},rn.prototype.delete=function(h){var d=this;h===void 0&&(h={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new ke(function(S,R){function D(){d.close(h);var L=d._deps.indexedDB.deleteDatabase(d.name);L.onsuccess=Bt(function(){var H,K,te;H=d._deps,K=d.name,te=H.indexedDB,H=H.IDBKeyRange,zr(te)||K===ii||ds(te,H).delete(K).catch(Qe),S()}),L.onerror=Jn(R),L.onblocked=d._fireOnBlocked}if(y)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},rn.prototype.backendDB=function(){return this.idbdb},rn.prototype.isOpen=function(){return this.idbdb!==null},rn.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},rn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},rn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rn.prototype,"tables",{get:function(){var h=this;return p(this._allTables).map(function(d){return h._allTables[d]})},enumerable:!1,configurable:!0}),rn.prototype.transaction=function(){var h=(function(d,y,E){var S=arguments.length;if(S<2)throw new Oe.InvalidArgument("Too few arguments");for(var R=new Array(S-1);--S;)R[S-1]=arguments[S];return E=R.pop(),[d,I(R),E]}).apply(this,arguments);return this._transaction.apply(this,h)},rn.prototype._transaction=function(h,d,y){var E=this,S=Be.trans;S&&S.db===this&&h.indexOf("!")===-1||(S=null);var R,D,L=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(D=d.map(function(K){if(K=K instanceof E.Table?K.name:K,typeof K!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return K}),h=="r"||h===Or)R=Or;else{if(h!="rw"&&h!=Mr)throw new Oe.InvalidArgument("Invalid transaction mode: "+h);R=Mr}if(S){if(S.mode===Or&&R===Mr){if(!L)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&D.forEach(function(K){if(S&&S.storeNames.indexOf(K)===-1){if(!L)throw new Oe.SubTransaction("Table "+K+" not included in parent transaction.");S=null}}),L&&S&&!S.active&&(S=null)}}catch(K){return S?S._promise(null,function(te,q){q(K)}):Dt(K)}var H=(function K(te,q,re,G,Z){return ke.resolve().then(function(){var W=Be.transless||Be,ne=te._createTransaction(q,re,te._dbSchema,G);if(ne.explicit=!0,W={trans:ne,transless:W},G)ne.idbtrans=G.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,te._state.PR1398_maxLoop=3}catch(ye){return ye.name===rt.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return K(te,q,re,null,Z)})):Dt(ye)}var ue,de=F(Z);return de&&nn(),W=ke.follow(function(){var ye;(ue=Z.call(ne,ne))&&(de?(ye=Kn.bind(null,null),ue.then(ye,ye)):typeof ue.next=="function"&&typeof ue.throw=="function"&&(ue=Ct(ue)))},W),(ue&&typeof ue.then=="function"?ke.resolve(ue).then(function(ye){return ne.active?ye:Dt(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):W.then(function(){return ue})).then(function(ye){return G&&ne._resolve(),ne._completion.then(function(){return ye})}).catch(function(ye){return ne._reject(ye),Dt(ye)})})}).bind(null,this,R,D,S,y);return S?S._promise(R,H,"lock"):Be.trans?Zn(Be.transless,function(){return E._whenReady(H)}):this._whenReady(H)},rn.prototype.table=function(h){if(!N(this._allTables,h))throw new Oe.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},rn);function rn(h,d){var y=this;this._middlewares={},this.verno=0;var E=rn.dependencies;this._options=d=s({addons:rn.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},E=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,R,D,L,H,K={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Qe,dbReadyPromise:null,cancelOpen:Qe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};K.dbReadyPromise=new ke(function(q){K.dbReadyResolve=q}),K.openCanceller=new ke(function(q,re){K.cancelOpen=re}),this._state=K,this.name=h,this.on=aa(this,"populate","blocked","versionchange","close",{ready:[Mt,Qe]}),this.once=function(q,re){var G=function(){for(var Z=[],W=0;W<arguments.length;W++)Z[W]=arguments[W];y.on(q).unsubscribe(G),re.apply(y,Z)};return y.on(q,G)},this.on.ready.subscribe=fe(this.on.ready.subscribe,function(q){return function(re,G){rn.vip(function(){var Z,W=y._state;W.openComplete?(W.dbOpenError||ke.resolve().then(re),G&&q(re)):W.onReadyBeingFired?(W.onReadyBeingFired.push(re),G&&q(re)):(q(re),Z=y,G||q(function ne(){Z.on.ready.unsubscribe(re),Z.on.ready.unsubscribe(ne)}))})}}),this.Collection=(S=this,Vn(Uo.prototype,function(ue,ne){this.db=S;var G=as,Z=null;if(ne)try{G=ne()}catch(de){Z=de}var W=ue._ctx,ne=W.table,ue=ne.hook.reading.fire;this._ctx={table:ne,index:W.index,isPrimKey:!W.index||ne.schema.primKey.keyPath&&W.index===ne.schema.primKey.name,range:G,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Z,or:W.or,valueMapper:ue!==Je?ue:null}})),this.Table=(R=this,Vn(oi.prototype,function(q,re,G){this.db=R,this._tx=G,this.name=q,this.schema=re,this.hook=R._allTables[q]?R._allTables[q].hook:aa(null,{creating:[Ut,Qe],reading:[Ht,Je],updating:[Xn,Qe],deleting:[on,Qe]})})),this.Transaction=(D=this,Vn(Ci.prototype,function(q,re,G,Z,W){var ne=this;q!=="readonly"&&re.forEach(function(ue){ue=(ue=G[ue])===null||ue===void 0?void 0:ue.yProps,ue&&(re=re.concat(ue.map(function(de){return de.updatesTable})))}),this.db=D,this.mode=q,this.storeNames=re,this.schema=G,this.chromeTransactionDurability=Z,this.idbtrans=null,this.on=aa(this,"complete","error","abort"),this.parent=W||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(ue,de){ne._resolve=ue,ne._reject=de}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(ue){var de=ne.active;return ne.active=!1,ne.on.error.fire(ue),ne.parent?ne.parent._reject(ue):de&&ne.idbtrans&&ne.idbtrans.abort(),Dt(ue)})})),this.Version=(L=this,Vn(fs.prototype,function(q){this.db=L,this._cfg={version:q,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(H=this,Vn(Fa.prototype,function(q,re,G){if(this.db=H,this._ctx={table:q,index:re===":id"?null:re,or:G},this._cmp=this._ascending=mt,this._descending=function(Z,W){return mt(W,Z)},this._max=function(Z,W){return 0<mt(Z,W)?Z:W},this._min=function(Z,W){return mt(Z,W)<0?Z:W},this._IDBKeyRange=H._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(q){0<q.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(q){!q.newVersion||q.newVersion<q.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(q.oldVersion/10))}),this._maxKey=Ka(d.IDBKeyRange),this._createTransaction=function(q,re,G,Z){return new y.Transaction(q,re,G,y._options.chromeTransactionDurability,Z)},this._fireOnBlocked=function(q){y.on("blocked").fire(q),Ea.filter(function(re){return re.name===y.name&&re!==y&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(q)})},this.use(gs),this.use(Fo),this.use(lf),this.use(Br),this.use(ha);var te=new Proxy(this,{get:function(q,re,G){if(re==="_vip")return!0;if(re==="table")return function(W){return uo(y.table(W),te)};var Z=Reflect.get(q,re,G);return Z instanceof oi?uo(Z,te):re==="tables"?Z.map(function(W){return uo(W,te)}):re==="_createTransaction"?function(){return uo(Z.apply(this,arguments),te)}:Z}});this.vip=te,E.forEach(function(q){return q(y)})}var vs,Ar=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",tc=(Ho.prototype.subscribe=function(h,d,y){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:d,complete:y})},Ho.prototype[Ar]=function(){return this},Ho);function Ho(h){this._subscribe=h}try{vs={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{vs={indexedDB:null,IDBKeyRange:null}}function nc(h){var d,y=!1,E=new tc(function(S){var R=F(h),D,L=!1,H={},K={},te={get closed(){return L},unsubscribe:function(){L||(L=!0,D&&D.abort(),q&&Nn.storagemutated.unsubscribe(G))}};S.start&&S.start(te);var q=!1,re=function(){return Ir(Z)},G=function(W){c(H,W),x(K,H)&&re()},Z=function(){var W,ne,ue;!L&&vs.indexedDB&&(H={},W={},D&&D.abort(),D=new AbortController,ue=(function(de){var ye=ir();try{R&&nn();var xe=Kt(h,de);return xe=R?xe.finally(Kn):xe}finally{ye&&jr()}})(ne={subscr:W,signal:D.signal,requery:re,querier:h,trans:null}),Promise.resolve(ue).then(function(de){y=!0,d=de,L||ne.signal.aborted||(H={},(function(ye){for(var xe in ye)if(N(ye,xe))return;return 1})(K=W)||q||(Nn(Pr,G),q=!0),Ir(function(){return!L&&S.next&&S.next(de)}))},function(de){y=!1,["DatabaseClosedError","AbortError"].includes(de?.name)||L||Ir(function(){L||S.error&&S.error(de)})}))};return setTimeout(re,0),te});return E.hasValue=function(){return y},E.getValue=function(){return d},E}var Mi=ja;function Fl(h){var d=fi;try{fi=!0,Nn.storagemutated.fire(h),Me(h,!0)}finally{fi=d}}O(Mi,s(s({},On),{delete:function(h){return new Mi(h,{addons:[]}).delete()},exists:function(h){return new Mi(h,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return d=Mi.dependencies,y=d.indexedDB,d=d.IDBKeyRange,(zr(y)?Promise.resolve(y.databases()).then(function(E){return E.map(function(S){return S.name}).filter(function(S){return S!==ii})}):ds(y,d).toCollection().primaryKeys()).then(h)}catch{return Dt(new Oe.MissingAPI)}var d,y},defineClass:function(){return function(h){v(this,h)}},ignoreTransaction:function(h){return Be.trans?Zn(Be.transless,h):h()},vip:ms,async:function(h){return function(){try{var d=Ct(h.apply(this,arguments));return d&&typeof d.then=="function"?d:ke.resolve(d)}catch(y){return Dt(y)}}},spawn:function(h,d,y){try{var E=Ct(h.apply(y,d||[]));return E&&typeof E.then=="function"?E:ke.resolve(E)}catch(S){return Dt(S)}},currentTransaction:{get:function(){return Be.trans||null}},waitFor:function(h,d){return d=ke.resolve(typeof h=="function"?Mi.ignoreTransaction(h):h).timeout(d||6e4),Be.trans?Be.trans.waitFor(d):d},Promise:ke,debug:{get:function(){return wn},set:function(h){Lo(h)}},derive:oe,extend:v,props:O,override:fe,Events:aa,on:Nn,liveQuery:nc,extendObservabilitySet:c,getByKeyPath:Ge,setByKeyPath:k,delByKeyPath:function(h,d){typeof d=="string"?k(h,d,void 0):"length"in d&&[].map.call(d,function(y){k(h,y,void 0)})},shallowClone:M,deepClone:V,getObjectDiff:qr,cmp:mt,asap:Ue,minKey:-1/0,addons:[],connections:Ea,errnames:rt,dependencies:vs,cache:T,semVer:"4.2.1",version:"4.2.1".split(".").map(function(h){return parseInt(h)}).reduce(function(h,d,y){return h+d/Math.pow(10,2*y)})})),Mi.maxKey=Ka(Mi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nn(Pr,function(h){fi||(h=new CustomEvent(Tr,{detail:h}),fi=!0,dispatchEvent(h),fi=!1)}),addEventListener(Tr,function(h){h=h.detail,fi||Fl(h)}));var bs,fi=!1,gr=function(){};return typeof BroadcastChannel<"u"&&((gr=function(){(bs=new BroadcastChannel(Tr)).onmessage=function(h){return h.data&&Fl(h.data)}})(),typeof bs.unref=="function"&&bs.unref(),Nn(Pr,function(h){fi||bs.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!ja.disableBfCache&&h.persisted){wn&&console.debug("Dexie: handling persisted pagehide"),bs?.close();for(var d=0,y=Ea;d<y.length;d++)y[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!ja.disableBfCache&&h.persisted&&(wn&&console.debug("Dexie: handling persisted pageshow"),gr(),Fl({all:new Rn(-1/0,[[]])}))})),ke.rejectionMapper=function(h,d){return!h||h instanceof Ie||h instanceof TypeError||h instanceof SyntaxError||!h.name||!fn[h.name]?h:(d=new fn[h.name](d||h.message,h),"stack"in h&&se(d,"stack",{get:function(){return this.inner.stack}}),d)},Lo(wn),s(ja,Object.freeze({__proto__:null,Dexie:ja,liveQuery:nc,Entity:ro,cmp:mt,PropModification:Vr,replacePrefix:function(h,d){return new Vr({replacePrefix:[h,d]})},add:function(h){return new Vr({add:h})},remove:function(h){return new Vr({remove:h})},default:ja,RangeSet:Rn,mergeRanges:Ur,rangesOverlap:Wn}),{default:ja}),ja})})(ph)),ph.exports}var jR=CR();const Vm=km(jR),sb=Symbol.for("Dexie"),Cl=globalThis[sb]||(globalThis[sb]=Vm);if(Vm.semVer!==Cl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Vm.semVer} and ${Cl.semVer}`);const{liveQuery:dC,mergeRanges:mC,rangesOverlap:pC,RangeSet:gC,cmp:yC,Entity:vC,PropModification:bC,replacePrefix:_C,add:xC,remove:EC,DexieYProvider:wC}=Cl;function DR(a,t,r){var s,l;typeof a=="function"?(s=t||[],l=r):(s=[],l=t);var u=So.useRef({hasResult:!1,result:l,error:null}),p=So.useReducer(function(b){return b+1},0);p[0];var _=p[1],v=So.useMemo(function(){var b=typeof a=="function"?a():a;if(!b||typeof b.subscribe!="function")throw a===b?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!u.current.hasResult&&typeof window<"u"&&(typeof b.hasValue!="function"||b.hasValue()))if(typeof b.getValue=="function")u.current.result=b.getValue(),u.current.hasResult=!0;else{var A=b.subscribe(function(N){u.current.result=N,u.current.hasResult=!0});typeof A=="function"?A():A.unsubscribe()}return b},s);if(So.useDebugValue(u.current.result),So.useEffect(function(){var b=v.subscribe(function(A){var N=u.current;(N.error!==null||N.result!==A)&&(N.error=null,N.result=A,N.hasResult=!0,_())},function(A){var N=u.current;N.error!==A&&(N.error=A,_())});return typeof b=="function"?b:b.unsubscribe.bind(b)},s),u.current.error)throw u.current.error;return u.current.result}function Qn(a,t,r){return DR(function(){return Cl.liveQuery(a)},t||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(a){var t=Cl.DexieYProvider;t&&t.release(a)});const Le=new Cl("SPFamilyVenturesDB");Le.version(6).stores({settings:"++id",customers:"++id, name, email",products:"++id, name",sales:"++id, customerId, date",users:"++id, username",vendors:"++id, name, email",vendor_purchases:"++id",payments:"++id, customerId, date"});["customers","products","sales","settings","users","vendors","vendor_purchases","payments"].forEach(a=>{Le[a].hook("creating",function(t,r,s){this.onsuccess=function(l){ob(a,{...r,id:l})}}),Le[a].hook("updating",function(t,r,s,l){const u={...s,...t,id:r};ob(a,u)}),Le[a].hook("deleting",function(t,r,s){VR(a,t)})});Le.on("populate",()=>{Le.settings.add({companyName:"SP FAMILY VENTURES EST ENTERPRISE",regNum:"(002905563-H)",desc1:"PEMBORONG AYAM HIDUP / AYAM PROSES",desc2:"AYAM DAGING(BROILER), AYAM KAMPUNG & AYAM TUA (TELOR)",contact:"H/P (012)627-3691",logoLeft:null,logoRight:null}),Le.users.add({username:"svanathan75",password:"sp1234"})});Le.on("ready",async()=>{try{await Le.users.count()===0&&(await Le.users.add({username:"svanathan75",password:"sp1234"}),console.log("Default user seeded via ready hook"))}catch(a){console.error("Error checking/seeding users:",a)}});function Ap(){return Qn(()=>Le.settings.toArray())?.[0]||{}}const IR=["customers","products","sales","settings","vendors","vendor_purchases","payments"],OR=async a=>{const t=Sx(mx(of,a));return Dx(t,async s=>{const l=s.docChanges();l.length!==0&&(await Le.transaction("rw",Le[a],async()=>{for(const u of l){const p=u.doc.data();p.id=parseInt(u.doc.id)||u.doc.id,u.type==="added"||u.type==="modified"?await Le[a].put(p):u.type==="removed"&&await Le[a].delete(p.id)}}),console.log(`Synced ${l.length} changes for ${a} from Cloud.`))})},MR=async()=>{const a=[];for(const t of IR){const r=await OR(t);a.push(r)}return()=>a.forEach(t=>t())},ob=async(a,t)=>{try{const r=bp(of,a,String(t.id));await Cx(r,t),console.log(`Pushed ${a}/${t.id} to Cloud.`)}catch(r){console.error("Failed to push to cloud:",r)}},VR=async(a,t)=>{try{await jx(bp(of,a,String(t))),console.log(`Deleted ${a}/${t} from Cloud.`)}catch(r){console.error("Failed to delete from cloud:",r)}};function kR(){const a=ns();ie.useEffect(()=>{const r=MR();return()=>{r.then(s=>s&&s())}},[]);const t=[{path:"/",icon:n2,label:"Sales"},{path:"/products",icon:vh,label:"Products"},{path:"/customers",icon:bh,label:"Customers"},{path:"/vendors",icon:_2,label:"Vendors"},{path:"/vendor-bills",icon:Ob,label:"Bills"},{path:"/reports",icon:Hm,label:"Reports"},{path:"/settings",icon:y2,label:"Settings"}];return g.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 print:h-auto print:block",children:[g.jsx("main",{className:"flex-1 overflow-y-auto pb-20 print:pb-0 print:h-auto print:overflow-visible",children:g.jsx(Eb,{})}),g.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 flex justify-around items-center z-50 no-print",children:t.map(r=>{const s=r.icon,l=a.pathname===r.path;return g.jsxs(zh,{to:r.path,className:C2("flex flex-col items-center p-2 rounded-lg transition-colors",l?"text-blue-600":"text-gray-500 hover:text-gray-900"),children:[g.jsx(s,{size:24}),g.jsx("span",{className:"text-xs mt-1 font-medium",children:r.label})]},r.path)})})]})}function PR(a,t={}){const r={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Kuala_Lumpur",hour12:!1,...t};return new Intl.DateTimeFormat("en-MY",r).format(a)}function xr(a){const t=new Date(a.toLocaleString("en-US",{timeZone:"Asia/Kuala_Lumpur"})),r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${r}-${s}-${l}`}const LR=[{name:"KANTIN (PARKLAND)",contact:"0176335879",email:"",address:"",id:6},{name:"Kantin Empire Code Parkland",contact:"0165105419",email:"",address:"",id:7},{name:"Kantin Hossain Ali (KJawa)",contact:"0189554212",email:"",address:"",id:8},{name:"Kantin KALAM (Telok Gong)",contact:"0163040557",email:"",address:"",id:9},{name:"KANTIN KEBUN CLC ",contact:"01139307848",email:"",address:"Jln Johan Setia",id:10},{name:"Kantin Wafiq(TelokGong)",contact:"0183703384",email:"",address:"",id:11},{name:"Kantin2 Telok Gong",contact:"0173285626",email:"",address:"",id:12},{name:"KEDAI AYAM ECONSAVE (KANNAN)",contact:"01137654211",email:"",address:"",id:13},{name:"KEDAI AYAM PAMAKO",contact:"0136774960",email:"",address:"",id:14},{name:"KEDAI AYAM PANDIAN",contact:"0163567484",email:"",address:"",id:15},{name:"KEDAI AYAM PRAKASH",contact:"0124560655",email:"",address:"",id:16},{name:"KEDAI AYAM YAZID",contact:"0182166964",email:"",address:"",id:17},{name:"KANTIN MAKAN Abdullah ",contact:"0175783216",email:"",address:"Jln Universiti",id:18},{name:"KEDAI MAKAN IMRAN (GARDENIA)",contact:"001141164909",email:"",address:"",id:19},{name:"KEDAI MAKAN MEENA'S",contact:"0169643450",email:"",address:"",id:20},{name:"KEDAI MASAK Hossain (BT.8 )",contact:"+8801709143499",email:"",address:"",id:21},{name:"Kedai NK WIN ENTERPRISE",contact:"0102531902",email:"",address:"",id:22},{name:"KEDAI RUNCIT 100PLUS",contact:"01111935575",email:"",address:"",id:23},{name:"KEDAI RUNCIT B.PUTERA",contact:"0109657446",email:"",address:"",id:24},{name:"KEDAI RUNCIT DHESIGA",contact:"0162743503",email:"",address:"",id:25},{name:"KEDAI RUNCIT FORID (JLN GAMBUT)",contact:"+8801889111881",email:"",address:"",id:26},{name:"KEDAI RUNCIT MERANTI NIL",contact:"0183910436",email:"",address:"",id:27},{name:"KEDAI RUNCIT SOFIQ BT.8",contact:"01112219170",email:"",address:"",id:28},{name:"KEDAI RUNCIT W.Z LEGACY",contact:"0102652140",email:"",address:"",id:29},{name:"Kedai SJ FRESHMART",contact:"0129022533",email:"",address:"",id:30},{name:"PASAR MINI AROMA SUPERMART",contact:"01133798249",email:"",address:"",id:31},{name:"PASAR MINI SHBBIR",contact:"0149159733",email:"",address:"",id:32},{name:"PASAR MINI SR SMA",contact:"0169368535",email:"",address:"",id:33},{name:"PasarMini Berjaya(Wafiq)",contact:"0183703354",email:"",address:"",id:34},{name:"PasarMini SubangMas(Wafiq)",contact:"0183703354",email:"",address:"",id:35}],zR=[{name:"Ayam Putih (H)",price:8.6,id:8},{name:"Ayam Putih (P)",price:8.9,id:9},{name:"Ayam Gajah (H)",price:25,id:10},{name:"Ayam Tua (H)",price:6.8,id:11},{name:"Ayam Kpg Jantan (H",price:11.3,id:12},{name:"Ayam Kpg Betina (H)",price:10.5,id:13}],UR="/spfamilyventuresbook/assets/logo_company-dgHSd-ed.jpg",BR="/spfamilyventuresbook/assets/logo_poultry-RsWDEZrg.jpg",qR=LR,FR=zR.map(a=>({...a,unit:a.unit||"Kg"})),HR={id:1,companyName:"SP Family Venture EST Enterprise",regNum:"(002905563-H)",desc1:"PEMBORONG AYAM HIDUP / AYAM SEGAR (PROSES)",desc2:"AYAM DAGING (BROILER), AYAM KAMPUNG & AYAM TUA (TELOR)",contact:"H/P (012)627-3691 (Mr.SELVA)",logoLeft:UR,logoRight:BR,invoiceStart:1e4},Ix=async()=>{try{const a=await Le.customers.count(),t=await Le.products.count();if(await Le.settings.put(HR),a>0||t>0)return console.log("Database already has data. Skipping seed."),{success:!1,message:"Database already contains data. Settings updated."};await Le.customers.bulkAdd(qR),await Le.products.bulkAdd(FR);const r=await Le.customers.toArray(),s=await Le.products.toArray(),l=[],u=new Date;for(let p=0;p<15;p++){const _=new Date(u);_.setDate(u.getDate()-Math.floor(Math.random()*7));const v=r[Math.floor(Math.random()*r.length)],b=Math.floor(Math.random()*3)+1,A=[];let N=0;for(let O=0;O<b;O++){const $=s[Math.floor(Math.random()*s.length)],se=Math.floor(Math.random()*10)+1,oe=se*$.price;A.push({productId:$.id,qty:se,unit:$.unit,price:$.price}),N+=oe}l.push({date:_.toISOString().split("T")[0],customerId:v.id,items:A,subtotal:N,prevBalance:0,memo:"",grandTotal:N})}return await Le.sales.bulkAdd(l),{success:!0,message:"Sample data and logos added successfully!"}}catch(a){return console.error("Error seeding database:",a),{success:!1,message:"Failed to seed data."}}},lb=async()=>{try{return await Le.delete(),await Le.open(),{success:!0,message:"Database cleared and reset."}}catch(a){return console.error("Error clearing database:",a),{success:!1,message:"Failed to clear database."}}};function KR(){const a=Ol(),t=Ap(),[r,s]=ie.useState({todaySales:0,todayBills:0,netProfit:0,totalRevenue:0,customerCount:0,productCount:0}),[l,u]=ie.useState([]),[p,_]=ie.useState(!1),v=Qn(()=>Le.customers.toArray()),b=Qn(()=>Le.products.toArray()),A=Qn(()=>Le.sales.toArray()),N=Qn(()=>Le.vendor_purchases.toArray());ie.useEffect(()=>{if(A&&v&&b&&N){const se=xr(new Date),oe=A.filter(Se=>Se.date===se).reduce((Se,Ue)=>Se+(parseFloat(Ue.grandTotal)||0),0),B=N.filter(Se=>Se.date===se).reduce((Se,Ue)=>Se+(parseFloat(Ue.total)||0),0),Q=oe-B,ee=A.reduce((Se,Ue)=>Se+(parseFloat(Ue.grandTotal)||0),0);s({todaySales:oe,todayBills:B,netProfit:Q,totalRevenue:ee,customerCount:v.length,productCount:b.length});const fe=[...A].sort((Se,Ue)=>new Date(Ue.date)-new Date(Se.date)).slice(0,5);u(fe)}},[A,v,b,N]);const O=async()=>{if(confirm("This will populate the database with sample data. Continue?")){_(!0);const se=await Ix();alert(se.message),_(!1)}},$=se=>v?.find(oe=>oe.id===se)?.name||"Unknown";return g.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[g.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-8 pb-32",children:g.jsxs("div",{className:"max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsxs("div",{className:"flex items-center gap-5",children:[t.logoLeft&&g.jsx("div",{className:"w-20 h-20 bg-white/10 backdrop-blur-sm rounded-2xl p-2 border border-white/20 shadow-xl flex items-center justify-center",children:g.jsx("img",{src:t.logoLeft,alt:"Logo",className:"w-full h-full object-contain drop-shadow-md"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white drop-shadow-sm",children:t.companyName||"Welcome Back!"}),g.jsx("p",{className:"text-blue-100 mt-1 font-medium opacity-90",children:"Dashboard Overview"})]})]}),g.jsx("div",{className:"text-right hidden md:block",children:g.jsx("p",{className:"text-2xl font-bold",children:PR(new Date)})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-green-400/20 rounded-lg",children:g.jsx(ku,{size:20,className:"text-green-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Today's Sales"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.todaySales.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-orange-400/20 rounded-lg",children:g.jsx(Ob,{size:20,className:"text-orange-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Today's Vendor Bills"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.todayBills.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-green-400/20 rounded-lg",children:g.jsx(ku,{size:20,className:"text-green-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Daily Net Profit"})]}),g.jsxs("p",{className:`text-2xl font-bold ${r.netProfit>=0?"text-white":"text-red-300"}`,children:["RM ",r.netProfit.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-blue-400/20 rounded-lg",children:g.jsx(Hm,{size:20,className:"text-blue-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Total Revenue"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.totalRevenue.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-purple-400/20 rounded-lg",children:g.jsx(bh,{size:20,className:"text-purple-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Customers"})]}),g.jsx("p",{className:"text-2xl font-bold",children:r.customerCount})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-orange-400/20 rounded-lg",children:g.jsx(vh,{size:20,className:"text-orange-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Products"})]}),g.jsx("p",{className:"text-2xl font-bold",children:r.productCount})]})]})]})}),g.jsxs("div",{className:"max-w-5xl mx-auto px-4 -mt-24",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsxs("button",{onClick:()=>a("/sales/new"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:g.jsx(Qw,{size:32,className:"text-blue-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"New Sale"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Create a new invoice for a customer"})]}),g.jsxs("button",{onClick:()=>a("/customers"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:g.jsx(bh,{size:32,className:"text-purple-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Manage Customers"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Add or edit customer details"})]}),g.jsxs("button",{onClick:()=>a("/products"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:g.jsx(vh,{size:32,className:"text-orange-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Inventory"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Manage products and pricing"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Recent Sales"}),g.jsxs("button",{onClick:()=>a("/sales"),className:"text-blue-600 text-sm font-medium hover:underline flex items-center gap-1",children:["View All ",g.jsx(Fw,{size:16})]})]}),g.jsx("div",{className:"divide-y divide-gray-50",children:l.length>0?l.map(se=>g.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500",children:g.jsx(Kw,{size:18})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-gray-800",children:$(se.customerId)}),g.jsxs("p",{className:"text-xs text-gray-500",children:[xr(new Date(se.date)),se.memo&&g.jsxs("span",{className:"ml-2 italic text-gray-400",children:["- ",se.memo]})]})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"font-bold text-gray-800",children:["RM ",(se.grandTotal||0).toFixed(2)]}),g.jsxs("p",{className:"text-xs text-gray-500",children:["Inv #",se.id]})]})]},se.id)):g.jsx("div",{className:"p-8 text-center text-gray-500",children:"No sales found. Start by creating a new sale!"})})]}),g.jsxs("div",{className:"space-y-6",children:[r.customerCount===0&&r.productCount===0&&g.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 border border-blue-100",children:[g.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"New here?"}),g.jsx("p",{className:"text-sm text-indigo-700 mb-4",children:"Populate your database with sample data to see how the app looks and feels."}),g.jsxs("button",{onClick:O,disabled:p,className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[g.jsx(uh,{size:18}),p?"Seeding...":"Load Sample Data"]})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[g.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Quick Links"}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("button",{onClick:()=>a("/settings"),className:"w-full text-left px-4 py-2 rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm transition-colors",children:"Company Settings"}),g.jsx("button",{onClick:()=>a("/sales"),className:"w-full text-left px-4 py-2 rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm transition-colors",children:"Sales History"})]})]})]})]})]})]})}const GR="modulepreload",QR=function(a){return"/spfamilyventuresbook/"+a},ub={},cb=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let b=function(A){return Promise.all(A.map(N=>Promise.resolve(N).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};var p=b;document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),v=_?.nonce||_?.getAttribute("nonce");l=b(r.map(A=>{if(A=QR(A),A in ub)return;ub[A]=!0;const N=A.endsWith(".css"),O=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${O}`))return;const $=document.createElement("link");if($.rel=N?"stylesheet":GR,N||($.as="script"),$.crossOrigin="",$.href=A,v&&$.setAttribute("nonce",v),document.head.appendChild($),N)return new Promise((se,oe)=>{$.addEventListener("load",se),$.addEventListener("error",()=>oe(new Error(`Unable to preload CSS for ${A}`)))})}))}function u(_){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=_,window.dispatchEvent(v),!v.defaultPrevented)throw _}return l.then(_=>{for(const v of _||[])v.status==="rejected"&&u(v.reason);return t().catch(u)})},YR=async()=>{try{const a=await Le.customers.toArray(),t=await Le.products.toArray(),r=await Le.sales.toArray(),s=await Le.settings.toArray(),l={version:1,timestamp:new Date().toISOString(),customers:a,products:t,sales:r,settings:s},u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),p=URL.createObjectURL(u),_=document.createElement("a");return _.href=p,_.download=`sp_sales_backup_${xr(new Date)}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(p),{success:!0,message:"Backup exported successfully."}}catch(a){return console.error("Export failed:",a),{success:!1,message:"Failed to export backup."}}},XR=async a=>new Promise((t,r)=>{const s=new FileReader;s.onload=async l=>{try{const u=JSON.parse(l.target.result);if(!u.customers||!u.products||!u.sales)throw new Error("Invalid backup file format.");await Le.transaction("rw",Le.customers,Le.products,Le.sales,Le.settings,async()=>{u.customers.length&&await Le.customers.bulkPut(u.customers),u.products.length&&await Le.products.bulkPut(u.products),u.sales.length&&await Le.sales.bulkPut(u.sales),u.settings&&u.settings.length&&await Le.settings.bulkPut(u.settings)}),t({success:!0,message:"Backup imported successfully."})}catch(u){console.error("Import failed:",u),t({success:!1,message:"Failed to import backup. Invalid file."})}},s.onerror=()=>{t({success:!1,message:"Failed to read file."})},s.readAsText(a)}),Ox=ie.createContext(null),$R=({children:a})=>{const[t,r]=ie.useState(null),[s,l]=ie.useState(!0);ie.useEffect(()=>{const v=localStorage.getItem("user");v&&r(JSON.parse(v)),l(!1)},[]);const u=async(v,b)=>{try{const A=await Le.users.where("username").equals(v).first();if(A&&A.password===b){const N={id:A.id,username:A.username};return r(N),localStorage.setItem("user",JSON.stringify(N)),{success:!0}}return{success:!1,message:"Invalid username or password"}}catch(A){return console.error("Login error:",A),{success:!1,message:"Login failed"}}},p=()=>{r(null),localStorage.removeItem("user")},_=async v=>{if(!t)return{success:!1,message:"Not logged in"};try{return await Le.users.update(t.id,{password:v}),{success:!0,message:"Password updated successfully"}}catch(b){return console.error("Update password error:",b),{success:!1,message:"Failed to update password"}}};return g.jsx(Ox.Provider,{value:{user:t,login:u,logout:p,updatePassword:_,loading:s},children:!s&&a})},Np=()=>ie.useContext(Ox);function ZR(){const a=Ap(),[t,r]=ie.useState({}),[s,l]=ie.useState(""),{user:u,updatePassword:p,logout:_}=Np(),[v,b]=ie.useState(""),[A,N]=ie.useState("");ie.useEffect(()=>{a.id&&!t.id&&r(a)},[a,t.id]);const O=oe=>{const{name:B,value:Q}=oe.target;r(ee=>({...ee,[B]:Q}))},$=async(oe,B)=>{const Q=oe.target.files[0];if(Q){const ee=new FileReader;ee.onloadend=()=>{r(fe=>({...fe,[B]:ee.result}))},ee.readAsDataURL(Q)}},se=async oe=>{oe.preventDefault();try{t.id&&(await Le.settings.put(t),l("Settings saved successfully!"),setTimeout(()=>l(""),3e3))}catch(B){console.error("Failed to save settings:",B),l("Error saving settings.")}};return t.id?g.jsxs("div",{className:"p-4 max-w-lg mx-auto pb-24",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Company Settings"}),g.jsxs("form",{onSubmit:se,className:"space-y-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 space-y-3",children:[g.jsx("h2",{className:"font-semibold text-gray-700 mb-2",children:"Company Details"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Company Name"}),g.jsx("input",{type:"text",name:"companyName",value:t.companyName||"",onChange:O,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Registration Number"}),g.jsx("input",{type:"text",name:"regNum",value:t.regNum||"",onChange:O,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description Line 1"}),g.jsx("input",{type:"text",name:"desc1",value:t.desc1||"",onChange:O,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description Line 2"}),g.jsx("input",{type:"text",name:"desc2",value:t.desc2||"",onChange:O,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Contact Info"}),g.jsx("input",{type:"text",name:"contact",value:t.contact||"",onChange:O,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Invoice Start Number"}),g.jsx("input",{type:"number",name:"invoiceStart",value:t.invoiceStart||"",onChange:O,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 10000"})]})]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 space-y-4",children:[g.jsx("h2",{className:"font-semibold text-gray-700 mb-2",children:"Logos"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Left Logo (Company)"}),g.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors",children:[t.logoLeft?g.jsx("img",{src:t.logoLeft,alt:"Left Logo",className:"h-20 mx-auto object-contain mb-2"}):g.jsx("div",{className:"h-20 flex items-center justify-center text-gray-400",children:"No Logo"}),g.jsxs("label",{className:"cursor-pointer block",children:[g.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Change"}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:oe=>$(oe,"logoLeft")})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Right Logo (Poultry)"}),g.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors",children:[t.logoRight?g.jsx("img",{src:t.logoRight,alt:"Right Logo",className:"h-20 mx-auto object-contain mb-2"}):g.jsx("div",{className:"h-20 flex items-center justify-center text-gray-400",children:"No Logo"}),g.jsxs("label",{className:"cursor-pointer block",children:[g.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Change"}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:oe=>$(oe,"logoRight")})]})]})]})]})]}),g.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2",children:[g.jsx(Mb,{size:20}),"Save Settings"]}),s&&g.jsx("div",{className:`text-center p-2 rounded ${s.includes("Error")?"text-red-600 bg-red-50":"text-green-600 bg-green-50"}`,children:s})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8 mt-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[g.jsx(Vb,{size:24,className:"text-blue-600"}),"User Profile"]}),g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Logged in as"}),g.jsx("p",{className:"font-bold text-gray-900",children:u?.username})]}),g.jsx("button",{onClick:_,className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Sign Out"})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsxs("h3",{className:"font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[g.jsx(Cb,{size:16})," Change Password"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"password",placeholder:"New Password",value:v,onChange:oe=>b(oe.target.value),className:"flex-1 p-2 border rounded-md text-sm"}),g.jsx("button",{onClick:async()=>{if(!v)return;const oe=await p(v);N(oe.message),oe.success&&b(""),setTimeout(()=>N(""),3e3)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:"Update"})]}),A&&g.jsx("p",{className:`text-xs mt-2 ${A.includes("Failed")?"text-red-600":"text-green-600"}`,children:A})]})]})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[g.jsx(uh,{size:24,className:"text-blue-600"}),"Data Management"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[g.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Backup & Restore"}),g.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Save your data to a file or restore from a backup. Use this to move data between devices."}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[g.jsxs("button",{onClick:async()=>{const oe=await YR();alert(oe.message)},className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[g.jsx(Uh,{size:18})," Export Data"]}),g.jsxs("label",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer",children:[g.jsx(qh,{size:18})," Import Data",g.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:async oe=>{if(oe.target.files?.[0]&&confirm("This will merge the backup data with your current data. Continue?")){const B=await XR(oe.target.files[0]);alert(B.message),B.success&&window.location.reload()}}})]})]})]}),g.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[g.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Cloud Sync Status"}),g.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Check if your device can connect to the cloud database."}),g.jsxs("button",{onClick:async()=>{try{const{doc:oe,setDoc:B}=await cb(async()=>{const{doc:ee,setDoc:fe}=await Promise.resolve().then(()=>TR);return{doc:ee,setDoc:fe}},[]),{db:Q}=await cb(async()=>{const{db:ee}=await Promise.resolve().then(()=>NR);return{db:ee}},void 0);await B(oe(Q,"_connection_test","test"),{timestamp:new Date().toISOString(),device:navigator.userAgent}),alert("Connection Successful! Cloud sync is working.")}catch(oe){console.error(oe),alert("Connection Failed: "+oe.message+`

Please check your Firestore Rules in the Firebase Console.`)}},className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[g.jsx(uh,{size:18})," Test Connection"]})]})]})]}),g.jsxs("div",{className:"mt-12 border-t pt-8",children:[g.jsx("h2",{className:"text-lg font-bold text-red-600 mb-4",children:"Danger Zone"}),g.jsxs("button",{onClick:async()=>{if(confirm("WARNING: This will delete ALL data (customers, products, sales). This action cannot be undone. Are you sure?")){const oe=await lb();alert(oe.message)}},className:"w-full bg-red-50 text-red-600 border border-red-200 py-3 rounded-lg font-semibold hover:bg-red-100 flex items-center justify-center gap-2 mb-3",children:[g.jsx(Ys,{size:20}),"Clear All Data"]}),g.jsxs("button",{onClick:async()=>{if(confirm("WARNING: This will delete ALL data (customers, products, sales) and replace it with sample data. Are you sure?")){await lb();const oe=await Ix();alert(oe.message)}},className:"w-full bg-red-50 text-red-600 border border-red-200 py-3 rounded-lg font-semibold hover:bg-red-100 flex items-center justify-center gap-2",children:[g.jsx(uh,{size:20}),"Reset & Seed Sample Data"]})]})]}):g.jsx("div",{className:"p-4",children:"Loading settings..."})}function JR(){const a=Qn(()=>Le.products.toArray()),[t,r]=ie.useState(!1),[s,l]=ie.useState(null),[u,p]=ie.useState(""),_=ie.useRef(null),[v,b]=ie.useState({name:"",price:""}),A=(Q=null)=>{Q?(l(Q),b({name:Q.name,price:Q.price})):(l(null),b({name:"",price:""})),r(!0)},N=()=>{r(!1),l(null)},O=async Q=>{Q.preventDefault();try{s?await Le.products.update(s.id,{name:v.name,price:parseFloat(v.price)}):await Le.products.add({name:v.name,price:parseFloat(v.price)}),N()}catch(ee){console.error("Failed to save product:",ee),alert("Error saving product")}},$=async Q=>{window.confirm("Are you sure you want to delete this product?")&&await Le.products.delete(Q)},se=()=>{const Q=JSON.stringify(a,null,2),ee=new Blob([Q],{type:"application/json"}),fe=URL.createObjectURL(ee),Se=document.createElement("a");Se.href=fe,Se.download="products_backup.json",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)},oe=Q=>{const ee=Q.target.files[0];if(!ee)return;const fe=new FileReader;fe.onload=async Se=>{try{const Ue=JSON.parse(Se.target.result);Array.isArray(Ue)?(await Le.products.bulkPut(Ue),alert("Products imported successfully!")):alert("Invalid file format")}catch(Ue){console.error("Import failed:",Ue),alert("Failed to import products")}},fe.readAsText(ee),Q.target.value=null},B=a?.filter(Q=>Q.name.toLowerCase().includes(u.toLowerCase()))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-4xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Products"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>_.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(qh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:oe}),g.jsxs("button",{onClick:se,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Uh,{size:16})," Export"]}),g.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Product"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search products...",value:u,onChange:Q=>p(Q.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Name"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Price (RM)"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[B.map(Q=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3",children:Q.name}),g.jsxs("td",{className:"px-4 py-3",children:["RM ",Q.price?.toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>A(Q),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(Bh,{size:18})}),g.jsx("button",{onClick:()=>$(Q.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:18})})]})]},Q.id)),B.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"px-4 py-8 text-center text-gray-500",children:"No products found. Add one to get started."})})]})]})}),t&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:s?"Edit Product":"Add Product"}),g.jsxs("form",{onSubmit:O,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),g.jsx("input",{type:"text",required:!0,value:v.name,onChange:Q=>b({...v,name:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (RM)"}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:v.price,onChange:Q=>b({...v,price:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function WR(){const a=Qn(()=>Le.customers.toArray()),t=Qn(()=>Le.sales.toArray()),r=Qn(()=>Le.payments.toArray()),[s,l]=ie.useState(!1),[u,p]=ie.useState(!1),[_,v]=ie.useState(null),[b,A]=ie.useState(""),N=ie.useRef(null),[O,$]=ie.useState({name:"",contact:"",email:"",address:""}),[se,oe]=ie.useState({customerId:"",date:xr(new Date),amount:"",memo:""}),B=(I=null)=>{I?(v(I),$({name:I.name,contact:I.contact,email:I.email||"",address:I.address||""})):(v(null),$({name:"",contact:"",email:"",address:""})),l(!0)},Q=()=>{l(!1),v(null)},ee=async I=>{I.preventDefault();try{_?await Le.customers.update(_.id,O):await Le.customers.add(O),Q()}catch(z){console.error("Failed to save customer:",z),alert("Error saving customer")}},fe=()=>{oe({customerId:"",date:xr(new Date),amount:"",memo:""}),p(!0)},Se=async I=>{I.preventDefault();try{const z=parseFloat(se.amount);if(!se.customerId){alert("Please select a customer");return}if(isNaN(z)||z<=0){alert("Please enter a valid amount");return}const X=a.find(at=>String(at.id)===String(se.customerId)),V=X?X.id:se.customerId;await Le.payments.add({customerId:V,date:se.date,amount:z,memo:se.memo}),p(!1),alert("Payment recorded successfully!")}catch(z){console.error("Failed to save payment:",z),alert(`Error saving payment: ${z.message}`)}},Ue=async I=>{window.confirm("Are you sure you want to delete this customer?")&&await Le.customers.delete(I)},Ge=()=>{const I=JSON.stringify(a,null,2),z=new Blob([I],{type:"application/json"}),X=URL.createObjectURL(z),V=document.createElement("a");V.href=X,V.download="customers_backup.json",document.body.appendChild(V),V.click(),document.body.removeChild(V)},k=I=>{const z=I.target.files[0];if(!z)return;const X=new FileReader;X.onload=async V=>{try{const at=JSON.parse(V.target.result);Array.isArray(at)?(await Le.customers.bulkPut(at),alert("Customers imported successfully!")):alert("Invalid file format")}catch(at){console.error("Import failed:",at),alert("Failed to import customers")}},X.readAsText(z),I.target.value=null},M=I=>{if(!t||!r)return 0;const z=t.filter(dt=>String(dt.customerId)===String(I)),X=r.filter(dt=>String(dt.customerId)===String(I)),V=z.reduce((dt,J)=>dt+(parseFloat(J.grandTotal)||0),0),at=X.reduce((dt,J)=>dt+(parseFloat(J.amount)||0),0);return V-at},P=a?.filter(I=>I.name.toLowerCase().includes(b.toLowerCase())||I.contact.includes(b))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Customers"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>N.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(qh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:N,className:"hidden",accept:".json",onChange:k}),g.jsxs("button",{onClick:Ge,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Uh,{size:16})," Export"]}),g.jsxs("button",{onClick:fe,className:"flex items-center gap-1 px-3 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200",children:[g.jsx(Gv,{size:16})," Receive Payment"]}),g.jsxs("button",{onClick:()=>B(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Customer"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search customers...",value:b,onChange:I=>A(I.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(I=>g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:I.name}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>B(I),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(Bh,{size:16})}),g.jsx("button",{onClick:()=>Ue(I.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:16})})]})]}),g.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ib,{size:14,className:"text-gray-400"}),g.jsx("span",{children:I.contact})]}),I.email&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(jb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:I.email})]}),I.address&&g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Db,{size:14,className:"text-gray-400 mt-1"}),g.jsx("span",{className:"flex-1",children:I.address})]}),g.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 flex justify-between items-center",children:[g.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Outstanding:"}),g.jsxs("span",{className:`font-bold ${M(I.id)>0?"text-red-500":"text-green-600"}`,children:["RM ",M(I.id).toFixed(2)]})]})]})]},I.id))}),P.length===0&&g.jsx("div",{className:"text-center py-12 text-gray-500",children:"No customers found. Add one to get started."}),s&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:_?"Edit Customer":"Add Customer"}),g.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),g.jsx("input",{type:"text",required:!0,value:O.name,onChange:I=>$({...O,name:I.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact No."}),g.jsx("input",{type:"text",required:!0,value:O.contact,onChange:I=>$({...O,contact:I.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),g.jsx("input",{type:"email",value:O.email,onChange:I=>$({...O,email:I.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),g.jsx("textarea",{value:O.address,onChange:I=>$({...O,address:I.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"3"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:Q,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})}),u&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4 text-green-700",children:[g.jsx(Gv,{size:24}),g.jsx("h2",{className:"text-xl font-bold",children:"Receive Payment"})]}),g.jsxs("form",{onSubmit:Se,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),g.jsxs("select",{required:!0,value:se.customerId,onChange:I=>oe({...se,customerId:I.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",children:[g.jsx("option",{value:"",children:"Select Customer"}),a?.map(I=>g.jsxs("option",{value:I.id,children:[I.name," (Outstanding: RM ",M(I.id).toFixed(2),")"]},I.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",required:!0,value:se.date,onChange:I=>oe({...se,date:I.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (RM)"}),g.jsxs("div",{className:"relative",children:[g.jsx(ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:se.amount,onChange:I=>oe({...se,amount:I.target.value}),className:"w-full pl-10 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Memo (Optional)"}),g.jsx("textarea",{value:se.memo,onChange:I=>oe({...se,memo:I.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"2",placeholder:"Payment method, ref no, etc."})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Save Payment"})]})]})]})})]})}function eC(){const a=Qn(()=>Le.sales.reverse().toArray()),t=Qn(()=>Le.customers.toArray()),[r,s]=ie.useState(""),l=Ol(),u=b=>t?.find(A=>A.id===b)?.name||"Unknown Customer",p=b=>b?.reduce((A,N)=>A+(N.discount||0),0)||0,_=a?.filter(b=>{const A=u(b.customerId).toLowerCase(),N=xr(new Date(b.date)),O=b.memo?.toLowerCase()||"";return A.includes(r.toLowerCase())||N.includes(r)||O.includes(r.toLowerCase())})||[],v=async b=>{window.confirm("Are you sure you want to delete this sale record?")&&await Le.sales.delete(b)};return g.jsxs("div",{className:"p-4 pb-24 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Sales Dashboard"}),g.jsxs(zh,{to:"/sales/new",className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," New Sale"]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search by customer, date, or memo...",value:r,onChange:b=>s(b.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Date"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Customer"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Memo"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Discount"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Grand Total"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[_.map(b=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3 text-sm",children:xr(new Date(b.date))}),g.jsx("td",{className:"px-4 py-3 font-medium",children:u(b.customerId)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 italic",children:b.memo||"-"}),g.jsx("td",{className:"px-4 py-3 text-right text-red-500 text-sm",children:p(b.items)>0?`RM ${p(b.items).toFixed(2)}`:"-"}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["RM ",(b.grandTotal||0).toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>l(`/sales/${b.id}`),className:"text-blue-600 hover:text-blue-800 p-1",title:"View Invoice",children:g.jsx(e2,{size:18})}),g.jsx("button",{onClick:()=>v(b.id),className:"text-red-600 hover:text-red-800 p-1",title:"Delete",children:g.jsx(Ys,{size:18})})]})]},b.id)),_.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"No sales found. Create a new sale to get started."})})]})]})})]})}var gh={exports:{}},tC=gh.exports,hb;function nC(){return hb||(hb=1,(function(a,t){(function(r,s){a.exports=s(kh())})(typeof self<"u"?self:tC,function(r){return(function(){var s={155:function(ee){ee.exports=r}},l={};function u(ee){var fe=l[ee];if(fe!==void 0)return fe.exports;var Se=l[ee]={exports:{}};return s[ee](Se,Se.exports,u),Se.exports}u.d=function(ee,fe){for(var Se in fe)u.o(fe,Se)&&!u.o(ee,Se)&&Object.defineProperty(ee,Se,{enumerable:!0,get:fe[Se]})},u.o=function(ee,fe){return Object.prototype.hasOwnProperty.call(ee,fe)},u.r=function(ee){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})};var p={};u.r(p),u.d(p,{useReactToPrint:function(){return Q}});var _=u(155);const v="printWindow";function b({level:ee="error",messages:fe,suppressErrors:Se=!1}){Se||(ee==="error"?console.error(fe):ee==="warning"?console.warn(fe):console.debug(fe))}function A(ee,fe){if(fe||!ee){const Se=document.getElementById(v);Se&&document.body.removeChild(Se)}}function N(ee){return ee instanceof Error?ee:new Error("Unknown Error")}function O(ee,fe){const{documentTitle:Se,onAfterPrint:Ue,onPrintError:Ge,preserveAfterPrint:k,print:M,suppressErrors:P}=fe;setTimeout(()=>{var I,z;if(ee.contentWindow){let V=function(){Ue?.(),A(k)};var X=V;if(ee.contentWindow.focus(),M)M(ee).then(V).catch(at=>{Ge?Ge("print",N(at)):b({messages:["An error was thrown by the specified `print` function"],suppressErrors:P})});else{if(ee.contentWindow.print){const at=(z=(I=ee.contentDocument)===null||I===void 0?void 0:I.title)!==null&&z!==void 0?z:"",dt=ee.ownerDocument.title;Se&&(ee.ownerDocument.title=Se,ee.contentDocument&&(ee.contentDocument.title=Se)),ee.contentWindow.print(),Se&&(ee.ownerDocument.title=dt,ee.contentDocument&&(ee.contentDocument.title=at))}else b({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:P});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(at=>{var dt,J;return((J=(dt=navigator.userAgent)!==null&&dt!==void 0?dt:navigator.vendor)!==null&&J!==void 0?J:"opera"in window&&window.opera).match(at)})?setTimeout(V,500):V()}}else b({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:P})},500)}function $(ee){const fe=[],Se=document.createTreeWalker(ee,NodeFilter.SHOW_ELEMENT,null);let Ue=Se.nextNode();for(;Ue;)fe.push(Ue),Ue=Se.nextNode();return fe}function se(ee,fe,Se){const Ue=$(ee),Ge=$(fe);if(Ue.length===Ge.length)for(let k=0;k<Ue.length;k++){const M=Ue[k],P=Ge[k],I=M.shadowRoot;if(I!==null){const z=P.attachShadow({mode:I.mode});z.innerHTML=I.innerHTML,se(I,z,Se)}}else b({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",ee,fe],suppressErrors:Se})}const oe=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function B(ee,fe,Se,Ue){var Ge,k,M,P,I;const{contentNode:z,clonedContentNode:X,clonedImgNodes:V,clonedVideoNodes:at,numResourcesToLoad:dt,originalCanvasNodes:J}=Se,{bodyClass:Ae,fonts:Ne,ignoreGlobalStyles:it,pageStyle:tt,nonce:F,suppressErrors:be,copyShadowRoots:Ie}=Ue;ee.onload=null;const Re=(Ge=ee.contentDocument)!==null&&Ge!==void 0?Ge:(k=ee.contentWindow)===null||k===void 0?void 0:k.document;if(Re){const Fe=Re.body.appendChild(X);Ie&&se(z,Fe,!!be),Ne&&(!((M=ee.contentDocument)===null||M===void 0)&&M.fonts&&(!((P=ee.contentWindow)===null||P===void 0)&&P.FontFace)?Ne.forEach(Qe=>{const Je=new FontFace(Qe.family,Qe.source,{weight:Qe.weight,style:Qe.style});ee.contentDocument.fonts.add(Je),Je.loaded.then(()=>{fe(Je)}).catch(Ht=>{fe(Je,["Failed loading the font:",Je,"Load error:",N(Ht)])})}):(Ne.forEach(Qe=>{fe(Qe)}),b({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:be})));const $e=tt??oe,rt=Re.createElement("style");F&&(rt.setAttribute("nonce",F),Re.head.setAttribute("nonce",F)),rt.appendChild(Re.createTextNode($e)),Re.head.appendChild(rt),Ae&&Re.body.classList.add(...Ae.split(" "));const Ft=Re.querySelectorAll("canvas");for(let Qe=0;Qe<J.length;++Qe){const Je=J[Qe],Ht=Ft[Qe];if(Ht===void 0){b({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",Je],suppressErrors:be});continue}const yt=Ht.getContext("2d");yt&&yt.drawImage(Je,0,0)}for(let Qe=0;Qe<V.length;Qe++){const Je=V[Qe],Ht=Je.getAttribute("src");if(Ht){const yt=new Image;yt.onload=()=>{fe(Je)},yt.onerror=(Ut,on,Xn,Rt,Mt)=>{fe(Je,["Error loading <img>",Je,"Error",Mt])},yt.src=Ht}else fe(Je,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',Je])}for(let Qe=0;Qe<at.length;Qe++){const Je=at[Qe];Je.preload="auto";const Ht=Je.getAttribute("poster");if(Ht){const yt=new Image;yt.onload=()=>{fe(Je)},yt.onerror=(Ut,on,Xn,Rt,Mt)=>{fe(Je,["Error loading video poster",Ht,"for video",Je,"Error:",Mt])},yt.src=Ht}else Je.readyState>=2?fe(Je):Je.src?(Je.onloadeddata=()=>{fe(Je)},Je.onerror=(yt,Ut,on,Xn,Rt)=>{fe(Je,["Error loading video",Je,"Error",Rt])},Je.onstalled=()=>{fe(Je,["Loading video stalled, skipping",Je])}):fe(Je,["Error loading video, `src` is empty",Je])}const Oe="select",fn=z.querySelectorAll(Oe),On=Re.querySelectorAll(Oe);for(let Qe=0;Qe<fn.length;Qe++)On[Qe].value=fn[Qe].value;if(!it){const Qe=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let Je=0,Ht=Qe.length;Je<Ht;++Je){const yt=Qe[Je];if(yt.tagName.toLowerCase()==="style"){const Ut=Re.createElement(yt.tagName),on=yt.sheet;if(on){let Xn="";try{const Rt=on.cssRules.length;for(let Mt=0;Mt<Rt;++Mt)typeof on.cssRules[Mt].cssText=="string"&&(Xn+=`${on.cssRules[Mt].cssText}\r
`)}catch(Rt){b({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",yt,`Original error: ${N(Rt).message}`],level:"warning"})}Ut.setAttribute("id",`react-to-print-${Je}`),F&&Ut.setAttribute("nonce",F),Ut.appendChild(Re.createTextNode(Xn)),Re.head.appendChild(Ut)}}else if(yt.getAttribute("href"))if(yt.hasAttribute("disabled"))b({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",yt],level:"warning"}),fe(yt);else{const Ut=Re.createElement(yt.tagName);for(let on=0,Xn=yt.attributes.length;on<Xn;++on){const Rt=yt.attributes[on];Rt&&Ut.setAttribute(Rt.nodeName,(I=Rt.nodeValue)!==null&&I!==void 0?I:"")}Ut.onload=()=>{fe(Ut)},Ut.onerror=(on,Xn,Rt,Mt,wn)=>{fe(Ut,["Failed to load",Ut,"Error:",wn])},F&&Ut.setAttribute("nonce",F),Re.head.appendChild(Ut)}else b({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",yt],level:"warning"}),fe(yt)}}}dt===0&&O(ee,Ue)}function Q({bodyClass:ee,contentRef:fe,copyShadowRoots:Se,documentTitle:Ue,fonts:Ge,ignoreGlobalStyles:k,nonce:M,onAfterPrint:P,onBeforePrint:I,onPrintError:z,pageStyle:X,preserveAfterPrint:V,print:at,printIframeProps:dt,suppressErrors:J}){return(0,_.useCallback)(Ne=>{function it(){const tt={bodyClass:ee,contentRef:fe,copyShadowRoots:Se,documentTitle:Ue,fonts:Ge,ignoreGlobalStyles:k,nonce:M,onAfterPrint:P,onPrintError:z,pageStyle:X,preserveAfterPrint:V,print:at,suppressErrors:J},F=(function(Re){const Fe=document.createElement("iframe");return Fe.width=`${document.documentElement.clientWidth}px`,Fe.height=`${document.documentElement.clientHeight}px`,Fe.style.position="absolute",Fe.style.top=`-${document.documentElement.clientHeight+100}px`,Fe.style.left=`-${document.documentElement.clientWidth+100}px`,Fe.id=v,Fe.srcdoc="<!DOCTYPE html>",Re&&(Re.allow&&(Fe.allow=Re.allow),Re.referrerPolicy!==void 0&&(Fe.referrerPolicy=Re.referrerPolicy),Re.sandbox!==void 0&&(Fe.sandbox=Re.sandbox)),Fe})(dt),be=(function(Re,Fe){const{contentRef:$e,fonts:rt,ignoreGlobalStyles:Ft,suppressErrors:Oe}=Fe,fn=(function({contentRef:Ut,optionalContent:on,suppressErrors:Xn}){return on&&typeof on=="function"?(Ut&&b({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),on()):Ut?Ut.current:void b({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Xn})})({contentRef:$e,optionalContent:Re,suppressErrors:Oe});if(!fn)return;const On=fn.cloneNode(!0),Qe=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Je=On.querySelectorAll("img"),Ht=On.querySelectorAll("video"),yt=rt?rt.length:0;return{contentNode:fn,clonedContentNode:On,clonedImgNodes:Je,clonedVideoNodes:Ht,numResourcesToLoad:(Ft?0:Qe.length)+Je.length+Ht.length+yt,originalCanvasNodes:fn.querySelectorAll("canvas")}})(Ne,tt);if(!be)return void b({messages:["There is nothing to print"],suppressErrors:J});const Ie=(function(Re,Fe,$e){const{suppressErrors:rt}=Re,Ft=[],Oe=[];return function(fn,On){Ft.includes(fn)?b({level:"debug",messages:["Tried to mark a resource that has already been handled",fn],suppressErrors:rt}):(On?(b({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...On],suppressErrors:rt}),Oe.push(fn)):Ft.push(fn),Ft.length+Oe.length===Fe&&O($e,Re))}})(tt,be.numResourcesToLoad,F);(function(Re,Fe,$e,rt){Re.onload=()=>{B(Re,Fe,$e,rt)},document.body.appendChild(Re)})(F,Ie,be,tt)}A(V,!0),I?I().then(()=>{it()}).catch(tt=>{z?.("onBeforePrint",N(tt))}):it()},[ee,fe,Se,Ue,Ge,k,M,P,I,z,X,V,at,J])}return p})()})})(gh)),gh.exports}var rC=nC();const aC=({settings:a,customer:t,saleDate:r,id:s,items:l,products:u,prevBalance:p,prevBalanceMemo:_,subtotal:v,paidAmount:b,grandTotal:A})=>{const N=B=>u?.find(Q=>Q.id===B)?.name||"Unknown",O=l.reduce((B,Q)=>B+(Q.discount||0),0),$=A-(b||0),se=parseInt(a.invoiceStart)||1e4,oe=s?se+(parseInt(s)-1):"NEW";return g.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto print:p-0 print:w-full print:max-w-none font-sans",children:[g.jsxs("div",{className:"flex flex-col md:flex-row print:flex-row justify-between items-center md:items-start print:items-start mb-8 border-b-2 border-gray-100 pb-6 gap-4",children:[g.jsx("div",{className:"w-40 h-40 flex-shrink-0",children:a.logoLeft&&g.jsx("img",{src:a.logoLeft,alt:"Logo",className:"w-full h-full object-contain"})}),g.jsxs("div",{className:"text-center flex-1 px-4 order-first md:order-none print:order-none w-full",children:[g.jsx("h1",{className:"text-xl font-extrabold uppercase tracking-wide text-gray-900",children:a.companyName}),g.jsx("p",{className:"text-sm font-bold text-gray-600",children:a.regNum}),g.jsx("p",{className:"text-xs mt-1 text-gray-500 font-medium",children:a.desc1}),g.jsx("p",{className:"text-xs text-gray-500 font-medium",children:a.desc2}),g.jsx("p",{className:"text-sm font-bold mt-2 text-gray-800",children:a.contact})]}),g.jsx("div",{className:"w-40 h-40 flex-shrink-0 hidden md:block print:block",children:a.logoRight&&g.jsx("img",{src:a.logoRight,alt:"Poultry",className:"w-full h-full object-contain"})})]}),g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-6",children:[g.jsxs("div",{className:"w-full md:w-auto",children:[g.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Billed To"}),g.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t.name}),g.jsx("p",{className:"text-sm text-gray-600 max-w-[250px]",children:t.address}),g.jsx("p",{className:"text-sm text-gray-600",children:t.contact})]}),g.jsxs("div",{className:"text-left md:text-right w-full md:w-auto",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-400 uppercase mb-1",children:"Delivery Order / Invoice"}),g.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["#INV-",oe]}),g.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["Date: ",xr(new Date(r))]})]})]}),g.jsx("div",{className:"hidden md:block print:!block overflow-x-auto",children:g.jsxs("table",{className:"w-full mb-8 border-collapse min-w-[600px] print:!min-w-full print:!table",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[g.jsx("th",{className:"text-center py-3 px-2 text-sm font-bold text-gray-600 w-12",children:"#"}),g.jsx("th",{className:"text-left py-3 px-2 text-sm font-bold text-gray-600",children:"Item"}),g.jsx("th",{className:"text-center py-3 px-2 text-sm font-bold text-gray-600",children:"Quantity"}),g.jsx("th",{className:"text-right py-3 px-2 text-sm font-bold text-gray-600",children:"Unit Price"}),g.jsx("th",{className:"text-right py-3 px-2 text-sm font-bold text-gray-600",children:"Total"})]})}),g.jsx("tbody",{children:l.map((B,Q)=>g.jsxs("tr",{className:"border-b border-gray-50",children:[g.jsx("td",{className:"text-center py-3 px-2 text-sm text-gray-600",children:Q+1}),g.jsxs("td",{className:"py-3 px-2",children:[g.jsx("div",{className:"font-bold text-gray-800",children:N(parseInt(B.productId))}),B.memo&&g.jsx("div",{className:"text-xs text-gray-500 italic mt-0.5",children:B.memo}),B.discount>0&&g.jsxs("div",{className:"text-xs text-red-500 mt-0.5",children:["Disc: -",parseFloat(B.discount).toFixed(2)]})]}),g.jsxs("td",{className:"text-center py-3 px-2 text-sm text-gray-800 font-medium",children:[B.qty," ",B.unit]}),g.jsxs("td",{className:"text-right py-3 px-2 text-sm text-gray-800",children:["RM ",parseFloat(B.price).toFixed(2)]}),g.jsxs("td",{className:"text-right py-3 px-2 text-sm font-bold text-gray-800",children:["RM ",(B.qty*B.price-(B.discount||0)).toFixed(2)]})]},Q))})]})}),g.jsx("div",{className:"md:hidden print:hidden space-y-4 mb-8",children:l.map((B,Q)=>g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-gray-900",children:N(parseInt(B.productId))}),B.memo&&g.jsx("div",{className:"text-xs text-gray-500 italic",children:B.memo})]}),g.jsxs("div",{className:"text-xs font-bold text-gray-500 bg-white px-2 py-1 rounded border",children:["#",Q+1]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-500 text-xs block",children:"Quantity"}),g.jsxs("span",{className:"font-medium",children:[B.qty," ",B.unit]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("span",{className:"text-gray-500 text-xs block",children:"Unit Price"}),g.jsxs("span",{className:"font-medium",children:["RM ",parseFloat(B.price).toFixed(2)]})]})]}),B.discount>0&&g.jsxs("div",{className:"flex justify-between text-xs text-red-500 mb-2",children:[g.jsx("span",{children:"Discount"}),g.jsxs("span",{children:["- RM ",parseFloat(B.discount).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 pt-2",children:[g.jsx("span",{className:"font-bold text-gray-600",children:"Total"}),g.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["RM ",(B.qty*B.price-(B.discount||0)).toFixed(2)]})]})]},Q))}),g.jsx("div",{className:"flex justify-end mb-12",children:g.jsxs("div",{className:"w-80",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[g.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Subtotal"}),g.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["RM ",v.toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-green-700 text-white px-3 py-1.5 rounded-sm mb-1",children:[g.jsx("span",{className:"text-sm font-medium",children:"Discount"}),g.jsxs("span",{className:"text-sm font-bold",children:["- RM ",O.toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-green-700 text-white px-3 py-1.5 rounded-sm mb-2",children:[g.jsxs("span",{className:"text-sm font-medium",children:["Previous Balance ",_&&`(${_})`]}),g.jsxs("span",{className:"text-sm font-bold",children:["RM ",parseFloat(p).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[g.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Paid"}),g.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["- RM ",parseFloat(b||0).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center border-t-2 border-gray-200 pt-2 px-2",children:[g.jsx("span",{className:"text-lg font-extrabold text-gray-900",children:"Balance Due"}),g.jsxs("span",{className:"text-lg font-extrabold text-gray-900",children:["RM ",$.toFixed(2)]})]})]})}),g.jsxs("div",{className:"text-center space-y-1",children:[g.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Thank you for your business!"}),g.jsx("p",{className:"text-xs text-gray-400 italic",children:"This is a computer-generated document. No signature is required."})]})]})};function fb(){const{id:a}=UE(),t=Ol(),r=Ap(),s=Qn(()=>Le.customers.toArray()),l=Qn(()=>Le.products.toArray()),[u,p]=ie.useState(xr(new Date)),[_,v]=ie.useState(""),[b,A]=ie.useState([]),[N,O]=ie.useState(0),[$,se]=ie.useState(""),[oe,B]=ie.useState(0),[Q,ee]=ie.useState(!1),[fe,Se]=ie.useState(!1),[Ue,Ge]=ie.useState(!0),k=ie.useRef(),M=rC.useReactToPrint({contentRef:k,documentTitle:`Invoice-${a||"New"}`});ie.useEffect(()=>{a&&Le.sales.get(parseInt(a)).then(J=>{J&&(p(J.date),v(J.customerId),A(J.items),O(J.prevBalance||0),se(J.memo||""),B(J.paidAmount||0),ee(!0))})},[a]);const P=()=>{A([...b,{productId:"",qty:1,unit:"Kg",price:0,discount:0,memo:""}])},I=(J,Ae,Ne)=>{const it=[...b];if(it[J][Ae]=Ne,Ae==="productId"){const tt=l.find(F=>F.id===parseInt(Ne));tt&&(it[J].price=tt.price)}A(it)},z=J=>{A(b.filter((Ae,Ne)=>Ne!==J))},X=()=>b.reduce((J,Ae)=>J+(Ae.qty*Ae.price-(Ae.discount||0)),0),V=()=>X()+parseFloat(N||0),at=async(J=!1)=>{if(!_){alert("Please select a customer");return}if(b.length===0){alert("Please add at least one item");return}const Ae={date:u,customerId:parseInt(_),items:b.map(Ne=>({...Ne,productId:parseInt(Ne.productId),qty:parseFloat(Ne.qty),price:parseFloat(Ne.price),discount:parseFloat(Ne.discount||0),memo:Ne.memo||""})),subtotal:X(),prevBalance:parseFloat(N),memo:$,paidAmount:parseFloat(oe),grandTotal:V()};try{let Ne=a?parseInt(a):null;if(Ne)await Le.sales.update(Ne,Ae),alert("Sale updated!");else{if(Ne=await Le.sales.add(Ae),!J){t(`/sales/${Ne}`);return}if(!a){t(`/sales/${Ne}?print=true`);return}}J?(ee(!0),Se(!0)):ee(!0)}catch(Ne){console.error("Error saving sale:",Ne),alert("Failed to save sale")}};ie.useEffect(()=>{new URLSearchParams(window.location.search).get("print")==="true"&&Q&&(window.history.replaceState({},"",window.location.pathname),Se(!0))},[Q]),ie.useEffect(()=>{if(fe&&Q){const J=setTimeout(()=>{M(),Se(!1)},500);return()=>clearTimeout(J)}},[fe,Q]);const dt=()=>s?.find(J=>J.id===parseInt(_))||{};return g.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 print:bg-white print:pb-0",children:[Ue&&g.jsxs("div",{className:"sticky top-0 bg-white shadow-sm p-4 flex justify-between items-center z-10 no-print",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>t("/"),className:"p-2 hover:bg-gray-100 rounded-full",children:g.jsx(Bw,{size:20})}),g.jsx("h1",{className:"text-xl font-bold",children:a?"Invoice View":"New Sale"})]}),g.jsx("div",{className:"flex gap-2",children:Q?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>Ge(!1),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Screenshot Mode",children:g.jsx(o2,{size:20})}),g.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 text-blue-600 font-medium hover:bg-blue-50 rounded-lg",children:"Edit"}),g.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900",children:[g.jsx(f2,{size:18})," Save as PDF"]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-600 font-medium hover:bg-gray-100 rounded-lg",children:[g.jsx(Jw,{size:18})," Preview"]}),g.jsxs("button",{onClick:()=>at(!1),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[g.jsx(Mb,{size:18})," Save"]})]})})]}),!Ue&&g.jsx("button",{onClick:()=>Ge(!0),className:"fixed top-4 right-4 z-50 p-2 bg-gray-800 text-white rounded-full shadow-lg opacity-50 hover:opacity-100 transition-opacity no-print",title:"Exit Screenshot Mode",children:g.jsx(R2,{size:20})}),Q?g.jsx("div",{ref:k,children:g.jsx(aC,{settings:r,customer:dt(),saleDate:u,id:a,items:b,products:l,prevBalance:N,prevBalanceMemo:$,paidAmount:oe,subtotal:X(),grandTotal:V()})}):g.jsxs("div",{className:"max-w-5xl mx-auto p-4 space-y-6",children:[g.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",value:u,onChange:J=>p(J.target.value),className:"w-full p-2 border rounded-md"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),g.jsxs("select",{value:_,onChange:J=>v(J.target.value),className:"w-full p-2 border rounded-md",children:[g.jsx("option",{value:"",children:"Select Customer"}),s?.map(J=>g.jsx("option",{value:J.id,children:J.name},J.id))]})]})]})}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[g.jsx("h2",{className:"font-semibold mb-4",children:"Items"}),g.jsxs("div",{children:[g.jsxs("div",{className:"hidden md:flex gap-2 border-b pb-2 mb-2 text-sm font-medium text-gray-600",children:[g.jsx("div",{className:"flex-1 min-w-[200px]",children:"Product"}),g.jsx("div",{className:"w-48",children:"Memo"}),g.jsx("div",{className:"w-20",children:"Qty"}),g.jsx("div",{className:"w-24",children:"Unit"}),g.jsx("div",{className:"w-24",children:"Price"}),g.jsx("div",{className:"w-24",children:"Discount"}),g.jsx("div",{className:"w-24 text-right",children:"Total"}),g.jsx("div",{className:"w-10"})]}),g.jsx("div",{className:"space-y-4 md:space-y-2",children:b.map((J,Ae)=>g.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-2 items-start border md:border-none p-4 md:p-0 rounded-lg md:rounded-none bg-gray-50 md:bg-white relative",children:[g.jsx("button",{onClick:()=>z(Ae),className:"absolute top-2 right-2 p-2 text-red-500 hover:bg-red-100 rounded-full md:hidden",children:g.jsx(Ys,{size:18})}),g.jsxs("div",{className:"w-full md:flex-1 md:min-w-[200px]",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Product"}),g.jsxs("select",{value:J.productId,onChange:Ne=>I(Ae,"productId",Ne.target.value),className:"w-full p-2 border rounded-md text-sm bg-white",children:[g.jsx("option",{value:"",children:"Select Product"}),l?.map(Ne=>g.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]})]}),g.jsxs("div",{className:"w-full md:w-48",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Memo"}),g.jsx("input",{type:"text",placeholder:"Memo",value:J.memo||"",onChange:Ne=>I(Ae,"memo",Ne.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("div",{className:"w-1/2 md:w-20",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Qty"}),g.jsx("input",{type:"number",value:J.qty,onChange:Ne=>I(Ae,"qty",Ne.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Unit"}),g.jsxs("select",{value:J.unit,onChange:Ne=>I(Ae,"unit",Ne.target.value),className:"w-full p-2 border rounded-md text-sm bg-white",children:[g.jsx("option",{value:"Kg",children:"Kg"}),g.jsx("option",{value:"Pcs",children:"Pcs"})]})]})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Price"}),g.jsx("input",{type:"number",step:"0.01",value:J.price,onChange:Ne=>I(Ae,"price",Ne.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Discount"}),g.jsx("input",{type:"number",step:"0.01",value:J.discount,onChange:Ne=>I(Ae,"discount",Ne.target.value),className:"w-full p-2 border rounded-md text-sm text-red-600",placeholder:"0.00"})]})]}),g.jsxs("div",{className:"w-full md:w-24 md:text-right flex justify-between md:block items-center mt-2 md:mt-0 pt-2 md:pt-2 border-t md:border-none",children:[g.jsx("span",{className:"md:hidden text-sm font-bold text-gray-600",children:"Total:"}),g.jsx("span",{className:"font-medium text-sm",children:(J.qty*J.price-(J.discount||0)).toFixed(2)})]}),g.jsx("div",{className:"hidden md:flex w-10 justify-center",children:g.jsx("button",{onClick:()=>z(Ae),className:"p-2 text-red-500 hover:bg-red-50 rounded-full",children:g.jsx(Ys,{size:18})})})]},Ae))})]}),g.jsxs("button",{onClick:P,className:"mt-4 flex items-center gap-2 text-blue-600 font-medium hover:bg-blue-50 px-3 py-2 rounded-lg",children:[g.jsx(Ml,{size:18})," Add Item"]})]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"font-medium",children:"Subtotal"}),g.jsx("span",{className:"text-xl font-bold",children:X().toFixed(2)})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous Balance"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",placeholder:"Memo (e.g. Bal b/f)",value:$,onChange:J=>se(J.target.value),className:"flex-1 p-2 border rounded-md"}),g.jsx("input",{type:"number",step:"0.01",placeholder:"Amount",value:N,onChange:J=>O(J.target.value),className:"w-32 p-2 border rounded-md text-right"})]})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid"}),g.jsx("div",{className:"flex justify-end",children:g.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:oe,onChange:J=>B(J.target.value),className:"w-32 p-2 border rounded-md text-right font-bold text-green-700"})})]}),g.jsxs("div",{className:"flex justify-between items-center border-t pt-4 text-lg",children:[g.jsx("span",{className:"font-bold",children:"Grand Total"}),g.jsxs("span",{className:"font-bold text-blue-600",children:["RM ",V().toFixed(2)]})]})]})]})]})}function iC(){const a=Qn(()=>Le.vendors.toArray()),[t,r]=ie.useState(!1),[s,l]=ie.useState(null),[u,p]=ie.useState(""),_=ie.useRef(null),[v,b]=ie.useState({name:"",contact:"",email:"",address:""}),A=(Q=null)=>{Q?(l(Q),b({name:Q.name,contact:Q.contact,email:Q.email||"",address:Q.address||""})):(l(null),b({name:"",contact:"",email:"",address:""})),r(!0)},N=()=>{r(!1),l(null)},O=async Q=>{Q.preventDefault();try{s?await Le.vendors.update(s.id,v):await Le.vendors.add(v),N()}catch(ee){console.error("Failed to save vendor:",ee),alert("Error saving vendor")}},$=async Q=>{window.confirm("Are you sure you want to delete this vendor?")&&await Le.vendors.delete(Q)},se=()=>{const Q=JSON.stringify(a,null,2),ee=new Blob([Q],{type:"application/json"}),fe=URL.createObjectURL(ee),Se=document.createElement("a");Se.href=fe,Se.download="vendors_backup.json",document.body.appendChild(Se),Se.click(),document.body.removeChild(Se)},oe=Q=>{const ee=Q.target.files[0];if(!ee)return;const fe=new FileReader;fe.onload=async Se=>{try{const Ue=JSON.parse(Se.target.result);Array.isArray(Ue)?(await Le.vendors.bulkPut(Ue),alert("Vendors imported successfully!")):alert("Invalid file format")}catch(Ue){console.error("Import failed:",Ue),alert("Failed to import vendors")}},fe.readAsText(ee),Q.target.value=null},B=a?.filter(Q=>Q.name.toLowerCase().includes(u.toLowerCase())||Q.contact.includes(u))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Vendors"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>_.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(qh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:oe}),g.jsxs("button",{onClick:se,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Uh,{size:16})," Export"]}),g.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Vendor"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search vendors...",value:u,onChange:Q=>p(Q.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(Q=>g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:Q.name}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>A(Q),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(Bh,{size:16})}),g.jsx("button",{onClick:()=>$(Q.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:16})})]})]}),g.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ib,{size:14,className:"text-gray-400"}),g.jsx("span",{children:Q.contact})]}),Q.email&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(jb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:Q.email})]}),Q.address&&g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Db,{size:14,className:"text-gray-400 mt-1"}),g.jsx("span",{className:"flex-1",children:Q.address})]})]})]},Q.id))}),B.length===0&&g.jsx("div",{className:"text-center py-12 text-gray-500",children:"No vendors found. Add one to get started."}),t&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:s?"Edit Vendor":"Add Vendor"}),g.jsxs("form",{onSubmit:O,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),g.jsx("input",{type:"text",required:!0,value:v.name,onChange:Q=>b({...v,name:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact No."}),g.jsx("input",{type:"text",required:!0,value:v.contact,onChange:Q=>b({...v,contact:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),g.jsx("input",{type:"email",value:v.email,onChange:Q=>b({...v,email:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),g.jsx("textarea",{value:v.address,onChange:Q=>b({...v,address:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"3"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function sC(){const a=Qn(()=>Le.vendor_purchases.orderBy("id").reverse().toArray()),t=Qn(()=>Le.vendors.toArray()),[r,s]=ie.useState(""),[l,u]=ie.useState(!1),[p,_]=ie.useState(null),[v,b]=ie.useState({vendorId:"",date:xr(new Date),total:"",memo:""}),A=B=>t?.find(Q=>Q.id===B)?.name||"Unknown Vendor",N=(B=null)=>{B?(_(B),b({vendorId:B.vendorId,date:B.date,total:B.total,memo:B.memo||""})):(_(null),b({vendorId:"",date:xr(new Date),total:"",memo:""})),u(!0)},O=()=>{u(!1),_(null)},$=async B=>{B.preventDefault();try{console.log("Saving vendor bill:",v);const Q=parseInt(v.vendorId),ee=parseFloat(v.total);if(!Q||isNaN(Q)){alert("Please select a valid vendor.");return}if(isNaN(ee)){alert("Please enter a valid total amount.");return}if(!v.date){alert("Please select a valid date.");return}const fe={vendorId:Q,date:String(v.date),total:ee,memo:v.memo};p?await Le.vendor_purchases.update(p.id,fe):await Le.vendor_purchases.add(fe),O()}catch(Q){console.error("Failed to save vendor bill:",Q);const ee=Le.verno,fe=Le.vendor_purchases?JSON.stringify(Le.vendor_purchases.schema):"Table Missing";alert(`DEBUG INFO:
Error: ${Q.name} - ${Q.message}

DB Version: ${ee}
Table Schema: ${fe}

Please send me this screenshot!`)}},se=async B=>{window.confirm("Are you sure you want to delete this vendor bill?")&&await Le.vendor_purchases.delete(B)},oe=a?.filter(B=>{const Q=A(B.vendorId).toLowerCase(),ee=xr(new Date(B.date)),fe=B.memo?.toLowerCase()||"";return Q.includes(r.toLowerCase())||ee.includes(r)||fe.includes(r.toLowerCase())})||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Vendor Bills"}),g.jsxs("button",{onClick:N,className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," New Bill"]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search by vendor, date, or memo...",value:r,onChange:B=>s(B.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Date"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Vendor"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Memo"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Total"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[oe.map(B=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3 text-sm",children:xr(new Date(B.date))}),g.jsx("td",{className:"px-4 py-3 font-medium",children:A(B.vendorId)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 italic",children:B.memo||"-"}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:["RM ",(B.total||0).toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>N(B),className:"text-blue-600 hover:text-blue-800 p-1",title:"Edit",children:g.jsx(Bh,{size:18})}),g.jsx("button",{onClick:()=>se(B.id),className:"text-red-600 hover:text-red-800 p-1",title:"Delete",children:g.jsx(Ys,{size:18})})]})]},B.id)),oe.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No vendor bills found. Create a new bill to get started."})})]})]})}),l&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"Edit Vendor Bill":"New Vendor Bill"}),g.jsxs("form",{onSubmit:$,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",required:!0,value:v.date,onChange:B=>b({...v,date:B.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor"}),g.jsxs("select",{required:!0,value:v.vendorId,onChange:B=>b({...v,vendorId:B.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",children:[g.jsx("option",{value:"",children:"Select Vendor"}),t?.map(B=>g.jsx("option",{value:B.id,children:B.name},B.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount (RM)"}),g.jsxs("div",{className:"relative",children:[g.jsx(ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:v.total,onChange:B=>b({...v,total:B.target.value}),className:"w-full pl-10 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Memo (Optional)"}),g.jsx("textarea",{value:v.memo,onChange:B=>b({...v,memo:B.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"2",placeholder:"Notes or description..."})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function oC(){const[a,t]=ie.useState({start:xr(new Date(new Date().getFullYear(),new Date().getMonth(),1)),end:xr(new Date)}),[r,s]=ie.useState("sales"),l=Qn(async()=>(await Le.sales.where("date").between(a.start,a.end,!0,!0).toArray()).sort((b,A)=>new Date(A.date)-new Date(b.date)),[a]),u=Qn(()=>Le.products.toArray()),p=Qn(()=>Le.customers.toArray()),_=ie.useMemo(()=>{if(!l||!u||!p)return null;const v={revenue:0,paid:0,balance:0,count:l.length},b={},A={};return l.forEach(N=>{v.revenue+=N.subtotal||0,v.paid+=N.paidAmount||0,v.balance+=(N.grandTotal||0)-(N.paidAmount||0),N.items.forEach(O=>{b[O.productId]||(b[O.productId]={id:O.productId,name:u.find($=>$.id===O.productId)?.name||"Unknown",qty:0,revenue:0,unit:O.unit}),b[O.productId].qty+=parseFloat(O.qty)||0,b[O.productId].revenue+=O.qty*O.price-(O.discount||0)}),A[N.customerId]||(A[N.customerId]={id:N.customerId,name:p.find(O=>O.id===N.customerId)?.name||"Unknown",count:0,total:0}),A[N.customerId].count+=1,A[N.customerId].total+=N.subtotal||0}),{summary:v,products:Object.values(b).sort((N,O)=>O.revenue-N.revenue),customers:Object.values(A).sort((N,O)=>O.total-N.total)}},[l,u,p]);return _?g.jsxs("div",{className:"p-4 max-w-6xl mx-auto pb-24",children:[g.jsxs("h1",{className:"text-2xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[g.jsx(Hm,{className:"text-blue-600"})," Reports & Analytics"]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6 flex flex-col md:flex-row gap-4 items-end md:items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Start Date"}),g.jsx("input",{type:"date",value:a.start,onChange:v=>t(b=>({...b,start:v.target.value})),className:"p-2 border rounded-md text-sm w-full"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"End Date"}),g.jsx("input",{type:"date",value:a.end,onChange:v=>t(b=>({...b,end:v.target.value})),className:"p-2 border rounded-md text-sm w-full"})]})]}),g.jsxs("div",{className:"flex gap-4 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[g.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-green-600 font-bold uppercase",children:"Revenue"}),g.jsxs("p",{className:"text-lg font-bold text-green-900",children:["RM ",_.summary.revenue.toFixed(2)]})]}),g.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase",children:"Paid"}),g.jsxs("p",{className:"text-lg font-bold text-blue-900",children:["RM ",_.summary.paid.toFixed(2)]})]}),g.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-red-600 font-bold uppercase",children:"Balance"}),g.jsxs("p",{className:"text-lg font-bold text-red-900",children:["RM ",_.summary.balance.toFixed(2)]})]})]})]}),g.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[g.jsxs("button",{onClick:()=>s("sales"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="sales"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(ku,{size:16})," Sales"]}),g.jsxs("button",{onClick:()=>s("products"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="products"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(vh,{size:16})," Products"]}),g.jsxs("button",{onClick:()=>s("customers"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="customers"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(bh,{size:16})," Customers"]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r==="sales"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Date"}),g.jsx("th",{className:"p-3",children:"Customer"}),g.jsx("th",{className:"p-3 text-right",children:"Total"}),g.jsx("th",{className:"p-3 text-right",children:"Paid"}),g.jsx("th",{className:"p-3 text-right",children:"Balance"})]})}),g.jsxs("tbody",{className:"divide-y",children:[l.map(v=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3",children:xr(new Date(v.date))}),g.jsx("td",{className:"p-3 font-medium",children:p?.find(b=>b.id===v.customerId)?.name||"Unknown"}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",(v.grandTotal||0).toFixed(2)]}),g.jsxs("td",{className:"p-3 text-right text-green-600",children:["RM ",(v.paidAmount||0).toFixed(2)]}),g.jsxs("td",{className:"p-3 text-right text-red-600",children:["RM ",((v.grandTotal||0)-(v.paidAmount||0)).toFixed(2)]})]},v.id)),l.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:"No sales found in this period."})})]})]})}),r==="products"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Product Name"}),g.jsx("th",{className:"p-3 text-center",children:"Units Sold"}),g.jsx("th",{className:"p-3 text-right",children:"Total Revenue"})]})}),g.jsxs("tbody",{className:"divide-y",children:[_.products.map(v=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3 font-medium",children:v.name}),g.jsxs("td",{className:"p-3 text-center",children:[v.qty.toFixed(2)," ",v.unit]}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",v.revenue.toFixed(2)]})]},v.id)),_.products.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"p-8 text-center text-gray-500",children:"No product data available."})})]})]})}),r==="customers"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Customer Name"}),g.jsx("th",{className:"p-3 text-center",children:"Orders"}),g.jsx("th",{className:"p-3 text-right",children:"Total Spent"})]})}),g.jsxs("tbody",{className:"divide-y",children:[_.customers.map(v=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3 font-medium",children:v.name}),g.jsx("td",{className:"p-3 text-center",children:v.count}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",v.total.toFixed(2)]})]},v.id)),_.customers.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"p-8 text-center text-gray-500",children:"No customer data available."})})]})]})})]})]}):g.jsx("div",{className:"p-8 text-center",children:"Loading reports..."})}function lC(){const{user:a}=Np();return a?g.jsx(Eb,{}):g.jsx(ew,{to:"/login",replace:!0})}function uC(){const[a,t]=ie.useState(""),[r,s]=ie.useState(""),[l,u]=ie.useState(""),{login:p}=Np(),_=Ol(),v=async b=>{b.preventDefault(),u("");const A=await p(a,r);A.success?_("/"):u(A.message)};return g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),g.jsx("p",{className:"text-gray-500 mt-2",children:"Please sign in to continue"})]}),g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(Vb,{size:20,className:"text-gray-400"})}),g.jsx("input",{type:"text",value:a,onChange:b=>t(b.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your username",required:!0})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(Cb,{size:20,className:"text-gray-400"})}),g.jsx("input",{type:"password",value:r,onChange:b=>s(b.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",required:!0})]})]}),l&&g.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 p-2 rounded",children:l}),g.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign In"})]})]})})}function cC(){return g.jsx($R,{children:g.jsx(Sw,{basename:"/spfamilyventuresbook",children:g.jsxs(nw,{children:[g.jsx(Xr,{path:"/login",element:g.jsx(uC,{})}),g.jsx(Xr,{element:g.jsx(lC,{}),children:g.jsxs(Xr,{path:"/",element:g.jsx(kR,{}),children:[g.jsx(Xr,{index:!0,element:g.jsx(KR,{})}),g.jsx(Xr,{path:"sales",element:g.jsx(eC,{})}),g.jsx(Xr,{path:"sales/new",element:g.jsx(fb,{})}),g.jsx(Xr,{path:"sales/:id",element:g.jsx(fb,{})}),g.jsx(Xr,{path:"products",element:g.jsx(JR,{})}),g.jsx(Xr,{path:"customers",element:g.jsx(WR,{})}),g.jsx(Xr,{path:"vendors",element:g.jsx(iC,{})}),g.jsx(Xr,{path:"vendor-bills",element:g.jsx(sC,{})}),g.jsx(Xr,{path:"reports",element:g.jsx(oC,{})}),g.jsx(Xr,{path:"settings",element:g.jsx(ZR,{})})]})})]})})})}class hC extends So.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("Uncaught error:",t,r)}render(){return this.state.hasError?g.jsxs("div",{className:"p-8 bg-red-50 text-red-900 min-h-screen",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong."}),g.jsxs("details",{className:"whitespace-pre-wrap",children:[this.state.error&&this.state.error.toString(),g.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}oE.createRoot(document.getElementById("root")).render(g.jsx(So.StrictMode,{children:g.jsx(hC,{children:g.jsx(cC,{})})}));
