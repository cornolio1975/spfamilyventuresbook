(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var $1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function km(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Yd={exports:{}},wu={};var Cv;function Z1(){if(Cv)return wu;Cv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,u){var p=null;if(u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),"key"in l){u={};for(var _ in l)_!=="key"&&(u[_]=l[_])}else u=l;return l=u.ref,{$$typeof:a,type:s,key:p,ref:l!==void 0?l:null,props:u}}return wu.Fragment=t,wu.jsx=r,wu.jsxs=r,wu}var jv;function J1(){return jv||(jv=1,Yd.exports=Z1()),Yd.exports}var g=J1(),Xd={exports:{}},ct={};var Dv;function W1(){if(Dv)return ct;Dv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),p=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),I=Symbol.iterator;function $(L){return L===null||typeof L!="object"?null:(L=I&&L[I]||L["@@iterator"],typeof L=="function"?L:null)}var ce={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oe=Object.assign,U={};function Q(L,ve,Ce){this.props=L,this.context=ve,this.refs=U,this.updater=Ce||ce}Q.prototype.isReactComponent={},Q.prototype.setState=function(L,ve){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ve,"setState")},Q.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function Z(){}Z.prototype=Q.prototype;function he(L,ve,Ce){this.props=L,this.context=ve,this.refs=U,this.updater=Ce||ce}var _e=he.prototype=new Z;_e.constructor=he,oe(_e,Q.prototype),_e.isPureReactComponent=!0;var ke=Array.isArray;function Qe(){}var M={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function V(L,ve,Ce){var Re=Ce.ref;return{$$typeof:a,type:L,key:ve,ref:Re!==void 0?Re:null,props:Ce}}function F(L,ve){return V(L.type,ve,L.props)}function B(L){return typeof L=="object"&&L!==null&&L.$$typeof===a}function ee(L){var ve={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ce){return ve[Ce]})}var k=/\/+/g;function ft(L,ve){return typeof L=="object"&&L!==null&&L.key!=null?ee(""+L.key):ve.toString(36)}function _t(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Qe,Qe):(L.status="pending",L.then(function(ve){L.status==="pending"&&(L.status="fulfilled",L.value=ve)},function(ve){L.status==="pending"&&(L.status="rejected",L.reason=ve)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function J(L,ve,Ce,Re,He){var Je=typeof L;(Je==="undefined"||Je==="boolean")&&(L=null);var at=!1;if(L===null)at=!0;else switch(Je){case"bigint":case"string":case"number":at=!0;break;case"object":switch(L.$$typeof){case a:case t:at=!0;break;case A:return at=L._init,J(at(L._payload),ve,Ce,Re,He)}}if(at)return He=He(L),at=Re===""?"."+ft(L,0):Re,ke(He)?(Ce="",at!=null&&(Ce=at.replace(k,"$&/")+"/"),J(He,ve,Ce,"",function(fn){return fn})):He!=null&&(B(He)&&(He=F(He,Ce+(He.key==null||L&&L.key===He.key?"":(""+He.key).replace(k,"$&/")+"/")+at)),ve.push(He)),1;at=0;var Ft=Re===""?".":Re+":";if(ke(L))for(var Oe=0;Oe<L.length;Oe++)Re=L[Oe],Je=Ft+ft(Re,Oe),at+=J(Re,ve,Ce,Je,He);else if(Oe=$(L),typeof Oe=="function")for(L=Oe.call(L),Oe=0;!(Re=L.next()).done;)Re=Re.value,Je=Ft+ft(Re,Oe++),at+=J(Re,ve,Ce,Je,He);else if(Je==="object"){if(typeof L.then=="function")return J(_t(L),ve,Ce,Re,He);throw ve=String(L),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.")}return at}function Ne(L,ve,Ce){if(L==null)return L;var Re=[],He=0;return J(L,Re,"","",function(Je){return ve.call(Ce,Je,He++)}),Re}function Y(L){if(L._status===-1){var ve=L._result;ve=ve(),ve.then(function(Ce){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ce)},function(Ce){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ce)}),L._status===-1&&(L._status=0,L._result=ve)}if(L._status===1)return L._result.default;throw L._result}var qe=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ve=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ve))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},$e={map:Ne,forEach:function(L,ve,Ce){Ne(L,function(){ve.apply(this,arguments)},Ce)},count:function(L){var ve=0;return Ne(L,function(){ve++}),ve},toArray:function(L){return Ne(L,function(ve){return ve})||[]},only:function(L){if(!B(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return ct.Activity=N,ct.Children=$e,ct.Component=Q,ct.Fragment=r,ct.Profiler=l,ct.PureComponent=he,ct.StrictMode=s,ct.Suspense=b,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ct.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},ct.cache=function(L){return function(){return L.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(L,ve,Ce){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Re=oe({},L.props),He=L.key;if(ve!=null)for(Je in ve.key!==void 0&&(He=""+ve.key),ve)!O.call(ve,Je)||Je==="key"||Je==="__self"||Je==="__source"||Je==="ref"&&ve.ref===void 0||(Re[Je]=ve[Je]);var Je=arguments.length-2;if(Je===1)Re.children=Ce;else if(1<Je){for(var at=Array(Je),Ft=0;Ft<Je;Ft++)at[Ft]=arguments[Ft+2];Re.children=at}return V(L.type,He,Re)},ct.createContext=function(L){return L={$$typeof:p,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},ct.createElement=function(L,ve,Ce){var Re,He={},Je=null;if(ve!=null)for(Re in ve.key!==void 0&&(Je=""+ve.key),ve)O.call(ve,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(He[Re]=ve[Re]);var at=arguments.length-2;if(at===1)He.children=Ce;else if(1<at){for(var Ft=Array(at),Oe=0;Oe<at;Oe++)Ft[Oe]=arguments[Oe+2];He.children=Ft}if(L&&L.defaultProps)for(Re in at=L.defaultProps,at)He[Re]===void 0&&(He[Re]=at[Re]);return V(L,Je,He)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(L){return{$$typeof:_,render:L}},ct.isValidElement=B,ct.lazy=function(L){return{$$typeof:A,_payload:{_status:-1,_result:L},_init:Y}},ct.memo=function(L,ve){return{$$typeof:v,type:L,compare:ve===void 0?null:ve}},ct.startTransition=function(L){var ve=M.T,Ce={};M.T=Ce;try{var Re=L(),He=M.S;He!==null&&He(Ce,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(Qe,qe)}catch(Je){qe(Je)}finally{ve!==null&&Ce.types!==null&&(ve.types=Ce.types),M.T=ve}},ct.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ct.use=function(L){return M.H.use(L)},ct.useActionState=function(L,ve,Ce){return M.H.useActionState(L,ve,Ce)},ct.useCallback=function(L,ve){return M.H.useCallback(L,ve)},ct.useContext=function(L){return M.H.useContext(L)},ct.useDebugValue=function(){},ct.useDeferredValue=function(L,ve){return M.H.useDeferredValue(L,ve)},ct.useEffect=function(L,ve){return M.H.useEffect(L,ve)},ct.useEffectEvent=function(L){return M.H.useEffectEvent(L)},ct.useId=function(){return M.H.useId()},ct.useImperativeHandle=function(L,ve,Ce){return M.H.useImperativeHandle(L,ve,Ce)},ct.useInsertionEffect=function(L,ve){return M.H.useInsertionEffect(L,ve)},ct.useLayoutEffect=function(L,ve){return M.H.useLayoutEffect(L,ve)},ct.useMemo=function(L,ve){return M.H.useMemo(L,ve)},ct.useOptimistic=function(L,ve){return M.H.useOptimistic(L,ve)},ct.useReducer=function(L,ve,Ce){return M.H.useReducer(L,ve,Ce)},ct.useRef=function(L){return M.H.useRef(L)},ct.useState=function(L){return M.H.useState(L)},ct.useSyncExternalStore=function(L,ve,Ce){return M.H.useSyncExternalStore(L,ve,Ce)},ct.useTransition=function(){return M.H.useTransition()},ct.version="19.2.0",ct}var Iv;function kh(){return Iv||(Iv=1,Xd.exports=W1()),Xd.exports}var ie=kh();const So=km(ie);var $d={exports:{}},Tu={},Zd={exports:{}},Jd={};var Ov;function eE(){return Ov||(Ov=1,(function(a){function t(J,Ne){var Y=J.length;J.push(Ne);e:for(;0<Y;){var qe=Y-1>>>1,$e=J[qe];if(0<l($e,Ne))J[qe]=Ne,J[Y]=$e,Y=qe;else break e}}function r(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var Ne=J[0],Y=J.pop();if(Y!==Ne){J[0]=Y;e:for(var qe=0,$e=J.length,L=$e>>>1;qe<L;){var ve=2*(qe+1)-1,Ce=J[ve],Re=ve+1,He=J[Re];if(0>l(Ce,Y))Re<$e&&0>l(He,Ce)?(J[qe]=He,J[Re]=Y,qe=Re):(J[qe]=Ce,J[ve]=Y,qe=ve);else if(Re<$e&&0>l(He,Y))J[qe]=He,J[Re]=Y,qe=Re;else break e}}return Ne}function l(J,Ne){var Y=J.sortIndex-Ne.sortIndex;return Y!==0?Y:J.id-Ne.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var p=Date,_=p.now();a.unstable_now=function(){return p.now()-_}}var b=[],v=[],A=1,N=null,I=3,$=!1,ce=!1,oe=!1,U=!1,Q=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function _e(J){for(var Ne=r(v);Ne!==null;){if(Ne.callback===null)s(v);else if(Ne.startTime<=J)s(v),Ne.sortIndex=Ne.expirationTime,t(b,Ne);else break;Ne=r(v)}}function ke(J){if(oe=!1,_e(J),!ce)if(r(b)!==null)ce=!0,Qe||(Qe=!0,ee());else{var Ne=r(v);Ne!==null&&_t(ke,Ne.startTime-J)}}var Qe=!1,M=-1,O=5,V=-1;function F(){return U?!0:!(a.unstable_now()-V<O)}function B(){if(U=!1,Qe){var J=a.unstable_now();V=J;var Ne=!0;try{e:{ce=!1,oe&&(oe=!1,Z(M),M=-1),$=!0;var Y=I;try{t:{for(_e(J),N=r(b);N!==null&&!(N.expirationTime>J&&F());){var qe=N.callback;if(typeof qe=="function"){N.callback=null,I=N.priorityLevel;var $e=qe(N.expirationTime<=J);if(J=a.unstable_now(),typeof $e=="function"){N.callback=$e,_e(J),Ne=!0;break t}N===r(b)&&s(b),_e(J)}else s(b);N=r(b)}if(N!==null)Ne=!0;else{var L=r(v);L!==null&&_t(ke,L.startTime-J),Ne=!1}}break e}finally{N=null,I=Y,$=!1}Ne=void 0}}finally{Ne?ee():Qe=!1}}}var ee;if(typeof he=="function")ee=function(){he(B)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ft=k.port2;k.port1.onmessage=B,ee=function(){ft.postMessage(null)}}else ee=function(){Q(B,0)};function _t(J,Ne){M=Q(function(){J(a.unstable_now())},Ne)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(J){J.callback=null},a.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<J?Math.floor(1e3/J):5},a.unstable_getCurrentPriorityLevel=function(){return I},a.unstable_next=function(J){switch(I){case 1:case 2:case 3:var Ne=3;break;default:Ne=I}var Y=I;I=Ne;try{return J()}finally{I=Y}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(J,Ne){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Y=I;I=J;try{return Ne()}finally{I=Y}},a.unstable_scheduleCallback=function(J,Ne,Y){var qe=a.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?qe+Y:qe):Y=qe,J){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Y+$e,J={id:A++,callback:Ne,priorityLevel:J,startTime:Y,expirationTime:$e,sortIndex:-1},Y>qe?(J.sortIndex=Y,t(v,J),r(b)===null&&J===r(v)&&(oe?(Z(M),M=-1):oe=!0,_t(ke,Y-qe))):(J.sortIndex=$e,t(b,J),ce||$||(ce=!0,Qe||(Qe=!0,ee()))),J},a.unstable_shouldYield=F,a.unstable_wrapCallback=function(J){var Ne=I;return function(){var Y=I;I=Ne;try{return J.apply(this,arguments)}finally{I=Y}}}})(Jd)),Jd}var Mv;function tE(){return Mv||(Mv=1,Zd.exports=eE()),Zd.exports}var Wd={exports:{}},vr={};var Vv;function nE(){if(Vv)return vr;Vv=1;var a=kh();function t(b){var v="https://react.dev/errors/"+b;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+b+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(b,v,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:N==null?null:""+N,children:b,containerInfo:v,implementation:A}}var p=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(b,v){if(b==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vr.createPortal=function(b,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(t(299));return u(b,v,null,A)},vr.flushSync=function(b){var v=p.T,A=s.p;try{if(p.T=null,s.p=2,b)return b()}finally{p.T=v,s.p=A,s.d.f()}},vr.preconnect=function(b,v){typeof b=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(b,v))},vr.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},vr.preinit=function(b,v){if(typeof b=="string"&&v&&typeof v.as=="string"){var A=v.as,N=_(A,v.crossOrigin),I=typeof v.integrity=="string"?v.integrity:void 0,$=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;A==="style"?s.d.S(b,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:N,integrity:I,fetchPriority:$}):A==="script"&&s.d.X(b,{crossOrigin:N,integrity:I,fetchPriority:$,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},vr.preinitModule=function(b,v){if(typeof b=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var A=_(v.as,v.crossOrigin);s.d.M(b,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(b)},vr.preload=function(b,v){if(typeof b=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var A=v.as,N=_(A,v.crossOrigin);s.d.L(b,A,{crossOrigin:N,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},vr.preloadModule=function(b,v){if(typeof b=="string")if(v){var A=_(v.as,v.crossOrigin);s.d.m(b,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(b)},vr.requestFormReset=function(b){s.d.r(b)},vr.unstable_batchedUpdates=function(b,v){return b(v)},vr.useFormState=function(b,v,A){return p.H.useFormState(b,v,A)},vr.useFormStatus=function(){return p.H.useHostTransitionStatus()},vr.version="19.2.0",vr}var kv;function rE(){if(kv)return Wd.exports;kv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Wd.exports=nE(),Wd.exports}var Pv;function aE(){if(Pv)return Tu;Pv=1;var a=tE(),t=kh(),r=rE();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function p(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function b(e){if(u(e)!==e)throw Error(s(188))}function v(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,o=n;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){i=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return b(f),e;if(m===o)return b(f),n;m=m.sibling}throw Error(s(188))}if(i.return!==o.return)i=f,o=m;else{for(var w=!1,C=f.child;C;){if(C===i){w=!0,i=f,o=m;break}if(C===o){w=!0,o=f,i=m;break}C=C.sibling}if(!w){for(C=m.child;C;){if(C===i){w=!0,i=m,o=f;break}if(C===o){w=!0,o=m,i=f;break}C=C.sibling}if(!w)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var N=Object.assign,I=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),ce=Symbol.for("react.portal"),oe=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),he=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=B&&e[B]||e["@@iterator"],typeof e=="function"?e:null)}var k=Symbol.for("react.client.reference");function ft(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===k?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oe:return"Fragment";case Q:return"Profiler";case U:return"StrictMode";case ke:return"Suspense";case Qe:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ce:return"Portal";case he:return e.displayName||"Context";case Z:return(e._context.displayName||"Context")+".Consumer";case _e:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:ft(e.type)||"Memo";case O:n=e._payload,e=e._init;try{return ft(e(n))}catch{}}return null}var _t=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},qe=[],$e=-1;function L(e){return{current:e}}function ve(e){0>$e||(e.current=qe[$e],qe[$e]=null,$e--)}function Ce(e,n){$e++,qe[$e]=e.current,e.current=n}var Re=L(null),He=L(null),Je=L(null),at=L(null);function Ft(e,n){switch(Ce(Je,n),Ce(He,e),Ce(Re,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Jy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Jy(n),e=Wy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ve(Re),Ce(Re,e)}function Oe(){ve(Re),ve(He),ve(Je)}function fn(e){e.memoizedState!==null&&Ce(at,e);var n=Re.current,i=Wy(n,e.type);n!==i&&(Ce(He,e),Ce(Re,i))}function On(e){He.current===e&&(ve(Re),ve(He)),at.current===e&&(ve(at),bu._currentValue=Y)}var Ye,et;function Ht(e){if(Ye===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Ye=n&&n[1]||"",et=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+e+et}var gt=!1;function Ut(e,n){if(!e||gt)return"";gt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ye){var pe=ye}Reflect.construct(e,[],Te)}else{try{Te.call()}catch(ye){pe=ye}e.call(Te.prototype)}}else{try{throw Error()}catch(ye){pe=ye}(Te=e())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ye){if(ye&&pe&&typeof ye.stack=="string")return[ye.stack,pe.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),w=m[0],C=m[1];if(w&&C){var z=w.split(`
`),de=C.split(`
`);for(f=o=0;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;for(;f<de.length&&!de[f].includes("DetermineComponentFrameRoot");)f++;if(o===z.length||f===de.length)for(o=z.length-1,f=de.length-1;1<=o&&0<=f&&z[o]!==de[f];)f--;for(;1<=o&&0<=f;o--,f--)if(z[o]!==de[f]){if(o!==1||f!==1)do if(o--,f--,0>f||z[o]!==de[f]){var xe=`
`+z[o].replace(" at new "," at ");return e.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",e.displayName)),xe}while(1<=o&&0<=f);break}}}finally{gt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ht(i):""}function on(e,n){switch(e.tag){case 26:case 27:case 5:return Ht(e.type);case 16:return Ht("Lazy");case 13:return e.child!==n&&n!==null?Ht("Suspense Fallback"):Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return Ut(e.type,!1);case 11:return Ut(e.type.render,!1);case 1:return Ut(e.type,!0);case 31:return Ht("Activity");default:return""}}function Xn(e){try{var n="",i=null;do n+=on(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Rt=Object.prototype.hasOwnProperty,Mt=a.unstable_scheduleCallback,wn=a.unstable_cancelCallback,Lo=a.unstable_shouldYield,ri=a.unstable_requestPaint,$n=a.unstable_now,Zr=a.unstable_getCurrentPriorityLevel,Jr=a.unstable_ImmediatePriority,Wr=a.unstable_UserBlockingPriority,ba=a.unstable_NormalPriority,Ei=a.unstable_LowPriority,rs=a.unstable_IdlePriority,wi=a.log,_a=a.unstable_setDisableYieldValue,dr=null,Tn=null;function Sn(e){if(typeof wi=="function"&&_a(e),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(dr,e)}catch{}}var Be=Math.clz32?Math.clz32:Ti,ai=Math.log,Rr=Math.LN2;function Ti(e){return e>>>=0,e===0?32:31-(ai(e)/Rr|0)|0}var Pe=256,Ba=262144,dn=4194304;function Cr(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ea(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var f=0,m=e.suspendedLanes,w=e.pingedLanes;e=e.warmLanes;var C=o&134217727;return C!==0?(o=C&~m,o!==0?f=Cr(o):(w&=C,w!==0?f=Cr(w):i||(i=C&~e,i!==0&&(f=Cr(i))))):(C=o&~m,C!==0?f=Cr(C):w!==0?f=Cr(w):i||(i=o&~e,i!==0&&(f=Cr(i)))),f===0?0:n!==0&&n!==f&&(n&m)===0&&(m=f&-f,i=n&-n,m>=i||m===32&&(i&4194048)!==0)?n:f}function Er(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ul(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(){var e=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),e}function ir(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function jr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function to(e,n,i,o,f,m){var w=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,z=e.expirationTimes,de=e.hiddenUpdates;for(i=w&~i;0<i;){var xe=31-Be(i),Te=1<<xe;C[xe]=0,z[xe]=-1;var pe=de[xe];if(pe!==null)for(de[xe]=null,xe=0;xe<pe.length;xe++){var ye=pe[xe];ye!==null&&(ye.lane&=-536870913)}i&=~Te}o!==0&&xa(e,o,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(w&~n))}function xa(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Be(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Bt(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-Be(i),f=1<<o;f&n|e[o]&n&&(e[o]|=n),i&=~f}}function ln(e,n){var i=n&-n;return i=(i&42)!==0?1:Si(i),(i&(e.suspendedLanes|n))!==0?0:i}function Si(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ai(){var e=Ne.p;return e!==0?e:(e=window.event,e===void 0?32:Ev(e.type))}function mr(e,n){var i=Ne.p;try{return Ne.p=e,n()}finally{Ne.p=i}}var ta=Math.random().toString(36).slice(2),Kt="__reactFiber$"+ta,nn="__reactProps$"+ta,Kn="__reactContainer$"+ta,qa="__reactEvents$"+ta,Bl="__reactListeners$"+ta,na="__reactHandles$"+ta,no="__reactResources$"+ta,Zn="__reactMarker$"+ta;function Ni(e){delete e[Kt],delete e[nn],delete e[qa],delete e[Bl],delete e[na]}function Ir(e){var n=e[Kt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Kn]||i[Kt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=sv(e);e!==null;){if(i=e[Kt])return i;e=sv(e)}return n}e=i,i=e.parentNode}return null}function Dt(e){if(e=e[Kt]||e[Kn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function An(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Mn(e){var n=e[no];return n||(n=e[no]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function mn(e){e[Zn]=!0}var Ea=new Set,ii={};function Or(e,n){Mr(e,n),Mr(e+"Capture",n)}function Mr(e,n){for(ii[e]=n,e=0;e<n.length;e++)Ea.add(n[e])}var ra=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},si={};function ro(e){return Rt.call(si,e)?!0:Rt.call(as,e)?!1:ra.test(e)?si[e]=!0:(as[e]=!0,!1)}function dt(e,n,i){if(ro(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function pr(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function pn(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function gn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vr(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function is(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(w){i=""+w,m.call(this,w)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Vt(e){if(!e._valueTracker){var n=Vr(e)?"checked":"value";e._valueTracker=is(e,n,""+e[n])}}function oi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=Vr(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function xt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var aa=/[\n"\\]/g;function Vn(e){return e.replace(aa,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ia(e,n,i,o,f,m,w,C){e.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.type=w:e.removeAttribute("type"),n!=null?w==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+gn(n)):e.value!==""+gn(n)&&(e.value=""+gn(n)):w!=="submit"&&w!=="reset"||e.removeAttribute("value"),n!=null?Ri(e,w,gn(n)):i!=null?Ri(e,w,gn(i)):o!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+gn(C):e.removeAttribute("name")}function ss(e,n,i,o,f,m,w,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Vt(e);return}i=i!=null?""+gn(i):"",n=n!=null?""+gn(n):i,C||n===e.value||(e.value=n),e.defaultValue=n}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=C?e.checked:!!o,e.defaultChecked=!!o,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.name=w),Vt(e)}function Ri(e,n,i){n==="number"&&xt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function sa(e,n,i,o){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&o&&(e[i].defaultSelected=!0)}else{for(i=""+gn(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function ao(e,n,i){if(n!=null&&(n=""+gn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+gn(i):""}function oa(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(s(92));if(_t(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=gn(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Vt(e)}function sr(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Uo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bt(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||Uo.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function os(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in n)o=n[f],n.hasOwnProperty(f)&&i[f]!==o&&bt(e,f,o)}else for(var m in n)n.hasOwnProperty(m)&&bt(e,m,n[m])}function ls(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_n=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(e){return _n.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function gr(){}var kr=null;function wr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fa=null,Gt=null;function Jn(e){var n=Dt(e);if(n&&(e=n.stateNode)){var i=e[nn]||null;e:switch(e=n.stateNode,n.type){case"input":if(ia(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Vn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var f=o[nn]||null;if(!f)throw Error(s(90));ia(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&oi(o)}break e;case"textarea":ao(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&sa(e,!!i.multiple,n,!1)}}}var wa=!1;function Pr(e,n,i){if(wa)return e(n,i);wa=!0;try{var o=e(n);return o}finally{if(wa=!1,(Fa!==null||Gt!==null)&&(Oc(),Fa&&(n=Fa,e=Gt,Gt=Fa=null,Jn(n),e)))for(n=0;n<e.length;n++)Jn(e[n])}}function Tr(e,n){var i=e.stateNode;if(i===null)return null;var o=i[nn]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(Nn)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{Ci=!1}var Lr=null,us=null,Ha=null;function Ka(){if(Ha)return Ha;var e,n=us,i=n.length,o,f="value"in Lr?Lr.value:Lr.textContent,m=f.length;for(e=0;e<i&&n[e]===f[e];e++);var w=i-e;for(o=1;o<=w&&n[i-o]===f[m-o];o++);return Ha=f.slice(e,1<o?1-o:void 0)}function Ga(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ta(){return!0}function ua(){return!1}function yn(e){function n(i,o,f,m,w){this._reactName=i,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ta:ua,this.isPropagationStopped=ua,this}return N(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),n}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=yn(Qa),ca=N({},Qa,{view:0,detail:0}),li=yn(ca),Aa,cs,Na,hs=N({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Na&&(Na&&e.type==="mousemove"?(Aa=e.screenX-Na.screenX,cs=e.screenY-Na.screenY):cs=Aa=0,Na=e),Aa)},movementY:function(e){return"movementY"in e?e.movementY:cs}}),ji=yn(hs),Ya=N({},hs,{dataTransfer:0}),io=yn(Ya),Di=N({},ca,{relatedTarget:0}),Ra=yn(Di),ui=N({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),so=yn(ui),fs=N({},Qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xa=yn(fs),ds=N({},Qa,{data:0}),zr=yn(ds),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ci(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Rn[e])?!!n[e]:!1}function Ur(){return ci}var Wn=N({},ca,{key:function(e){if(e.key){var n=ms[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(e){return e.type==="keypress"?Ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ii=yn(Wn),oo=N({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=yn(oo),c=N({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),x=yn(c),T=N({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=yn(T),le=N({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ge=yn(le),Me=N({},Qa,{newState:0,oldState:0}),lt=yn(Me),vn=[9,13,27,32],Ct=Nn&&"CompositionEvent"in window,Qt=null;Nn&&"documentMode"in document&&(Qt=document.documentMode);var Br=Nn&&"TextEvent"in window&&!Qt,qr=Nn&&(!Ct||Qt&&8<Qt&&11>=Qt),Sr=" ",ha=!1;function hi(e,n){switch(e){case"keyup":return vn.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oi=!1;function Wu(e,n){switch(e){case"compositionend":return gs(n);case"keypress":return n.which!==32?null:(ha=!0,Sr);case"textInput":return e=n.data,e===Sr&&ha?null:e;default:return null}}function lf(e,n){if(Oi)return e==="compositionend"||!Ct&&hi(e,n)?(e=Ka(),Ha=us=Lr=null,Oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return qr&&n.locale!=="ko"?null:n.data;default:return null}}var ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!ec[e.type]:n==="textarea"}function ql(e,n,i,o){Fa?Gt?Gt.push(o):Gt=[o]:Fa=o,n=Uc(n,"onChange"),0<n.length&&(i=new Sa("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var ys=null,lo=null;function uf(e){Gy(e,0)}function Fo(e){var n=An(e);if(oi(n))return e}function uo(e,n){if(e==="change")return n}var ja=!1;if(Nn){var rn;if(Nn){var vs="oninput"in document;if(!vs){var Ar=document.createElement("div");Ar.setAttribute("oninput","return;"),vs=typeof Ar.oninput=="function"}rn=vs}else rn=!1;ja=rn&&(!document.documentMode||9<document.documentMode)}function tc(){ys&&(ys.detachEvent("onpropertychange",Ho),lo=ys=null)}function Ho(e){if(e.propertyName==="value"&&Fo(lo)){var n=[];ql(n,lo,e,wr(e)),Pr(uf,n)}}function nc(e,n,i){e==="focusin"?(tc(),ys=n,lo=i,ys.attachEvent("onpropertychange",Ho)):e==="focusout"&&tc()}function Mi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fo(lo)}function Fl(e,n){if(e==="click")return Fo(n)}function bs(e,n){if(e==="input"||e==="change")return Fo(n)}function fi(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var yr=typeof Object.is=="function"?Object.is:fi;function h(e,n){if(yr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var f=i[o];if(!Rt.call(n,f)||!yr(e[f],n[f]))return!1}return!0}function d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function y(e,n){var i=d(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=d(i)}}function E(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?E(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function S(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=xt(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=xt(e.document)}return n}function R(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var D=Nn&&"documentMode"in document&&11>=document.documentMode,P=null,H=null,K=null,ne=!1;function q(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ne||P==null||P!==xt(o)||(o=P,"selectionStart"in o&&R(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),K&&h(K,o)||(K=o,o=Uc(H,"onSelect"),0<o.length&&(n=new Sa("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=P)))}function ae(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var G={animationend:ae("Animation","AnimationEnd"),animationiteration:ae("Animation","AnimationIteration"),animationstart:ae("Animation","AnimationStart"),transitionrun:ae("Transition","TransitionRun"),transitionstart:ae("Transition","TransitionStart"),transitioncancel:ae("Transition","TransitionCancel"),transitionend:ae("Transition","TransitionEnd")},W={},te={};Nn&&(te=document.createElement("div").style,"AnimationEvent"in window||(delete G.animationend.animation,delete G.animationiteration.animation,delete G.animationstart.animation),"TransitionEvent"in window||delete G.transitionend.transition);function re(e){if(W[e])return W[e];if(!G[e])return e;var n=G[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in te)return W[e]=n[i];return e}var ue=re("animationend"),me=re("animationiteration"),be=re("animationstart"),we=re("transitionrun"),Ie=re("transitionstart"),Ue=re("transitioncancel"),je=re("transitionend"),Ve=new Map,ze="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ze.push("scrollEnd");function De(e,n){Ve.set(e,n),Or(n,[e])}var Fe=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},tt=[],ot=0,mt=0;function er(){for(var e=ot,n=mt=ot=0;n<e;){var i=tt[n];tt[n++]=null;var o=tt[n];tt[n++]=null;var f=tt[n];tt[n++]=null;var m=tt[n];if(tt[n++]=null,o!==null&&f!==null){var w=o.pending;w===null?f.next=f:(f.next=w.next,w.next=f),o.pending=f}m!==0&&co(i,f,m)}}function st(e,n,i,o){tt[ot++]=e,tt[ot++]=n,tt[ot++]=i,tt[ot++]=o,mt|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function kn(e,n,i,o){return st(e,n,i,o),Pn(e)}function un(e,n){return st(e,null,null,n),Pn(e)}function co(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var f=!1,m=e.return;m!==null;)m.childLanes|=i,o=m.alternate,o!==null&&(o.childLanes|=i),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&n!==null&&(f=31-Be(i),e=m.hiddenUpdates,o=e[f],o===null?e[f]=[n]:o.push(n),n.lane=i|536870912),m):null}function Pn(e){if(50<fu)throw fu=0,vd=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Fr={};function Hl(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,n,i,o){return new Hl(e,n,i,o)}function cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vi(e,n){var i=e.alternate;return i===null?(i=fa(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Rp(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function rc(e,n,i,o,f,m){var w=0;if(o=e,typeof e=="function")cf(e)&&(w=1);else if(typeof e=="string")w=L1(e,i,Re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=fa(31,i,n,f),e.elementType=V,e.lanes=m,e;case oe:return ho(i.children,f,m,n);case U:w=8,f|=24;break;case Q:return e=fa(12,i,n,f|2),e.elementType=Q,e.lanes=m,e;case ke:return e=fa(13,i,n,f),e.elementType=ke,e.lanes=m,e;case Qe:return e=fa(19,i,n,f),e.elementType=Qe,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case he:w=10;break e;case Z:w=9;break e;case _e:w=11;break e;case M:w=14;break e;case O:w=16,o=null;break e}w=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=fa(w,i,n,f),n.elementType=e,n.type=o,n.lanes=m,n}function ho(e,n,i,o){return e=fa(7,e,o,n),e.lanes=i,e}function hf(e,n,i){return e=fa(6,e,null,n),e.lanes=i,e}function Cp(e){var n=fa(18,null,null,0);return n.stateNode=e,n}function ff(e,n,i){return n=fa(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var jp=new WeakMap;function Da(e,n){if(typeof e=="object"&&e!==null){var i=jp.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Xn(n)},jp.set(e,n),n)}return{value:e,source:n,stack:Xn(n)}}var Ko=[],Go=0,ac=null,Kl=0,Ia=[],Oa=0,_s=null,di=1,mi="";function ki(e,n){Ko[Go++]=Kl,Ko[Go++]=ac,ac=e,Kl=n}function Dp(e,n,i){Ia[Oa++]=di,Ia[Oa++]=mi,Ia[Oa++]=_s,_s=e;var o=di;e=mi;var f=32-Be(o)-1;o&=~(1<<f),i+=1;var m=32-Be(n)+f;if(30<m){var w=f-f%5;m=(o&(1<<w)-1).toString(32),o>>=w,f-=w,di=1<<32-Be(n)+f|i<<f|o,mi=m+e}else di=1<<m|i<<f|o,mi=e}function df(e){e.return!==null&&(ki(e,1),Dp(e,1,0))}function mf(e){for(;e===ac;)ac=Ko[--Go],Ko[Go]=null,Kl=Ko[--Go],Ko[Go]=null;for(;e===_s;)_s=Ia[--Oa],Ia[Oa]=null,mi=Ia[--Oa],Ia[Oa]=null,di=Ia[--Oa],Ia[Oa]=null}function Ip(e,n){Ia[Oa++]=di,Ia[Oa++]=mi,Ia[Oa++]=_s,di=n.id,mi=n.overflow,_s=e}var or=null,an=null,jt=!1,xs=null,Ma=!1,pf=Error(s(519));function Es(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Da(n,e)),pf}function Op(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[Kt]=e,n[nn]=o,i){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(i=0;i<mu.length;i++)wt(mu[i],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":wt("invalid",n),ss(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":wt("invalid",n);break;case"textarea":wt("invalid",n),oa(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||$y(n.textContent,i)?(o.popover!=null&&(wt("beforetoggle",n),wt("toggle",n)),o.onScroll!=null&&wt("scroll",n),o.onScrollEnd!=null&&wt("scrollend",n),o.onClick!=null&&(n.onclick=gr),n=!0):n=!1,n||Es(e,!0)}function Mp(e){for(or=e.return;or;)switch(or.tag){case 5:case 31:case 13:Ma=!1;return;case 27:case 3:Ma=!0;return;default:or=or.return}}function Qo(e){if(e!==or)return!1;if(!jt)return Mp(e),jt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Od(e.type,e.memoizedProps)),i=!i),i&&an&&Es(e),Mp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=iv(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=iv(e)}else n===27?(n=an,ks(e.type)?(e=Ld,Ld=null,an=e):an=n):an=or?ka(e.stateNode.nextSibling):null;return!0}function fo(){an=or=null,jt=!1}function gf(){var e=xs;return e!==null&&(Qr===null?Qr=e:Qr.push.apply(Qr,e),xs=null),e}function Gl(e){xs===null?xs=[e]:xs.push(e)}var yf=L(null),mo=null,Pi=null;function ws(e,n,i){Ce(yf,n._currentValue),n._currentValue=i}function Li(e){e._currentValue=yf.current,ve(yf)}function vf(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function bf(e,n,i,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var z=0;z<n.length;z++)if(C.context===n[z]){m.lanes|=i,C=m.alternate,C!==null&&(C.lanes|=i),vf(m.return,i,e),o||(w=null);break e}m=C.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=i,m=w.alternate,m!==null&&(m.lanes|=i),vf(w,i,e),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===e){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Yo(e,n,i,o){e=null;for(var f=n,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var C=f.type;yr(f.pendingProps.value,w.value)||(e!==null?e.push(C):e=[C])}}else if(f===at.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(bu):e=[bu])}f=f.return}e!==null&&bf(n,e,i,o),n.flags|=262144}function ic(e){for(e=e.firstContext;e!==null;){if(!yr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function po(e){mo=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function lr(e){return Vp(mo,e)}function sc(e,n){return mo===null&&po(e),Vp(e,n)}function Vp(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Pi===null){if(e===null)throw Error(s(308));Pi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Pi=Pi.next=n;return i}var Mx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Vx=a.unstable_scheduleCallback,kx=a.unstable_NormalPriority,Ln={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _f(){return{controller:new Mx,data:new Map,refCount:0}}function Ql(e){e.refCount--,e.refCount===0&&Vx(kx,function(){e.controller.abort()})}var Yl=null,xf=0,Xo=0,$o=null;function Px(e,n){if(Yl===null){var i=Yl=[];xf=0,Xo=Td(),$o={status:"pending",value:void 0,then:function(o){i.push(o)}}}return xf++,n.then(kp,kp),n}function kp(){if(--xf===0&&Yl!==null){$o!==null&&($o.status="fulfilled");var e=Yl;Yl=null,Xo=0,$o=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Lx(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(o.status="rejected",o.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),o}var Pp=J.S;J.S=function(e,n){_y=$n(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Px(e,n),Pp!==null&&Pp(e,n)};var go=L(null);function Ef(){var e=go.current;return e!==null?e:Wt.pooledCache}function oc(e,n){n===null?Ce(go,go.current):Ce(go,n.pool)}function Lp(){var e=Ef();return e===null?null:{parent:Ln._currentValue,pool:e}}var Zo=Error(s(460)),wf=Error(s(474)),lc=Error(s(542)),uc={then:function(){}};function zp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Up(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(gr,gr),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,qp(e),e;default:if(typeof n.status=="string")n.then(gr,gr);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=o}},function(o){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,qp(e),e}throw vo=n,Zo}}function yo(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(vo=i,Zo):i}}var vo=null;function Bp(){if(vo===null)throw Error(s(459));var e=vo;return vo=null,e}function qp(e){if(e===Zo||e===lc)throw Error(s(483))}var Jo=null,Xl=0;function cc(e){var n=Xl;return Xl+=1,Jo===null&&(Jo=[]),Up(Jo,e,n)}function $l(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function hc(e,n){throw n.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Fp(e){function n(se,X){if(e){var fe=se.deletions;fe===null?(se.deletions=[X],se.flags|=16):fe.push(X)}}function i(se,X){if(!e)return null;for(;X!==null;)n(se,X),X=X.sibling;return null}function o(se){for(var X=new Map;se!==null;)se.key!==null?X.set(se.key,se):X.set(se.index,se),se=se.sibling;return X}function f(se,X){return se=Vi(se,X),se.index=0,se.sibling=null,se}function m(se,X,fe){return se.index=fe,e?(fe=se.alternate,fe!==null?(fe=fe.index,fe<X?(se.flags|=67108866,X):fe):(se.flags|=67108866,X)):(se.flags|=1048576,X)}function w(se){return e&&se.alternate===null&&(se.flags|=67108866),se}function C(se,X,fe,Ee){return X===null||X.tag!==6?(X=hf(fe,se.mode,Ee),X.return=se,X):(X=f(X,fe),X.return=se,X)}function z(se,X,fe,Ee){var nt=fe.type;return nt===oe?xe(se,X,fe.props.children,Ee,fe.key):X!==null&&(X.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===O&&yo(nt)===X.type)?(X=f(X,fe.props),$l(X,fe),X.return=se,X):(X=rc(fe.type,fe.key,fe.props,null,se.mode,Ee),$l(X,fe),X.return=se,X)}function de(se,X,fe,Ee){return X===null||X.tag!==4||X.stateNode.containerInfo!==fe.containerInfo||X.stateNode.implementation!==fe.implementation?(X=ff(fe,se.mode,Ee),X.return=se,X):(X=f(X,fe.children||[]),X.return=se,X)}function xe(se,X,fe,Ee,nt){return X===null||X.tag!==7?(X=ho(fe,se.mode,Ee,nt),X.return=se,X):(X=f(X,fe),X.return=se,X)}function Te(se,X,fe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=hf(""+X,se.mode,fe),X.return=se,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case $:return fe=rc(X.type,X.key,X.props,null,se.mode,fe),$l(fe,X),fe.return=se,fe;case ce:return X=ff(X,se.mode,fe),X.return=se,X;case O:return X=yo(X),Te(se,X,fe)}if(_t(X)||ee(X))return X=ho(X,se.mode,fe,null),X.return=se,X;if(typeof X.then=="function")return Te(se,cc(X),fe);if(X.$$typeof===he)return Te(se,sc(se,X),fe);hc(se,X)}return null}function pe(se,X,fe,Ee){var nt=X!==null?X.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return nt!==null?null:C(se,X,""+fe,Ee);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case $:return fe.key===nt?z(se,X,fe,Ee):null;case ce:return fe.key===nt?de(se,X,fe,Ee):null;case O:return fe=yo(fe),pe(se,X,fe,Ee)}if(_t(fe)||ee(fe))return nt!==null?null:xe(se,X,fe,Ee,null);if(typeof fe.then=="function")return pe(se,X,cc(fe),Ee);if(fe.$$typeof===he)return pe(se,X,sc(se,fe),Ee);hc(se,fe)}return null}function ye(se,X,fe,Ee,nt){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return se=se.get(fe)||null,C(X,se,""+Ee,nt);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case $:return se=se.get(Ee.key===null?fe:Ee.key)||null,z(X,se,Ee,nt);case ce:return se=se.get(Ee.key===null?fe:Ee.key)||null,de(X,se,Ee,nt);case O:return Ee=yo(Ee),ye(se,X,fe,Ee,nt)}if(_t(Ee)||ee(Ee))return se=se.get(fe)||null,xe(X,se,Ee,nt,null);if(typeof Ee.then=="function")return ye(se,X,fe,cc(Ee),nt);if(Ee.$$typeof===he)return ye(se,X,fe,sc(X,Ee),nt);hc(X,Ee)}return null}function Xe(se,X,fe,Ee){for(var nt=null,kt=null,Ze=X,yt=X=0,St=null;Ze!==null&&yt<fe.length;yt++){Ze.index>yt?(St=Ze,Ze=null):St=Ze.sibling;var Pt=pe(se,Ze,fe[yt],Ee);if(Pt===null){Ze===null&&(Ze=St);break}e&&Ze&&Pt.alternate===null&&n(se,Ze),X=m(Pt,X,yt),kt===null?nt=Pt:kt.sibling=Pt,kt=Pt,Ze=St}if(yt===fe.length)return i(se,Ze),jt&&ki(se,yt),nt;if(Ze===null){for(;yt<fe.length;yt++)Ze=Te(se,fe[yt],Ee),Ze!==null&&(X=m(Ze,X,yt),kt===null?nt=Ze:kt.sibling=Ze,kt=Ze);return jt&&ki(se,yt),nt}for(Ze=o(Ze);yt<fe.length;yt++)St=ye(Ze,se,yt,fe[yt],Ee),St!==null&&(e&&St.alternate!==null&&Ze.delete(St.key===null?yt:St.key),X=m(St,X,yt),kt===null?nt=St:kt.sibling=St,kt=St);return e&&Ze.forEach(function(Bs){return n(se,Bs)}),jt&&ki(se,yt),nt}function rt(se,X,fe,Ee){if(fe==null)throw Error(s(151));for(var nt=null,kt=null,Ze=X,yt=X=0,St=null,Pt=fe.next();Ze!==null&&!Pt.done;yt++,Pt=fe.next()){Ze.index>yt?(St=Ze,Ze=null):St=Ze.sibling;var Bs=pe(se,Ze,Pt.value,Ee);if(Bs===null){Ze===null&&(Ze=St);break}e&&Ze&&Bs.alternate===null&&n(se,Ze),X=m(Bs,X,yt),kt===null?nt=Bs:kt.sibling=Bs,kt=Bs,Ze=St}if(Pt.done)return i(se,Ze),jt&&ki(se,yt),nt;if(Ze===null){for(;!Pt.done;yt++,Pt=fe.next())Pt=Te(se,Pt.value,Ee),Pt!==null&&(X=m(Pt,X,yt),kt===null?nt=Pt:kt.sibling=Pt,kt=Pt);return jt&&ki(se,yt),nt}for(Ze=o(Ze);!Pt.done;yt++,Pt=fe.next())Pt=ye(Ze,se,yt,Pt.value,Ee),Pt!==null&&(e&&Pt.alternate!==null&&Ze.delete(Pt.key===null?yt:Pt.key),X=m(Pt,X,yt),kt===null?nt=Pt:kt.sibling=Pt,kt=Pt);return e&&Ze.forEach(function(X1){return n(se,X1)}),jt&&ki(se,yt),nt}function Jt(se,X,fe,Ee){if(typeof fe=="object"&&fe!==null&&fe.type===oe&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case $:e:{for(var nt=fe.key;X!==null;){if(X.key===nt){if(nt=fe.type,nt===oe){if(X.tag===7){i(se,X.sibling),Ee=f(X,fe.props.children),Ee.return=se,se=Ee;break e}}else if(X.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===O&&yo(nt)===X.type){i(se,X.sibling),Ee=f(X,fe.props),$l(Ee,fe),Ee.return=se,se=Ee;break e}i(se,X);break}else n(se,X);X=X.sibling}fe.type===oe?(Ee=ho(fe.props.children,se.mode,Ee,fe.key),Ee.return=se,se=Ee):(Ee=rc(fe.type,fe.key,fe.props,null,se.mode,Ee),$l(Ee,fe),Ee.return=se,se=Ee)}return w(se);case ce:e:{for(nt=fe.key;X!==null;){if(X.key===nt)if(X.tag===4&&X.stateNode.containerInfo===fe.containerInfo&&X.stateNode.implementation===fe.implementation){i(se,X.sibling),Ee=f(X,fe.children||[]),Ee.return=se,se=Ee;break e}else{i(se,X);break}else n(se,X);X=X.sibling}Ee=ff(fe,se.mode,Ee),Ee.return=se,se=Ee}return w(se);case O:return fe=yo(fe),Jt(se,X,fe,Ee)}if(_t(fe))return Xe(se,X,fe,Ee);if(ee(fe)){if(nt=ee(fe),typeof nt!="function")throw Error(s(150));return fe=nt.call(fe),rt(se,X,fe,Ee)}if(typeof fe.then=="function")return Jt(se,X,cc(fe),Ee);if(fe.$$typeof===he)return Jt(se,X,sc(se,fe),Ee);hc(se,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,X!==null&&X.tag===6?(i(se,X.sibling),Ee=f(X,fe),Ee.return=se,se=Ee):(i(se,X),Ee=hf(fe,se.mode,Ee),Ee.return=se,se=Ee),w(se)):i(se,X)}return function(se,X,fe,Ee){try{Xl=0;var nt=Jt(se,X,fe,Ee);return Jo=null,nt}catch(Ze){if(Ze===Zo||Ze===lc)throw Ze;var kt=fa(29,Ze,null,se.mode);return kt.lanes=Ee,kt.return=se,kt}finally{}}}var bo=Fp(!0),Hp=Fp(!1),Ts=!1;function Tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function As(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(zt&2)!==0){var f=o.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),o.pending=n,n=Pn(e),co(e,null,i),n}return st(e,o,n,i),Pn(e)}function Zl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Bt(e,i)}}function Af(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,i=i.next}while(i!==null);m===null?f=m=n:m=m.next=n}else f=m=n;i={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Nf=!1;function Jl(){if(Nf){var e=$o;if(e!==null)throw e}}function Wl(e,n,i,o){Nf=!1;var f=e.updateQueue;Ts=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var z=C,de=z.next;z.next=null,w===null?m=de:w.next=de,w=z;var xe=e.alternate;xe!==null&&(xe=xe.updateQueue,C=xe.lastBaseUpdate,C!==w&&(C===null?xe.firstBaseUpdate=de:C.next=de,xe.lastBaseUpdate=z))}if(m!==null){var Te=f.baseState;w=0,xe=de=z=null,C=m;do{var pe=C.lane&-536870913,ye=pe!==C.lane;if(ye?(Tt&pe)===pe:(o&pe)===pe){pe!==0&&pe===Xo&&(Nf=!0),xe!==null&&(xe=xe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Xe=e,rt=C;pe=n;var Jt=i;switch(rt.tag){case 1:if(Xe=rt.payload,typeof Xe=="function"){Te=Xe.call(Jt,Te,pe);break e}Te=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=rt.payload,pe=typeof Xe=="function"?Xe.call(Jt,Te,pe):Xe,pe==null)break e;Te=N({},Te,pe);break e;case 2:Ts=!0}}pe=C.callback,pe!==null&&(e.flags|=64,ye&&(e.flags|=8192),ye=f.callbacks,ye===null?f.callbacks=[pe]:ye.push(pe))}else ye={lane:pe,tag:C.tag,payload:C.payload,callback:C.callback,next:null},xe===null?(de=xe=ye,z=Te):xe=xe.next=ye,w|=pe;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ye=C,C=ye.next,ye.next=null,f.lastBaseUpdate=ye,f.shared.pending=null}}while(!0);xe===null&&(z=Te),f.baseState=z,f.firstBaseUpdate=de,f.lastBaseUpdate=xe,m===null&&(f.shared.lanes=0),Ds|=w,e.lanes=w,e.memoizedState=Te}}function Kp(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Gp(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Kp(i[e],n)}var Wo=L(null),fc=L(0);function Qp(e,n){e=Qi,Ce(fc,e),Ce(Wo,n),Qi=e|n.baseLanes}function Rf(){Ce(fc,Qi),Ce(Wo,Wo.current)}function Cf(){Qi=fc.current,ve(Wo),ve(fc)}var da=L(null),Va=null;function Ns(e){var n=e.alternate;Ce(Cn,Cn.current&1),Ce(da,e),Va===null&&(n===null||Wo.current!==null||n.memoizedState!==null)&&(Va=e)}function jf(e){Ce(Cn,Cn.current),Ce(da,e),Va===null&&(Va=e)}function Yp(e){e.tag===22?(Ce(Cn,Cn.current),Ce(da,e),Va===null&&(Va=e)):Rs()}function Rs(){Ce(Cn,Cn.current),Ce(da,da.current)}function ma(e){ve(da),Va===e&&(Va=null),ve(Cn)}var Cn=L(0);function dc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||kd(i)||Pd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var zi=0,pt=null,$t=null,zn=null,mc=!1,el=!1,_o=!1,pc=0,eu=0,tl=null,zx=0;function xn(){throw Error(s(321))}function Df(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!yr(e[i],n[i]))return!1;return!0}function If(e,n,i,o,f,m){return zi=m,pt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,J.H=e===null||e.memoizedState===null?Dg:Qf,_o=!1,m=i(o,f),_o=!1,el&&(m=$p(n,i,o,f)),Xp(e),m}function Xp(e){J.H=ru;var n=$t!==null&&$t.next!==null;if(zi=0,zn=$t=pt=null,mc=!1,eu=0,tl=null,n)throw Error(s(300));e===null||Un||(e=e.dependencies,e!==null&&ic(e)&&(Un=!0))}function $p(e,n,i,o){pt=e;var f=0;do{if(el&&(tl=null),eu=0,el=!1,25<=f)throw Error(s(301));if(f+=1,zn=$t=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=Ig,m=n(i,o)}while(el);return m}function Ux(){var e=J.H,n=e.useState()[0];return n=typeof n.then=="function"?tu(n):n,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(pt.flags|=1024),n}function Of(){var e=pc!==0;return pc=0,e}function Mf(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Vf(e){if(mc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}mc=!1}zi=0,zn=$t=pt=null,el=!1,eu=pc=0,tl=null}function Nr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?pt.memoizedState=zn=e:zn=zn.next=e,zn}function jn(){if($t===null){var e=pt.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var n=zn===null?pt.memoizedState:zn.next;if(n!==null)zn=n,$t=e;else{if(e===null)throw pt.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},zn===null?pt.memoizedState=zn=e:zn=zn.next=e}return zn}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(e){var n=eu;return eu+=1,tl===null&&(tl=[]),e=Up(tl,e,n),n=pt,(zn===null?n.memoizedState:zn.next)===null&&(n=n.alternate,J.H=n===null||n.memoizedState===null?Dg:Qf),e}function yc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tu(e);if(e.$$typeof===he)return lr(e)}throw Error(s(438,String(e)))}function kf(e){var n=null,i=pt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=pt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=gc(),pt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=F;return n.index++,i}function Ui(e,n){return typeof n=="function"?n(e):n}function vc(e){var n=jn();return Pf(n,$t,e)}function Pf(e,n,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var f=e.baseQueue,m=o.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}n.baseQueue=f=m,o.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{n=f.next;var C=w=null,z=null,de=n,xe=!1;do{var Te=de.lane&-536870913;if(Te!==de.lane?(Tt&Te)===Te:(zi&Te)===Te){var pe=de.revertLane;if(pe===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),Te===Xo&&(xe=!0);else if((zi&pe)===pe){de=de.next,pe===Xo&&(xe=!0);continue}else Te={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},z===null?(C=z=Te,w=m):z=z.next=Te,pt.lanes|=pe,Ds|=pe;Te=de.action,_o&&i(m,Te),m=de.hasEagerState?de.eagerState:i(m,Te)}else pe={lane:Te,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},z===null?(C=z=pe,w=m):z=z.next=pe,pt.lanes|=Te,Ds|=Te;de=de.next}while(de!==null&&de!==n);if(z===null?w=m:z.next=C,!yr(m,e.memoizedState)&&(Un=!0,xe&&(i=$o,i!==null)))throw i;e.memoizedState=m,e.baseState=w,e.baseQueue=z,o.lastRenderedState=m}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Lf(e){var n=jn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,f=i.pending,m=n.memoizedState;if(f!==null){i.pending=null;var w=f=f.next;do m=e(m,w.action),w=w.next;while(w!==f);yr(m,n.memoizedState)||(Un=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),i.lastRenderedState=m}return[m,o]}function Zp(e,n,i){var o=pt,f=jn(),m=jt;if(m){if(i===void 0)throw Error(s(407));i=i()}else i=n();var w=!yr(($t||f).memoizedState,i);if(w&&(f.memoizedState=i,Un=!0),f=f.queue,Bf(eg.bind(null,o,f,e),[e]),f.getSnapshot!==n||w||zn!==null&&zn.memoizedState.tag&1){if(o.flags|=2048,nl(9,{destroy:void 0},Wp.bind(null,o,f,i,n),null),Wt===null)throw Error(s(349));m||(zi&127)!==0||Jp(o,n,i)}return i}function Jp(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=pt.updateQueue,n===null?(n=gc(),pt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Wp(e,n,i,o){n.value=i,n.getSnapshot=o,tg(n)&&ng(e)}function eg(e,n,i){return i(function(){tg(n)&&ng(e)})}function tg(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!yr(e,i)}catch{return!0}}function ng(e){var n=un(e,2);n!==null&&Yr(n,e,2)}function zf(e){var n=Nr();if(typeof e=="function"){var i=e;if(e=i(),_o){Sn(!0);try{i()}finally{Sn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},n}function rg(e,n,i,o){return e.baseState=i,Pf(e,$t,typeof o=="function"?o:Ui)}function Bx(e,n,i,o,f){if(xc(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};J.T!==null?i(!0):m.isTransition=!1,o(m),i=n.pending,i===null?(m.next=n.pending=m,ag(n,m)):(m.next=i.next,n.pending=i.next=m)}}function ag(e,n){var i=n.action,o=n.payload,f=e.state;if(n.isTransition){var m=J.T,w={};J.T=w;try{var C=i(f,o),z=J.S;z!==null&&z(w,C),ig(e,n,C)}catch(de){Uf(e,n,de)}finally{m!==null&&w.types!==null&&(m.types=w.types),J.T=m}}else try{m=i(f,o),ig(e,n,m)}catch(de){Uf(e,n,de)}}function ig(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){sg(e,n,o)},function(o){return Uf(e,n,o)}):sg(e,n,i)}function sg(e,n,i){n.status="fulfilled",n.value=i,og(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,ag(e,i)))}function Uf(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,og(n),n=n.next;while(n!==o)}e.action=null}function og(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function lg(e,n){return n}function ug(e,n){if(jt){var i=Wt.formState;if(i!==null){e:{var o=pt;if(jt){if(an){t:{for(var f=an,m=Ma;f.nodeType!==8;){if(!m){f=null;break t}if(f=ka(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){an=ka(f.nextSibling),o=f.data==="F!";break e}}Es(o)}o=!1}o&&(n=i[0])}}return i=Nr(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lg,lastRenderedState:n},i.queue=o,i=Rg.bind(null,pt,o),o.dispatch=i,o=zf(!1),m=Gf.bind(null,pt,!1,o.queue),o=Nr(),f={state:n,dispatch:null,action:e,pending:null},o.queue=f,i=Bx.bind(null,pt,f,m,i),f.dispatch=i,o.memoizedState=e,[n,i,!1]}function cg(e){var n=jn();return hg(n,$t,e)}function hg(e,n,i){if(n=Pf(e,n,lg)[0],e=vc(Ui)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=tu(n)}catch(w){throw w===Zo?lc:w}else o=n;n=jn();var f=n.queue,m=f.dispatch;return i!==n.memoizedState&&(pt.flags|=2048,nl(9,{destroy:void 0},qx.bind(null,f,i),null)),[o,m,e]}function qx(e,n){e.action=n}function fg(e){var n=jn(),i=$t;if(i!==null)return hg(n,i,e);jn(),n=n.memoizedState,i=jn();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function nl(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=pt.updateQueue,n===null&&(n=gc(),pt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function dg(){return jn().memoizedState}function bc(e,n,i,o){var f=Nr();pt.flags|=e,f.memoizedState=nl(1|n,{destroy:void 0},i,o===void 0?null:o)}function _c(e,n,i,o){var f=jn();o=o===void 0?null:o;var m=f.memoizedState.inst;$t!==null&&o!==null&&Df(o,$t.memoizedState.deps)?f.memoizedState=nl(n,m,i,o):(pt.flags|=e,f.memoizedState=nl(1|n,m,i,o))}function mg(e,n){bc(8390656,8,e,n)}function Bf(e,n){_c(2048,8,e,n)}function Fx(e){pt.flags|=4;var n=pt.updateQueue;if(n===null)n=gc(),pt.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function pg(e){var n=jn().memoizedState;return Fx({ref:n,nextImpl:e}),function(){if((zt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function gg(e,n){return _c(4,2,e,n)}function yg(e,n){return _c(4,4,e,n)}function vg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function bg(e,n,i){i=i!=null?i.concat([e]):null,_c(4,4,vg.bind(null,n,e),i)}function qf(){}function _g(e,n){var i=jn();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&Df(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function xg(e,n){var i=jn();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&Df(n,o[1]))return o[0];if(o=e(),_o){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[o,n],o}function Ff(e,n,i){return i===void 0||(zi&1073741824)!==0&&(Tt&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Ey(),pt.lanes|=e,Ds|=e,i)}function Eg(e,n,i,o){return yr(i,n)?i:Wo.current!==null?(e=Ff(e,i,o),yr(e,n)||(Un=!0),e):(zi&42)===0||(zi&1073741824)!==0&&(Tt&261930)===0?(Un=!0,e.memoizedState=i):(e=Ey(),pt.lanes|=e,Ds|=e,n)}function wg(e,n,i,o,f){var m=Ne.p;Ne.p=m!==0&&8>m?m:8;var w=J.T,C={};J.T=C,Gf(e,!1,n,i);try{var z=f(),de=J.S;if(de!==null&&de(C,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var xe=Lx(z,o);nu(e,n,xe,ya(e))}else nu(e,n,o,ya(e))}catch(Te){nu(e,n,{then:function(){},status:"rejected",reason:Te},ya())}finally{Ne.p=m,w!==null&&C.types!==null&&(w.types=C.types),J.T=w}}function Hx(){}function Hf(e,n,i,o){if(e.tag!==5)throw Error(s(476));var f=Tg(e).queue;wg(e,f,n,Y,i===null?Hx:function(){return Sg(e),i(o)})}function Tg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:Y},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Sg(e){var n=Tg(e);n.next===null&&(n=e.alternate.memoizedState),nu(e,n.next.queue,{},ya())}function Kf(){return lr(bu)}function Ag(){return jn().memoizedState}function Ng(){return jn().memoizedState}function Kx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=ya();e=Ss(i);var o=As(n,e,i);o!==null&&(Yr(o,n,i),Zl(o,n,i)),n={cache:_f()},e.payload=n;return}n=n.return}}function Gx(e,n,i){var o=ya();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},xc(e)?Cg(n,i):(i=kn(e,n,i,o),i!==null&&(Yr(i,e,o),jg(i,n,o)))}function Rg(e,n,i){var o=ya();nu(e,n,i,o)}function nu(e,n,i,o){var f={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(xc(e))Cg(n,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var w=n.lastRenderedState,C=m(w,i);if(f.hasEagerState=!0,f.eagerState=C,yr(C,w))return st(e,n,f,0),Wt===null&&er(),!1}catch{}finally{}if(i=kn(e,n,f,o),i!==null)return Yr(i,e,o),jg(i,n,o),!0}return!1}function Gf(e,n,i,o){if(o={lane:2,revertLane:Td(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},xc(e)){if(n)throw Error(s(479))}else n=kn(e,i,o,2),n!==null&&Yr(n,e,2)}function xc(e){var n=e.alternate;return e===pt||n!==null&&n===pt}function Cg(e,n){el=mc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function jg(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Bt(e,i)}}var ru={readContext:lr,use:yc,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn};ru.useEffectEvent=xn;var Dg={readContext:lr,use:yc,useCallback:function(e,n){return Nr().memoizedState=[e,n===void 0?null:n],e},useContext:lr,useEffect:mg,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,bc(4194308,4,vg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return bc(4194308,4,e,n)},useInsertionEffect:function(e,n){bc(4,2,e,n)},useMemo:function(e,n){var i=Nr();n=n===void 0?null:n;var o=e();if(_o){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=Nr();if(i!==void 0){var f=i(n);if(_o){Sn(!0);try{i(n)}finally{Sn(!1)}}}else f=n;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=Gx.bind(null,pt,e),[o.memoizedState,e]},useRef:function(e){var n=Nr();return e={current:e},n.memoizedState=e},useState:function(e){e=zf(e);var n=e.queue,i=Rg.bind(null,pt,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:qf,useDeferredValue:function(e,n){var i=Nr();return Ff(i,e,n)},useTransition:function(){var e=zf(!1);return e=wg.bind(null,pt,e.queue,!0,!1),Nr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=pt,f=Nr();if(jt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Wt===null)throw Error(s(349));(Tt&127)!==0||Jp(o,n,i)}f.memoizedState=i;var m={value:i,getSnapshot:n};return f.queue=m,mg(eg.bind(null,o,m,e),[e]),o.flags|=2048,nl(9,{destroy:void 0},Wp.bind(null,o,m,i,n),null),i},useId:function(){var e=Nr(),n=Wt.identifierPrefix;if(jt){var i=mi,o=di;i=(o&~(1<<32-Be(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=pc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=zx++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Kf,useFormState:ug,useActionState:ug,useOptimistic:function(e){var n=Nr();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Gf.bind(null,pt,!0,i),i.dispatch=n,[e,n]},useMemoCache:kf,useCacheRefresh:function(){return Nr().memoizedState=Kx.bind(null,pt)},useEffectEvent:function(e){var n=Nr(),i={impl:e};return n.memoizedState=i,function(){if((zt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Qf={readContext:lr,use:yc,useCallback:_g,useContext:lr,useEffect:Bf,useImperativeHandle:bg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:xg,useReducer:vc,useRef:dg,useState:function(){return vc(Ui)},useDebugValue:qf,useDeferredValue:function(e,n){var i=jn();return Eg(i,$t.memoizedState,e,n)},useTransition:function(){var e=vc(Ui)[0],n=jn().memoizedState;return[typeof e=="boolean"?e:tu(e),n]},useSyncExternalStore:Zp,useId:Ag,useHostTransitionStatus:Kf,useFormState:cg,useActionState:cg,useOptimistic:function(e,n){var i=jn();return rg(i,$t,e,n)},useMemoCache:kf,useCacheRefresh:Ng};Qf.useEffectEvent=pg;var Ig={readContext:lr,use:yc,useCallback:_g,useContext:lr,useEffect:Bf,useImperativeHandle:bg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:xg,useReducer:Lf,useRef:dg,useState:function(){return Lf(Ui)},useDebugValue:qf,useDeferredValue:function(e,n){var i=jn();return $t===null?Ff(i,e,n):Eg(i,$t.memoizedState,e,n)},useTransition:function(){var e=Lf(Ui)[0],n=jn().memoizedState;return[typeof e=="boolean"?e:tu(e),n]},useSyncExternalStore:Zp,useId:Ag,useHostTransitionStatus:Kf,useFormState:fg,useActionState:fg,useOptimistic:function(e,n){var i=jn();return $t!==null?rg(i,$t,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:kf,useCacheRefresh:Ng};Ig.useEffectEvent=pg;function Yf(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:N({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Xf={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=ya(),f=Ss(o);f.payload=n,i!=null&&(f.callback=i),n=As(e,f,o),n!==null&&(Yr(n,e,o),Zl(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=ya(),f=Ss(o);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=As(e,f,o),n!==null&&(Yr(n,e,o),Zl(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=ya(),o=Ss(i);o.tag=2,n!=null&&(o.callback=n),n=As(e,o,i),n!==null&&(Yr(n,e,i),Zl(n,e,i))}};function Og(e,n,i,o,f,m,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,w):n.prototype&&n.prototype.isPureReactComponent?!h(i,o)||!h(f,m):!0}function Mg(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&Xf.enqueueReplaceState(n,n.state,null)}function xo(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=N({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function Vg(e){Fe(e)}function kg(e){console.error(e)}function Pg(e){Fe(e)}function Ec(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Lg(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function $f(e,n,i){return i=Ss(i),i.tag=3,i.payload={element:null},i.callback=function(){Ec(e,n)},i}function zg(e){return e=Ss(e),e.tag=3,e}function Ug(e,n,i,o){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;e.payload=function(){return f(m)},e.callback=function(){Lg(n,i,o)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(e.callback=function(){Lg(n,i,o),typeof f!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})})}function Qx(e,n,i,o,f){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&Yo(n,i,f,!0),i=da.current,i!==null){switch(i.tag){case 31:case 13:return Va===null?Mc():i.alternate===null&&En===0&&(En=3),i.flags&=-257,i.flags|=65536,i.lanes=f,o===uc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),xd(e,o,f)),!1;case 22:return i.flags|=65536,o===uc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),xd(e,o,f)),!1}throw Error(s(435,i.tag))}return xd(e,o,f),Mc(),!1}if(jt)return n=da.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,o!==pf&&(e=Error(s(422),{cause:o}),Gl(Da(e,i)))):(o!==pf&&(n=Error(s(423),{cause:o}),Gl(Da(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=Da(o,i),f=$f(e.stateNode,o,f),Af(e,f),En!==4&&(En=2)),!1;var m=Error(s(520),{cause:o});if(m=Da(m,i),hu===null?hu=[m]:hu.push(m),En!==4&&(En=2),n===null)return!0;o=Da(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=$f(i.stateNode,o,e),Af(i,e),!1;case 1:if(n=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Is===null||!Is.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=zg(f),Ug(f,e,i,o),Af(i,f),!1}i=i.return}while(i!==null);return!1}var Zf=Error(s(461)),Un=!1;function ur(e,n,i,o){n.child=e===null?Hp(n,null,i,o):bo(n,e.child,i,o)}function Bg(e,n,i,o,f){i=i.render;var m=n.ref;if("ref"in o){var w={};for(var C in o)C!=="ref"&&(w[C]=o[C])}else w=o;return po(n),o=If(e,n,i,w,m,f),C=Of(),e!==null&&!Un?(Mf(e,n,f),Bi(e,n,f)):(jt&&C&&df(n),n.flags|=1,ur(e,n,o,f),n.child)}function qg(e,n,i,o,f){if(e===null){var m=i.type;return typeof m=="function"&&!cf(m)&&m.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=m,Fg(e,n,m,o,f)):(e=rc(i.type,null,o,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!id(e,f)){var w=m.memoizedProps;if(i=i.compare,i=i!==null?i:h,i(w,o)&&e.ref===n.ref)return Bi(e,n,f)}return n.flags|=1,e=Vi(m,o),e.ref=n.ref,e.return=n,n.child=e}function Fg(e,n,i,o,f){if(e!==null){var m=e.memoizedProps;if(h(m,o)&&e.ref===n.ref)if(Un=!1,n.pendingProps=o=m,id(e,f))(e.flags&131072)!==0&&(Un=!0);else return n.lanes=e.lanes,Bi(e,n,f)}return Jf(e,n,i,o,f)}function Hg(e,n,i,o){var f=o.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,e!==null){for(o=n.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,n.child=null;return Kg(e,n,m,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&oc(n,m!==null?m.cachePool:null),m!==null?Qp(n,m):Rf(),Yp(n);else return o=n.lanes=536870912,Kg(e,n,m!==null?m.baseLanes|i:i,i,o)}else m!==null?(oc(n,m.cachePool),Qp(n,m),Rs(),n.memoizedState=null):(e!==null&&oc(n,null),Rf(),Rs());return ur(e,n,f,i),n.child}function au(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Kg(e,n,i,o,f){var m=Ef();return m=m===null?null:{parent:Ln._currentValue,pool:m},n.memoizedState={baseLanes:i,cachePool:m},e!==null&&oc(n,null),Rf(),Yp(n),e!==null&&Yo(e,n,o,!0),n.childLanes=f,null}function wc(e,n){return n=Sc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Gg(e,n,i){return bo(n,e.child,null,i),e=wc(n,n.pendingProps),e.flags|=2,ma(n),n.memoizedState=null,e}function Yx(e,n,i){var o=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(jt){if(o.mode==="hidden")return e=wc(n,o),n.lanes=536870912,au(null,e);if(jf(n),(e=an)?(e=av(e,Ma),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_s!==null?{id:di,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},i=Cp(e),i.return=n,n.child=i,or=n,an=null)):e=null,e===null)throw Es(n);return n.lanes=536870912,null}return wc(n,o)}var m=e.memoizedState;if(m!==null){var w=m.dehydrated;if(jf(n),f)if(n.flags&256)n.flags&=-257,n=Gg(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Un||Yo(e,n,i,!1),f=(i&e.childLanes)!==0,Un||f){if(o=Wt,o!==null&&(w=ln(o,i),w!==0&&w!==m.retryLane))throw m.retryLane=w,un(e,w),Yr(o,e,w),Zf;Mc(),n=Gg(e,n,i)}else e=m.treeContext,an=ka(w.nextSibling),or=n,jt=!0,xs=null,Ma=!1,e!==null&&Ip(n,e),n=wc(n,o),n.flags|=4096;return n}return e=Vi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Tc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Jf(e,n,i,o,f){return po(n),i=If(e,n,i,o,void 0,f),o=Of(),e!==null&&!Un?(Mf(e,n,f),Bi(e,n,f)):(jt&&o&&df(n),n.flags|=1,ur(e,n,i,f),n.child)}function Qg(e,n,i,o,f,m){return po(n),n.updateQueue=null,i=$p(n,o,i,f),Xp(e),o=Of(),e!==null&&!Un?(Mf(e,n,m),Bi(e,n,m)):(jt&&o&&df(n),n.flags|=1,ur(e,n,i,m),n.child)}function Yg(e,n,i,o,f){if(po(n),n.stateNode===null){var m=Fr,w=i.contextType;typeof w=="object"&&w!==null&&(m=lr(w)),m=new i(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Xf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},Tf(n),w=i.contextType,m.context=typeof w=="object"&&w!==null?lr(w):Fr,m.state=n.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(Yf(n,i,w,o),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&Xf.enqueueReplaceState(m,m.state,null),Wl(n,o,m,f),Jl(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){m=n.stateNode;var C=n.memoizedProps,z=xo(i,C);m.props=z;var de=m.context,xe=i.contextType;w=Fr,typeof xe=="object"&&xe!==null&&(w=lr(xe));var Te=i.getDerivedStateFromProps;xe=typeof Te=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,xe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||de!==w)&&Mg(n,m,o,w),Ts=!1;var pe=n.memoizedState;m.state=pe,Wl(n,o,m,f),Jl(),de=n.memoizedState,C||pe!==de||Ts?(typeof Te=="function"&&(Yf(n,i,Te,o),de=n.memoizedState),(z=Ts||Og(n,i,z,o,pe,de,w))?(xe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=de),m.props=o,m.state=de,m.context=w,o=z):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,Sf(e,n),w=n.memoizedProps,xe=xo(i,w),m.props=xe,Te=n.pendingProps,pe=m.context,de=i.contextType,z=Fr,typeof de=="object"&&de!==null&&(z=lr(de)),C=i.getDerivedStateFromProps,(de=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==Te||pe!==z)&&Mg(n,m,o,z),Ts=!1,pe=n.memoizedState,m.state=pe,Wl(n,o,m,f),Jl();var ye=n.memoizedState;w!==Te||pe!==ye||Ts||e!==null&&e.dependencies!==null&&ic(e.dependencies)?(typeof C=="function"&&(Yf(n,i,C,o),ye=n.memoizedState),(xe=Ts||Og(n,i,xe,o,pe,ye,z)||e!==null&&e.dependencies!==null&&ic(e.dependencies))?(de||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ye,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ye,z)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&pe===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&pe===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=ye),m.props=o,m.state=ye,m.context=z,o=xe):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&pe===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&pe===e.memoizedState||(n.flags|=1024),o=!1)}return m=o,Tc(e,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&o?(n.child=bo(n,e.child,null,f),n.child=bo(n,null,i,f)):ur(e,n,i,f),n.memoizedState=m.state,e=n.child):e=Bi(e,n,f),e}function Xg(e,n,i,o){return fo(),n.flags|=256,ur(e,n,i,o),n.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ed(e){return{baseLanes:e,cachePool:Lp()}}function td(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=ga),e}function $g(e,n,i){var o=n.pendingProps,f=!1,m=(n.flags&128)!==0,w;if((w=m)||(w=e!==null&&e.memoizedState===null?!1:(Cn.current&2)!==0),w&&(f=!0,n.flags&=-129),w=(n.flags&32)!==0,n.flags&=-33,e===null){if(jt){if(f?Ns(n):Rs(),(e=an)?(e=av(e,Ma),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_s!==null?{id:di,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},i=Cp(e),i.return=n,n.child=i,or=n,an=null)):e=null,e===null)throw Es(n);return Pd(e)?n.lanes=32:n.lanes=536870912,null}var C=o.children;return o=o.fallback,f?(Rs(),f=n.mode,C=Sc({mode:"hidden",children:C},f),o=ho(o,f,i,null),C.return=n,o.return=n,C.sibling=o,n.child=C,o=n.child,o.memoizedState=ed(i),o.childLanes=td(e,w,i),n.memoizedState=Wf,au(null,o)):(Ns(n),nd(n,C))}var z=e.memoizedState;if(z!==null&&(C=z.dehydrated,C!==null)){if(m)n.flags&256?(Ns(n),n.flags&=-257,n=rd(e,n,i)):n.memoizedState!==null?(Rs(),n.child=e.child,n.flags|=128,n=null):(Rs(),C=o.fallback,f=n.mode,o=Sc({mode:"visible",children:o.children},f),C=ho(C,f,i,null),C.flags|=2,o.return=n,C.return=n,o.sibling=C,n.child=o,bo(n,e.child,null,i),o=n.child,o.memoizedState=ed(i),o.childLanes=td(e,w,i),n.memoizedState=Wf,n=au(null,o));else if(Ns(n),Pd(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var de=w.dgst;w=de,o=Error(s(419)),o.stack="",o.digest=w,Gl({value:o,source:null,stack:null}),n=rd(e,n,i)}else if(Un||Yo(e,n,i,!1),w=(i&e.childLanes)!==0,Un||w){if(w=Wt,w!==null&&(o=ln(w,i),o!==0&&o!==z.retryLane))throw z.retryLane=o,un(e,o),Yr(w,e,o),Zf;kd(C)||Mc(),n=rd(e,n,i)}else kd(C)?(n.flags|=192,n.child=e.child,n=null):(e=z.treeContext,an=ka(C.nextSibling),or=n,jt=!0,xs=null,Ma=!1,e!==null&&Ip(n,e),n=nd(n,o.children),n.flags|=4096);return n}return f?(Rs(),C=o.fallback,f=n.mode,z=e.child,de=z.sibling,o=Vi(z,{mode:"hidden",children:o.children}),o.subtreeFlags=z.subtreeFlags&65011712,de!==null?C=Vi(de,C):(C=ho(C,f,i,null),C.flags|=2),C.return=n,o.return=n,o.sibling=C,n.child=o,au(null,o),o=n.child,C=e.child.memoizedState,C===null?C=ed(i):(f=C.cachePool,f!==null?(z=Ln._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Lp(),C={baseLanes:C.baseLanes|i,cachePool:f}),o.memoizedState=C,o.childLanes=td(e,w,i),n.memoizedState=Wf,au(e.child,o)):(Ns(n),i=e.child,e=i.sibling,i=Vi(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(w=n.deletions,w===null?(n.deletions=[e],n.flags|=16):w.push(e)),n.child=i,n.memoizedState=null,i)}function nd(e,n){return n=Sc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Sc(e,n){return e=fa(22,e,null,n),e.lanes=0,e}function rd(e,n,i){return bo(n,e.child,null,i),e=nd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Zg(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),vf(e.return,n,i)}function ad(e,n,i,o,f,m){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:f,treeForkCount:m}:(w.isBackwards=n,w.rendering=null,w.renderingStartTime=0,w.last=o,w.tail=i,w.tailMode=f,w.treeForkCount=m)}function Jg(e,n,i){var o=n.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var w=Cn.current,C=(w&2)!==0;if(C?(w=w&1|2,n.flags|=128):w&=1,Ce(Cn,w),ur(e,n,o,i),o=jt?Kl:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zg(e,i,n);else if(e.tag===19)Zg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&dc(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),ad(n,!1,f,i,m,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&dc(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}ad(n,!0,i,null,m,o);break;case"together":ad(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Bi(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ds|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Yo(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=Vi(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Vi(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function id(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ic(e)))}function Xx(e,n,i){switch(n.tag){case 3:Ft(n,n.stateNode.containerInfo),ws(n,Ln,e.memoizedState.cache),fo();break;case 27:case 5:fn(n);break;case 4:Ft(n,n.stateNode.containerInfo);break;case 10:ws(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,jf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ns(n),n.flags|=128,null):(i&n.child.childLanes)!==0?$g(e,n,i):(Ns(n),e=Bi(e,n,i),e!==null?e.sibling:null);Ns(n);break;case 19:var f=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(Yo(e,n,i,!1),o=(i&n.childLanes)!==0),f){if(o)return Jg(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ce(Cn,Cn.current),o)break;return null;case 22:return n.lanes=0,Hg(e,n,i,n.pendingProps);case 24:ws(n,Ln,e.memoizedState.cache)}return Bi(e,n,i)}function Wg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Un=!0;else{if(!id(e,i)&&(n.flags&128)===0)return Un=!1,Xx(e,n,i);Un=(e.flags&131072)!==0}else Un=!1,jt&&(n.flags&1048576)!==0&&Dp(n,Kl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=yo(n.elementType),n.type=e,typeof e=="function")cf(e)?(o=xo(e,o),n.tag=1,n=Yg(null,n,e,o,i)):(n.tag=0,n=Jf(null,n,e,o,i));else{if(e!=null){var f=e.$$typeof;if(f===_e){n.tag=11,n=Bg(null,n,e,o,i);break e}else if(f===M){n.tag=14,n=qg(null,n,e,o,i);break e}}throw n=ft(e)||e,Error(s(306,n,""))}}return n;case 0:return Jf(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,f=xo(o,n.pendingProps),Yg(e,n,o,f,i);case 3:e:{if(Ft(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var m=n.memoizedState;f=m.element,Sf(e,n),Wl(n,o,null,i);var w=n.memoizedState;if(o=w.cache,ws(n,Ln,o),o!==m.cache&&bf(n,[Ln],i,!0),Jl(),o=w.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:w.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Xg(e,n,o,i);break e}else if(o!==f){f=Da(Error(s(424)),n),Gl(f),n=Xg(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(an=ka(e.firstChild),or=n,jt=!0,xs=null,Ma=!0,i=Hp(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(fo(),o===f){n=Bi(e,n,i);break e}ur(e,n,o,i)}n=n.child}return n;case 26:return Tc(e,n),e===null?(i=cv(n.type,null,n.pendingProps,null))?n.memoizedState=i:jt||(i=n.type,e=n.pendingProps,o=Bc(Je.current).createElement(i),o[Kt]=n,o[nn]=e,cr(o,i,e),mn(o),n.stateNode=o):n.memoizedState=cv(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return fn(n),e===null&&jt&&(o=n.stateNode=ov(n.type,n.pendingProps,Je.current),or=n,Ma=!0,f=an,ks(n.type)?(Ld=f,an=ka(o.firstChild)):an=f),ur(e,n,n.pendingProps.children,i),Tc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&jt&&((f=o=an)&&(o=S1(o,n.type,n.pendingProps,Ma),o!==null?(n.stateNode=o,or=n,an=ka(o.firstChild),Ma=!1,f=!0):f=!1),f||Es(n)),fn(n),f=n.type,m=n.pendingProps,w=e!==null?e.memoizedProps:null,o=m.children,Od(f,m)?o=null:w!==null&&Od(f,w)&&(n.flags|=32),n.memoizedState!==null&&(f=If(e,n,Ux,null,null,i),bu._currentValue=f),Tc(e,n),ur(e,n,o,i),n.child;case 6:return e===null&&jt&&((e=i=an)&&(i=A1(i,n.pendingProps,Ma),i!==null?(n.stateNode=i,or=n,an=null,e=!0):e=!1),e||Es(n)),null;case 13:return $g(e,n,i);case 4:return Ft(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=bo(n,null,o,i):ur(e,n,o,i),n.child;case 11:return Bg(e,n,n.type,n.pendingProps,i);case 7:return ur(e,n,n.pendingProps,i),n.child;case 8:return ur(e,n,n.pendingProps.children,i),n.child;case 12:return ur(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,ws(n,n.type,o.value),ur(e,n,o.children,i),n.child;case 9:return f=n.type._context,o=n.pendingProps.children,po(n),f=lr(f),o=o(f),n.flags|=1,ur(e,n,o,i),n.child;case 14:return qg(e,n,n.type,n.pendingProps,i);case 15:return Fg(e,n,n.type,n.pendingProps,i);case 19:return Jg(e,n,i);case 31:return Yx(e,n,i);case 22:return Hg(e,n,i,n.pendingProps);case 24:return po(n),o=lr(Ln),e===null?(f=Ef(),f===null&&(f=Wt,m=_f(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),n.memoizedState={parent:o,cache:f},Tf(n),ws(n,Ln,f)):((e.lanes&i)!==0&&(Sf(e,n),Wl(n,null,null,i),Jl()),f=e.memoizedState,m=n.memoizedState,f.parent!==o?(f={parent:o,cache:o},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),ws(n,Ln,o)):(o=m.cache,ws(n,Ln,o),o!==f.cache&&bf(n,[Ln],i,!0))),ur(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function qi(e){e.flags|=4}function sd(e,n,i,o,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Ay())e.flags|=8192;else throw vo=uc,wf}else e.flags&=-16777217}function ey(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!pv(n))if(Ay())e.flags|=8192;else throw vo=uc,wf}function Ac(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?zo():536870912,e.lanes|=n,sl|=n)}function iu(e,n){if(!jt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function sn(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function $x(e,n,i){var o=n.pendingProps;switch(mf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(n),null;case 1:return sn(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Li(Ln),Oe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Qo(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gf())),sn(n),null;case 26:var f=n.type,m=n.memoizedState;return e===null?(qi(n),m!==null?(sn(n),ey(n,m)):(sn(n),sd(n,f,null,o,i))):m?m!==e.memoizedState?(qi(n),sn(n),ey(n,m)):(sn(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&qi(n),sn(n),sd(n,f,e,o,i)),null;case 27:if(On(n),i=Je.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return sn(n),null}e=Re.current,Qo(n)?Op(n):(e=ov(f,o,i),n.stateNode=e,qi(n))}return sn(n),null;case 5:if(On(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return sn(n),null}if(m=Re.current,Qo(n))Op(n);else{var w=Bc(Je.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?w.createElement("select",{is:o.is}):w.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?w.createElement(f,{is:o.is}):w.createElement(f)}}m[Kt]=n,m[nn]=o;e:for(w=n.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===n)break e;for(;w.sibling===null;){if(w.return===null||w.return===n)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}n.stateNode=m;e:switch(cr(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&qi(n)}}return sn(n),sd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=Je.current,Qo(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,f=or,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Kt]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||$y(e.nodeValue,i)),e||Es(n,!0)}else e=Bc(e).createTextNode(o),e[Kt]=n,n.stateNode=e}return sn(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=Qo(n),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Kt]=n}else fo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;sn(n),e=!1}else i=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(ma(n),n):(ma(n),null);if((n.flags&128)!==0)throw Error(s(558))}return sn(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Qo(n),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Kt]=n}else fo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;sn(n),f=!1}else f=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(ma(n),n):(ma(n),null)}return ma(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Ac(n,n.updateQueue),sn(n),null);case 4:return Oe(),e===null&&Rd(n.stateNode.containerInfo),sn(n),null;case 10:return Li(n.type),sn(n),null;case 19:if(ve(Cn),o=n.memoizedState,o===null)return sn(n),null;if(f=(n.flags&128)!==0,m=o.rendering,m===null)if(f)iu(o,!1);else{if(En!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=dc(e),m!==null){for(n.flags|=128,iu(o,!1),e=m.updateQueue,n.updateQueue=e,Ac(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Rp(i,e),i=i.sibling;return Ce(Cn,Cn.current&1|2),jt&&ki(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&$n()>Dc&&(n.flags|=128,f=!0,iu(o,!1),n.lanes=4194304)}else{if(!f)if(e=dc(m),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Ac(n,e),iu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!jt)return sn(n),null}else 2*$n()-o.renderingStartTime>Dc&&i!==536870912&&(n.flags|=128,f=!0,iu(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(e=o.last,e!==null?e.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$n(),e.sibling=null,i=Cn.current,Ce(Cn,f?i&1|2:i&1),jt&&ki(n,o.treeForkCount),e):(sn(n),null);case 22:case 23:return ma(n),Cf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(sn(n),n.subtreeFlags&6&&(n.flags|=8192)):sn(n),i=n.updateQueue,i!==null&&Ac(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&ve(go),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Li(Ln),sn(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Zx(e,n){switch(mf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Li(Ln),Oe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return On(n),null;case 31:if(n.memoizedState!==null){if(ma(n),n.alternate===null)throw Error(s(340));fo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ma(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));fo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ve(Cn),null;case 4:return Oe(),null;case 10:return Li(n.type),null;case 22:case 23:return ma(n),Cf(),e!==null&&ve(go),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Li(Ln),null;case 25:return null;default:return null}}function ty(e,n){switch(mf(n),n.tag){case 3:Li(Ln),Oe();break;case 26:case 27:case 5:On(n);break;case 4:Oe();break;case 31:n.memoizedState!==null&&ma(n);break;case 13:ma(n);break;case 19:ve(Cn);break;case 10:Li(n.type);break;case 22:case 23:ma(n),Cf(),e!==null&&ve(go);break;case 24:Li(Ln)}}function su(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var f=o.next;i=f;do{if((i.tag&e)===e){o=void 0;var m=i.create,w=i.inst;o=m(),w.destroy=o}i=i.next}while(i!==f)}}catch(C){Xt(n,n.return,C)}}function Cs(e,n,i){try{var o=n.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&e)===e){var w=o.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,f=n;var z=i,de=C;try{de()}catch(xe){Xt(f,z,xe)}}}o=o.next}while(o!==m)}}catch(xe){Xt(n,n.return,xe)}}function ny(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Gp(n,i)}catch(o){Xt(e,e.return,o)}}}function ry(e,n,i){i.props=xo(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Xt(e,n,o)}}function ou(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(f){Xt(e,n,f)}}function pi(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(f){Xt(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Xt(e,n,f)}else i.current=null}function ay(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(f){Xt(e,e.return,f)}}function od(e,n,i){try{var o=e.stateNode;b1(o,e.type,i,n),o[nn]=n}catch(f){Xt(e,e.return,f)}}function iy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ks(e.type)||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ks(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ud(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=gr));else if(o!==4&&(o===27&&ks(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(ud(e,n,i),e=e.sibling;e!==null;)ud(e,n,i),e=e.sibling}function Nc(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&ks(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Nc(e,n,i),e=e.sibling;e!==null;)Nc(e,n,i),e=e.sibling}function sy(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);cr(n,o,i),n[Kt]=e,n[nn]=i}catch(m){Xt(e,e.return,m)}}var Fi=!1,Bn=!1,cd=!1,oy=typeof WeakSet=="function"?WeakSet:Set,tr=null;function Jx(e,n){if(e=e.containerInfo,Dd=Yc,e=S(e),R(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var w=0,C=-1,z=-1,de=0,xe=0,Te=e,pe=null;t:for(;;){for(var ye;Te!==i||f!==0&&Te.nodeType!==3||(C=w+f),Te!==m||o!==0&&Te.nodeType!==3||(z=w+o),Te.nodeType===3&&(w+=Te.nodeValue.length),(ye=Te.firstChild)!==null;)pe=Te,Te=ye;for(;;){if(Te===e)break t;if(pe===i&&++de===f&&(C=w),pe===m&&++xe===o&&(z=w),(ye=Te.nextSibling)!==null)break;Te=pe,pe=Te.parentNode}Te=ye}i=C===-1||z===-1?null:{start:C,end:z}}else i=null}i=i||{start:0,end:0}}else i=null;for(Id={focusedElem:e,selectionRange:i},Yc=!1,tr=n;tr!==null;)if(n=tr,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,tr=e;else for(;tr!==null;){switch(n=tr,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,i=n,f=m.memoizedProps,m=m.memoizedState,o=i.stateNode;try{var Xe=xo(i.type,f);e=o.getSnapshotBeforeUpdate(Xe,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(rt){Xt(i,i.return,rt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Vd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,tr=e;break}tr=n.return}}function ly(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Ki(e,i),o&4&&su(5,i);break;case 1:if(Ki(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(w){Xt(i,i.return,w)}else{var f=xo(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(w){Xt(i,i.return,w)}}o&64&&ny(i),o&512&&ou(i,i.return);break;case 3:if(Ki(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Gp(e,n)}catch(w){Xt(i,i.return,w)}}break;case 27:n===null&&o&4&&sy(i);case 26:case 5:Ki(e,i),n===null&&o&4&&ay(i),o&512&&ou(i,i.return);break;case 12:Ki(e,i);break;case 31:Ki(e,i),o&4&&hy(e,i);break;case 13:Ki(e,i),o&4&&fy(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=o1.bind(null,i),N1(e,i))));break;case 22:if(o=i.memoizedState!==null||Fi,!o){n=n!==null&&n.memoizedState!==null||Bn,f=Fi;var m=Bn;Fi=o,(Bn=n)&&!m?Gi(e,i,(i.subtreeFlags&8772)!==0):Ki(e,i),Fi=f,Bn=m}break;case 30:break;default:Ki(e,i)}}function uy(e){var n=e.alternate;n!==null&&(e.alternate=null,uy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ni(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cn=null,Hr=!1;function Hi(e,n,i){for(i=i.child;i!==null;)cy(e,n,i),i=i.sibling}function cy(e,n,i){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(dr,i)}catch{}switch(i.tag){case 26:Bn||pi(i,n),Hi(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Bn||pi(i,n);var o=cn,f=Hr;ks(i.type)&&(cn=i.stateNode,Hr=!1),Hi(e,n,i),gu(i.stateNode),cn=o,Hr=f;break;case 5:Bn||pi(i,n);case 6:if(o=cn,f=Hr,cn=null,Hi(e,n,i),cn=o,Hr=f,cn!==null)if(Hr)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(i.stateNode)}catch(m){Xt(i,n,m)}else try{cn.removeChild(i.stateNode)}catch(m){Xt(i,n,m)}break;case 18:cn!==null&&(Hr?(e=cn,nv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ml(e)):nv(cn,i.stateNode));break;case 4:o=cn,f=Hr,cn=i.stateNode.containerInfo,Hr=!0,Hi(e,n,i),cn=o,Hr=f;break;case 0:case 11:case 14:case 15:Cs(2,i,n),Bn||Cs(4,i,n),Hi(e,n,i);break;case 1:Bn||(pi(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&ry(i,n,o)),Hi(e,n,i);break;case 21:Hi(e,n,i);break;case 22:Bn=(o=Bn)||i.memoizedState!==null,Hi(e,n,i),Bn=o;break;default:Hi(e,n,i)}}function hy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ml(e)}catch(i){Xt(n,n.return,i)}}}function fy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ml(e)}catch(i){Xt(n,n.return,i)}}function Wx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new oy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new oy),n;default:throw Error(s(435,e.tag))}}function Rc(e,n){var i=Wx(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var f=l1.bind(null,e,o);o.then(f,f)}})}function Kr(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var f=i[o],m=e,w=n,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(ks(C.type)){cn=C.stateNode,Hr=!1;break e}break;case 5:cn=C.stateNode,Hr=!1;break e;case 3:case 4:cn=C.stateNode.containerInfo,Hr=!0;break e}C=C.return}if(cn===null)throw Error(s(160));cy(m,w,f),cn=null,Hr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)dy(n,e),n=n.sibling}var $a=null;function dy(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Kr(n,e),Gr(e),o&4&&(Cs(3,e,e.return),su(3,e),Cs(5,e,e.return));break;case 1:Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),o&64&&Fi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var f=$a;if(Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),o&4){var m=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Zn]||m[Kt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),cr(m,o,i),m[Kt]=e,mn(m),o=m;break e;case"link":var w=dv("link","href",f).get(o+(i.href||""));if(w){for(var C=0;C<w.length;C++)if(m=w[C],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(C,1);break t}}m=f.createElement(o),cr(m,o,i),f.head.appendChild(m);break;case"meta":if(w=dv("meta","content",f).get(o+(i.content||""))){for(C=0;C<w.length;C++)if(m=w[C],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(C,1);break t}}m=f.createElement(o),cr(m,o,i),f.head.appendChild(m);break;default:throw Error(s(468,o))}m[Kt]=e,mn(m),o=m}e.stateNode=o}else mv(f,e.type,e.stateNode);else e.stateNode=fv(f,o,e.memoizedProps);else m!==o?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,o===null?mv(f,e.type,e.stateNode):fv(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&od(e,e.memoizedProps,i.memoizedProps)}break;case 27:Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),i!==null&&o&4&&od(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Kr(n,e),Gr(e),o&512&&(Bn||i===null||pi(i,i.return)),e.flags&32){f=e.stateNode;try{sr(f,"")}catch(Xe){Xt(e,e.return,Xe)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,od(e,f,i!==null?i.memoizedProps:f)),o&1024&&(cd=!0);break;case 6:if(Kr(n,e),Gr(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Xe){Xt(e,e.return,Xe)}}break;case 3:if(Hc=null,f=$a,$a=qc(n.containerInfo),Kr(n,e),$a=f,Gr(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ml(n.containerInfo)}catch(Xe){Xt(e,e.return,Xe)}cd&&(cd=!1,my(e));break;case 4:o=$a,$a=qc(e.stateNode.containerInfo),Kr(n,e),Gr(e),$a=o;break;case 12:Kr(n,e),Gr(e);break;case 31:Kr(n,e),Gr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 13:Kr(n,e),Gr(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(jc=$n()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 22:f=e.memoizedState!==null;var z=i!==null&&i.memoizedState!==null,de=Fi,xe=Bn;if(Fi=de||f,Bn=xe||z,Kr(n,e),Bn=xe,Fi=de,Gr(e),o&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||z||Fi||Bn||Eo(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){z=i=n;try{if(m=z.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=z.stateNode;var Te=z.memoizedProps.style,pe=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;C.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(Xe){Xt(z,z.return,Xe)}}}else if(n.tag===6){if(i===null){z=n;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(Xe){Xt(z,z.return,Xe)}}}else if(n.tag===18){if(i===null){z=n;try{var ye=z.stateNode;f?rv(ye,!0):rv(z.stateNode,!1)}catch(Xe){Xt(z,z.return,Xe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Rc(e,i))));break;case 19:Kr(n,e),Gr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Rc(e,o)));break;case 30:break;case 21:break;default:Kr(n,e),Gr(e)}}function Gr(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(iy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,m=ld(e);Nc(e,m,f);break;case 5:var w=i.stateNode;i.flags&32&&(sr(w,""),i.flags&=-33);var C=ld(e);Nc(e,C,w);break;case 3:case 4:var z=i.stateNode.containerInfo,de=ld(e);ud(e,de,z);break;default:throw Error(s(161))}}catch(xe){Xt(e,e.return,xe)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function my(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;my(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ki(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ly(e,n.alternate,n),n=n.sibling}function Eo(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Cs(4,n,n.return),Eo(n);break;case 1:pi(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&ry(n,n.return,i),Eo(n);break;case 27:gu(n.stateNode);case 26:case 5:pi(n,n.return),Eo(n);break;case 22:n.memoizedState===null&&Eo(n);break;case 30:Eo(n);break;default:Eo(n)}e=e.sibling}}function Gi(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,f=e,m=n,w=m.flags;switch(m.tag){case 0:case 11:case 15:Gi(f,m,i),su(4,m);break;case 1:if(Gi(f,m,i),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(de){Xt(o,o.return,de)}if(o=m,f=o.updateQueue,f!==null){var C=o.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)Kp(z[f],C)}catch(de){Xt(o,o.return,de)}}i&&w&64&&ny(m),ou(m,m.return);break;case 27:sy(m);case 26:case 5:Gi(f,m,i),i&&o===null&&w&4&&ay(m),ou(m,m.return);break;case 12:Gi(f,m,i);break;case 31:Gi(f,m,i),i&&w&4&&hy(f,m);break;case 13:Gi(f,m,i),i&&w&4&&fy(f,m);break;case 22:m.memoizedState===null&&Gi(f,m,i),ou(m,m.return);break;case 30:break;default:Gi(f,m,i)}n=n.sibling}}function hd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Ql(i))}function fd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ql(e))}function Za(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)py(e,n,i,o),n=n.sibling}function py(e,n,i,o){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Za(e,n,i,o),f&2048&&su(9,n);break;case 1:Za(e,n,i,o);break;case 3:Za(e,n,i,o),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ql(e)));break;case 12:if(f&2048){Za(e,n,i,o),e=n.stateNode;try{var m=n.memoizedProps,w=m.id,C=m.onPostCommit;typeof C=="function"&&C(w,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Xt(n,n.return,z)}}else Za(e,n,i,o);break;case 31:Za(e,n,i,o);break;case 13:Za(e,n,i,o);break;case 23:break;case 22:m=n.stateNode,w=n.alternate,n.memoizedState!==null?m._visibility&2?Za(e,n,i,o):lu(e,n):m._visibility&2?Za(e,n,i,o):(m._visibility|=2,rl(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),f&2048&&hd(w,n);break;case 24:Za(e,n,i,o),f&2048&&fd(n.alternate,n);break;default:Za(e,n,i,o)}}function rl(e,n,i,o,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,w=n,C=i,z=o,de=w.flags;switch(w.tag){case 0:case 11:case 15:rl(m,w,C,z,f),su(8,w);break;case 23:break;case 22:var xe=w.stateNode;w.memoizedState!==null?xe._visibility&2?rl(m,w,C,z,f):lu(m,w):(xe._visibility|=2,rl(m,w,C,z,f)),f&&de&2048&&hd(w.alternate,w);break;case 24:rl(m,w,C,z,f),f&&de&2048&&fd(w.alternate,w);break;default:rl(m,w,C,z,f)}n=n.sibling}}function lu(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,f=o.flags;switch(o.tag){case 22:lu(i,o),f&2048&&hd(o.alternate,o);break;case 24:lu(i,o),f&2048&&fd(o.alternate,o);break;default:lu(i,o)}n=n.sibling}}var uu=8192;function al(e,n,i){if(e.subtreeFlags&uu)for(e=e.child;e!==null;)gy(e,n,i),e=e.sibling}function gy(e,n,i){switch(e.tag){case 26:al(e,n,i),e.flags&uu&&e.memoizedState!==null&&z1(i,$a,e.memoizedState,e.memoizedProps);break;case 5:al(e,n,i);break;case 3:case 4:var o=$a;$a=qc(e.stateNode.containerInfo),al(e,n,i),$a=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=uu,uu=16777216,al(e,n,i),uu=o):al(e,n,i));break;default:al(e,n,i)}}function yy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function cu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];tr=o,by(o,e)}yy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vy(e),e=e.sibling}function vy(e){switch(e.tag){case 0:case 11:case 15:cu(e),e.flags&2048&&Cs(9,e,e.return);break;case 3:cu(e);break;case 12:cu(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Cc(e)):cu(e);break;default:cu(e)}}function Cc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];tr=o,by(o,e)}yy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Cs(8,n,n.return),Cc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Cc(n));break;default:Cc(n)}e=e.sibling}}function by(e,n){for(;tr!==null;){var i=tr;switch(i.tag){case 0:case 11:case 15:Cs(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ql(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,tr=o;else e:for(i=e;tr!==null;){o=tr;var f=o.sibling,m=o.return;if(uy(o),o===i){tr=null;break e}if(f!==null){f.return=m,tr=f;break e}tr=m}}}var e1={getCacheForType:function(e){var n=lr(Ln),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return lr(Ln).controller.signal}},t1=typeof WeakMap=="function"?WeakMap:Map,zt=0,Wt=null,Et=null,Tt=0,Yt=0,pa=null,js=!1,il=!1,dd=!1,Qi=0,En=0,Ds=0,wo=0,md=0,ga=0,sl=0,hu=null,Qr=null,pd=!1,jc=0,_y=0,Dc=1/0,Ic=null,Is=null,Gn=0,Os=null,ol=null,Yi=0,gd=0,yd=null,xy=null,fu=0,vd=null;function ya(){return(zt&2)!==0&&Tt!==0?Tt&-Tt:J.T!==null?Td():Ai()}function Ey(){if(ga===0)if((Tt&536870912)===0||jt){var e=Ba;Ba<<=1,(Ba&3932160)===0&&(Ba=262144),ga=e}else ga=536870912;return e=da.current,e!==null&&(e.flags|=32),ga}function Yr(e,n,i){(e===Wt&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)&&(ll(e,0),Ms(e,Tt,ga,!1)),jr(e,i),((zt&2)===0||e!==Wt)&&(e===Wt&&((zt&2)===0&&(wo|=i),En===4&&Ms(e,Tt,ga,!1)),gi(e))}function wy(e,n,i){if((zt&6)!==0)throw Error(s(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Er(e,n),f=o?a1(e,n):_d(e,n,!0),m=o;do{if(f===0){il&&!o&&Ms(e,n,0,!1);break}else{if(i=e.current.alternate,m&&!n1(i)){f=_d(e,n,!1),m=!1;continue}if(f===2){if(m=n,e.errorRecoveryDisabledLanes&m)var w=0;else w=e.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){n=w;e:{var C=e;f=hu;var z=C.current.memoizedState.isDehydrated;if(z&&(ll(C,w).flags|=256),w=_d(C,w,!1),w!==2){if(dd&&!z){C.errorRecoveryDisabledLanes|=m,wo|=m,f=4;break e}m=Qr,Qr=f,m!==null&&(Qr===null?Qr=m:Qr.push.apply(Qr,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){ll(e,0),Ms(e,n,0,!0);break}e:{switch(o=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ms(o,n,ga,!js);break e;case 2:Qr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=jc+300-$n(),10<f)){if(Ms(o,n,ga,!js),ea(o,0,!0)!==0)break e;Yi=n,o.timeoutHandle=ev(Ty.bind(null,o,i,Qr,Ic,pd,n,ga,wo,sl,js,m,"Throttled",-0,0),f);break e}Ty(o,i,Qr,Ic,pd,n,ga,wo,sl,js,m,null,-0,0)}}break}while(!0);gi(e)}function Ty(e,n,i,o,f,m,w,C,z,de,xe,Te,pe,ye){if(e.timeoutHandle=-1,Te=n.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gr},gy(n,m,Te);var Xe=(m&62914560)===m?jc-$n():(m&4194048)===m?_y-$n():0;if(Xe=U1(Te,Xe),Xe!==null){Yi=m,e.cancelPendingCommit=Xe(Iy.bind(null,e,n,m,i,o,f,w,C,z,xe,Te,null,pe,ye)),Ms(e,m,w,!de);return}}Iy(e,n,m,i,o,f,w,C,z)}function n1(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var f=i[o],m=f.getSnapshot;f=f.value;try{if(!yr(m(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ms(e,n,i,o){n&=~md,n&=~wo,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var f=n;0<f;){var m=31-Be(f),w=1<<m;o[m]=-1,f&=~w}i!==0&&xa(e,i,n)}function Oc(){return(zt&6)===0?(du(0),!1):!0}function bd(){if(Et!==null){if(Yt===0)var e=Et.return;else e=Et,Pi=mo=null,Vf(e),Jo=null,Xl=0,e=Et;for(;e!==null;)ty(e.alternate,e),e=e.return;Et=null}}function ll(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,E1(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Yi=0,bd(),Wt=e,Et=i=Vi(e.current,null),Tt=n,Yt=0,pa=null,js=!1,il=Er(e,n),dd=!1,sl=ga=md=wo=Ds=En=0,Qr=hu=null,pd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var f=31-Be(o),m=1<<f;n|=e[f],o&=~m}return Qi=n,er(),i}function Sy(e,n){pt=null,J.H=ru,n===Zo||n===lc?(n=Bp(),Yt=3):n===wf?(n=Bp(),Yt=4):Yt=n===Zf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,pa=n,Et===null&&(En=1,Ec(e,Da(n,e.current)))}function Ay(){var e=da.current;return e===null?!0:(Tt&4194048)===Tt?Va===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?e===Va:!1}function Ny(){var e=J.H;return J.H=ru,e===null?ru:e}function Ry(){var e=J.A;return J.A=e1,e}function Mc(){En=4,js||(Tt&4194048)!==Tt&&da.current!==null||(il=!0),(Ds&134217727)===0&&(wo&134217727)===0||Wt===null||Ms(Wt,Tt,ga,!1)}function _d(e,n,i){var o=zt;zt|=2;var f=Ny(),m=Ry();(Wt!==e||Tt!==n)&&(Ic=null,ll(e,n)),n=!1;var w=En;e:do try{if(Yt!==0&&Et!==null){var C=Et,z=pa;switch(Yt){case 8:bd(),w=6;break e;case 3:case 2:case 9:case 6:da.current===null&&(n=!0);var de=Yt;if(Yt=0,pa=null,ul(e,C,z,de),i&&il){w=0;break e}break;default:de=Yt,Yt=0,pa=null,ul(e,C,z,de)}}r1(),w=En;break}catch(xe){Sy(e,xe)}while(!0);return n&&e.shellSuspendCounter++,Pi=mo=null,zt=o,J.H=f,J.A=m,Et===null&&(Wt=null,Tt=0,er()),w}function r1(){for(;Et!==null;)Cy(Et)}function a1(e,n){var i=zt;zt|=2;var o=Ny(),f=Ry();Wt!==e||Tt!==n?(Ic=null,Dc=$n()+500,ll(e,n)):il=Er(e,n);e:do try{if(Yt!==0&&Et!==null){n=Et;var m=pa;t:switch(Yt){case 1:Yt=0,pa=null,ul(e,n,m,1);break;case 2:case 9:if(zp(m)){Yt=0,pa=null,jy(n);break}n=function(){Yt!==2&&Yt!==9||Wt!==e||(Yt=7),gi(e)},m.then(n,n);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:zp(m)?(Yt=0,pa=null,jy(n)):(Yt=0,pa=null,ul(e,n,m,7));break;case 5:var w=null;switch(Et.tag){case 26:w=Et.memoizedState;case 5:case 27:var C=Et;if(w?pv(w):C.stateNode.complete){Yt=0,pa=null;var z=C.sibling;if(z!==null)Et=z;else{var de=C.return;de!==null?(Et=de,Vc(de)):Et=null}break t}}Yt=0,pa=null,ul(e,n,m,5);break;case 6:Yt=0,pa=null,ul(e,n,m,6);break;case 8:bd(),En=6;break e;default:throw Error(s(462))}}i1();break}catch(xe){Sy(e,xe)}while(!0);return Pi=mo=null,J.H=o,J.A=f,zt=i,Et!==null?0:(Wt=null,Tt=0,er(),En)}function i1(){for(;Et!==null&&!Lo();)Cy(Et)}function Cy(e){var n=Wg(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,n===null?Vc(e):Et=n}function jy(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Qg(i,n,n.pendingProps,n.type,void 0,Tt);break;case 11:n=Qg(i,n,n.pendingProps,n.type.render,n.ref,Tt);break;case 5:Vf(n);default:ty(i,n),n=Et=Rp(n,Qi),n=Wg(i,n,Qi)}e.memoizedProps=e.pendingProps,n===null?Vc(e):Et=n}function ul(e,n,i,o){Pi=mo=null,Vf(n),Jo=null,Xl=0;var f=n.return;try{if(Qx(e,f,n,i,Tt)){En=1,Ec(e,Da(i,e.current)),Et=null;return}}catch(m){if(f!==null)throw Et=f,m;En=1,Ec(e,Da(i,e.current)),Et=null;return}n.flags&32768?(jt||o===1?e=!0:il||(Tt&536870912)!==0?e=!1:(js=e=!0,(o===2||o===9||o===3||o===6)&&(o=da.current,o!==null&&o.tag===13&&(o.flags|=16384))),Dy(n,e)):Vc(n)}function Vc(e){var n=e;do{if((n.flags&32768)!==0){Dy(n,js);return}e=n.return;var i=$x(n.alternate,n,Qi);if(i!==null){Et=i;return}if(n=n.sibling,n!==null){Et=n;return}Et=n=e}while(n!==null);En===0&&(En=5)}function Dy(e,n){do{var i=Zx(e.alternate,e);if(i!==null){i.flags&=32767,Et=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Et=e;return}Et=e=i}while(e!==null);En=6,Et=null}function Iy(e,n,i,o,f,m,w,C,z){e.cancelPendingCommit=null;do kc();while(Gn!==0);if((zt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=mt,to(e,i,m,w,C,z),e===Wt&&(Et=Wt=null,Tt=0),ol=n,Os=e,Yi=i,gd=m,yd=f,xy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,u1(ba,function(){return Py(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=J.T,J.T=null,f=Ne.p,Ne.p=2,w=zt,zt|=4;try{Jx(e,n,i)}finally{zt=w,Ne.p=f,J.T=o}}Gn=1,Oy(),My(),Vy()}}function Oy(){if(Gn===1){Gn=0;var e=Os,n=ol,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=J.T,J.T=null;var o=Ne.p;Ne.p=2;var f=zt;zt|=4;try{dy(n,e);var m=Id,w=S(e.containerInfo),C=m.focusedElem,z=m.selectionRange;if(w!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(z!==null&&R(C)){var de=z.start,xe=z.end;if(xe===void 0&&(xe=de),"selectionStart"in C)C.selectionStart=de,C.selectionEnd=Math.min(xe,C.value.length);else{var Te=C.ownerDocument||document,pe=Te&&Te.defaultView||window;if(pe.getSelection){var ye=pe.getSelection(),Xe=C.textContent.length,rt=Math.min(z.start,Xe),Jt=z.end===void 0?rt:Math.min(z.end,Xe);!ye.extend&&rt>Jt&&(w=Jt,Jt=rt,rt=w);var se=y(C,rt),X=y(C,Jt);if(se&&X&&(ye.rangeCount!==1||ye.anchorNode!==se.node||ye.anchorOffset!==se.offset||ye.focusNode!==X.node||ye.focusOffset!==X.offset)){var fe=Te.createRange();fe.setStart(se.node,se.offset),ye.removeAllRanges(),rt>Jt?(ye.addRange(fe),ye.extend(X.node,X.offset)):(fe.setEnd(X.node,X.offset),ye.addRange(fe))}}}}for(Te=[],ye=C;ye=ye.parentNode;)ye.nodeType===1&&Te.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Te.length;C++){var Ee=Te[C];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Yc=!!Dd,Id=Dd=null}finally{zt=f,Ne.p=o,J.T=i}}e.current=n,Gn=2}}function My(){if(Gn===2){Gn=0;var e=Os,n=ol,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=J.T,J.T=null;var o=Ne.p;Ne.p=2;var f=zt;zt|=4;try{ly(e,n.alternate,n)}finally{zt=f,Ne.p=o,J.T=i}}Gn=3}}function Vy(){if(Gn===4||Gn===3){Gn=0,ri();var e=Os,n=ol,i=Yi,o=xy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Gn=5:(Gn=0,ol=Os=null,ky(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Is=null),Dr(i),n=n.stateNode,Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(dr,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=J.T,f=Ne.p,Ne.p=2,J.T=null;try{for(var m=e.onRecoverableError,w=0;w<o.length;w++){var C=o[w];m(C.value,{componentStack:C.stack})}}finally{J.T=n,Ne.p=f}}(Yi&3)!==0&&kc(),gi(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===vd?fu++:(fu=0,vd=e):fu=0,du(0)}}function ky(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ql(n)))}function kc(){return Oy(),My(),Vy(),Py()}function Py(){if(Gn!==5)return!1;var e=Os,n=gd;gd=0;var i=Dr(Yi),o=J.T,f=Ne.p;try{Ne.p=32>i?32:i,J.T=null,i=yd,yd=null;var m=Os,w=Yi;if(Gn=0,ol=Os=null,Yi=0,(zt&6)!==0)throw Error(s(331));var C=zt;if(zt|=4,vy(m.current),py(m,m.current,w,i),zt=C,du(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(dr,m)}catch{}return!0}finally{Ne.p=f,J.T=o,ky(e,n)}}function Ly(e,n,i){n=Da(i,n),n=$f(e.stateNode,n,2),e=As(e,n,2),e!==null&&(jr(e,2),gi(e))}function Xt(e,n,i){if(e.tag===3)Ly(e,e,i);else for(;n!==null;){if(n.tag===3){Ly(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Is===null||!Is.has(o))){e=Da(i,e),i=zg(2),o=As(n,i,2),o!==null&&(Ug(i,o,n,e),jr(o,2),gi(o));break}}n=n.return}}function xd(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new t1;var f=new Set;o.set(n,f)}else f=o.get(n),f===void 0&&(f=new Set,o.set(n,f));f.has(i)||(dd=!0,f.add(i),e=s1.bind(null,e,n,i),n.then(e,e))}function s1(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Wt===e&&(Tt&i)===i&&(En===4||En===3&&(Tt&62914560)===Tt&&300>$n()-jc?(zt&2)===0&&ll(e,0):md|=i,sl===Tt&&(sl=0)),gi(e)}function zy(e,n){n===0&&(n=zo()),e=un(e,n),e!==null&&(jr(e,n),gi(e))}function o1(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),zy(e,i)}function l1(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),zy(e,i)}function u1(e,n){return Mt(e,n)}var Pc=null,cl=null,Ed=!1,Lc=!1,wd=!1,Vs=0;function gi(e){e!==cl&&e.next===null&&(cl===null?Pc=cl=e:cl=cl.next=e),Lc=!0,Ed||(Ed=!0,h1())}function du(e,n){if(!wd&&Lc){wd=!0;do for(var i=!1,o=Pc;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var w=o.suspendedLanes,C=o.pingedLanes;m=(1<<31-Be(42|e)+1)-1,m&=f&~(w&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Fy(o,m))}else m=Tt,m=ea(o,o===Wt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Er(o,m)||(i=!0,Fy(o,m));o=o.next}while(i);wd=!1}}function c1(){Uy()}function Uy(){Lc=Ed=!1;var e=0;Vs!==0&&x1()&&(e=Vs);for(var n=$n(),i=null,o=Pc;o!==null;){var f=o.next,m=By(o,n);m===0?(o.next=null,i===null?Pc=f:i.next=f,f===null&&(cl=i)):(i=o,(e!==0||(m&3)!==0)&&(Lc=!0)),o=f}Gn!==0&&Gn!==5||du(e),Vs!==0&&(Vs=0)}function By(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var w=31-Be(m),C=1<<w,z=f[w];z===-1?((C&i)===0||(C&o)!==0)&&(f[w]=Ul(C,n)):z<=n&&(e.expiredLanes|=C),m&=~C}if(n=Wt,i=Tt,i=ea(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&wn(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Er(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&wn(o),Dr(i)){case 2:case 8:i=Wr;break;case 32:i=ba;break;case 268435456:i=rs;break;default:i=ba}return o=qy.bind(null,e),i=Mt(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&wn(o),e.callbackPriority=2,e.callbackNode=null,2}function qy(e,n){if(Gn!==0&&Gn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(kc()&&e.callbackNode!==i)return null;var o=Tt;return o=ea(e,e===Wt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(wy(e,o,n),By(e,$n()),e.callbackNode!=null&&e.callbackNode===i?qy.bind(null,e):null)}function Fy(e,n){if(kc())return null;wy(e,n,!0)}function h1(){w1(function(){(zt&6)!==0?Mt(Jr,c1):Uy()})}function Td(){if(Vs===0){var e=Xo;e===0&&(e=Pe,Pe<<=1,(Pe&261888)===0&&(Pe=256)),Vs=e}return Vs}function Hy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:la(""+e)}function Ky(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function f1(e,n,i,o,f){if(n==="submit"&&i&&i.stateNode===f){var m=Hy((f[nn]||null).action),w=o.submitter;w&&(n=(n=w[nn]||null)?Hy(n.formAction):w.getAttribute("formAction"),n!==null&&(m=n,w=null));var C=new Sa("action","action",null,o,f);e.push({event:C,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Vs!==0){var z=w?Ky(f,w):new FormData(f);Hf(i,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(C.preventDefault(),z=w?Ky(f,w):new FormData(f),Hf(i,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var Sd=0;Sd<ze.length;Sd++){var Ad=ze[Sd],d1=Ad.toLowerCase(),m1=Ad[0].toUpperCase()+Ad.slice(1);De(d1,"on"+m1)}De(ue,"onAnimationEnd"),De(me,"onAnimationIteration"),De(be,"onAnimationStart"),De("dblclick","onDoubleClick"),De("focusin","onFocus"),De("focusout","onBlur"),De(we,"onTransitionRun"),De(Ie,"onTransitionStart"),De(Ue,"onTransitionCancel"),De(je,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Or("onBeforeInput",["compositionend","keypress","textInput","paste"]),Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function Gy(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],f=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var w=o.length-1;0<=w;w--){var C=o[w],z=C.instance,de=C.currentTarget;if(C=C.listener,z!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=de;try{m(f)}catch(xe){Fe(xe)}f.currentTarget=null,m=z}else for(w=0;w<o.length;w++){if(C=o[w],z=C.instance,de=C.currentTarget,C=C.listener,z!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=de;try{m(f)}catch(xe){Fe(xe)}f.currentTarget=null,m=z}}}}function wt(e,n){var i=n[qa];i===void 0&&(i=n[qa]=new Set);var o=e+"__bubble";i.has(o)||(Qy(n,e,2,!1),i.add(o))}function Nd(e,n,i){var o=0;n&&(o|=4),Qy(i,e,o,n)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Rd(e){if(!e[zc]){e[zc]=!0,Ea.forEach(function(i){i!=="selectionchange"&&(p1.has(i)||Nd(i,!1,e),Nd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[zc]||(n[zc]=!0,Nd("selectionchange",!1,n))}}function Qy(e,n,i,o){switch(Ev(n)){case 2:var f=F1;break;case 8:f=H1;break;default:f=Fd}i=f.bind(null,n,i,e),f=void 0,!Ci||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Cd(e,n,i,o,f){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var w=o.tag;if(w===3||w===4){var C=o.stateNode.containerInfo;if(C===f)break;if(w===4)for(w=o.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;C!==null;){if(w=Ir(C),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){o=m=w;continue e}C=C.parentNode}}o=o.return}Pr(function(){var de=m,xe=wr(i),Te=[];e:{var pe=Ve.get(e);if(pe!==void 0){var ye=Sa,Xe=e;switch(e){case"keypress":if(Ga(i)===0)break e;case"keydown":case"keyup":ye=Ii;break;case"focusin":Xe="focus",ye=Ra;break;case"focusout":Xe="blur",ye=Ra;break;case"beforeblur":case"afterblur":ye=Ra;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=x;break;case ue:case me:case be:ye=so;break;case je:ye=j;break;case"scroll":case"scrollend":ye=li;break;case"wheel":ye=ge;break;case"copy":case"cut":case"paste":ye=Xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Ca;break;case"toggle":case"beforetoggle":ye=lt}var rt=(n&4)!==0,Jt=!rt&&(e==="scroll"||e==="scrollend"),se=rt?pe!==null?pe+"Capture":null:pe;rt=[];for(var X=de,fe;X!==null;){var Ee=X;if(fe=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||fe===null||se===null||(Ee=Tr(X,se),Ee!=null&&rt.push(pu(X,Ee,fe))),Jt)break;X=X.return}0<rt.length&&(pe=new ye(pe,Xe,null,i,xe),Te.push({event:pe,listeners:rt}))}}if((n&7)===0){e:{if(pe=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",pe&&i!==kr&&(Xe=i.relatedTarget||i.fromElement)&&(Ir(Xe)||Xe[Kn]))break e;if((ye||pe)&&(pe=xe.window===xe?xe:(pe=xe.ownerDocument)?pe.defaultView||pe.parentWindow:window,ye?(Xe=i.relatedTarget||i.toElement,ye=de,Xe=Xe?Ir(Xe):null,Xe!==null&&(Jt=u(Xe),rt=Xe.tag,Xe!==Jt||rt!==5&&rt!==27&&rt!==6)&&(Xe=null)):(ye=null,Xe=de),ye!==Xe)){if(rt=ji,Ee="onMouseLeave",se="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(rt=Ca,Ee="onPointerLeave",se="onPointerEnter",X="pointer"),Jt=ye==null?pe:An(ye),fe=Xe==null?pe:An(Xe),pe=new rt(Ee,X+"leave",ye,i,xe),pe.target=Jt,pe.relatedTarget=fe,Ee=null,Ir(xe)===de&&(rt=new rt(se,X+"enter",Xe,i,xe),rt.target=fe,rt.relatedTarget=Jt,Ee=rt),Jt=Ee,ye&&Xe)t:{for(rt=g1,se=ye,X=Xe,fe=0,Ee=se;Ee;Ee=rt(Ee))fe++;Ee=0;for(var nt=X;nt;nt=rt(nt))Ee++;for(;0<fe-Ee;)se=rt(se),fe--;for(;0<Ee-fe;)X=rt(X),Ee--;for(;fe--;){if(se===X||X!==null&&se===X.alternate){rt=se;break t}se=rt(se),X=rt(X)}rt=null}else rt=null;ye!==null&&Yy(Te,pe,ye,rt,!1),Xe!==null&&Jt!==null&&Yy(Te,Jt,Xe,rt,!0)}}e:{if(pe=de?An(de):window,ye=pe.nodeName&&pe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&pe.type==="file")var kt=uo;else if(qo(pe))if(ja)kt=bs;else{kt=Mi;var Ze=nc}else ye=pe.nodeName,!ye||ye.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?de&&ls(de.elementType)&&(kt=uo):kt=Fl;if(kt&&(kt=kt(e,de))){ql(Te,kt,i,xe);break e}Ze&&Ze(e,pe,de),e==="focusout"&&de&&pe.type==="number"&&de.memoizedProps.value!=null&&Ri(pe,"number",pe.value)}switch(Ze=de?An(de):window,e){case"focusin":(qo(Ze)||Ze.contentEditable==="true")&&(P=Ze,H=de,K=null);break;case"focusout":K=H=P=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,q(Te,i,xe);break;case"selectionchange":if(D)break;case"keydown":case"keyup":q(Te,i,xe)}var yt;if(Ct)e:{switch(e){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Oi?hi(e,i)&&(St="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(St="onCompositionStart");St&&(qr&&i.locale!=="ko"&&(Oi||St!=="onCompositionStart"?St==="onCompositionEnd"&&Oi&&(yt=Ka()):(Lr=xe,us="value"in Lr?Lr.value:Lr.textContent,Oi=!0)),Ze=Uc(de,St),0<Ze.length&&(St=new zr(St,e,null,i,xe),Te.push({event:St,listeners:Ze}),yt?St.data=yt:(yt=gs(i),yt!==null&&(St.data=yt)))),(yt=Br?Wu(e,i):lf(e,i))&&(St=Uc(de,"onBeforeInput"),0<St.length&&(Ze=new zr("onBeforeInput","beforeinput",null,i,xe),Te.push({event:Ze,listeners:St}),Ze.data=yt)),f1(Te,e,de,i,xe)}Gy(Te,n)})}function pu(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Uc(e,n){for(var i=n+"Capture",o=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Tr(e,i),f!=null&&o.unshift(pu(e,f,m)),f=Tr(e,n),f!=null&&o.push(pu(e,f,m))),e.tag===3)return o;e=e.return}return[]}function g1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Yy(e,n,i,o,f){for(var m=n._reactName,w=[];i!==null&&i!==o;){var C=i,z=C.alternate,de=C.stateNode;if(C=C.tag,z!==null&&z===o)break;C!==5&&C!==26&&C!==27||de===null||(z=de,f?(de=Tr(i,m),de!=null&&w.unshift(pu(i,de,z))):f||(de=Tr(i,m),de!=null&&w.push(pu(i,de,z)))),i=i.return}w.length!==0&&e.push({event:n,listeners:w})}var y1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function Xy(e){return(typeof e=="string"?e:""+e).replace(y1,`
`).replace(v1,"")}function $y(e,n){return n=Xy(n),Xy(e)===n}function Zt(e,n,i,o,f,m){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||sr(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&sr(e,""+o);break;case"className":pr(e,"class",o);break;case"tabIndex":pr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(e,i,o);break;case"style":os(e,o,m);break;case"data":if(n!=="object"){pr(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=la(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(n!=="input"&&Zt(e,n,"name",f.name,f,null),Zt(e,n,"formEncType",f.formEncType,f,null),Zt(e,n,"formMethod",f.formMethod,f,null),Zt(e,n,"formTarget",f.formTarget,f,null)):(Zt(e,n,"encType",f.encType,f,null),Zt(e,n,"method",f.method,f,null),Zt(e,n,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=la(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=gr);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=la(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":wt("beforetoggle",e),wt("toggle",e),dt(e,"popover",o);break;case"xlinkActuate":pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":pn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":pn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":pn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":pn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":dt(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Bo.get(i)||i,dt(e,i,o))}}function jd(e,n,i,o,f,m){switch(i){case"style":os(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?sr(e,o):(typeof o=="number"||typeof o=="bigint")&&sr(e,""+o);break;case"onScroll":o!=null&&wt("scroll",e);break;case"onScrollEnd":o!=null&&wt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ii.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),m=e[nn]||null,m=m!=null?m[i]:null,typeof m=="function"&&e.removeEventListener(n,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,f);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):dt(e,i,o)}}}function cr(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var o=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var w=i[m];if(w!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,m,w,i,null)}}f&&Zt(e,n,"srcSet",i.srcSet,i,null),o&&Zt(e,n,"src",i.src,i,null);return;case"input":wt("invalid",e);var C=m=w=f=null,z=null,de=null;for(o in i)if(i.hasOwnProperty(o)){var xe=i[o];if(xe!=null)switch(o){case"name":f=xe;break;case"type":w=xe;break;case"checked":z=xe;break;case"defaultChecked":de=xe;break;case"value":m=xe;break;case"defaultValue":C=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(s(137,n));break;default:Zt(e,n,o,xe,i,null)}}ss(e,m,C,z,de,w,f,!1);return;case"select":wt("invalid",e),o=w=m=null;for(f in i)if(i.hasOwnProperty(f)&&(C=i[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":w=C;break;case"multiple":o=C;default:Zt(e,n,f,C,i,null)}n=m,i=w,e.multiple=!!o,n!=null?sa(e,!!o,n,!1):i!=null&&sa(e,!!o,i,!0);return;case"textarea":wt("invalid",e),m=f=o=null;for(w in i)if(i.hasOwnProperty(w)&&(C=i[w],C!=null))switch(w){case"value":o=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Zt(e,n,w,C,i,null)}oa(e,o,f,m);return;case"option":for(z in i)if(i.hasOwnProperty(z)&&(o=i[z],o!=null))switch(z){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Zt(e,n,z,o,i,null)}return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(o=0;o<mu.length;o++)wt(mu[o],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in i)if(i.hasOwnProperty(de)&&(o=i[de],o!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,de,o,i,null)}return;default:if(ls(n)){for(xe in i)i.hasOwnProperty(xe)&&(o=i[xe],o!==void 0&&jd(e,n,xe,o,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(o=i[C],o!=null&&Zt(e,n,C,o,i,null))}function b1(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,C=null,z=null,de=null,xe=null;for(ye in i){var Te=i[ye];if(i.hasOwnProperty(ye)&&Te!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":z=Te;default:o.hasOwnProperty(ye)||Zt(e,n,ye,null,o,Te)}}for(var pe in o){var ye=o[pe];if(Te=i[pe],o.hasOwnProperty(pe)&&(ye!=null||Te!=null))switch(pe){case"type":m=ye;break;case"name":f=ye;break;case"checked":de=ye;break;case"defaultChecked":xe=ye;break;case"value":w=ye;break;case"defaultValue":C=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(s(137,n));break;default:ye!==Te&&Zt(e,n,pe,ye,o,Te)}}ia(e,w,C,z,de,xe,m,f);return;case"select":ye=w=C=pe=null;for(m in i)if(z=i[m],i.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":ye=z;default:o.hasOwnProperty(m)||Zt(e,n,m,null,o,z)}for(f in o)if(m=o[f],z=i[f],o.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":pe=m;break;case"defaultValue":C=m;break;case"multiple":w=m;default:m!==z&&Zt(e,n,f,m,o,z)}n=C,i=w,o=ye,pe!=null?sa(e,!!i,pe,!1):!!o!=!!i&&(n!=null?sa(e,!!i,n,!0):sa(e,!!i,i?[]:"",!1));return;case"textarea":ye=pe=null;for(C in i)if(f=i[C],i.hasOwnProperty(C)&&f!=null&&!o.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Zt(e,n,C,null,o,f)}for(w in o)if(f=o[w],m=i[w],o.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":pe=f;break;case"defaultValue":ye=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Zt(e,n,w,f,o,m)}ao(e,pe,ye);return;case"option":for(var Xe in i)if(pe=i[Xe],i.hasOwnProperty(Xe)&&pe!=null&&!o.hasOwnProperty(Xe))switch(Xe){case"selected":e.selected=!1;break;default:Zt(e,n,Xe,null,o,pe)}for(z in o)if(pe=o[z],ye=i[z],o.hasOwnProperty(z)&&pe!==ye&&(pe!=null||ye!=null))switch(z){case"selected":e.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Zt(e,n,z,pe,o,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in i)pe=i[rt],i.hasOwnProperty(rt)&&pe!=null&&!o.hasOwnProperty(rt)&&Zt(e,n,rt,null,o,pe);for(de in o)if(pe=o[de],ye=i[de],o.hasOwnProperty(de)&&pe!==ye&&(pe!=null||ye!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,n));break;default:Zt(e,n,de,pe,o,ye)}return;default:if(ls(n)){for(var Jt in i)pe=i[Jt],i.hasOwnProperty(Jt)&&pe!==void 0&&!o.hasOwnProperty(Jt)&&jd(e,n,Jt,void 0,o,pe);for(xe in o)pe=o[xe],ye=i[xe],!o.hasOwnProperty(xe)||pe===ye||pe===void 0&&ye===void 0||jd(e,n,xe,pe,o,ye);return}}for(var se in i)pe=i[se],i.hasOwnProperty(se)&&pe!=null&&!o.hasOwnProperty(se)&&Zt(e,n,se,null,o,pe);for(Te in o)pe=o[Te],ye=i[Te],!o.hasOwnProperty(Te)||pe===ye||pe==null&&ye==null||Zt(e,n,Te,pe,o,ye)}function Zy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var f=i[o],m=f.transferSize,w=f.initiatorType,C=f.duration;if(m&&C&&Zy(w)){for(w=0,C=f.responseEnd,o+=1;o<i.length;o++){var z=i[o],de=z.startTime;if(de>C)break;var xe=z.transferSize,Te=z.initiatorType;xe&&Zy(Te)&&(z=z.responseEnd,w+=xe*(z<C?1:(C-de)/(z-de)))}if(--o,n+=8*(m+w)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Dd=null,Id=null;function Bc(e){return e.nodeType===9?e:e.ownerDocument}function Jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Md=null;function x1(){var e=window.event;return e&&e.type==="popstate"?e===Md?!1:(Md=e,!0):(Md=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,E1=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,w1=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(e){return tv.resolve(null).then(e).catch(T1)}:ev;function T1(e){setTimeout(function(){throw e})}function ks(e){return e==="head"}function nv(e,n){var i=n,o=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(f),ml(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")gu(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,gu(i);for(var m=i.firstChild;m;){var w=m.nextSibling,C=m.nodeName;m[Zn]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=w}}else i==="body"&&gu(e.ownerDocument.body);i=f}while(i);ml(n)}function rv(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Vd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Vd(i),Ni(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function S1(e,n,i,o){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Zn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=ka(e.nextSibling),e===null)break}return null}function A1(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ka(e.nextSibling),e===null))return null;return e}function av(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ka(e.nextSibling),e===null))return null;return e}function kd(e){return e.data==="$?"||e.data==="$~"}function Pd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function N1(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ka(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Ld=null;function iv(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return ka(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function sv(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function ov(e,n,i){switch(n=Bc(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function gu(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ni(e)}var Pa=new Map,lv=new Set;function qc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xi=Ne.d;Ne.d={f:R1,r:C1,D:j1,C:D1,L:I1,m:O1,X:V1,S:M1,M:k1};function R1(){var e=Xi.f(),n=Oc();return e||n}function C1(e){var n=Dt(e);n!==null&&n.tag===5&&n.type==="form"?Sg(n):Xi.r(e)}var hl=typeof document>"u"?null:document;function uv(e,n,i){var o=hl;if(o&&typeof n=="string"&&n){var f=Vn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),lv.has(f)||(lv.add(f),e={rel:e,crossOrigin:i,href:n},o.querySelector(f)===null&&(n=o.createElement("link"),cr(n,"link",e),mn(n),o.head.appendChild(n)))}}function j1(e){Xi.D(e),uv("dns-prefetch",e,null)}function D1(e,n){Xi.C(e,n),uv("preconnect",e,n)}function I1(e,n,i){Xi.L(e,n,i);var o=hl;if(o&&e&&n){var f='link[rel="preload"][as="'+Vn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Vn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Vn(i.imageSizes)+'"]')):f+='[href="'+Vn(e)+'"]';var m=f;switch(n){case"style":m=fl(e);break;case"script":m=dl(e)}Pa.has(m)||(e=N({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Pa.set(m,e),o.querySelector(f)!==null||n==="style"&&o.querySelector(yu(m))||n==="script"&&o.querySelector(vu(m))||(n=o.createElement("link"),cr(n,"link",e),mn(n),o.head.appendChild(n)))}}function O1(e,n){Xi.m(e,n);var i=hl;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Vn(o)+'"][href="'+Vn(e)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=dl(e)}if(!Pa.has(m)&&(e=N({rel:"modulepreload",href:e},n),Pa.set(m,e),i.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(vu(m)))return}o=i.createElement("link"),cr(o,"link",e),mn(o),i.head.appendChild(o)}}}function M1(e,n,i){Xi.S(e,n,i);var o=hl;if(o&&e){var f=Mn(o).hoistableStyles,m=fl(e);n=n||"default";var w=f.get(m);if(!w){var C={loading:0,preload:null};if(w=o.querySelector(yu(m)))C.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Pa.get(m))&&zd(e,i);var z=w=o.createElement("link");mn(z),cr(z,"link",e),z._p=new Promise(function(de,xe){z.onload=de,z.onerror=xe}),z.addEventListener("load",function(){C.loading|=1}),z.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Fc(w,n,o)}w={type:"stylesheet",instance:w,count:1,state:C},f.set(m,w)}}}function V1(e,n){Xi.X(e,n);var i=hl;if(i&&e){var o=Mn(i).hoistableScripts,f=dl(e),m=o.get(f);m||(m=i.querySelector(vu(f)),m||(e=N({src:e,async:!0},n),(n=Pa.get(f))&&Ud(e,n),m=i.createElement("script"),mn(m),cr(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function k1(e,n){Xi.M(e,n);var i=hl;if(i&&e){var o=Mn(i).hoistableScripts,f=dl(e),m=o.get(f);m||(m=i.querySelector(vu(f)),m||(e=N({src:e,async:!0,type:"module"},n),(n=Pa.get(f))&&Ud(e,n),m=i.createElement("script"),mn(m),cr(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function cv(e,n,i,o){var f=(f=Je.current)?qc(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=fl(i.href),i=Mn(f).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=fl(i.href);var m=Mn(f).hoistableStyles,w=m.get(e);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,w),(m=f.querySelector(yu(e)))&&!m._p&&(w.instance=m,w.state.loading=5),Pa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Pa.set(e,i),m||P1(f,e,i,w.state))),n&&o===null)throw Error(s(528,""));return w}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=dl(i),i=Mn(f).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function fl(e){return'href="'+Vn(e)+'"'}function yu(e){return'link[rel="stylesheet"]['+e+"]"}function hv(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function P1(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),cr(n,"link",i),mn(n),e.head.appendChild(n))}function dl(e){return'[src="'+Vn(e)+'"]'}function vu(e){return"script[async]"+e}function fv(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Vn(i.href)+'"]');if(o)return n.instance=o,mn(o),o;var f=N({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),mn(o),cr(o,"style",f),Fc(o,i.precedence,e),n.instance=o;case"stylesheet":f=fl(i.href);var m=e.querySelector(yu(f));if(m)return n.state.loading|=4,n.instance=m,mn(m),m;o=hv(i),(f=Pa.get(f))&&zd(o,f),m=(e.ownerDocument||e).createElement("link"),mn(m);var w=m;return w._p=new Promise(function(C,z){w.onload=C,w.onerror=z}),cr(m,"link",o),n.state.loading|=4,Fc(m,i.precedence,e),n.instance=m;case"script":return m=dl(i.src),(f=e.querySelector(vu(m)))?(n.instance=f,mn(f),f):(o=i,(f=Pa.get(m))&&(o=N({},i),Ud(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),mn(f),cr(f,"link",o),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Fc(o,i.precedence,e));return n.instance}function Fc(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,w=0;w<o.length;w++){var C=o[w];if(C.dataset.precedence===n)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function zd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Hc=null;function dv(e,n,i){if(Hc===null){var o=new Map,f=Hc=new Map;f.set(i,o)}else f=Hc,o=f.get(i),o||(o=new Map,f.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var m=i[f];if(!(m[Zn]||m[Kt]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(n)||"";w=e+w;var C=o.get(w);C?C.push(m):o.set(w,[m])}}return o}function mv(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function L1(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function pv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function z1(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=fl(o.href),m=n.querySelector(yu(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Kc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=m,mn(m);return}m=n.ownerDocument||n,o=hv(o),(f=Pa.get(f))&&zd(o,f),m=m.createElement("link"),mn(m);var w=m;w._p=new Promise(function(C,z){w.onload=C,w.onerror=z}),cr(m,"link",o),i.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Kc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Bd=0;function U1(e,n){return e.stylesheets&&e.count===0&&Qc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Bd===0&&(Bd=62500*_1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qc(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Bd?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Gc=null;function Qc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Gc=new Map,n.forEach(B1,e),Gc=null,Kc.call(e))}function B1(e,n){if(!(n.state.loading&4)){var i=Gc.get(e);if(i)var o=i.get(null);else{i=new Map,Gc.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),o=w)}o&&i.set(null,o)}f=n.instance,w=f.getAttribute("data-precedence"),m=i.get(w)||o,m===o&&i.set(null,f),i.set(w,f),this.count++,o=Kc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var bu={$$typeof:he,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function q1(e,n,i,o,f,m,w,C,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ir(0),this.hiddenUpdates=ir(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function gv(e,n,i,o,f,m,w,C,z,de,xe,Te){return e=new q1(e,n,i,w,z,de,xe,Te,C),n=1,m===!0&&(n|=24),m=fa(3,null,null,n),e.current=m,m.stateNode=e,n=_f(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:i,cache:n},Tf(m),e}function yv(e){return e?(e=Fr,e):Fr}function vv(e,n,i,o,f,m){f=yv(f),o.context===null?o.context=f:o.pendingContext=f,o=Ss(n),o.payload={element:i},m=m===void 0?null:m,m!==null&&(o.callback=m),i=As(e,o,n),i!==null&&(Yr(i,e,n),Zl(i,e,n))}function bv(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function qd(e,n){bv(e,n),(e=e.alternate)&&bv(e,n)}function _v(e){if(e.tag===13||e.tag===31){var n=un(e,67108864);n!==null&&Yr(n,e,67108864),qd(e,67108864)}}function xv(e){if(e.tag===13||e.tag===31){var n=ya();n=Si(n);var i=un(e,n);i!==null&&Yr(i,e,n),qd(e,n)}}var Yc=!0;function F1(e,n,i,o){var f=J.T;J.T=null;var m=Ne.p;try{Ne.p=2,Fd(e,n,i,o)}finally{Ne.p=m,J.T=f}}function H1(e,n,i,o){var f=J.T;J.T=null;var m=Ne.p;try{Ne.p=8,Fd(e,n,i,o)}finally{Ne.p=m,J.T=f}}function Fd(e,n,i,o){if(Yc){var f=Hd(o);if(f===null)Cd(e,n,o,Xc,i),wv(e,o);else if(G1(f,e,n,i,o))o.stopPropagation();else if(wv(e,o),n&4&&-1<K1.indexOf(e)){for(;f!==null;){var m=Dt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Cr(m.pendingLanes);if(w!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var z=1<<31-Be(w);C.entanglements[1]|=z,w&=~z}gi(m),(zt&6)===0&&(Dc=$n()+500,du(0))}}break;case 31:case 13:C=un(m,2),C!==null&&Yr(C,m,2),Oc(),qd(m,2)}if(m=Hd(o),m===null&&Cd(e,n,o,Xc,i),m===f)break;f=m}f!==null&&o.stopPropagation()}else Cd(e,n,o,null,i)}}function Hd(e){return e=wr(e),Kd(e)}var Xc=null;function Kd(e){if(Xc=null,e=Ir(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=p(n),e!==null)return e;e=null}else if(i===31){if(e=_(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Xc=e,null}function Ev(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case Jr:return 2;case Wr:return 8;case ba:case Ei:return 32;case rs:return 268435456;default:return 32}default:return 32}}var Gd=!1,Ps=null,Ls=null,zs=null,_u=new Map,xu=new Map,Us=[],K1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(e,n){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":_u.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(n.pointerId)}}function Eu(e,n,i,o,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},n!==null&&(n=Dt(n),n!==null&&_v(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function G1(e,n,i,o,f){switch(n){case"focusin":return Ps=Eu(Ps,e,n,i,o,f),!0;case"dragenter":return Ls=Eu(Ls,e,n,i,o,f),!0;case"mouseover":return zs=Eu(zs,e,n,i,o,f),!0;case"pointerover":var m=f.pointerId;return _u.set(m,Eu(_u.get(m)||null,e,n,i,o,f)),!0;case"gotpointercapture":return m=f.pointerId,xu.set(m,Eu(xu.get(m)||null,e,n,i,o,f)),!0}return!1}function Tv(e){var n=Ir(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=p(i),n!==null){e.blockedOn=n,mr(e.priority,function(){xv(i)});return}}else if(n===31){if(n=_(i),n!==null){e.blockedOn=n,mr(e.priority,function(){xv(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $c(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Hd(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);kr=o,i.target.dispatchEvent(o),kr=null}else return n=Dt(i),n!==null&&_v(n),e.blockedOn=i,!1;n.shift()}return!0}function Sv(e,n,i){$c(e)&&i.delete(n)}function Q1(){Gd=!1,Ps!==null&&$c(Ps)&&(Ps=null),Ls!==null&&$c(Ls)&&(Ls=null),zs!==null&&$c(zs)&&(zs=null),_u.forEach(Sv),xu.forEach(Sv)}function Zc(e,n){e.blockedOn===n&&(e.blockedOn=null,Gd||(Gd=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Q1)))}var Jc=null;function Av(e){Jc!==e&&(Jc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jc===e&&(Jc=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],f=e[n+2];if(typeof o!="function"){if(Kd(o||i)===null)continue;break}var m=Dt(i);m!==null&&(e.splice(n,3),n-=3,Hf(m,{pending:!0,data:f,method:i.method,action:o},o,f))}}))}function ml(e){function n(z){return Zc(z,e)}Ps!==null&&Zc(Ps,e),Ls!==null&&Zc(Ls,e),zs!==null&&Zc(zs,e),_u.forEach(n),xu.forEach(n);for(var i=0;i<Us.length;i++){var o=Us[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Us.length&&(i=Us[0],i.blockedOn===null);)Tv(i),i.blockedOn===null&&Us.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var f=i[o],m=i[o+1],w=f[nn]||null;if(typeof m=="function")w||Av(i);else if(w){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[nn]||null)C=w.formAction;else if(Kd(f)!==null)continue}else C=w.action;typeof C=="function"?i[o+1]=C:(i.splice(o,3),o-=3),Av(i)}}}function Nv(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Qd(e){this._internalRoot=e}Wc.prototype.render=Qd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,o=ya();vv(i,o,e,n,null,null)},Wc.prototype.unmount=Qd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;vv(e.current,2,null,e,null,null),Oc(),n[Kn]=null}};function Wc(e){this._internalRoot=e}Wc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ai();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Us.length&&n!==0&&n<Us[i].priority;i++);Us.splice(i,0,e),i===0&&Tv(e)}};var Rv=t.version;if(Rv!=="19.2.0")throw Error(s(527,Rv,"19.2.0"));Ne.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=v(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var Y1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{dr=eh.inject(Y1),Tn=eh}catch{}}return Tu.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,o="",f=Vg,m=kg,w=Pg;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError)),n=gv(e,1,!1,null,null,i,o,null,f,m,w,Nv),e[Kn]=n.current,Rd(e),new Qd(n)},Tu.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var o=!1,f="",m=Vg,w=kg,C=Pg,z=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(z=i.formState)),n=gv(e,1,!0,n,i??null,o,f,z,m,w,C,Nv),n.context=yv(null),i=n.current,o=ya(),o=Si(o),f=Ss(o),f.callback=null,As(i,f,o),i=o,n.current.lanes=i,jr(n,i),gi(n),e[Kn]=n.current,Rd(e),new Wc(n)},Tu.version="19.2.0",Tu}var Lv;function iE(){if(Lv)return $d.exports;Lv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),$d.exports=aE(),$d.exports}var sE=iE();const oE=km(sE);var zv="popstate";function lE(a={}){function t(s,l){let{pathname:u,search:p,hash:_}=s.location;return hm("",{pathname:u,search:p,hash:_},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:Vu(l)}return cE(t,r,null,a)}function hn(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function za(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uE(){return Math.random().toString(36).substring(2,10)}function Uv(a,t){return{usr:a.state,key:a.key,idx:t}}function hm(a,t,r=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?jl(t):t,state:r,key:t&&t.key||s||uE()}}function Vu({pathname:a="/",search:t="",hash:r=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function jl(a){let t={};if(a){let r=a.indexOf("#");r>=0&&(t.hash=a.substring(r),a=a.substring(0,r));let s=a.indexOf("?");s>=0&&(t.search=a.substring(s),a=a.substring(0,s)),a&&(t.pathname=a)}return t}function cE(a,t,r,s={}){let{window:l=document.defaultView,v5Compat:u=!1}=s,p=l.history,_="POP",b=null,v=A();v==null&&(v=0,p.replaceState({...p.state,idx:v},""));function A(){return(p.state||{idx:null}).idx}function N(){_="POP";let U=A(),Q=U==null?null:U-v;v=U,b&&b({action:_,location:oe.location,delta:Q})}function I(U,Q){_="PUSH";let Z=hm(oe.location,U,Q);v=A()+1;let he=Uv(Z,v),_e=oe.createHref(Z);try{p.pushState(he,"",_e)}catch(ke){if(ke instanceof DOMException&&ke.name==="DataCloneError")throw ke;l.location.assign(_e)}u&&b&&b({action:_,location:oe.location,delta:1})}function $(U,Q){_="REPLACE";let Z=hm(oe.location,U,Q);v=A();let he=Uv(Z,v),_e=oe.createHref(Z);p.replaceState(he,"",_e),u&&b&&b({action:_,location:oe.location,delta:0})}function ce(U){return hE(U)}let oe={get action(){return _},get location(){return a(l,p)},listen(U){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(zv,N),b=U,()=>{l.removeEventListener(zv,N),b=null}},createHref(U){return t(l,U)},createURL:ce,encodeLocation(U){let Q=ce(U);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:I,replace:$,go(U){return p.go(U)}};return oe}function hE(a,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),hn(r,"No window.location.(origin|href) available to create URL");let s=typeof a=="string"?a:Vu(a);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function db(a,t,r="/"){return fE(a,t,r,!1)}function fE(a,t,r,s){let l=typeof t=="string"?jl(t):t,u=Ji(l.pathname||"/",r);if(u==null)return null;let p=mb(a);dE(p);let _=null;for(let b=0;_==null&&b<p.length;++b){let v=TE(u);_=EE(p[b],v,s)}return _}function mb(a,t=[],r=[],s="",l=!1){let u=(p,_,b=l,v)=>{let A={relativePath:v===void 0?p.path||"":v,caseSensitive:p.caseSensitive===!0,childrenIndex:_,route:p};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(s)&&b)return;hn(A.relativePath.startsWith(s),`Absolute route path "${A.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(s.length)}let N=$i([s,A.relativePath]),I=r.concat(A);p.children&&p.children.length>0&&(hn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),mb(p.children,t,I,N,b)),!(p.path==null&&!p.index)&&t.push({path:N,score:_E(N,p.index),routesMeta:I})};return a.forEach((p,_)=>{if(p.path===""||!p.path?.includes("?"))u(p,_);else for(let b of pb(p.path))u(p,_,!0,b)}),t}function pb(a){let t=a.split("/");if(t.length===0)return[];let[r,...s]=t,l=r.endsWith("?"),u=r.replace(/\?$/,"");if(s.length===0)return l?[u,""]:[u];let p=pb(s.join("/")),_=[];return _.push(...p.map(b=>b===""?u:[u,b].join("/"))),l&&_.push(...p),_.map(b=>a.startsWith("/")&&b===""?"/":b)}function dE(a){a.sort((t,r)=>t.score!==r.score?r.score-t.score:xE(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var mE=/^:[\w-]+$/,pE=3,gE=2,yE=1,vE=10,bE=-2,Bv=a=>a==="*";function _E(a,t){let r=a.split("/"),s=r.length;return r.some(Bv)&&(s+=bE),t&&(s+=gE),r.filter(l=>!Bv(l)).reduce((l,u)=>l+(mE.test(u)?pE:u===""?yE:vE),s)}function xE(a,t){return a.length===t.length&&a.slice(0,-1).every((s,l)=>s===t[l])?a[a.length-1]-t[t.length-1]:0}function EE(a,t,r=!1){let{routesMeta:s}=a,l={},u="/",p=[];for(let _=0;_<s.length;++_){let b=s[_],v=_===s.length-1,A=u==="/"?t:t.slice(u.length)||"/",N=yh({path:b.relativePath,caseSensitive:b.caseSensitive,end:v},A),I=b.route;if(!N&&v&&r&&!s[s.length-1].route.index&&(N=yh({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},A)),!N)return null;Object.assign(l,N.params),p.push({params:l,pathname:$i([u,N.pathname]),pathnameBase:CE($i([u,N.pathnameBase])),route:I}),N.pathnameBase!=="/"&&(u=$i([u,N.pathnameBase]))}return p}function yh(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,s]=wE(a.path,a.caseSensitive,a.end),l=t.match(r);if(!l)return null;let u=l[0],p=u.replace(/(.)\/+$/,"$1"),_=l.slice(1);return{params:s.reduce((v,{paramName:A,isOptional:N},I)=>{if(A==="*"){let ce=_[I]||"";p=u.slice(0,u.length-ce.length).replace(/(.)\/+$/,"$1")}const $=_[I];return N&&!$?v[A]=void 0:v[A]=($||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:p,pattern:a}}function wE(a,t=!1,r=!0){za(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,_,b)=>(s.push({paramName:_,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(s.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function TE(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return za(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function Ji(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=a.charAt(r);return s&&s!=="/"?null:a.slice(r)||"/"}var SE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AE=a=>SE.test(a);function NE(a,t="/"){let{pathname:r,search:s="",hash:l=""}=typeof a=="string"?jl(a):a,u;if(r)if(AE(r))u=r;else{if(r.includes("//")){let p=r;r=r.replace(/\/\/+/g,"/"),za(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${r}`)}r.startsWith("/")?u=qv(r.substring(1),"/"):u=qv(r,t)}else u=t;return{pathname:u,search:jE(s),hash:DE(l)}}function qv(a,t){let r=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function em(a,t,r,s){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RE(a){return a.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Pm(a){let t=RE(a);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function Lm(a,t,r,s=!1){let l;typeof a=="string"?l=jl(a):(l={...a},hn(!l.pathname||!l.pathname.includes("?"),em("?","pathname","search",l)),hn(!l.pathname||!l.pathname.includes("#"),em("#","pathname","hash",l)),hn(!l.search||!l.search.includes("#"),em("#","search","hash",l)));let u=a===""||l.pathname==="",p=u?"/":l.pathname,_;if(p==null)_=r;else{let N=t.length-1;if(!s&&p.startsWith("..")){let I=p.split("/");for(;I[0]==="..";)I.shift(),N-=1;l.pathname=I.join("/")}_=N>=0?t[N]:"/"}let b=NE(l,_),v=p&&p!=="/"&&p.endsWith("/"),A=(u||p===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(v||A)&&(b.pathname+="/"),b}var $i=a=>a.join("/").replace(/\/\/+/g,"/"),CE=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),jE=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,DE=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function IE(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gb=["POST","PUT","PATCH","DELETE"];new Set(gb);var OE=["GET",...gb];new Set(OE);var Dl=ie.createContext(null);Dl.displayName="DataRouter";var Ph=ie.createContext(null);Ph.displayName="DataRouterState";ie.createContext(!1);var yb=ie.createContext({isTransitioning:!1});yb.displayName="ViewTransition";var ME=ie.createContext(new Map);ME.displayName="Fetchers";var VE=ie.createContext(null);VE.displayName="Await";var ni=ie.createContext(null);ni.displayName="Navigation";var Hu=ie.createContext(null);Hu.displayName="Location";var Ua=ie.createContext({outlet:null,matches:[],isDataRoute:!1});Ua.displayName="Route";var zm=ie.createContext(null);zm.displayName="RouteError";function kE(a,{relative:t}={}){hn(Il(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=ie.useContext(ni),{hash:l,pathname:u,search:p}=Ku(a,{relative:t}),_=u;return r!=="/"&&(_=u==="/"?r:$i([r,u])),s.createHref({pathname:_,search:p,hash:l})}function Il(){return ie.useContext(Hu)!=null}function ns(){return hn(Il(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(Hu).location}var vb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bb(a){ie.useContext(ni).static||ie.useLayoutEffect(a)}function Ol(){let{isDataRoute:a}=ie.useContext(Ua);return a?JE():PE()}function PE(){hn(Il(),"useNavigate() may be used only in the context of a <Router> component.");let a=ie.useContext(Dl),{basename:t,navigator:r}=ie.useContext(ni),{matches:s}=ie.useContext(Ua),{pathname:l}=ns(),u=JSON.stringify(Pm(s)),p=ie.useRef(!1);return bb(()=>{p.current=!0}),ie.useCallback((b,v={})=>{if(za(p.current,vb),!p.current)return;if(typeof b=="number"){r.go(b);return}let A=Lm(b,JSON.parse(u),l,v.relative==="path");a==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:$i([t,A.pathname])),(v.replace?r.replace:r.push)(A,v.state,v)},[t,r,u,l,a])}var LE=ie.createContext(null);function zE(a){let t=ie.useContext(Ua).outlet;return ie.useMemo(()=>t&&ie.createElement(LE.Provider,{value:a},t),[t,a])}function UE(){let{matches:a}=ie.useContext(Ua),t=a[a.length-1];return t?t.params:{}}function Ku(a,{relative:t}={}){let{matches:r}=ie.useContext(Ua),{pathname:s}=ns(),l=JSON.stringify(Pm(r));return ie.useMemo(()=>Lm(a,JSON.parse(l),s,t==="path"),[a,l,s,t])}function BE(a,t){return _b(a,t)}function _b(a,t,r,s,l){hn(Il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=ie.useContext(ni),{matches:p}=ie.useContext(Ua),_=p[p.length-1],b=_?_.params:{},v=_?_.pathname:"/",A=_?_.pathnameBase:"/",N=_&&_.route;{let Z=N&&N.path||"";xb(v,!N||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let I=ns(),$;if(t){let Z=typeof t=="string"?jl(t):t;hn(A==="/"||Z.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),$=Z}else $=I;let ce=$.pathname||"/",oe=ce;if(A!=="/"){let Z=A.replace(/^\//,"").split("/");oe="/"+ce.replace(/^\//,"").split("/").slice(Z.length).join("/")}let U=db(a,{pathname:oe});za(N||U!=null,`No routes matched location "${$.pathname}${$.search}${$.hash}" `),za(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${$.pathname}${$.search}${$.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=GE(U&&U.map(Z=>Object.assign({},Z,{params:Object.assign({},b,Z.params),pathname:$i([A,u.encodeLocation?u.encodeLocation(Z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?A:$i([A,u.encodeLocation?u.encodeLocation(Z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathnameBase])})),p,r,s,l);return t&&Q?ie.createElement(Hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...$},navigationType:"POP"}},Q):Q}function qE(){let a=ZE(),t=IE(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",a),p=ie.createElement(ie.Fragment,null,ie.createElement("p",null," Hey developer "),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:u},"ErrorBoundary")," or"," ",ie.createElement("code",{style:u},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},t),r?ie.createElement("pre",{style:l},r):null,p)}var FE=ie.createElement(qE,null),HE=class extends ie.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){this.props.onError?this.props.onError(a,t):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?ie.createElement(Ua.Provider,{value:this.props.routeContext},ie.createElement(zm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KE({routeContext:a,match:t,children:r}){let s=ie.useContext(Dl);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),ie.createElement(Ua.Provider,{value:a},r)}function GE(a,t=[],r=null,s=null,l=null){if(a==null){if(!r)return null;if(r.errors)a=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let u=a,p=r?.errors;if(p!=null){let A=u.findIndex(N=>N.route.id&&p?.[N.route.id]!==void 0);hn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),u=u.slice(0,Math.min(u.length,A+1))}let _=!1,b=-1;if(r)for(let A=0;A<u.length;A++){let N=u[A];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(b=A),N.route.id){let{loaderData:I,errors:$}=r,ce=N.route.loader&&!I.hasOwnProperty(N.route.id)&&(!$||$[N.route.id]===void 0);if(N.route.lazy||ce){_=!0,b>=0?u=u.slice(0,b+1):u=[u[0]];break}}}let v=r&&s?(A,N)=>{s(A,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:N})}:void 0;return u.reduceRight((A,N,I)=>{let $,ce=!1,oe=null,U=null;r&&($=p&&N.route.id?p[N.route.id]:void 0,oe=N.route.errorElement||FE,_&&(b<0&&I===0?(xb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ce=!0,U=null):b===I&&(ce=!0,U=N.route.hydrateFallbackElement||null)));let Q=t.concat(u.slice(0,I+1)),Z=()=>{let he;return $?he=oe:ce?he=U:N.route.Component?he=ie.createElement(N.route.Component,null):N.route.element?he=N.route.element:he=A,ie.createElement(KE,{match:N,routeContext:{outlet:A,matches:Q,isDataRoute:r!=null},children:he})};return r&&(N.route.ErrorBoundary||N.route.errorElement||I===0)?ie.createElement(HE,{location:r.location,revalidation:r.revalidation,component:oe,error:$,children:Z(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:v}):Z()},null)}function Um(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QE(a){let t=ie.useContext(Dl);return hn(t,Um(a)),t}function YE(a){let t=ie.useContext(Ph);return hn(t,Um(a)),t}function XE(a){let t=ie.useContext(Ua);return hn(t,Um(a)),t}function Bm(a){let t=XE(a),r=t.matches[t.matches.length-1];return hn(r.route.id,`${a} can only be used on routes that contain a unique "id"`),r.route.id}function $E(){return Bm("useRouteId")}function ZE(){let a=ie.useContext(zm),t=YE("useRouteError"),r=Bm("useRouteError");return a!==void 0?a:t.errors?.[r]}function JE(){let{router:a}=QE("useNavigate"),t=Bm("useNavigate"),r=ie.useRef(!1);return bb(()=>{r.current=!0}),ie.useCallback(async(l,u={})=>{za(r.current,vb),r.current&&(typeof l=="number"?a.navigate(l):await a.navigate(l,{fromRouteId:t,...u}))},[a,t])}var Fv={};function xb(a,t,r){!t&&!Fv[a]&&(Fv[a]=!0,za(!1,r))}ie.memo(WE);function WE({routes:a,future:t,state:r,unstable_onError:s}){return _b(a,void 0,r,s,t)}function ew({to:a,replace:t,state:r,relative:s}){hn(Il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=ie.useContext(ni);za(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=ie.useContext(Ua),{pathname:p}=ns(),_=Ol(),b=Lm(a,Pm(u),p,s==="path"),v=JSON.stringify(b);return ie.useEffect(()=>{_(JSON.parse(v),{replace:t,state:r,relative:s})},[_,v,s,t,r]),null}function Eb(a){return zE(a.context)}function Xr(a){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tw({basename:a="/",children:t=null,location:r,navigationType:s="POP",navigator:l,static:u=!1}){hn(!Il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),_=ie.useMemo(()=>({basename:p,navigator:l,static:u,future:{}}),[p,l,u]);typeof r=="string"&&(r=jl(r));let{pathname:b="/",search:v="",hash:A="",state:N=null,key:I="default"}=r,$=ie.useMemo(()=>{let ce=Ji(b,p);return ce==null?null:{location:{pathname:ce,search:v,hash:A,state:N,key:I},navigationType:s}},[p,b,v,A,N,I,s]);return za($!=null,`<Router basename="${p}"> is not able to match the URL "${b}${v}${A}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:ie.createElement(ni.Provider,{value:_},ie.createElement(Hu.Provider,{children:t,value:$}))}function nw({children:a,location:t}){return BE(fm(a),t)}function fm(a,t=[]){let r=[];return ie.Children.forEach(a,(s,l)=>{if(!ie.isValidElement(s))return;let u=[...t,l];if(s.type===ie.Fragment){r.push.apply(r,fm(s.props.children,u));return}hn(s.type===Xr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=fm(s.props.children,u)),r.push(p)}),r}var oh="get",lh="application/x-www-form-urlencoded";function Lh(a){return a!=null&&typeof a.tagName=="string"}function rw(a){return Lh(a)&&a.tagName.toLowerCase()==="button"}function aw(a){return Lh(a)&&a.tagName.toLowerCase()==="form"}function iw(a){return Lh(a)&&a.tagName.toLowerCase()==="input"}function sw(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function ow(a,t){return a.button===0&&(!t||t==="_self")&&!sw(a)}var th=null;function lw(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var uw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tm(a){return a!=null&&!uw.has(a)?(za(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lh}"`),null):a}function cw(a,t){let r,s,l,u,p;if(aw(a)){let _=a.getAttribute("action");s=_?Ji(_,t):null,r=a.getAttribute("method")||oh,l=tm(a.getAttribute("enctype"))||lh,u=new FormData(a)}else if(rw(a)||iw(a)&&(a.type==="submit"||a.type==="image")){let _=a.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=a.getAttribute("formaction")||_.getAttribute("action");if(s=b?Ji(b,t):null,r=a.getAttribute("formmethod")||_.getAttribute("method")||oh,l=tm(a.getAttribute("formenctype"))||tm(_.getAttribute("enctype"))||lh,u=new FormData(_,a),!lw()){let{name:v,type:A,value:N}=a;if(A==="image"){let I=v?`${v}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else v&&u.append(v,N)}}else{if(Lh(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=oh,s=null,l=lh,p=a}return u&&l==="text/plain"&&(p=u,u=void 0),{action:s,method:r.toLowerCase(),encType:l,formData:u,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qm(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function hw(a,t,r){let s=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&Ji(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function fw(a,t){if(a.id in t)return t[a.id];try{let r=await import(a.module);return t[a.id]=r,r}catch(r){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dw(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function mw(a,t,r){let s=await Promise.all(a.map(async l=>{let u=t.routes[l.route.id];if(u){let p=await fw(u,r);return p.links?p.links():[]}return[]}));return vw(s.flat(1).filter(dw).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Hv(a,t,r,s,l,u){let p=(b,v)=>r[v]?b.route.id!==r[v].route.id:!0,_=(b,v)=>r[v].pathname!==b.pathname||r[v].route.path?.endsWith("*")&&r[v].params["*"]!==b.params["*"];return u==="assets"?t.filter((b,v)=>p(b,v)||_(b,v)):u==="data"?t.filter((b,v)=>{let A=s.routes[b.route.id];if(!A||!A.hasLoader)return!1;if(p(b,v)||_(b,v))return!0;if(b.route.shouldRevalidate){let N=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function pw(a,t,{includeHydrateFallback:r}={}){return gw(a.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function gw(a){return[...new Set(a)]}function yw(a){let t={},r=Object.keys(a).sort();for(let s of r)t[s]=a[s];return t}function vw(a,t){let r=new Set;return new Set(t),a.reduce((s,l)=>{let u=JSON.stringify(yw(l));return r.has(u)||(r.add(u),s.push({key:u,link:l})),s},[])}function wb(){let a=ie.useContext(Dl);return qm(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function bw(){let a=ie.useContext(Ph);return qm(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Fm=ie.createContext(void 0);Fm.displayName="FrameworkContext";function Tb(){let a=ie.useContext(Fm);return qm(a,"You must render this element inside a <HydratedRouter> element"),a}function _w(a,t){let r=ie.useContext(Fm),[s,l]=ie.useState(!1),[u,p]=ie.useState(!1),{onFocus:_,onBlur:b,onMouseEnter:v,onMouseLeave:A,onTouchStart:N}=t,I=ie.useRef(null);ie.useEffect(()=>{if(a==="render"&&p(!0),a==="viewport"){let oe=Q=>{Q.forEach(Z=>{p(Z.isIntersecting)})},U=new IntersectionObserver(oe,{threshold:.5});return I.current&&U.observe(I.current),()=>{U.disconnect()}}},[a]),ie.useEffect(()=>{if(s){let oe=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(oe)}}},[s]);let $=()=>{l(!0)},ce=()=>{l(!1),p(!1)};return r?a!=="intent"?[u,I,{}]:[u,I,{onFocus:Su(_,$),onBlur:Su(b,ce),onMouseEnter:Su(v,$),onMouseLeave:Su(A,ce),onTouchStart:Su(N,$)}]:[!1,I,{}]}function Su(a,t){return r=>{a&&a(r),r.defaultPrevented||t(r)}}function xw({page:a,...t}){let{router:r}=wb(),s=ie.useMemo(()=>db(r.routes,a,r.basename),[r.routes,a,r.basename]);return s?ie.createElement(ww,{page:a,matches:s,...t}):null}function Ew(a){let{manifest:t,routeModules:r}=Tb(),[s,l]=ie.useState([]);return ie.useEffect(()=>{let u=!1;return mw(a,t,r).then(p=>{u||l(p)}),()=>{u=!0}},[a,t,r]),s}function ww({page:a,matches:t,...r}){let s=ns(),{manifest:l,routeModules:u}=Tb(),{basename:p}=wb(),{loaderData:_,matches:b}=bw(),v=ie.useMemo(()=>Hv(a,t,b,l,s,"data"),[a,t,b,l,s]),A=ie.useMemo(()=>Hv(a,t,b,l,s,"assets"),[a,t,b,l,s]),N=ie.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let ce=new Set,oe=!1;if(t.forEach(Q=>{let Z=l.routes[Q.route.id];!Z||!Z.hasLoader||(!v.some(he=>he.route.id===Q.route.id)&&Q.route.id in _&&u[Q.route.id]?.shouldRevalidate||Z.hasClientLoader?oe=!0:ce.add(Q.route.id))}),ce.size===0)return[];let U=hw(a,p,"data");return oe&&ce.size>0&&U.searchParams.set("_routes",t.filter(Q=>ce.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[U.pathname+U.search]},[p,_,s,l,v,t,a,u]),I=ie.useMemo(()=>pw(A,l),[A,l]),$=Ew(A);return ie.createElement(ie.Fragment,null,N.map(ce=>ie.createElement("link",{key:ce,rel:"prefetch",as:"fetch",href:ce,...r})),I.map(ce=>ie.createElement("link",{key:ce,rel:"modulepreload",href:ce,...r})),$.map(({key:ce,link:oe})=>ie.createElement("link",{key:ce,nonce:r.nonce,...oe})))}function Tw(...a){return t=>{a.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Sb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sb&&(window.__reactRouterVersion="7.9.6")}catch{}function Sw({basename:a,children:t,window:r}){let s=ie.useRef();s.current==null&&(s.current=lE({window:r,v5Compat:!0}));let l=s.current,[u,p]=ie.useState({action:l.action,location:l.location}),_=ie.useCallback(b=>{ie.startTransition(()=>p(b))},[p]);return ie.useLayoutEffect(()=>l.listen(_),[l,_]),ie.createElement(tw,{basename:a,children:t,location:u.location,navigationType:u.action,navigator:l})}var Ab=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zh=ie.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:l,reloadDocument:u,replace:p,state:_,target:b,to:v,preventScrollReset:A,viewTransition:N,...I},$){let{basename:ce}=ie.useContext(ni),oe=typeof v=="string"&&Ab.test(v),U,Q=!1;if(typeof v=="string"&&oe&&(U=v,Sb))try{let V=new URL(window.location.href),F=v.startsWith("//")?new URL(V.protocol+v):new URL(v),B=Ji(F.pathname,ce);F.origin===V.origin&&B!=null?v=B+F.search+F.hash:Q=!0}catch{za(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=kE(v,{relative:l}),[he,_e,ke]=_w(s,I),Qe=Cw(v,{replace:p,state:_,target:b,preventScrollReset:A,relative:l,viewTransition:N});function M(V){t&&t(V),V.defaultPrevented||Qe(V)}let O=ie.createElement("a",{...I,...ke,href:U||Z,onClick:Q||u?t:M,ref:Tw($,_e),target:b,"data-discover":!oe&&r==="render"?"true":void 0});return he&&!oe?ie.createElement(ie.Fragment,null,O,ie.createElement(xw,{page:Z})):O});zh.displayName="Link";var Aw=ie.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:l=!1,style:u,to:p,viewTransition:_,children:b,...v},A){let N=Ku(p,{relative:v.relative}),I=ns(),$=ie.useContext(Ph),{navigator:ce,basename:oe}=ie.useContext(ni),U=$!=null&&Mw(N)&&_===!0,Q=ce.encodeLocation?ce.encodeLocation(N).pathname:N.pathname,Z=I.pathname,he=$&&$.navigation&&$.navigation.location?$.navigation.location.pathname:null;r||(Z=Z.toLowerCase(),he=he?he.toLowerCase():null,Q=Q.toLowerCase()),he&&oe&&(he=Ji(he,oe)||he);const _e=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ke=Z===Q||!l&&Z.startsWith(Q)&&Z.charAt(_e)==="/",Qe=he!=null&&(he===Q||!l&&he.startsWith(Q)&&he.charAt(Q.length)==="/"),M={isActive:ke,isPending:Qe,isTransitioning:U},O=ke?t:void 0,V;typeof s=="function"?V=s(M):V=[s,ke?"active":null,Qe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let F=typeof u=="function"?u(M):u;return ie.createElement(zh,{...v,"aria-current":O,className:V,ref:A,style:F,to:p,viewTransition:_},typeof b=="function"?b(M):b)});Aw.displayName="NavLink";var Nw=ie.forwardRef(({discover:a="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:l,state:u,method:p=oh,action:_,onSubmit:b,relative:v,preventScrollReset:A,viewTransition:N,...I},$)=>{let ce=Iw(),oe=Ow(_,{relative:v}),U=p.toLowerCase()==="get"?"get":"post",Q=typeof _=="string"&&Ab.test(_),Z=he=>{if(b&&b(he),he.defaultPrevented)return;he.preventDefault();let _e=he.nativeEvent.submitter,ke=_e?.getAttribute("formmethod")||p;ce(_e||he.currentTarget,{fetcherKey:t,method:ke,navigate:r,replace:l,state:u,relative:v,preventScrollReset:A,viewTransition:N})};return ie.createElement("form",{ref:$,method:U,action:oe,onSubmit:s?b:Z,...I,"data-discover":!Q&&a==="render"?"true":void 0})});Nw.displayName="Form";function Rw(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nb(a){let t=ie.useContext(Dl);return hn(t,Rw(a)),t}function Cw(a,{target:t,replace:r,state:s,preventScrollReset:l,relative:u,viewTransition:p}={}){let _=Ol(),b=ns(),v=Ku(a,{relative:u});return ie.useCallback(A=>{if(ow(A,t)){A.preventDefault();let N=r!==void 0?r:Vu(b)===Vu(v);_(a,{replace:N,state:s,preventScrollReset:l,relative:u,viewTransition:p})}},[b,_,v,r,s,t,a,l,u,p])}var jw=0,Dw=()=>`__${String(++jw)}__`;function Iw(){let{router:a}=Nb("useSubmit"),{basename:t}=ie.useContext(ni),r=$E();return ie.useCallback(async(s,l={})=>{let{action:u,method:p,encType:_,formData:b,body:v}=cw(s,t);if(l.navigate===!1){let A=l.fetcherKey||Dw();await a.fetch(A,r,l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:v,formMethod:l.method||p,formEncType:l.encType||_,flushSync:l.flushSync})}else await a.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:b,body:v,formMethod:l.method||p,formEncType:l.encType||_,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[a,t,r])}function Ow(a,{relative:t}={}){let{basename:r}=ie.useContext(ni),s=ie.useContext(Ua);hn(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),u={...Ku(a||".",{relative:t})},p=ns();if(a==null){u.search=p.search;let _=new URLSearchParams(u.search),b=_.getAll("index");if(b.some(A=>A==="")){_.delete("index"),b.filter(N=>N).forEach(N=>_.append("index",N));let A=_.toString();u.search=A?`?${A}`:""}}return(!a||a===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:$i([r,u.pathname])),Vu(u)}function Mw(a,{relative:t}={}){let r=ie.useContext(yb);hn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Nb("useViewTransitionState"),l=Ku(a,{relative:t});if(!r.isTransitioning)return!1;let u=Ji(r.currentLocation.pathname,s)||r.currentLocation.pathname,p=Ji(r.nextLocation.pathname,s)||r.nextLocation.pathname;return yh(l.pathname,p)!=null||yh(l.pathname,u)!=null}const Vw=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kw=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),Kv=a=>{const t=kw(a);return t.charAt(0).toUpperCase()+t.slice(1)},Rb=(...a)=>a.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),Pw=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Lw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zw=ie.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:u,iconNode:p,..._},b)=>ie.createElement("svg",{ref:b,...Lw,width:t,height:t,stroke:a,strokeWidth:s?Number(r)*24/Number(t):r,className:Rb("lucide",l),...!u&&!Pw(_)&&{"aria-hidden":"true"},..._},[...p.map(([v,A])=>ie.createElement(v,A)),...Array.isArray(u)?u:[u]]));const Lt=(a,t)=>{const r=ie.forwardRef(({className:s,...l},u)=>ie.createElement(zw,{ref:u,iconNode:t,className:Rb(`lucide-${Vw(Kv(a))}`,`lucide-${a}`,s),...l}));return r.displayName=Kv(a),r};const Uw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bw=Lt("arrow-left",Uw);const qw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fw=Lt("arrow-right",qw);const Hw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Kw=Lt("calendar",Hw);const Gw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Qw=Lt("circle-plus",Gw);const Yw=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],uh=Lt("database",Yw);const Xw=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ku=Lt("dollar-sign",Xw);const $w=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Uh=Lt("download",$w);const Zw=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jw=Lt("eye",Zw);const Ww=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],e2=Lt("file-text",Ww);const t2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],n2=Lt("history",t2);const r2=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],a2=Lt("layout-dashboard",r2);const i2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Cb=Lt("lock",i2);const s2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jb=Lt("mail",s2);const o2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Db=Lt("map-pin",o2);const l2=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],u2=Lt("maximize",l2);const c2=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],vh=Lt("package",c2);const h2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ib=Lt("phone",h2);const f2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ml=Lt("plus",f2);const d2=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],m2=Lt("printer",d2);const p2=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ob=Lt("receipt",p2);const g2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mb=Lt("save",g2);const y2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gu=Lt("search",y2);const v2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],b2=Lt("settings",v2);const _2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Bh=Lt("square-pen",_2);const x2=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],E2=Lt("store",x2);const w2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ys=Lt("trash-2",w2);const T2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Hm=Lt("trending-up",T2);const S2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],qh=Lt("upload",S2);const A2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vb=Lt("user",A2);const N2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bh=Lt("users",N2);const R2=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Gv=Lt("wallet",R2);const C2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],j2=Lt("x",C2);function kb(a){var t,r,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var l=a.length;for(t=0;t<l;t++)a[t]&&(r=kb(a[t]))&&(s&&(s+=" "),s+=r)}else for(r in a)a[r]&&(s&&(s+=" "),s+=r);return s}function D2(){for(var a,t,r=0,s="",l=arguments.length;r<l;r++)(a=arguments[r])&&(t=kb(a))&&(s&&(s+=" "),s+=t);return s}const I2=()=>{};var Qv={};const Pb=function(a){const t=[];let r=0;for(let s=0;s<a.length;s++){let l=a.charCodeAt(s);l<128?t[r++]=l:l<2048?(t[r++]=l>>6|192,t[r++]=l&63|128):(l&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++s)&1023),t[r++]=l>>18|240,t[r++]=l>>12&63|128,t[r++]=l>>6&63|128,t[r++]=l&63|128):(t[r++]=l>>12|224,t[r++]=l>>6&63|128,t[r++]=l&63|128)}return t},O2=function(a){const t=[];let r=0,s=0;for(;r<a.length;){const l=a[r++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=a[r++];t[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=a[r++],p=a[r++],_=a[r++],b=((l&7)<<18|(u&63)<<12|(p&63)<<6|_&63)-65536;t[s++]=String.fromCharCode(55296+(b>>10)),t[s++]=String.fromCharCode(56320+(b&1023))}else{const u=a[r++],p=a[r++];t[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|p&63)}}return t.join("")},Lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<a.length;l+=3){const u=a[l],p=l+1<a.length,_=p?a[l+1]:0,b=l+2<a.length,v=b?a[l+2]:0,A=u>>2,N=(u&3)<<4|_>>4;let I=(_&15)<<2|v>>6,$=v&63;b||($=64,p||(I=64)),s.push(r[A],r[N],r[I],r[$])}return s.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(Pb(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):O2(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<a.length;){const u=r[a.charAt(l++)],_=l<a.length?r[a.charAt(l)]:0;++l;const v=l<a.length?r[a.charAt(l)]:64;++l;const N=l<a.length?r[a.charAt(l)]:64;if(++l,u==null||_==null||v==null||N==null)throw new M2;const I=u<<2|_>>4;if(s.push(I),v!==64){const $=_<<4&240|v>>2;if(s.push($),N!==64){const ce=v<<6&192|N;s.push(ce)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class M2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V2=function(a){const t=Pb(a);return Lb.encodeByteArray(t,!0)},_h=function(a){return V2(a).replace(/\./g,"")},k2=function(a){try{return Lb.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function P2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const L2=()=>P2().__FIREBASE_DEFAULTS__,z2=()=>{if(typeof process>"u"||typeof Qv>"u")return;const a=Qv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},U2=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&k2(a[1]);return t&&JSON.parse(t)},Km=()=>{try{return I2()||L2()||z2()||U2()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},B2=a=>Km()?.emulatorHosts?.[a],q2=a=>{const t=B2(a);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),s]:[t.substring(0,r),s]},zb=()=>Km()?.config;class F2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,s))}}}function Gm(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function H2(a){return(await fetch(a,{credentials:"include"})).ok}function K2(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=t||"demo-project",l=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...a};return[_h(JSON.stringify(r)),_h(JSON.stringify(p)),""].join(".")}const Cu={};function G2(){const a={prod:[],emulator:[]};for(const t of Object.keys(Cu))Cu[t]?a.emulator.push(t):a.prod.push(t);return a}function Q2(a){let t=document.getElementById(a),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",a),r=!0),{created:r,element:t}}let Yv=!1;function Y2(a,t){if(typeof window>"u"||typeof document>"u"||!Gm(window.location.host)||Cu[a]===t||Cu[a]||Yv)return;Cu[a]=t;function r(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=G2().prod.length>0;function p(){const I=document.getElementById(s);I&&I.remove()}function _(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function b(I,$){I.setAttribute("width","24"),I.setAttribute("id",$),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function v(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Yv=!0,p()},I}function A(I,$){I.setAttribute("id",$),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function N(){const I=Q2(s),$=r("text"),ce=document.getElementById($)||document.createElement("span"),oe=r("learnmore"),U=document.getElementById(oe)||document.createElement("a"),Q=r("preprendIcon"),Z=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const he=I.element;_(he),A(U,oe);const _e=v();b(Z,Q),he.append(Z,ce,U,_e),document.body.appendChild(he)}u?(ce.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ce.innerText="Preview backend running in this workspace."),ce.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}function X2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $2(){const a=Km()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z2(){return!$2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J2(){try{return typeof indexedDB=="object"}catch{return!1}}function W2(){return new Promise((a,t)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),r||self.indexedDB.deleteDatabase(s),a(!0)},l.onupgradeneeded=()=>{r=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(r){t(r)}})}const eT="FirebaseError";class Vl extends Error{constructor(t,r,s){super(r),this.code=t,this.customData=s,this.name=eT,Object.setPrototypeOf(this,Vl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ub.prototype.create)}}class Ub{constructor(t,r,s){this.service=t,this.serviceName=r,this.errors=s}create(t,...r){const s=r[0]||{},l=`${this.service}/${t}`,u=this.errors[t],p=u?tT(u,s):"Error",_=`${this.serviceName}: ${p} (${l}).`;return new Vl(l,_,s)}}function tT(a,t){return a.replace(nT,(r,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const nT=/\{\$([^}]+)}/g;function xh(a,t){if(a===t)return!0;const r=Object.keys(a),s=Object.keys(t);for(const l of r){if(!s.includes(l))return!1;const u=a[l],p=t[l];if(Xv(u)&&Xv(p)){if(!xh(u,p))return!1}else if(u!==p)return!1}for(const l of s)if(!r.includes(l))return!1;return!0}function Xv(a){return a!==null&&typeof a=="object"}function Co(a){return a&&a._delegate?a._delegate:a}class Pu{constructor(t,r,s){this.name=t,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const To="[DEFAULT]";class rT{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const s=new F2;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:r});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(iT(t))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(t=To){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=To){return this.instances.has(t)}getOptions(t=To){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[u,p]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(u);s===_&&p.resolve(l)}return l}onInit(t,r){const s=this.normalizeInstanceIdentifier(r),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&t(u,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const s=this.onInitCallbacks.get(r);if(s)for(const l of s)try{l(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aT(t),options:r}),this.instances.set(t,s),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=To){return this.component?this.component.multipleInstances?t:To:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aT(a){return a===To?void 0:a}function iT(a){return a.instantiationMode==="EAGER"}class sT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new rT(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}var Ot;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ot||(Ot={}));const oT={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},lT=Ot.INFO,uT={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},cT=(a,t,...r)=>{if(t<a.logLevel)return;const s=new Date().toISOString(),l=uT[t];if(l)console[l](`[${s}]  ${a.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Bb{constructor(t){this.name=t,this._logLevel=lT,this._logHandler=cT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?oT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const hT=(a,t)=>t.some(r=>a instanceof r);let $v,Zv;function fT(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qb=new WeakMap,dm=new WeakMap,Fb=new WeakMap,nm=new WeakMap,Qm=new WeakMap;function mT(a){const t=new Promise((r,s)=>{const l=()=>{a.removeEventListener("success",u),a.removeEventListener("error",p)},u=()=>{r(Fs(a.result)),l()},p=()=>{s(a.error),l()};a.addEventListener("success",u),a.addEventListener("error",p)});return t.then(r=>{r instanceof IDBCursor&&qb.set(r,a)}).catch(()=>{}),Qm.set(t,a),t}function pT(a){if(dm.has(a))return;const t=new Promise((r,s)=>{const l=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",p),a.removeEventListener("abort",p)},u=()=>{r(),l()},p=()=>{s(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",u),a.addEventListener("error",p),a.addEventListener("abort",p)});dm.set(a,t)}let mm={get(a,t,r){if(a instanceof IDBTransaction){if(t==="done")return dm.get(a);if(t==="objectStoreNames")return a.objectStoreNames||Fb.get(a);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Fs(a[t])},set(a,t,r){return a[t]=r,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function gT(a){mm=a(mm)}function yT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const s=a.call(rm(this),t,...r);return Fb.set(s,t.sort?t.sort():[t]),Fs(s)}:dT().includes(a)?function(...t){return a.apply(rm(this),t),Fs(qb.get(this))}:function(...t){return Fs(a.apply(rm(this),t))}}function vT(a){return typeof a=="function"?yT(a):(a instanceof IDBTransaction&&pT(a),hT(a,fT())?new Proxy(a,mm):a)}function Fs(a){if(a instanceof IDBRequest)return mT(a);if(nm.has(a))return nm.get(a);const t=vT(a);return t!==a&&(nm.set(a,t),Qm.set(t,a)),t}const rm=a=>Qm.get(a);function bT(a,t,{blocked:r,upgrade:s,blocking:l,terminated:u}={}){const p=indexedDB.open(a,t),_=Fs(p);return s&&p.addEventListener("upgradeneeded",b=>{s(Fs(p.result),b.oldVersion,b.newVersion,Fs(p.transaction),b)}),r&&p.addEventListener("blocked",b=>r(b.oldVersion,b.newVersion,b)),_.then(b=>{u&&b.addEventListener("close",()=>u()),l&&b.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),_}const _T=["get","getKey","getAll","getAllKeys","count"],xT=["put","add","delete","clear"],am=new Map;function Jv(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(am.get(t))return am.get(t);const r=t.replace(/FromIndex$/,""),s=t!==r,l=xT.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(l||_T.includes(r)))return;const u=async function(p,..._){const b=this.transaction(p,l?"readwrite":"readonly");let v=b.store;return s&&(v=v.index(_.shift())),(await Promise.all([v[r](..._),l&&b.done]))[0]};return am.set(t,u),u}gT(a=>({...a,get:(t,r,s)=>Jv(t,r)||a.get(t,r,s),has:(t,r)=>!!Jv(t,r)||a.has(t,r)}));class ET{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(wT(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function wT(a){return a.getComponent()?.type==="VERSION"}const pm="@firebase/app",Wv="0.14.6";const Wi=new Bb("@firebase/app"),TT="@firebase/app-compat",ST="@firebase/analytics-compat",AT="@firebase/analytics",NT="@firebase/app-check-compat",RT="@firebase/app-check",CT="@firebase/auth",jT="@firebase/auth-compat",DT="@firebase/database",IT="@firebase/data-connect",OT="@firebase/database-compat",MT="@firebase/functions",VT="@firebase/functions-compat",kT="@firebase/installations",PT="@firebase/installations-compat",LT="@firebase/messaging",zT="@firebase/messaging-compat",UT="@firebase/performance",BT="@firebase/performance-compat",qT="@firebase/remote-config",FT="@firebase/remote-config-compat",HT="@firebase/storage",KT="@firebase/storage-compat",GT="@firebase/firestore",QT="@firebase/ai",YT="@firebase/firestore-compat",XT="firebase",$T="12.6.0";const gm="[DEFAULT]",ZT={[pm]:"fire-core",[TT]:"fire-core-compat",[AT]:"fire-analytics",[ST]:"fire-analytics-compat",[RT]:"fire-app-check",[NT]:"fire-app-check-compat",[CT]:"fire-auth",[jT]:"fire-auth-compat",[DT]:"fire-rtdb",[IT]:"fire-data-connect",[OT]:"fire-rtdb-compat",[MT]:"fire-fn",[VT]:"fire-fn-compat",[kT]:"fire-iid",[PT]:"fire-iid-compat",[LT]:"fire-fcm",[zT]:"fire-fcm-compat",[UT]:"fire-perf",[BT]:"fire-perf-compat",[qT]:"fire-rc",[FT]:"fire-rc-compat",[HT]:"fire-gcs",[KT]:"fire-gcs-compat",[GT]:"fire-fst",[YT]:"fire-fst-compat",[QT]:"fire-vertex","fire-js":"fire-js",[XT]:"fire-js-all"};const Eh=new Map,JT=new Map,ym=new Map;function e0(a,t){try{a.container.addComponent(t)}catch(r){Wi.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,r)}}function wh(a){const t=a.name;if(ym.has(t))return Wi.debug(`There were multiple attempts to register component ${t}.`),!1;ym.set(t,a);for(const r of Eh.values())e0(r,a);for(const r of JT.values())e0(r,a);return!0}function WT(a,t){const r=a.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),a.container.getProvider(t)}function eS(a){return a==null?!1:a.settings!==void 0}const tS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new Ub("app","Firebase",tS);class nS{constructor(t,r,s){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Pu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}const rS=$T;function Hb(a,t={}){let r=a;typeof t!="object"&&(t={name:t});const s={name:gm,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Hs.create("bad-app-name",{appName:String(l)});if(r||(r=zb()),!r)throw Hs.create("no-options");const u=Eh.get(l);if(u){if(xh(r,u.options)&&xh(s,u.config))return u;throw Hs.create("duplicate-app",{appName:l})}const p=new sT(l);for(const b of ym.values())p.addComponent(b);const _=new nS(r,s,p);return Eh.set(l,_),_}function aS(a=gm){const t=Eh.get(a);if(!t&&a===gm&&zb())return Hb();if(!t)throw Hs.create("no-app",{appName:a});return t}function _l(a,t,r){let s=ZT[a]??a;r&&(s+=`-${r}`);const l=s.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const p=[`Unable to register library "${s}" with version "${t}":`];l&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&p.push("and"),u&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Wi.warn(p.join(" "));return}wh(new Pu(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const iS="firebase-heartbeat-database",sS=1,Lu="firebase-heartbeat-store";let im=null;function Kb(){return im||(im=bT(iS,sS,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(Lu)}catch(r){console.warn(r)}}}}).catch(a=>{throw Hs.create("idb-open",{originalErrorMessage:a.message})})),im}async function oS(a){try{const r=(await Kb()).transaction(Lu),s=await r.objectStore(Lu).get(Gb(a));return await r.done,s}catch(t){if(t instanceof Vl)Wi.warn(t.message);else{const r=Hs.create("idb-get",{originalErrorMessage:t?.message});Wi.warn(r.message)}}}async function t0(a,t){try{const s=(await Kb()).transaction(Lu,"readwrite");await s.objectStore(Lu).put(t,Gb(a)),await s.done}catch(r){if(r instanceof Vl)Wi.warn(r.message);else{const s=Hs.create("idb-set",{originalErrorMessage:r?.message});Wi.warn(s.message)}}}function Gb(a){return`${a.name}!${a.options.appId}`}const lS=1024,uS=30;class cS{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new fS(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=n0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>uS){const l=dS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Wi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=n0(),{heartbeatsToSend:r,unsentEntries:s}=hS(this._heartbeatsCache.heartbeats),l=_h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Wi.warn(t),""}}}function n0(){return new Date().toISOString().substring(0,10)}function hS(a,t=lS){const r=[];let s=a.slice();for(const l of a){const u=r.find(p=>p.agent===l.agent);if(u){if(u.dates.push(l.date),r0(r)>t){u.dates.pop();break}}else if(r.push({agent:l.agent,dates:[l.date]}),r0(r)>t){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class fS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J2()?W2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await oS(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function r0(a){return _h(JSON.stringify({version:2,heartbeats:a})).length}function dS(a){if(a.length===0)return-1;let t=0,r=a[0].date;for(let s=1;s<a.length;s++)a[s].date<r&&(r=a[s].date,t=s);return t}function mS(a){wh(new Pu("platform-logger",t=>new ET(t),"PRIVATE")),wh(new Pu("heartbeat",t=>new cS(t),"PRIVATE")),_l(pm,Wv,a),_l(pm,Wv,"esm2020"),_l("fire-js","")}mS("");var pS="firebase",gS="12.6.0";_l(pS,gS,"app");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ks,Qb;(function(){var a;function t(M,O){function V(){}V.prototype=O.prototype,M.F=O.prototype,M.prototype=new V,M.prototype.constructor=M,M.D=function(F,B,ee){for(var k=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)k[ft-2]=arguments[ft];return O.prototype[B].apply(F,k)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,r),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,O,V){V||(V=0);const F=Array(16);if(typeof O=="string")for(var B=0;B<16;++B)F[B]=O.charCodeAt(V++)|O.charCodeAt(V++)<<8|O.charCodeAt(V++)<<16|O.charCodeAt(V++)<<24;else for(B=0;B<16;++B)F[B]=O[V++]|O[V++]<<8|O[V++]<<16|O[V++]<<24;O=M.g[0],V=M.g[1],B=M.g[2];let ee=M.g[3],k;k=O+(ee^V&(B^ee))+F[0]+3614090360&4294967295,O=V+(k<<7&4294967295|k>>>25),k=ee+(B^O&(V^B))+F[1]+3905402710&4294967295,ee=O+(k<<12&4294967295|k>>>20),k=B+(V^ee&(O^V))+F[2]+606105819&4294967295,B=ee+(k<<17&4294967295|k>>>15),k=V+(O^B&(ee^O))+F[3]+3250441966&4294967295,V=B+(k<<22&4294967295|k>>>10),k=O+(ee^V&(B^ee))+F[4]+4118548399&4294967295,O=V+(k<<7&4294967295|k>>>25),k=ee+(B^O&(V^B))+F[5]+1200080426&4294967295,ee=O+(k<<12&4294967295|k>>>20),k=B+(V^ee&(O^V))+F[6]+2821735955&4294967295,B=ee+(k<<17&4294967295|k>>>15),k=V+(O^B&(ee^O))+F[7]+4249261313&4294967295,V=B+(k<<22&4294967295|k>>>10),k=O+(ee^V&(B^ee))+F[8]+1770035416&4294967295,O=V+(k<<7&4294967295|k>>>25),k=ee+(B^O&(V^B))+F[9]+2336552879&4294967295,ee=O+(k<<12&4294967295|k>>>20),k=B+(V^ee&(O^V))+F[10]+4294925233&4294967295,B=ee+(k<<17&4294967295|k>>>15),k=V+(O^B&(ee^O))+F[11]+2304563134&4294967295,V=B+(k<<22&4294967295|k>>>10),k=O+(ee^V&(B^ee))+F[12]+1804603682&4294967295,O=V+(k<<7&4294967295|k>>>25),k=ee+(B^O&(V^B))+F[13]+4254626195&4294967295,ee=O+(k<<12&4294967295|k>>>20),k=B+(V^ee&(O^V))+F[14]+2792965006&4294967295,B=ee+(k<<17&4294967295|k>>>15),k=V+(O^B&(ee^O))+F[15]+1236535329&4294967295,V=B+(k<<22&4294967295|k>>>10),k=O+(B^ee&(V^B))+F[1]+4129170786&4294967295,O=V+(k<<5&4294967295|k>>>27),k=ee+(V^B&(O^V))+F[6]+3225465664&4294967295,ee=O+(k<<9&4294967295|k>>>23),k=B+(O^V&(ee^O))+F[11]+643717713&4294967295,B=ee+(k<<14&4294967295|k>>>18),k=V+(ee^O&(B^ee))+F[0]+3921069994&4294967295,V=B+(k<<20&4294967295|k>>>12),k=O+(B^ee&(V^B))+F[5]+3593408605&4294967295,O=V+(k<<5&4294967295|k>>>27),k=ee+(V^B&(O^V))+F[10]+38016083&4294967295,ee=O+(k<<9&4294967295|k>>>23),k=B+(O^V&(ee^O))+F[15]+3634488961&4294967295,B=ee+(k<<14&4294967295|k>>>18),k=V+(ee^O&(B^ee))+F[4]+3889429448&4294967295,V=B+(k<<20&4294967295|k>>>12),k=O+(B^ee&(V^B))+F[9]+568446438&4294967295,O=V+(k<<5&4294967295|k>>>27),k=ee+(V^B&(O^V))+F[14]+3275163606&4294967295,ee=O+(k<<9&4294967295|k>>>23),k=B+(O^V&(ee^O))+F[3]+4107603335&4294967295,B=ee+(k<<14&4294967295|k>>>18),k=V+(ee^O&(B^ee))+F[8]+1163531501&4294967295,V=B+(k<<20&4294967295|k>>>12),k=O+(B^ee&(V^B))+F[13]+2850285829&4294967295,O=V+(k<<5&4294967295|k>>>27),k=ee+(V^B&(O^V))+F[2]+4243563512&4294967295,ee=O+(k<<9&4294967295|k>>>23),k=B+(O^V&(ee^O))+F[7]+1735328473&4294967295,B=ee+(k<<14&4294967295|k>>>18),k=V+(ee^O&(B^ee))+F[12]+2368359562&4294967295,V=B+(k<<20&4294967295|k>>>12),k=O+(V^B^ee)+F[5]+4294588738&4294967295,O=V+(k<<4&4294967295|k>>>28),k=ee+(O^V^B)+F[8]+2272392833&4294967295,ee=O+(k<<11&4294967295|k>>>21),k=B+(ee^O^V)+F[11]+1839030562&4294967295,B=ee+(k<<16&4294967295|k>>>16),k=V+(B^ee^O)+F[14]+4259657740&4294967295,V=B+(k<<23&4294967295|k>>>9),k=O+(V^B^ee)+F[1]+2763975236&4294967295,O=V+(k<<4&4294967295|k>>>28),k=ee+(O^V^B)+F[4]+1272893353&4294967295,ee=O+(k<<11&4294967295|k>>>21),k=B+(ee^O^V)+F[7]+4139469664&4294967295,B=ee+(k<<16&4294967295|k>>>16),k=V+(B^ee^O)+F[10]+3200236656&4294967295,V=B+(k<<23&4294967295|k>>>9),k=O+(V^B^ee)+F[13]+681279174&4294967295,O=V+(k<<4&4294967295|k>>>28),k=ee+(O^V^B)+F[0]+3936430074&4294967295,ee=O+(k<<11&4294967295|k>>>21),k=B+(ee^O^V)+F[3]+3572445317&4294967295,B=ee+(k<<16&4294967295|k>>>16),k=V+(B^ee^O)+F[6]+76029189&4294967295,V=B+(k<<23&4294967295|k>>>9),k=O+(V^B^ee)+F[9]+3654602809&4294967295,O=V+(k<<4&4294967295|k>>>28),k=ee+(O^V^B)+F[12]+3873151461&4294967295,ee=O+(k<<11&4294967295|k>>>21),k=B+(ee^O^V)+F[15]+530742520&4294967295,B=ee+(k<<16&4294967295|k>>>16),k=V+(B^ee^O)+F[2]+3299628645&4294967295,V=B+(k<<23&4294967295|k>>>9),k=O+(B^(V|~ee))+F[0]+4096336452&4294967295,O=V+(k<<6&4294967295|k>>>26),k=ee+(V^(O|~B))+F[7]+1126891415&4294967295,ee=O+(k<<10&4294967295|k>>>22),k=B+(O^(ee|~V))+F[14]+2878612391&4294967295,B=ee+(k<<15&4294967295|k>>>17),k=V+(ee^(B|~O))+F[5]+4237533241&4294967295,V=B+(k<<21&4294967295|k>>>11),k=O+(B^(V|~ee))+F[12]+1700485571&4294967295,O=V+(k<<6&4294967295|k>>>26),k=ee+(V^(O|~B))+F[3]+2399980690&4294967295,ee=O+(k<<10&4294967295|k>>>22),k=B+(O^(ee|~V))+F[10]+4293915773&4294967295,B=ee+(k<<15&4294967295|k>>>17),k=V+(ee^(B|~O))+F[1]+2240044497&4294967295,V=B+(k<<21&4294967295|k>>>11),k=O+(B^(V|~ee))+F[8]+1873313359&4294967295,O=V+(k<<6&4294967295|k>>>26),k=ee+(V^(O|~B))+F[15]+4264355552&4294967295,ee=O+(k<<10&4294967295|k>>>22),k=B+(O^(ee|~V))+F[6]+2734768916&4294967295,B=ee+(k<<15&4294967295|k>>>17),k=V+(ee^(B|~O))+F[13]+1309151649&4294967295,V=B+(k<<21&4294967295|k>>>11),k=O+(B^(V|~ee))+F[4]+4149444226&4294967295,O=V+(k<<6&4294967295|k>>>26),k=ee+(V^(O|~B))+F[11]+3174756917&4294967295,ee=O+(k<<10&4294967295|k>>>22),k=B+(O^(ee|~V))+F[2]+718787259&4294967295,B=ee+(k<<15&4294967295|k>>>17),k=V+(ee^(B|~O))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+O&4294967295,M.g[1]=M.g[1]+(B+(k<<21&4294967295|k>>>11))&4294967295,M.g[2]=M.g[2]+B&4294967295,M.g[3]=M.g[3]+ee&4294967295}s.prototype.v=function(M,O){O===void 0&&(O=M.length);const V=O-this.blockSize,F=this.C;let B=this.h,ee=0;for(;ee<O;){if(B==0)for(;ee<=V;)l(this,M,ee),ee+=this.blockSize;if(typeof M=="string"){for(;ee<O;)if(F[B++]=M.charCodeAt(ee++),B==this.blockSize){l(this,F),B=0;break}}else for(;ee<O;)if(F[B++]=M[ee++],B==this.blockSize){l(this,F),B=0;break}}this.h=B,this.o+=O},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var O=1;O<M.length-8;++O)M[O]=0;O=this.o*8;for(var V=M.length-8;V<M.length;++V)M[V]=O&255,O/=256;for(this.v(M),M=Array(16),O=0,V=0;V<4;++V)for(let F=0;F<32;F+=8)M[O++]=this.g[V]>>>F&255;return M};function u(M,O){var V=_;return Object.prototype.hasOwnProperty.call(V,M)?V[M]:V[M]=O(M)}function p(M,O){this.h=O;const V=[];let F=!0;for(let B=M.length-1;B>=0;B--){const ee=M[B]|0;F&&ee==O||(V[B]=ee,F=!1)}this.g=V}var _={};function b(M){return-128<=M&&M<128?u(M,function(O){return new p([O|0],O<0?-1:0)}):new p([M|0],M<0?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return N;if(M<0)return U(v(-M));const O=[];let V=1;for(let F=0;M>=V;F++)O[F]=M/V|0,V*=4294967296;return new p(O,0)}function A(M,O){if(M.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(M.charAt(0)=="-")return U(A(M.substring(1),O));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=v(Math.pow(O,8));let F=N;for(let ee=0;ee<M.length;ee+=8){var B=Math.min(8,M.length-ee);const k=parseInt(M.substring(ee,ee+B),O);B<8?(B=v(Math.pow(O,B)),F=F.j(B).add(v(k))):(F=F.j(V),F=F.add(v(k)))}return F}var N=b(0),I=b(1),$=b(16777216);a=p.prototype,a.m=function(){if(oe(this))return-U(this).m();let M=0,O=1;for(let V=0;V<this.g.length;V++){const F=this.i(V);M+=(F>=0?F:4294967296+F)*O,O*=4294967296}return M},a.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(ce(this))return"0";if(oe(this))return"-"+U(this).toString(M);const O=v(Math.pow(M,6));var V=this;let F="";for(;;){const B=_e(V,O).g;V=Q(V,B.j(O));let ee=((V.g.length>0?V.g[0]:V.h)>>>0).toString(M);if(V=B,ce(V))return ee+F;for(;ee.length<6;)ee="0"+ee;F=ee+F}},a.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function ce(M){if(M.h!=0)return!1;for(let O=0;O<M.g.length;O++)if(M.g[O]!=0)return!1;return!0}function oe(M){return M.h==-1}a.l=function(M){return M=Q(this,M),oe(M)?-1:ce(M)?0:1};function U(M){const O=M.g.length,V=[];for(let F=0;F<O;F++)V[F]=~M.g[F];return new p(V,~M.h).add(I)}a.abs=function(){return oe(this)?U(this):this},a.add=function(M){const O=Math.max(this.g.length,M.g.length),V=[];let F=0;for(let B=0;B<=O;B++){let ee=F+(this.i(B)&65535)+(M.i(B)&65535),k=(ee>>>16)+(this.i(B)>>>16)+(M.i(B)>>>16);F=k>>>16,ee&=65535,k&=65535,V[B]=k<<16|ee}return new p(V,V[V.length-1]&-2147483648?-1:0)};function Q(M,O){return M.add(U(O))}a.j=function(M){if(ce(this)||ce(M))return N;if(oe(this))return oe(M)?U(this).j(U(M)):U(U(this).j(M));if(oe(M))return U(this.j(U(M)));if(this.l($)<0&&M.l($)<0)return v(this.m()*M.m());const O=this.g.length+M.g.length,V=[];for(var F=0;F<2*O;F++)V[F]=0;for(F=0;F<this.g.length;F++)for(let B=0;B<M.g.length;B++){const ee=this.i(F)>>>16,k=this.i(F)&65535,ft=M.i(B)>>>16,_t=M.i(B)&65535;V[2*F+2*B]+=k*_t,Z(V,2*F+2*B),V[2*F+2*B+1]+=ee*_t,Z(V,2*F+2*B+1),V[2*F+2*B+1]+=k*ft,Z(V,2*F+2*B+1),V[2*F+2*B+2]+=ee*ft,Z(V,2*F+2*B+2)}for(M=0;M<O;M++)V[M]=V[2*M+1]<<16|V[2*M];for(M=O;M<2*O;M++)V[M]=0;return new p(V,0)};function Z(M,O){for(;(M[O]&65535)!=M[O];)M[O+1]+=M[O]>>>16,M[O]&=65535,O++}function he(M,O){this.g=M,this.h=O}function _e(M,O){if(ce(O))throw Error("division by zero");if(ce(M))return new he(N,N);if(oe(M))return O=_e(U(M),O),new he(U(O.g),U(O.h));if(oe(O))return O=_e(M,U(O)),new he(U(O.g),O.h);if(M.g.length>30){if(oe(M)||oe(O))throw Error("slowDivide_ only works with positive integers.");for(var V=I,F=O;F.l(M)<=0;)V=ke(V),F=ke(F);var B=Qe(V,1),ee=Qe(F,1);for(F=Qe(F,2),V=Qe(V,2);!ce(F);){var k=ee.add(F);k.l(M)<=0&&(B=B.add(V),ee=k),F=Qe(F,1),V=Qe(V,1)}return O=Q(M,B.j(O)),new he(B,O)}for(B=N;M.l(O)>=0;){for(V=Math.max(1,Math.floor(M.m()/O.m())),F=Math.ceil(Math.log(V)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),ee=v(V),k=ee.j(O);oe(k)||k.l(M)>0;)V-=F,ee=v(V),k=ee.j(O);ce(ee)&&(ee=I),B=B.add(ee),M=Q(M,k)}return new he(B,M)}a.B=function(M){return _e(this,M).h},a.and=function(M){const O=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<O;F++)V[F]=this.i(F)&M.i(F);return new p(V,this.h&M.h)},a.or=function(M){const O=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<O;F++)V[F]=this.i(F)|M.i(F);return new p(V,this.h|M.h)},a.xor=function(M){const O=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<O;F++)V[F]=this.i(F)^M.i(F);return new p(V,this.h^M.h)};function ke(M){const O=M.g.length+1,V=[];for(let F=0;F<O;F++)V[F]=M.i(F)<<1|M.i(F-1)>>>31;return new p(V,M.h)}function Qe(M,O){const V=O>>5;O%=32;const F=M.g.length-V,B=[];for(let ee=0;ee<F;ee++)B[ee]=O>0?M.i(ee+V)>>>O|M.i(ee+V+1)<<32-O:M.i(ee+V);return new p(B,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Qb=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=v,p.fromString=A,Ks=p}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Yb,Au,Xb,ch,vm,$b,Zb,Jb;(function(){var a,t=Object.defineProperty;function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof nh=="object"&&nh];for(var x=0;x<c.length;++x){var T=c[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=r(this);function l(c,x){if(x)e:{var T=s;c=c.split(".");for(var j=0;j<c.length-1;j++){var le=c[j];if(!(le in T))break e;T=T[le]}c=c[c.length-1],j=T[c],x=x(j),x!=j&&x!=null&&t(T,c,{configurable:!0,writable:!0,value:x})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(x){var T=[],j;for(j in x)Object.prototype.hasOwnProperty.call(x,j)&&T.push([j,x[j]]);return T}});var u=u||{},p=this||self;function _(c){var x=typeof c;return x=="object"&&c!=null||x=="function"}function b(c,x,T){return c.call.apply(c.bind,arguments)}function v(c,x,T){return v=b,v.apply(null,arguments)}function A(c,x){var T=Array.prototype.slice.call(arguments,1);return function(){var j=T.slice();return j.push.apply(j,arguments),c.apply(this,j)}}function N(c,x){function T(){}T.prototype=x.prototype,c.Z=x.prototype,c.prototype=new T,c.prototype.constructor=c,c.Ob=function(j,le,ge){for(var Me=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)Me[lt-2]=arguments[lt];return x.prototype[le].apply(j,Me)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function $(c){const x=c.length;if(x>0){const T=Array(x);for(let j=0;j<x;j++)T[j]=c[j];return T}return[]}function ce(c,x){for(let j=1;j<arguments.length;j++){const le=arguments[j];var T=typeof le;if(T=T!="object"?T:le?Array.isArray(le)?"array":T:"null",T=="array"||T=="object"&&typeof le.length=="number"){T=c.length||0;const ge=le.length||0;c.length=T+ge;for(let Me=0;Me<ge;Me++)c[T+Me]=le[Me]}else c.push(le)}}class oe{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function U(c){p.setTimeout(()=>{throw c},0)}function Q(){var c=M;let x=null;return c.g&&(x=c.g,c.g=c.g.next,c.g||(c.h=null),x.next=null),x}class Z{constructor(){this.h=this.g=null}add(x,T){const j=he.get();j.set(x,T),this.h?this.h.next=j:this.g=j,this.h=j}}var he=new oe(()=>new _e,c=>c.reset());class _e{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,Qe=!1,M=new Z,O=()=>{const c=Promise.resolve(void 0);ke=()=>{c.then(V)}};function V(){for(var c;c=Q();){try{c.h.call(c.g)}catch(T){U(T)}var x=he;x.j(c),x.h<100&&(x.h++,c.next=x.g,x.g=c)}Qe=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(c,x){this.type=c,this.g=this.target=x,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var ee=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,x=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};p.addEventListener("test",T,x),p.removeEventListener("test",T,x)}catch{}return c})();function k(c){return/^[\s\xa0]*$/.test(c)}function ft(c,x){B.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,x)}N(ft,B),ft.prototype.init=function(c,x){const T=this.type=c.type,j=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=x,x=c.relatedTarget,x||(T=="mouseover"?x=c.fromElement:T=="mouseout"&&(x=c.toElement)),this.relatedTarget=x,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ft.Z.h.call(this)},ft.prototype.h=function(){ft.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),J=0;function Ne(c,x,T,j,le){this.listener=c,this.proxy=null,this.src=x,this.type=T,this.capture=!!j,this.ha=le,this.key=++J,this.da=this.fa=!1}function Y(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qe(c,x,T){for(const j in c)x.call(T,c[j],j,c)}function $e(c,x){for(const T in c)x.call(void 0,c[T],T,c)}function L(c){const x={};for(const T in c)x[T]=c[T];return x}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(c,x){let T,j;for(let le=1;le<arguments.length;le++){j=arguments[le];for(T in j)c[T]=j[T];for(let ge=0;ge<ve.length;ge++)T=ve[ge],Object.prototype.hasOwnProperty.call(j,T)&&(c[T]=j[T])}}function Re(c){this.src=c,this.g={},this.h=0}Re.prototype.add=function(c,x,T,j,le){const ge=c.toString();c=this.g[ge],c||(c=this.g[ge]=[],this.h++);const Me=Je(c,x,j,le);return Me>-1?(x=c[Me],T||(x.fa=!1)):(x=new Ne(x,this.src,ge,!!j,le),x.fa=T,c.push(x)),x};function He(c,x){const T=x.type;if(T in c.g){var j=c.g[T],le=Array.prototype.indexOf.call(j,x,void 0),ge;(ge=le>=0)&&Array.prototype.splice.call(j,le,1),ge&&(Y(x),c.g[T].length==0&&(delete c.g[T],c.h--))}}function Je(c,x,T,j){for(let le=0;le<c.length;++le){const ge=c[le];if(!ge.da&&ge.listener==x&&ge.capture==!!T&&ge.ha==j)return le}return-1}var at="closure_lm_"+(Math.random()*1e6|0),Ft={};function Oe(c,x,T,j,le){if(Array.isArray(x)){for(let ge=0;ge<x.length;ge++)Oe(c,x[ge],T,j,le);return null}return T=Xn(T),c&&c[_t]?c.J(x,T,_(j)?!!j.capture:!1,le):fn(c,x,T,!1,j,le)}function fn(c,x,T,j,le,ge){if(!x)throw Error("Invalid event type");const Me=_(le)?!!le.capture:!!le;let lt=Ut(c);if(lt||(c[at]=lt=new Re(c)),T=lt.add(x,T,j,Me,ge),T.proxy)return T;if(j=On(),T.proxy=j,j.src=c,j.listener=T,c.addEventListener)ee||(le=Me),le===void 0&&(le=!1),c.addEventListener(x.toString(),j,le);else if(c.attachEvent)c.attachEvent(Ht(x.toString()),j);else if(c.addListener&&c.removeListener)c.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return T}function On(){function c(T){return x.call(c.src,c.listener,T)}const x=gt;return c}function Ye(c,x,T,j,le){if(Array.isArray(x))for(var ge=0;ge<x.length;ge++)Ye(c,x[ge],T,j,le);else j=_(j)?!!j.capture:!!j,T=Xn(T),c&&c[_t]?(c=c.i,ge=String(x).toString(),ge in c.g&&(x=c.g[ge],T=Je(x,T,j,le),T>-1&&(Y(x[T]),Array.prototype.splice.call(x,T,1),x.length==0&&(delete c.g[ge],c.h--)))):c&&(c=Ut(c))&&(x=c.g[x.toString()],c=-1,x&&(c=Je(x,T,j,le)),(T=c>-1?x[c]:null)&&et(T))}function et(c){if(typeof c!="number"&&c&&!c.da){var x=c.src;if(x&&x[_t])He(x.i,c);else{var T=c.type,j=c.proxy;x.removeEventListener?x.removeEventListener(T,j,c.capture):x.detachEvent?x.detachEvent(Ht(T),j):x.addListener&&x.removeListener&&x.removeListener(j),(T=Ut(x))?(He(T,c),T.h==0&&(T.src=null,x[at]=null)):Y(c)}}}function Ht(c){return c in Ft?Ft[c]:Ft[c]="on"+c}function gt(c,x){if(c.da)c=!0;else{x=new ft(x,this);const T=c.listener,j=c.ha||c.src;c.fa&&et(c),c=T.call(j,x)}return c}function Ut(c){return c=c[at],c instanceof Re?c:null}var on="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xn(c){return typeof c=="function"?c:(c[on]||(c[on]=function(x){return c.handleEvent(x)}),c[on])}function Rt(){F.call(this),this.i=new Re(this),this.M=this,this.G=null}N(Rt,F),Rt.prototype[_t]=!0,Rt.prototype.removeEventListener=function(c,x,T,j){Ye(this,c,x,T,j)};function Mt(c,x){var T,j=c.G;if(j)for(T=[];j;j=j.G)T.push(j);if(c=c.M,j=x.type||x,typeof x=="string")x=new B(x,c);else if(x instanceof B)x.target=x.target||c;else{var le=x;x=new B(j,c),Ce(x,le)}le=!0;let ge,Me;if(T)for(Me=T.length-1;Me>=0;Me--)ge=x.g=T[Me],le=wn(ge,j,!0,x)&&le;if(ge=x.g=c,le=wn(ge,j,!0,x)&&le,le=wn(ge,j,!1,x)&&le,T)for(Me=0;Me<T.length;Me++)ge=x.g=T[Me],le=wn(ge,j,!1,x)&&le}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var c=this.i;for(const x in c.g){const T=c.g[x];for(let j=0;j<T.length;j++)Y(T[j]);delete c.g[x],c.h--}}this.G=null},Rt.prototype.J=function(c,x,T,j){return this.i.add(String(c),x,!1,T,j)},Rt.prototype.K=function(c,x,T,j){return this.i.add(String(c),x,!0,T,j)};function wn(c,x,T,j){if(x=c.i.g[String(x)],!x)return!0;x=x.concat();let le=!0;for(let ge=0;ge<x.length;++ge){const Me=x[ge];if(Me&&!Me.da&&Me.capture==T){const lt=Me.listener,vn=Me.ha||Me.src;Me.fa&&He(c.i,Me),le=lt.call(vn,j)!==!1&&le}}return le&&!j.defaultPrevented}function Lo(c,x){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=v(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:p.setTimeout(c,x||0)}function ri(c){c.g=Lo(()=>{c.g=null,c.i&&(c.i=!1,ri(c))},c.l);const x=c.h;c.h=null,c.m.apply(null,x)}class $n extends F{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ri(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(c){F.call(this),this.h=c,this.g={}}N(Zr,F);var Jr=[];function Wr(c){qe(c.g,function(x,T){this.g.hasOwnProperty(T)&&et(x)},c),c.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),Wr(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ba=p.JSON.stringify,Ei=p.JSON.parse,rs=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function wi(){}function _a(){}var dr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tn(){B.call(this,"d")}N(Tn,B);function Sn(){B.call(this,"c")}N(Sn,B);var Be={},ai=null;function Rr(){return ai=ai||new Rt}Be.Ia="serverreachability";function Ti(c){B.call(this,Be.Ia,c)}N(Ti,B);function Pe(c){const x=Rr();Mt(x,new Ti(x))}Be.STAT_EVENT="statevent";function Ba(c,x){B.call(this,Be.STAT_EVENT,c),this.stat=x}N(Ba,B);function dn(c){const x=Rr();Mt(x,new Ba(x,c))}Be.Ja="timingevent";function Cr(c,x){B.call(this,Be.Ja,c),this.size=x}N(Cr,B);function ea(c,x){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},x)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Ul(c,x,T,j,le,ge){c.info(function(){if(c.g)if(ge){var Me="",lt=ge.split("&");for(let Ct=0;Ct<lt.length;Ct++){var vn=lt[Ct].split("=");if(vn.length>1){const Qt=vn[0];vn=vn[1];const Br=Qt.split("_");Me=Br.length>=2&&Br[1]=="type"?Me+(Qt+"="+vn+"&"):Me+(Qt+"=redacted&")}}}else Me=null;else Me=ge;return"XMLHTTP REQ ("+j+") [attempt "+le+"]: "+x+`
`+T+`
`+Me})}function zo(c,x,T,j,le,ge,Me){c.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+le+"]: "+x+`
`+T+`
`+ge+" "+Me})}function ir(c,x,T,j){c.info(function(){return"XMLHTTP TEXT ("+x+"): "+to(c,T)+(j?" "+j:"")})}function jr(c,x){c.info(function(){return"TIMEOUT: "+x})}Er.prototype.info=function(){};function to(c,x){if(!c.g)return x;if(!x)return null;try{const ge=JSON.parse(x);if(ge){for(c=0;c<ge.length;c++)if(Array.isArray(ge[c])){var T=ge[c];if(!(T.length<2)){var j=T[1];if(Array.isArray(j)&&!(j.length<1)){var le=j[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Me=1;Me<j.length;Me++)j[Me]=""}}}}return ba(ge)}catch{return x}}var xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ln;function Si(){}N(Si,wi),Si.prototype.g=function(){return new XMLHttpRequest},ln=new Si;function Dr(c){return encodeURIComponent(String(c))}function Ai(c){var x=1;c=c.split(":");const T=[];for(;x>0&&c.length;)T.push(c.shift()),x--;return c.length&&T.push(c.join(":")),T}function mr(c,x,T,j){this.j=c,this.i=x,this.l=T,this.S=j||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ta}function ta(){this.i=null,this.g="",this.h=!1}var Kt={},nn={};function Kn(c,x,T){c.M=1,c.A=oi(pn(x)),c.u=T,c.R=!0,qa(c,null)}function qa(c,x){c.F=Date.now(),Zn(c),c.B=pn(c.A);var T=c.B,j=c.S;Array.isArray(j)||(j=[String(j)]),ls(T.i,"t",j),c.C=0,T=c.j.L,c.h=new ta,c.g=Rn(c.j,T?x:null,!c.u),c.P>0&&(c.O=new $n(v(c.Y,c,c.g),c.P)),x=c.V,T=c.g,j=c.ba;var le="readystatechange";Array.isArray(le)||(le&&(Jr[0]=le.toString()),le=Jr);for(let ge=0;ge<le.length;ge++){const Me=Oe(T,le[ge],j||x.handleEvent,!1,x.h||x);if(!Me)break;x.g[Me.key]=Me}x=c.J?L(c.J):{},c.u?(c.v||(c.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,x)):(c.v="GET",c.g.ea(c.B,c.v,null,x)),Pe(),Ul(c.i,c.v,c.B,c.l,c.S,c.u)}mr.prototype.ba=function(c){c=c.target;const x=this.O;x&&ua(c)==3?x.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{const lt=ua(this.g),vn=this.g.ya(),Ct=this.g.ca();if(!(lt<3)&&(lt!=3||this.g&&(this.h.h||this.g.la()||yn(this.g)))){this.K||lt!=4||vn==7||(vn==8||Ct<=0?Pe(3):Pe(2)),Ir(this);var x=this.g.ca();this.X=x;var T=Bl(this);if(this.o=x==200,zo(this.i,this.v,this.B,this.l,this.S,lt,x),this.o){if(this.U&&!this.L){t:{if(this.g){var j,le=this.g;if((j=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(j)){var ge=j;break t}}ge=null}if(c=ge)ir(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mn(this,c);else{this.o=!1,this.m=3,dn(12),An(this),Dt(this);break e}}if(this.R){c=!0;let Qt;for(;!this.K&&this.C<T.length;)if(Qt=no(this,T),Qt==nn){lt==4&&(this.m=4,dn(14),c=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Kt){this.m=4,dn(15),ir(this.i,this.l,T,"[Invalid Chunk]"),c=!1;break}else ir(this.i,this.l,Qt,null),Mn(this,Qt);if(na(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||T.length!=0||this.h.h||(this.m=1,dn(16),c=!1),this.o=this.o&&c,!c)ir(this.i,this.l,T,"[Invalid Chunked Response]"),An(this),Dt(this);else if(T.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),ui(Me),Me.P=!0,dn(11))}}else ir(this.i,this.l,T,null),Mn(this,T);lt==4&&An(this),this.o&&!this.K&&(lt==4?Xa(this.j,this):(this.o=!1,Zn(this)))}else Qa(this.g),x==400&&T.indexOf("Unknown SID")>0?(this.m=3,dn(12)):(this.m=0,dn(13)),An(this),Dt(this)}}}catch{}finally{}};function Bl(c){if(!na(c))return c.g.la();const x=yn(c.g);if(x==="")return"";let T="";const j=x.length,le=ua(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return An(c),Dt(c),"";c.h.i=new p.TextDecoder}for(let ge=0;ge<j;ge++)c.h.h=!0,T+=c.h.i.decode(x[ge],{stream:!(le&&ge==j-1)});return x.length=0,c.h.g+=T,c.C=0,c.h.g}function na(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function no(c,x){var T=c.C,j=x.indexOf(`
`,T);return j==-1?nn:(T=Number(x.substring(T,j)),isNaN(T)?Kt:(j+=1,j+T>x.length?nn:(x=x.slice(j,j+T),c.C=j+T,x)))}mr.prototype.cancel=function(){this.K=!0,An(this)};function Zn(c){c.T=Date.now()+c.H,Ni(c,c.H)}function Ni(c,x){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ea(v(c.aa,c),x)}function Ir(c){c.D&&(p.clearTimeout(c.D),c.D=null)}mr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(jr(this.i,this.B),this.M!=2&&(Pe(),dn(17)),An(this),this.m=2,Dt(this)):Ni(this,this.T-c)};function Dt(c){c.j.I==0||c.K||Xa(c.j,c)}function An(c){Ir(c);var x=c.O;x&&typeof x.dispose=="function"&&x.dispose(),c.O=null,Wr(c.V),c.g&&(x=c.g,c.g=null,x.abort(),x.dispose())}function Mn(c,x){try{var T=c.j;if(T.I!=0&&(T.g==c||Mr(T.h,c))){if(!c.L&&Mr(T.h,c)&&T.I==3){try{var j=T.Ba.g.parse(x)}catch{j=null}if(Array.isArray(j)&&j.length==3){var le=j;if(le[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<c.F)fs(T),Aa(T);else break e;Ra(T),dn(18)}}else T.xa=le[1],0<T.xa-T.K&&le[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ea(v(T.Va,T),6e3));Or(T.h)<=1&&T.ta&&(T.ta=void 0)}else zr(T,11)}else if((c.L||T.g==c)&&fs(T),!k(x))for(le=T.Ba.g.parse(x),x=0;x<le.length;x++){let Ct=le[x];const Qt=Ct[0];if(!(Qt<=T.K))if(T.K=Qt,Ct=Ct[1],T.I==2)if(Ct[0]=="c"){T.M=Ct[1],T.ba=Ct[2];const Br=Ct[3];Br!=null&&(T.ka=Br,T.j.info("VER="+T.ka));const qr=Ct[4];qr!=null&&(T.za=qr,T.j.info("SVER="+T.za));const Sr=Ct[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(j=1.5*Sr,T.O=j,T.j.info("backChannelRequestTimeoutMs_="+j)),j=T;const ha=c.g;if(ha){const hi=ha.g?ha.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var ge=j.h;ge.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(ra(ge,ge.h),ge.h=null))}if(j.G){const gs=ha.g?ha.g.getResponseHeader("X-HTTP-Session-Id"):null;gs&&(j.wa=gs,Vt(j.J,j.G,gs))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-c.F,T.j.info("Handshake RTT: "+T.T+"ms")),j=T;var Me=c;if(j.na=ps(j,j.L?j.ba:null,j.W),Me.L){as(j.h,Me);var lt=Me,vn=j.O;vn&&(lt.H=vn),lt.D&&(Ir(lt),Zn(lt)),j.g=Me}else Di(j);T.i.length>0&&Na(T)}else Ct[0]!="stop"&&Ct[0]!="close"||zr(T,7);else T.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?zr(T,7):li(T):Ct[0]!="noop"&&T.l&&T.l.qa(Ct),T.A=0)}}Pe(4)}catch{}}var mn=class{constructor(c,x){this.g=c,this.map=x}};function Ea(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ii(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Or(c){return c.h?1:c.g?c.g.size:0}function Mr(c,x){return c.h?c.h==x:c.g?c.g.has(x):!1}function ra(c,x){c.g?c.g.add(x):c.h=x}function as(c,x){c.h&&c.h==x?c.h=null:c.g&&c.g.has(x)&&c.g.delete(x)}Ea.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function si(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let x=c.i;for(const T of c.g.values())x=x.concat(T.G);return x}return $(c.i)}var ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(c,x){if(c){c=c.split("&");for(let T=0;T<c.length;T++){const j=c[T].indexOf("=");let le,ge=null;j>=0?(le=c[T].substring(0,j),ge=c[T].substring(j+1)):le=c[T],x(le,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function pr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;c instanceof pr?(this.l=c.l,gn(this,c.j),this.o=c.o,this.g=c.g,Vr(this,c.u),this.h=c.h,is(this,Bo(c.i)),this.m=c.m):c&&(x=String(c).match(ro))?(this.l=!1,gn(this,x[1]||"",!0),this.o=xt(x[2]||""),this.g=xt(x[3]||"",!0),Vr(this,x[4]),this.h=xt(x[5]||"",!0),is(this,x[6]||"",!0),this.m=xt(x[7]||"")):(this.l=!1,this.i=new oa(null,this.l))}pr.prototype.toString=function(){const c=[];var x=this.j;x&&c.push(aa(x,ia,!0),":");var T=this.g;return(T||x=="file")&&(c.push("//"),(x=this.o)&&c.push(aa(x,ia,!0),"@"),c.push(Dr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&c.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(aa(T,T.charAt(0)=="/"?Ri:ss,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",aa(T,ao)),c.join("")},pr.prototype.resolve=function(c){const x=pn(this);let T=!!c.j;T?gn(x,c.j):T=!!c.o,T?x.o=c.o:T=!!c.g,T?x.g=c.g:T=c.u!=null;var j=c.h;if(T)Vr(x,c.u);else if(T=!!c.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var le=x.h.lastIndexOf("/");le!=-1&&(j=x.h.slice(0,le+1)+j)}if(le=j,le==".."||le==".")j="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){j=le.lastIndexOf("/",0)==0,le=le.split("/");const ge=[];for(let Me=0;Me<le.length;){const lt=le[Me++];lt=="."?j&&Me==le.length&&ge.push(""):lt==".."?((ge.length>1||ge.length==1&&ge[0]!="")&&ge.pop(),j&&Me==le.length&&ge.push("")):(ge.push(lt),j=!0)}j=ge.join("/")}else j=le}return T?x.h=j:T=c.i.toString()!=="",T?is(x,Bo(c.i)):T=!!c.m,T&&(x.m=c.m),x};function pn(c){return new pr(c)}function gn(c,x,T){c.j=T?xt(x,!0):x,c.j&&(c.j=c.j.replace(/:$/,""))}function Vr(c,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);c.u=x}else c.u=null}function is(c,x,T){x instanceof oa?(c.i=x,la(c.i,c.l)):(T||(x=aa(x,sa)),c.i=new oa(x,c.l))}function Vt(c,x,T){c.i.set(x,T)}function oi(c){return Vt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function xt(c,x){return c?x?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function aa(c,x,T){return typeof c=="string"?(c=encodeURI(c).replace(x,Vn),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Vn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ia=/[#\/\?@]/g,ss=/[#\?:]/g,Ri=/[#\?]/g,sa=/[#\?@]/g,ao=/#/g;function oa(c,x){this.h=this.g=null,this.i=c||null,this.j=!!x}function sr(c){c.g||(c.g=new Map,c.h=0,c.i&&dt(c.i,function(x,T){c.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}a=oa.prototype,a.add=function(c,x){sr(this),this.i=null,c=_n(this,c);let T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(x),this.h+=1,this};function Uo(c,x){sr(c),x=_n(c,x),c.g.has(x)&&(c.i=null,c.h-=c.g.get(x).length,c.g.delete(x))}function bt(c,x){return sr(c),x=_n(c,x),c.g.has(x)}a.forEach=function(c,x){sr(this),this.g.forEach(function(T,j){T.forEach(function(le){c.call(x,le,j,this)},this)},this)};function os(c,x){sr(c);let T=[];if(typeof x=="string")bt(c,x)&&(T=T.concat(c.g.get(_n(c,x))));else for(c=Array.from(c.g.values()),x=0;x<c.length;x++)T=T.concat(c[x]);return T}a.set=function(c,x){return sr(this),this.i=null,c=_n(this,c),bt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[x]),this.h+=1,this},a.get=function(c,x){return c?(c=os(this,c),c.length>0?String(c[0]):x):x};function ls(c,x,T){Uo(c,x),T.length>0&&(c.i=null,c.g.set(_n(c,x),$(T)),c.h+=T.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],x=Array.from(this.g.keys());for(let j=0;j<x.length;j++){var T=x[j];const le=Dr(T);T=os(this,T);for(let ge=0;ge<T.length;ge++){let Me=le;T[ge]!==""&&(Me+="="+Dr(T[ge])),c.push(Me)}}return this.i=c.join("&")};function Bo(c){const x=new oa;return x.i=c.i,c.g&&(x.g=new Map(c.g),x.h=c.h),x}function _n(c,x){return x=String(x),c.j&&(x=x.toLowerCase()),x}function la(c,x){x&&!c.j&&(sr(c),c.i=null,c.g.forEach(function(T,j){const le=j.toLowerCase();j!=le&&(Uo(this,j),ls(this,le,T))},c)),c.j=x}function gr(c,x){const T=new Er;if(p.Image){const j=new Image;j.onload=A(wr,T,"TestLoadImage: loaded",!0,x,j),j.onerror=A(wr,T,"TestLoadImage: error",!1,x,j),j.onabort=A(wr,T,"TestLoadImage: abort",!1,x,j),j.ontimeout=A(wr,T,"TestLoadImage: timeout",!1,x,j),p.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=c}else x(!1)}function kr(c,x){const T=new Er,j=new AbortController,le=setTimeout(()=>{j.abort(),wr(T,"TestPingServer: timeout",!1,x)},1e4);fetch(c,{signal:j.signal}).then(ge=>{clearTimeout(le),ge.ok?wr(T,"TestPingServer: ok",!0,x):wr(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(le),wr(T,"TestPingServer: error",!1,x)})}function wr(c,x,T,j,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),j(T)}catch{}}function Fa(){this.g=new rs}function Gt(c){this.i=c.Sb||null,this.h=c.ab||!1}N(Gt,wi),Gt.prototype.g=function(){return new Jn(this.i,this.h)};function Jn(c,x){Rt.call(this),this.H=c,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}N(Jn,Rt),a=Jn.prototype,a.open=function(c,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=x,this.readyState=1,Tr(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(x.body=c),(this.H||p).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var x=c.value?c.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!c.done}))&&(this.response=this.responseText+=x)}c.done?Pr(this):Tr(this),this.readyState==3&&wa(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,Pr(this))},a.Na=function(c){this.g&&(this.response=c,Pr(this))},a.ga=function(){this.g&&Pr(this)};function Pr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Tr(c)}a.setRequestHeader=function(c,x){this.A.append(c,x)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=x.next();return c.join(`\r
`)};function Tr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nn(c){let x="";return qe(c,function(T,j){x+=j,x+=":",x+=T,x+=`\r
`}),x}function Ci(c,x,T){e:{for(j in T){var j=!1;break e}j=!0}j||(T=Nn(T),typeof c=="string"?T!=null&&Dr(T):Vt(c,x,T))}function vt(c){Rt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}N(vt,Rt);var Lr=/^https?$/i,us=["POST","PUT"];a=vt.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,x,T,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);x=x?x.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ln.g(),this.g.onreadystatechange=I(v(this.Ca,this));try{this.B=!0,this.g.open(x,String(c),!0),this.B=!1}catch(ge){Ha(this,ge);return}if(c=T||"",T=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var le in j)T.set(le,j[le]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ge of j.keys())T.set(ge,j.get(ge));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(T.keys()).find(ge=>ge.toLowerCase()=="content-type"),le=p.FormData&&c instanceof p.FormData,!(Array.prototype.indexOf.call(us,x,void 0)>=0)||j||le||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Me]of T)this.g.setRequestHeader(ge,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(ge){Ha(this,ge)}};function Ha(c,x){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=x,c.o=5,Ka(c),Ta(c)}function Ka(c){c.A||(c.A=!0,Mt(c,"complete"),Mt(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Mt(this,"complete"),Mt(this,"abort"),Ta(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),vt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Ga(this):this.Xa())},a.Xa=function(){Ga(this)};function Ga(c){if(c.h&&typeof u<"u"){if(c.v&&ua(c)==4)setTimeout(c.Ca.bind(c),0);else if(Mt(c,"readystatechange"),ua(c)==4){c.h=!1;try{const ge=c.ca();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var j;if(j=ge===0){let Me=String(c.D).match(ro)[1]||null;!Me&&p.self&&p.self.location&&(Me=p.self.location.protocol.slice(0,-1)),j=!Lr.test(Me?Me.toLowerCase():"")}T=j}if(T)Mt(c,"complete"),Mt(c,"success");else{c.o=6;try{var le=ua(c)>2?c.g.statusText:""}catch{le=""}c.l=le+" ["+c.ca()+"]",Ka(c)}}finally{Ta(c)}}}}function Ta(c,x){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const T=c.g;c.g=null,x||Mt(c,"ready");try{T.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function ua(c){return c.g?c.g.readyState:0}a.ca=function(){try{return ua(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var x=this.g.responseText;return c&&x.indexOf(c)==0&&(x=x.substring(c.length)),Ei(x)}};function yn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qa(c){const x={};c=(c.g&&ua(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<c.length;j++){if(k(c[j]))continue;var T=Ai(c[j]);const le=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ge=x[le]||[];x[le]=ge,ge.push(T)}$e(x,function(j){return j.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(c,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||x}function ca(c){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,c),this.Za=Sa("retryDelaySeedMs",1e4,c),this.Ta=Sa("forwardChannelMaxRetries",2,c),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ea(c&&c.concurrentRequestLimit),this.Ba=new Fa,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ca.prototype,a.ka=8,a.I=1,a.connect=function(c,x,T,j){dn(0),this.W=c,this.H=x||{},T&&j!==void 0&&(this.H.OSID=T,this.H.OAID=j),this.F=this.X,this.J=ps(this,null,this.W),Na(this)};function li(c){if(cs(c),c.I==3){var x=c.V++,T=pn(c.J);if(Vt(T,"SID",c.M),Vt(T,"RID",x),Vt(T,"TYPE","terminate"),Ya(c,T),x=new mr(c,c.j,x),x.M=2,x.A=oi(pn(T)),T=!1,p.navigator&&p.navigator.sendBeacon)try{T=p.navigator.sendBeacon(x.A.toString(),"")}catch{}!T&&p.Image&&(new Image().src=x.A,T=!0),T||(x.g=Rn(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Zn(x)}ms(c)}function Aa(c){c.g&&(ui(c),c.g.cancel(),c.g=null)}function cs(c){Aa(c),c.v&&(p.clearTimeout(c.v),c.v=null),fs(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&p.clearTimeout(c.m),c.m=null)}function Na(c){if(!ii(c.h)&&!c.m){c.m=!0;var x=c.Ea;ke||O(),Qe||(ke(),Qe=!0),M.add(x,c),c.D=0}}function hs(c,x){return Or(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=x.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ea(v(c.Ea,c,x),ds(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const le=new mr(this,this.j,c);let ge=this.o;if(this.U&&(ge?(ge=L(ge),Ce(ge,this.U)):ge=this.U),this.u!==null||this.R||(le.J=ge,ge=null),this.S)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var j=this.i[T];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(x+=j,x>4096){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=io(this,le,x),T=pn(this.J),Vt(T,"RID",c),Vt(T,"CVER",22),this.G&&Vt(T,"X-HTTP-Session-Id",this.G),Ya(this,T),ge&&(this.R?x="headers="+Dr(Nn(ge))+"&"+x:this.u&&Ci(T,this.u,ge)),ra(this.h,le),this.Ra&&Vt(T,"TYPE","init"),this.S?(Vt(T,"$req",x),Vt(T,"SID","null"),le.U=!0,Kn(le,T,null)):Kn(le,T,x),this.I=2}}else this.I==3&&(c?ji(this,c):this.i.length==0||ii(this.h)||ji(this))};function ji(c,x){var T;x?T=x.l:T=c.V++;const j=pn(c.J);Vt(j,"SID",c.M),Vt(j,"RID",T),Vt(j,"AID",c.K),Ya(c,j),c.u&&c.o&&Ci(j,c.u,c.o),T=new mr(c,c.j,T,c.D+1),c.u===null&&(T.J=c.o),x&&(c.i=x.G.concat(c.i)),x=io(c,T,1e3),T.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ra(c.h,T),Kn(T,j,x)}function Ya(c,x){c.H&&qe(c.H,function(T,j){Vt(x,j,T)}),c.l&&qe({},function(T,j){Vt(x,j,T)})}function io(c,x,T){T=Math.min(c.i.length,T);const j=c.l?v(c.l.Ka,c.l,c):null;e:{var le=c.i;let lt=-1;for(;;){const vn=["count="+T];lt==-1?T>0?(lt=le[0].g,vn.push("ofs="+lt)):lt=0:vn.push("ofs="+lt);let Ct=!0;for(let Qt=0;Qt<T;Qt++){var ge=le[Qt].g;const Br=le[Qt].map;if(ge-=lt,ge<0)lt=Math.max(0,le[Qt].g-100),Ct=!1;else try{ge="req"+ge+"_"||"";try{var Me=Br instanceof Map?Br:Object.entries(Br);for(const[qr,Sr]of Me){let ha=Sr;_(Sr)&&(ha=ba(Sr)),vn.push(ge+qr+"="+encodeURIComponent(ha))}}catch(qr){throw vn.push(ge+"type="+encodeURIComponent("_badmap")),qr}}catch{j&&j(Br)}}if(Ct){Me=vn.join("&");break e}}Me=void 0}return c=c.i.splice(0,T),x.G=c,Me}function Di(c){if(!c.g&&!c.v){c.Y=1;var x=c.Da;ke||O(),Qe||(ke(),Qe=!0),M.add(x,c),c.A=0}}function Ra(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ea(v(c.Da,c),ds(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,so(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ea(v(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dn(10),Aa(this),so(this))};function ui(c){c.B!=null&&(p.clearTimeout(c.B),c.B=null)}function so(c){c.g=new mr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var x=pn(c.na);Vt(x,"RID","rpc"),Vt(x,"SID",c.M),Vt(x,"AID",c.K),Vt(x,"CI",c.F?"0":"1"),!c.F&&c.ia&&Vt(x,"TO",c.ia),Vt(x,"TYPE","xmlhttp"),Ya(c,x),c.u&&c.o&&Ci(x,c.u,c.o),c.O&&(c.g.H=c.O);var T=c.g;c=c.ba,T.M=1,T.A=oi(pn(x)),T.u=null,T.R=!0,qa(T,c)}a.Va=function(){this.C!=null&&(this.C=null,Aa(this),Ra(this),dn(19))};function fs(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function Xa(c,x){var T=null;if(c.g==x){fs(c),ui(c),c.g=null;var j=2}else if(Mr(c.h,x))T=x.G,as(c.h,x),j=1;else return;if(c.I!=0){if(x.o)if(j==1){T=x.u?x.u.length:0,x=Date.now()-x.F;var le=c.D;j=Rr(),Mt(j,new Cr(j,T)),Na(c)}else Di(c);else if(le=x.m,le==3||le==0&&x.X>0||!(j==1&&hs(c,x)||j==2&&Ra(c)))switch(T&&T.length>0&&(x=c.h,x.i=x.i.concat(T)),le){case 1:zr(c,5);break;case 4:zr(c,10);break;case 3:zr(c,6);break;default:zr(c,2)}}}function ds(c,x){let T=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(T*=2),T*x}function zr(c,x){if(c.j.info("Error code "+x),x==2){var T=v(c.bb,c),j=c.Ua;const le=!j;j=new pr(j||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||gn(j,"https"),oi(j),le?gr(j.toString(),T):kr(j.toString(),T)}else dn(2);c.I=0,c.l&&c.l.pa(x),ms(c),cs(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function ms(c){if(c.I=0,c.ja=[],c.l){const x=si(c.h);(x.length!=0||c.i.length!=0)&&(ce(c.ja,x),ce(c.ja,c.i),c.h.i.length=0,$(c.i),c.i.length=0),c.l.oa()}}function ps(c,x,T){var j=T instanceof pr?pn(T):new pr(T);if(j.g!="")x&&(j.g=x+"."+j.g),Vr(j,j.u);else{var le=p.location;j=le.protocol,x=x?x+"."+le.hostname:le.hostname,le=+le.port;const ge=new pr(null);j&&gn(ge,j),x&&(ge.g=x),le&&Vr(ge,le),T&&(ge.h=T),j=ge}return T=c.G,x=c.wa,T&&x&&Vt(j,T,x),Vt(j,"VER",c.ka),Ya(c,j),j}function Rn(c,x,T){if(x&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=c.Aa&&!c.ma?new vt(new Gt({ab:T})):new vt(c.ma),x.Fa(c.L),x}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function ci(){}a=ci.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Ur(){}Ur.prototype.g=function(c,x){return new Wn(c,x)};function Wn(c,x){Rt.call(this),this.g=new ca(x),this.l=c,this.h=x&&x.messageUrlParams||null,c=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(c?c["X-WebChannel-Content-Type"]=x.messageContentType:c={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(c?c["X-WebChannel-Client-Profile"]=x.sa:c={"X-WebChannel-Client-Profile":x.sa}),this.g.U=c,(c=x&&x.Qb)&&!k(c)&&(this.g.u=c),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!k(x)&&(this.g.G=x,c=this.h,c!==null&&x in c&&(c=this.h,x in c&&delete c[x])),this.j=new Ca(this)}N(Wn,Rt),Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){li(this.g)},Wn.prototype.o=function(c){var x=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.v&&(T={},T.__data__=ba(c),c=T);x.i.push(new mn(x.Ya++,c)),x.I==3&&Na(x)},Wn.prototype.N=function(){this.g.l=null,delete this.j,li(this.g),delete this.g,Wn.Z.N.call(this)};function Ii(c){Tn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var x=c.__sm__;if(x){e:{for(const T in x){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,x=x!==null&&c in x?x[c]:void 0),this.data=x}else this.data=c}N(Ii,Tn);function oo(){Sn.call(this),this.status=1}N(oo,Sn);function Ca(c){this.g=c}N(Ca,ci),Ca.prototype.ra=function(){Mt(this.g,"a")},Ca.prototype.qa=function(c){Mt(this.g,new Ii(c))},Ca.prototype.pa=function(c){Mt(this.g,new oo)},Ca.prototype.oa=function(){Mt(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,Jb=function(){return new Ur},Zb=function(){return Rr()},$b=Be,vm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,ch=xa,Bt.COMPLETE="complete",Xb=Bt,_a.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Au=_a,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,Yb=vt}).apply(typeof nh<"u"?nh:typeof self<"u"?self:typeof window<"u"?window:{});const i0="@firebase/firestore",s0="4.9.2";class _r{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");let kl="12.3.0";const jo=new Bb("@firebase/firestore");function pl(){return jo.logLevel}function Ke(a,...t){if(jo.logLevel<=Ot.DEBUG){const r=t.map(Ym);jo.debug(`Firestore (${kl}): ${a}`,...r)}}function es(a,...t){if(jo.logLevel<=Ot.ERROR){const r=t.map(Ym);jo.error(`Firestore (${kl}): ${a}`,...r)}}function Do(a,...t){if(jo.logLevel<=Ot.WARN){const r=t.map(Ym);jo.warn(`Firestore (${kl}): ${a}`,...r)}}function Ym(a){if(typeof a=="string")return a;try{return(function(r){return JSON.stringify(r)})(a)}catch{return a}}function it(a,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,Wb(a,s,r)}function Wb(a,t,r){let s=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${a.toString(16)})`;if(r!==void 0)try{s+=" CONTEXT: "+JSON.stringify(r)}catch{s+=" CONTEXT: "+r}throw es(s),new Error(s)}function qt(a,t,r,s){let l="Unexpected state";typeof r=="string"?l=r:s=r,a||Wb(t,l,s)}function ht(a,t){return a}const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends Vl{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class No{constructor(){this.promise=new Promise(((t,r)=>{this.resolve=t,this.reject=r}))}}class e_{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class t_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable((()=>r(_r.UNAUTHENTICATED)))}shutdown(){}}class yS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class vS{constructor(t){this.t=t,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){qt(this.o===void 0,42304);let s=this.i;const l=b=>this.i!==s?(s=this.i,r(b)):Promise.resolve();let u=new No;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new No,t.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const b=u;t.enqueueRetryable((async()=>{await b.promise,await l(this.currentUser)}))},_=b=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((b=>_(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new No)}}),0),p()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((s=>this.i!==t?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qt(typeof s.accessToken=="string",31837,{l:s}),new e_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return qt(t===null||typeof t=="string",2055,{h:t}),new _r(t)}}class bS{constructor(t,r,s){this.P=t,this.T=r,this.I=s,this.type="FirstParty",this.user=_r.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _S{constructor(t,r,s){this.P=t,this.T=r,this.I=s}getToken(){return Promise.resolve(new bS(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable((()=>r(_r.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class o0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xS{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eS(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){qt(this.o===void 0,3512);const s=u=>{u.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const p=u.token!==this.m;return this.m=u.token,Ke("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?r(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const l=u=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new o0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((r=>r?(qt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new o0(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ES(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class Fh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=ES(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<r&&(s+=t.charAt(l[u]%62))}return s}}function At(a,t){return a<t?-1:a>t?1:0}function bm(a,t){const r=Math.min(a.length,t.length);for(let s=0;s<r;s++){const l=a.charAt(s),u=t.charAt(s);if(l!==u)return sm(l)===sm(u)?At(l,u):sm(l)?1:-1}return At(a.length,t.length)}const wS=55296,TS=57343;function sm(a){const t=a.charCodeAt(0);return t>=wS&&t<=TS}function El(a,t,r){return a.length===t.length&&a.every(((s,l)=>r(s,t[l])))}const l0="__name__";class yi{constructor(t,r,s){r===void 0?r=0:r>t.length&&it(637,{offset:r,range:t.length}),s===void 0?s=t.length-r:s>t.length-r&&it(1746,{length:s,range:t.length-r}),this.segments=t,this.offset=r,this.len=s}get length(){return this.len}isEqual(t){return yi.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof yi?t.forEach((s=>{r.push(s)})):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,s=this.limit();r<s;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const s=Math.min(t.length,r.length);for(let l=0;l<s;l++){const u=yi.compareSegments(t.get(l),r.get(l));if(u!==0)return u}return At(t.length,r.length)}static compareSegments(t,r){const s=yi.isNumericId(t),l=yi.isNumericId(r);return s&&!l?-1:!s&&l?1:s&&l?yi.extractNumericId(t).compare(yi.extractNumericId(r)):bm(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ks.fromString(t.substring(4,t.length-2))}}class en extends yi{construct(t,r,s){return new en(t,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const s of t){if(s.indexOf("//")>=0)throw new Ge(Se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter((l=>l.length>0)))}return new en(r)}static emptyPath(){return new en([])}}const SS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends yi{construct(t,r,s){return new rr(t,r,s)}static isValidIdentifier(t){return SS.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l0}static keyField(){return new rr([l0])}static fromServerFormat(t){const r=[];let s="",l=0;const u=()=>{if(s.length===0)throw new Ge(Se.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let p=!1;for(;l<t.length;){const _=t[l];if(_==="\\"){if(l+1===t.length)throw new Ge(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const b=t[l+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new Ge(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=b,l+=2}else _==="`"?(p=!p,l++):_!=="."||p?(s+=_,l++):(u(),l++)}if(u(),p)throw new Ge(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new rr(r)}static emptyPath(){return new rr([])}}class We{constructor(t){this.path=t}static fromPath(t){return new We(en.fromString(t))}static fromName(t){return new We(en.fromString(t).popFirst(5))}static empty(){return new We(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&en.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return en.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new We(new en(t.slice()))}}function n_(a,t,r){if(!r)throw new Ge(Se.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function r_(a,t,r,s){if(t===!0&&s===!0)throw new Ge(Se.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function u0(a){if(!We.isDocumentKey(a))throw new Ge(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function c0(a){if(We.isDocumentKey(a))throw new Ge(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function a_(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Hh(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":it(12329,{type:typeof a})}function Gs(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Ge(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Hh(a);throw new Ge(Se.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function Hn(a,t){const r={typeString:a};return t&&(r.value=t),r}function Qu(a,t){if(!a_(a))throw new Ge(Se.INVALID_ARGUMENT,"JSON must be an object");let r;for(const s in t)if(t[s]){const l=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in a)){r=`JSON missing required field: '${s}'`;break}const p=a[s];if(l&&typeof p!==l){r=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&p!==u.value){r=`Expected '${s}' field to equal '${u.value}'`;break}}if(r)throw new Ge(Se.INVALID_ARGUMENT,r);return!0}const h0=-62135596800,f0=1e6;class tn{static now(){return tn.fromMillis(Date.now())}static fromDate(t){return tn.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),s=Math.floor((t-1e3*r)*f0);return new tn(r,s)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<h0)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ge(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f0}_compareTo(t){return this.seconds===t.seconds?At(this.nanoseconds,t.nanoseconds):At(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qu(t,tn._jsonSchema))return new tn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-h0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tn._jsonSchemaVersion="firestore/timestamp/1.0",tn._jsonSchema={type:Hn("string",tn._jsonSchemaVersion),seconds:Hn("number"),nanoseconds:Hn("number")};class ut{static fromTimestamp(t){return new ut(t)}static min(){return new ut(new tn(0,0))}static max(){return new ut(new tn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zu=-1;function AS(a,t){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,l=ut.fromTimestamp(s===1e9?new tn(r+1,0):new tn(r,s));return new Xs(l,We.empty(),t)}function NS(a){return new Xs(a.readTime,a.key,zu)}class Xs{constructor(t,r,s){this.readTime=t,this.documentKey=r,this.largestBatchId=s}static min(){return new Xs(ut.min(),We.empty(),zu)}static max(){return new Xs(ut.max(),We.empty(),zu)}}function RS(a,t){let r=a.readTime.compareTo(t.readTime);return r!==0?r:(r=We.comparator(a.documentKey,t.documentKey),r!==0?r:At(a.largestBatchId,t.largestBatchId))}const CS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Pl(a){if(a.code!==Se.FAILED_PRECONDITION||a.message!==CS)throw a;Ke("LocalStore","Unexpectedly lost primary lease")}class Ae{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&it(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ae(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(r,u).next(s,l)}}))}toPromise(){return new Promise(((t,r)=>{this.next(t,r)}))}wrapUserFunction(t){try{const r=t();return r instanceof Ae?r:Ae.resolve(r)}catch(r){return Ae.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction((()=>t(r))):Ae.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction((()=>t(r))):Ae.reject(r)}static resolve(t){return new Ae(((r,s)=>{r(t)}))}static reject(t){return new Ae(((r,s)=>{s(t)}))}static waitFor(t){return new Ae(((r,s)=>{let l=0,u=0,p=!1;t.forEach((_=>{++l,_.next((()=>{++u,p&&u===l&&r()}),(b=>s(b)))})),p=!0,u===l&&r()}))}static or(t){let r=Ae.resolve(!1);for(const s of t)r=r.next((l=>l?Ae.resolve(l):s()));return r}static forEach(t,r){const s=[];return t.forEach(((l,u)=>{s.push(r.call(this,l,u))})),this.waitFor(s)}static mapArray(t,r){return new Ae(((s,l)=>{const u=t.length,p=new Array(u);let _=0;for(let b=0;b<u;b++){const v=b;r(t[v]).next((A=>{p[v]=A,++_,_===u&&s(p)}),(A=>l(A)))}}))}static doWhile(t,r){return new Ae(((s,l)=>{const u=()=>{t()===!0?r().next((()=>{u()}),l):s()};u()}))}}function DS(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ll(a){return a.name==="IndexedDbTransactionError"}class Kh{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>r.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Kh.ce=-1;const Xm=-1;function Gh(a){return a==null}function Th(a){return a===0&&1/a==-1/0}function IS(a){return typeof a=="number"&&Number.isInteger(a)&&!Th(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const i_="";function OS(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=d0(t)),t=MS(a.get(r),t);return d0(t)}function MS(a,t){let r=t;const s=a.length;for(let l=0;l<s;l++){const u=a.charAt(l);switch(u){case"\0":r+="";break;case i_:r+="";break;default:r+=u}}return r}function d0(a){return a+i_+""}function m0(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function Oo(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function s_(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class bn{constructor(t,r){this.comparator=t,this.root=r||hr.EMPTY}insert(t,r){return new bn(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(t){return new bn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hr.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(t){let r=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return r+s.left.size;l<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((r,s)=>(t(r,s),!1)))}toString(){const t=[];return this.inorderTraversal(((r,s)=>(t.push(`${r}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new rh(this.root,t,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new rh(this.root,t,this.comparator,!0)}}class rh{constructor(t,r,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=r?s(t.key,r):1,r&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hr{constructor(t,r,s,l,u){this.key=t,this.value=r,this.color=s??hr.RED,this.left=l??hr.EMPTY,this.right=u??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,s,l,u){return new hr(t??this.key,r??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let l=this;const u=s(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,r,s),null):u===0?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let s,l=this;if(r(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),r(t,l.key)===0){if(l.right.isEmpty())return hr.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw it(43730,{key:this.key,value:this.value});if(this.right.isRed())throw it(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw it(27949);return t+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw it(57766)}get value(){throw it(16141)}get color(){throw it(16727)}get left(){throw it(29726)}get right(){throw it(36894)}copy(t,r,s,l,u){return this}insert(t,r,s){return new hr(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yn{constructor(t){this.comparator=t,this.data=new bn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((r,s)=>(t(r),!1)))}forEachInRange(t,r){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;r(l.key)}}forEachWhile(t,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(t){return new p0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach((s=>{r=r.add(s)})),r}isEqual(t){if(!(t instanceof Yn)||this.size!==t.size)return!1;const r=this.data.getIterator(),s=t.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((r=>{t.push(r)})),t}toString(){const t=[];return this.forEach((r=>t.push(r))),"SortedSet("+t.toString()+")"}copy(t){const r=new Yn(this.comparator);return r.data=t,r}}class p0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ja{constructor(t){this.fields=t,t.sort(rr.comparator)}static empty(){return new Ja([])}unionWith(t){let r=new Yn(rr.comparator);for(const s of this.fields)r=r.add(s);for(const s of t)r=r.add(s);return new Ja(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return El(this.fields,t.fields,((r,s)=>r.isEqual(s)))}}class o_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ar{constructor(t){this.binaryString=t}static fromBase64String(t){const r=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new o_("Invalid base64 string: "+u):u}})(t);return new ar(r)}static fromUint8Array(t){const r=(function(l){let u="";for(let p=0;p<l.length;++p)u+=String.fromCharCode(l[p]);return u})(t);return new ar(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const s=new Uint8Array(r.length);for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return At(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const VS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(a){if(qt(!!a,39018),typeof a=="string"){let t=0;const r=VS.exec(a);if(qt(!!r,46558,{timestamp:a}),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Dn(a.seconds),nanos:Dn(a.nanos)}}function Dn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Zs(a){return typeof a=="string"?ar.fromBase64String(a):ar.fromUint8Array(a)}const l_="server_timestamp",u_="__type__",c_="__previous_value__",h_="__local_write_time__";function $m(a){return(a?.mapValue?.fields||{})[u_]?.stringValue===l_}function Qh(a){const t=a.mapValue.fields[c_];return $m(t)?Qh(t):t}function Uu(a){const t=$s(a.mapValue.fields[h_].timestampValue);return new tn(t.seconds,t.nanos)}class kS{constructor(t,r,s,l,u,p,_,b,v,A){this.databaseId=t,this.appId=r,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.longPollingOptions=b,this.useFetchStreams=v,this.isUsingEmulator=A}}const Sh="(default)";class wl{constructor(t,r){this.projectId=t,this.database=r||Sh}static empty(){return new wl("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(t){return t instanceof wl&&t.projectId===this.projectId&&t.database===this.database}}const f_="__type__",PS="__max__",ah={mapValue:{}},d_="__vector__",Ah="value";function Js(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?$m(a)?4:zS(a)?9007199254740991:LS(a)?10:11:it(28295,{value:a})}function xi(a,t){if(a===t)return!0;const r=Js(a);if(r!==Js(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return Uu(a).isEqual(Uu(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const p=$s(l.timestampValue),_=$s(u.timestampValue);return p.seconds===_.seconds&&p.nanos===_.nanos})(a,t);case 5:return a.stringValue===t.stringValue;case 6:return(function(l,u){return Zs(l.bytesValue).isEqual(Zs(u.bytesValue))})(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return(function(l,u){return Dn(l.geoPointValue.latitude)===Dn(u.geoPointValue.latitude)&&Dn(l.geoPointValue.longitude)===Dn(u.geoPointValue.longitude)})(a,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Dn(l.integerValue)===Dn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const p=Dn(l.doubleValue),_=Dn(u.doubleValue);return p===_?Th(p)===Th(_):isNaN(p)&&isNaN(_)}return!1})(a,t);case 9:return El(a.arrayValue.values||[],t.arrayValue.values||[],xi);case 10:case 11:return(function(l,u){const p=l.mapValue.fields||{},_=u.mapValue.fields||{};if(m0(p)!==m0(_))return!1;for(const b in p)if(p.hasOwnProperty(b)&&(_[b]===void 0||!xi(p[b],_[b])))return!1;return!0})(a,t);default:return it(52216,{left:a})}}function Bu(a,t){return(a.values||[]).find((r=>xi(r,t)))!==void 0}function Tl(a,t){if(a===t)return 0;const r=Js(a),s=Js(t);if(r!==s)return At(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return At(a.booleanValue,t.booleanValue);case 2:return(function(u,p){const _=Dn(u.integerValue||u.doubleValue),b=Dn(p.integerValue||p.doubleValue);return _<b?-1:_>b?1:_===b?0:isNaN(_)?isNaN(b)?0:-1:1})(a,t);case 3:return g0(a.timestampValue,t.timestampValue);case 4:return g0(Uu(a),Uu(t));case 5:return bm(a.stringValue,t.stringValue);case 6:return(function(u,p){const _=Zs(u),b=Zs(p);return _.compareTo(b)})(a.bytesValue,t.bytesValue);case 7:return(function(u,p){const _=u.split("/"),b=p.split("/");for(let v=0;v<_.length&&v<b.length;v++){const A=At(_[v],b[v]);if(A!==0)return A}return At(_.length,b.length)})(a.referenceValue,t.referenceValue);case 8:return(function(u,p){const _=At(Dn(u.latitude),Dn(p.latitude));return _!==0?_:At(Dn(u.longitude),Dn(p.longitude))})(a.geoPointValue,t.geoPointValue);case 9:return y0(a.arrayValue,t.arrayValue);case 10:return(function(u,p){const _=u.fields||{},b=p.fields||{},v=_[Ah]?.arrayValue,A=b[Ah]?.arrayValue,N=At(v?.values?.length||0,A?.values?.length||0);return N!==0?N:y0(v,A)})(a.mapValue,t.mapValue);case 11:return(function(u,p){if(u===ah.mapValue&&p===ah.mapValue)return 0;if(u===ah.mapValue)return 1;if(p===ah.mapValue)return-1;const _=u.fields||{},b=Object.keys(_),v=p.fields||{},A=Object.keys(v);b.sort(),A.sort();for(let N=0;N<b.length&&N<A.length;++N){const I=bm(b[N],A[N]);if(I!==0)return I;const $=Tl(_[b[N]],v[A[N]]);if($!==0)return $}return At(b.length,A.length)})(a.mapValue,t.mapValue);default:throw it(23264,{he:r})}}function g0(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return At(a,t);const r=$s(a),s=$s(t),l=At(r.seconds,s.seconds);return l!==0?l:At(r.nanos,s.nanos)}function y0(a,t){const r=a.values||[],s=t.values||[];for(let l=0;l<r.length&&l<s.length;++l){const u=Tl(r[l],s[l]);if(u)return u}return At(r.length,s.length)}function Sl(a){return _m(a)}function _m(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(r){const s=$s(r);return`time(${s.seconds},${s.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(r){return Zs(r).toBase64()})(a.bytesValue):"referenceValue"in a?(function(r){return We.fromName(r).toString()})(a.referenceValue):"geoPointValue"in a?(function(r){return`geo(${r.latitude},${r.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(r){let s="[",l=!0;for(const u of r.values||[])l?l=!1:s+=",",s+=_m(u);return s+"]"})(a.arrayValue):"mapValue"in a?(function(r){const s=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const p of s)u?u=!1:l+=",",l+=`${p}:${_m(r.fields[p])}`;return l+"}"})(a.mapValue):it(61005,{value:a})}function hh(a){switch(Js(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qh(a);return t?16+hh(t):16;case 5:return 2*a.stringValue.length;case 6:return Zs(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+hh(u)),0)})(a.arrayValue);case 10:case 11:return(function(s){let l=0;return Oo(s.fields,((u,p)=>{l+=u.length+hh(p)})),l})(a.mapValue);default:throw it(13486,{value:a})}}function v0(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function xm(a){return!!a&&"integerValue"in a}function Zm(a){return!!a&&"arrayValue"in a}function b0(a){return!!a&&"nullValue"in a}function _0(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function fh(a){return!!a&&"mapValue"in a}function LS(a){return(a?.mapValue?.fields||{})[f_]?.stringValue===d_}function ju(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const t={mapValue:{fields:{}}};return Oo(a.mapValue.fields,((r,s)=>t.mapValue.fields[r]=ju(s))),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ju(a.arrayValue.values[r]);return t}return{...a}}function zS(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===PS}class La{constructor(t){this.value=t}static empty(){return new La({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let s=0;s<t.length-1;++s)if(r=(r.mapValue.fields||{})[t.get(s)],!fh(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ju(r)}setAll(t){let r=rr.emptyPath(),s={},l=[];t.forEach(((p,_)=>{if(!r.isImmediateParentOf(_)){const b=this.getFieldsMap(r);this.applyChanges(b,s,l),s={},l=[],r=_.popLast()}p?s[_.lastSegment()]=ju(p):l.push(_.lastSegment())}));const u=this.getFieldsMap(r);this.applyChanges(u,s,l)}delete(t){const r=this.field(t.popLast());fh(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return xi(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=r.mapValue.fields[t.get(s)];fh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[t.get(s)]=l),r=l}return r.mapValue.fields}applyChanges(t,r,s){Oo(r,((l,u)=>t[l]=u));for(const l of s)delete t[l]}clone(){return new La(ju(this.value))}}function m_(a){const t=[];return Oo(a.fields,((r,s)=>{const l=new rr([r]);if(fh(s)){const u=m_(s.mapValue).fields;if(u.length===0)t.push(l);else for(const p of u)t.push(l.child(p))}else t.push(l)})),new Ja(t)}class xr{constructor(t,r,s,l,u,p,_){this.key=t,this.documentType=r,this.version=s,this.readTime=l,this.createTime=u,this.data=p,this.documentState=_}static newInvalidDocument(t){return new xr(t,0,ut.min(),ut.min(),ut.min(),La.empty(),0)}static newFoundDocument(t,r,s,l){return new xr(t,1,r,ut.min(),s,l,0)}static newNoDocument(t,r){return new xr(t,2,r,ut.min(),ut.min(),La.empty(),0)}static newUnknownDocument(t,r){return new xr(t,3,r,ut.min(),ut.min(),La.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=La.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=La.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof xr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nh{constructor(t,r){this.position=t,this.inclusive=r}}function x0(a,t,r){let s=0;for(let l=0;l<a.position.length;l++){const u=t[l],p=a.position[l];if(u.field.isKeyField()?s=We.comparator(We.fromName(p.referenceValue),r.key):s=Tl(p,r.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function E0(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!xi(a.position[r],t.position[r]))return!1;return!0}class Rh{constructor(t,r="asc"){this.field=t,this.dir=r}}function US(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class p_{}class Fn extends p_{constructor(t,r,s){super(),this.field=t,this.op=r,this.value=s}static create(t,r,s){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,s):new qS(t,r,s):r==="array-contains"?new KS(t,s):r==="in"?new GS(t,s):r==="not-in"?new QS(t,s):r==="array-contains-any"?new YS(t,s):new Fn(t,r,s)}static createKeyFieldInFilter(t,r,s){return r==="in"?new FS(t,s):new HS(t,s)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Tl(r,this.value)):r!==null&&Js(this.value)===Js(r)&&this.matchesComparison(Tl(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return it(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends p_{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new ti(t,r)}matches(t){return g_(this)?this.filters.find((r=>!r.matches(t)))===void 0:this.filters.find((r=>r.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,r)=>t.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function g_(a){return a.op==="and"}function y_(a){return BS(a)&&g_(a)}function BS(a){for(const t of a.filters)if(t instanceof ti)return!1;return!0}function Em(a){if(a instanceof Fn)return a.field.canonicalString()+a.op.toString()+Sl(a.value);if(y_(a))return a.filters.map((t=>Em(t))).join(",");{const t=a.filters.map((r=>Em(r))).join(",");return`${a.op}(${t})`}}function v_(a,t){return a instanceof Fn?(function(s,l){return l instanceof Fn&&s.op===l.op&&s.field.isEqual(l.field)&&xi(s.value,l.value)})(a,t):a instanceof ti?(function(s,l){return l instanceof ti&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,p,_)=>u&&v_(p,l.filters[_])),!0):!1})(a,t):void it(19439)}function b_(a){return a instanceof Fn?(function(r){return`${r.field.canonicalString()} ${r.op} ${Sl(r.value)}`})(a):a instanceof ti?(function(r){return r.op.toString()+" {"+r.getFilters().map(b_).join(" ,")+"}"})(a):"Filter"}class qS extends Fn{constructor(t,r,s){super(t,r,s),this.key=We.fromName(s.referenceValue)}matches(t){const r=We.comparator(t.key,this.key);return this.matchesComparison(r)}}class FS extends Fn{constructor(t,r){super(t,"in",r),this.keys=__("in",r)}matches(t){return this.keys.some((r=>r.isEqual(t.key)))}}class HS extends Fn{constructor(t,r){super(t,"not-in",r),this.keys=__("not-in",r)}matches(t){return!this.keys.some((r=>r.isEqual(t.key)))}}function __(a,t){return(t.arrayValue?.values||[]).map((r=>We.fromName(r.referenceValue)))}class KS extends Fn{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Zm(r)&&Bu(r.arrayValue,this.value)}}class GS extends Fn{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Bu(this.value.arrayValue,r)}}class QS extends Fn{constructor(t,r){super(t,"not-in",r)}matches(t){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Bu(this.value.arrayValue,r)}}class YS extends Fn{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Zm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((s=>Bu(this.value.arrayValue,s)))}}class XS{constructor(t,r=null,s=[],l=[],u=null,p=null,_=null){this.path=t,this.collectionGroup=r,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=p,this.endAt=_,this.Te=null}}function w0(a,t=null,r=[],s=[],l=null,u=null,p=null){return new XS(a,t,r,s,l,u,p)}function Jm(a){const t=ht(a);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map((s=>Em(s))).join(","),r+="|ob:",r+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Gh(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Sl(s))).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Sl(s))).join(",")),t.Te=r}return t.Te}function Wm(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!US(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!v_(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!E0(a.startAt,t.startAt)&&E0(a.endAt,t.endAt)}function wm(a){return We.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class Yu{constructor(t,r=null,s=[],l=[],u=null,p="F",_=null,b=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=p,this.startAt=_,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $S(a,t,r,s,l,u,p,_){return new Yu(a,t,r,s,l,u,p,_)}function ep(a){return new Yu(a)}function T0(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function x_(a){return a.collectionGroup!==null}function Du(a){const t=ht(a);if(t.Ie===null){t.Ie=[];const r=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),r.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(p){let _=new Yn(rr.comparator);return p.filters.forEach((b=>{b.getFlattenedFilters().forEach((v=>{v.isInequality()&&(_=_.add(v.field))}))})),_})(t).forEach((u=>{r.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Rh(u,s))})),r.has(rr.keyField().canonicalString())||t.Ie.push(new Rh(rr.keyField(),s))}return t.Ie}function vi(a){const t=ht(a);return t.Ee||(t.Ee=ZS(t,Du(a))),t.Ee}function ZS(a,t){if(a.limitType==="F")return w0(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Rh(l.field,u)}));const r=a.endAt?new Nh(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Nh(a.startAt.position,a.startAt.inclusive):null;return w0(a.path,a.collectionGroup,t,a.filters,a.limit,r,s)}}function Tm(a,t){const r=a.filters.concat([t]);return new Yu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Sm(a,t,r){return new Yu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function Yh(a,t){return Wm(vi(a),vi(t))&&a.limitType===t.limitType}function E_(a){return`${Jm(vi(a))}|lt:${a.limitType}`}function gl(a){return`Query(target=${(function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map((l=>b_(l))).join(", ")}]`),Gh(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map((l=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(l))).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map((l=>Sl(l))).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map((l=>Sl(l))).join(",")),`Target(${s})`})(vi(a))}; limitType=${a.limitType})`}function Xh(a,t){return t.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):We.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(a,t)&&(function(s,l){for(const u of Du(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(a,t)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(a,t)&&(function(s,l){return!(s.startAt&&!(function(p,_,b){const v=x0(p,_,b);return p.inclusive?v<=0:v<0})(s.startAt,Du(s),l)||s.endAt&&!(function(p,_,b){const v=x0(p,_,b);return p.inclusive?v>=0:v>0})(s.endAt,Du(s),l))})(a,t)}function JS(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function w_(a){return(t,r)=>{let s=!1;for(const l of Du(a)){const u=WS(l,t,r);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function WS(a,t,r){const s=a.field.isKeyField()?We.comparator(t.key,r.key):(function(u,p,_){const b=p.data.field(u),v=_.data.field(u);return b!==null&&v!==null?Tl(b,v):it(42886)})(a.field,t,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return it(19790,{direction:a.dir})}}class Mo{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,r){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,r]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,r]);l.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[r]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Oo(this.inner,((r,s)=>{for(const[l,u]of s)t(l,u)}))}isEmpty(){return s_(this.inner)}size(){return this.innerSize}}const eA=new bn(We.comparator);function ts(){return eA}const T_=new bn(We.comparator);function Nu(...a){let t=T_;for(const r of a)t=t.insert(r.key,r);return t}function S_(a){let t=T_;return a.forEach(((r,s)=>t=t.insert(r,s.overlayedDocument))),t}function Ao(){return Iu()}function A_(){return Iu()}function Iu(){return new Mo((a=>a.toString()),((a,t)=>a.isEqual(t)))}const tA=new bn(We.comparator),nA=new Yn(We.comparator);function Nt(...a){let t=nA;for(const r of a)t=t.add(r);return t}const rA=new Yn(At);function aA(){return rA}function tp(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(t)?"-0":t}}function N_(a){return{integerValue:""+a}}function iA(a,t){return IS(t)?N_(t):tp(a,t)}class $h{constructor(){this._=void 0}}function sA(a,t,r){return a instanceof Ch?(function(l,u){const p={fields:{[u_]:{stringValue:l_},[h_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&$m(u)&&(u=Qh(u)),u&&(p.fields[c_]=u),{mapValue:p}})(r,t):a instanceof qu?C_(a,t):a instanceof Fu?j_(a,t):(function(l,u){const p=R_(l,u),_=S0(p)+S0(l.Ae);return xm(p)&&xm(l.Ae)?N_(_):tp(l.serializer,_)})(a,t)}function oA(a,t,r){return a instanceof qu?C_(a,t):a instanceof Fu?j_(a,t):r}function R_(a,t){return a instanceof jh?(function(s){return xm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Ch extends $h{}class qu extends $h{constructor(t){super(),this.elements=t}}function C_(a,t){const r=D_(t);for(const s of a.elements)r.some((l=>xi(l,s)))||r.push(s);return{arrayValue:{values:r}}}class Fu extends $h{constructor(t){super(),this.elements=t}}function j_(a,t){let r=D_(t);for(const s of a.elements)r=r.filter((l=>!xi(l,s)));return{arrayValue:{values:r}}}class jh extends $h{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function S0(a){return Dn(a.integerValue||a.doubleValue)}function D_(a){return Zm(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function lA(a,t){return a.field.isEqual(t.field)&&(function(s,l){return s instanceof qu&&l instanceof qu||s instanceof Fu&&l instanceof Fu?El(s.elements,l.elements,xi):s instanceof jh&&l instanceof jh?xi(s.Ae,l.Ae):s instanceof Ch&&l instanceof Ch})(a.transform,t.transform)}class uA{constructor(t,r){this.version=t,this.transformResults=r}}class bi{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new bi}static exists(t){return new bi(void 0,t)}static updateTime(t){return new bi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function dh(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class Zh{}function I_(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new np(a.key,bi.none()):new Xu(a.key,a.data,bi.none());{const r=a.data,s=La.empty();let l=new Yn(rr.comparator);for(let u of t.fields)if(!l.has(u)){let p=r.field(u);p===null&&u.length>1&&(u=u.popLast(),p=r.field(u)),p===null?s.delete(u):s.set(u,p),l=l.add(u)}return new Vo(a.key,s,new Ja(l.toArray()),bi.none())}}function cA(a,t,r){a instanceof Xu?(function(l,u,p){const _=l.value.clone(),b=N0(l.fieldTransforms,u,p.transformResults);_.setAll(b),u.convertToFoundDocument(p.version,_).setHasCommittedMutations()})(a,t,r):a instanceof Vo?(function(l,u,p){if(!dh(l.precondition,u))return void u.convertToUnknownDocument(p.version);const _=N0(l.fieldTransforms,u,p.transformResults),b=u.data;b.setAll(O_(l)),b.setAll(_),u.convertToFoundDocument(p.version,b).setHasCommittedMutations()})(a,t,r):(function(l,u,p){u.convertToNoDocument(p.version).setHasCommittedMutations()})(0,t,r)}function Ou(a,t,r,s){return a instanceof Xu?(function(u,p,_,b){if(!dh(u.precondition,p))return _;const v=u.value.clone(),A=R0(u.fieldTransforms,b,p);return v.setAll(A),p.convertToFoundDocument(p.version,v).setHasLocalMutations(),null})(a,t,r,s):a instanceof Vo?(function(u,p,_,b){if(!dh(u.precondition,p))return _;const v=R0(u.fieldTransforms,b,p),A=p.data;return A.setAll(O_(u)),A.setAll(v),p.convertToFoundDocument(p.version,A).setHasLocalMutations(),_===null?null:_.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((N=>N.field)))})(a,t,r,s):(function(u,p,_){return dh(u.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):_})(a,t,r)}function hA(a,t){let r=null;for(const s of a.fieldTransforms){const l=t.data.field(s.field),u=R_(s.transform,l||null);u!=null&&(r===null&&(r=La.empty()),r.set(s.field,u))}return r||null}function A0(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&El(s,l,((u,p)=>lA(u,p)))})(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Xu extends Zh{constructor(t,r,s,l=[]){super(),this.key=t,this.value=r,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Vo extends Zh{constructor(t,r,s,l,u=[]){super(),this.key=t,this.data=r,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function O_(a){const t=new Map;return a.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const s=a.data.field(r);t.set(r,s)}})),t}function N0(a,t,r){const s=new Map;qt(a.length===r.length,32656,{Re:r.length,Ve:a.length});for(let l=0;l<r.length;l++){const u=a[l],p=u.transform,_=t.data.field(u.field);s.set(u.field,oA(p,_,r[l]))}return s}function R0(a,t,r){const s=new Map;for(const l of a){const u=l.transform,p=r.data.field(l.field);s.set(l.field,sA(u,p,t))}return s}class np extends Zh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fA extends Zh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dA{constructor(t,r,s,l){this.batchId=t,this.localWriteTime=r,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,r){const s=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&cA(u,t,s[l])}}applyToLocalView(t,r){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(r=Ou(s,t,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(r=Ou(s,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const s=A_();return this.mutations.forEach((l=>{const u=t.get(l.key),p=u.overlayedDocument;let _=this.applyToLocalView(p,u.mutatedFields);_=r.has(l.key)?null:_;const b=I_(p,_);b!==null&&s.set(l.key,b),p.isValidDocument()||p.convertToNoDocument(ut.min())})),s}keys(){return this.mutations.reduce(((t,r)=>t.add(r.key)),Nt())}isEqual(t){return this.batchId===t.batchId&&El(this.mutations,t.mutations,((r,s)=>A0(r,s)))&&El(this.baseMutations,t.baseMutations,((r,s)=>A0(r,s)))}}class rp{constructor(t,r,s,l){this.batch=t,this.commitVersion=r,this.mutationResults=s,this.docVersions=l}static from(t,r,s){qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return tA})();const u=t.mutations;for(let p=0;p<u.length;p++)l=l.insert(u[p].key,s[p].version);return new rp(t,r,s,l)}}class mA{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class pA{constructor(t,r){this.count=t,this.unchangedNames=r}}var qn,It;function gA(a){switch(a){case Se.OK:return it(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return it(15467,{code:a})}}function M_(a){if(a===void 0)return es("GRPC error has no .code"),Se.UNKNOWN;switch(a){case qn.OK:return Se.OK;case qn.CANCELLED:return Se.CANCELLED;case qn.UNKNOWN:return Se.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Se.INTERNAL;case qn.UNAVAILABLE:return Se.UNAVAILABLE;case qn.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case qn.NOT_FOUND:return Se.NOT_FOUND;case qn.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case qn.ABORTED:return Se.ABORTED;case qn.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case qn.DATA_LOSS:return Se.DATA_LOSS;default:return it(39323,{code:a})}}(It=qn||(qn={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function yA(){return new TextEncoder}const vA=new Ks([4294967295,4294967295],0);function C0(a){const t=yA().encode(a),r=new Qb;return r.update(t),new Uint8Array(r.digest())}function j0(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ks([r,s],0),new Ks([l,u],0)]}class ap{constructor(t,r,s){if(this.bitmap=t,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Ru(`Invalid padding: ${r}`);if(s<0)throw new Ru(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${s}`);if(t.length===0&&r!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Ks.fromNumber(this.ge)}ye(t,r,s){let l=t.add(r.multiply(Ks.fromNumber(s)));return l.compare(vA)===1&&(l=new Ks([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=C0(t),[s,l]=j0(r);for(let u=0;u<this.hashCount;u++){const p=this.ye(s,l,u);if(!this.we(p))return!1}return!0}static create(t,r,s){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),p=new ap(u,l,r);return s.forEach((_=>p.insert(_))),p}insert(t){if(this.ge===0)return;const r=C0(t),[s,l]=j0(r);for(let u=0;u<this.hashCount;u++){const p=this.ye(s,l,u);this.Se(p)}}Se(t){const r=Math.floor(t/8),s=t%8;this.bitmap[r]|=1<<s}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jh{constructor(t,r,s,l,u){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,r,s){const l=new Map;return l.set(t,$u.createSynthesizedTargetChangeForCurrentChange(t,r,s)),new Jh(ut.min(),l,new bn(At),ts(),Nt())}}class $u{constructor(t,r,s,l,u){this.resumeToken=t,this.current=r,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,r,s){return new $u(s,r,Nt(),Nt(),Nt())}}class mh{constructor(t,r,s,l){this.be=t,this.removedTargetIds=r,this.key=s,this.De=l}}class V_{constructor(t,r){this.targetId=t,this.Ce=r}}class k_{constructor(t,r,s=ar.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=r,this.resumeToken=s,this.cause=l}}class D0{constructor(){this.ve=0,this.Fe=I0(),this.Me=ar.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Nt(),r=Nt(),s=Nt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:r=r.add(l);break;case 1:s=s.add(l);break;default:it(38017,{changeType:u})}})),new $u(this.Me,this.xe,t,r,s)}qe(){this.Oe=!1,this.Fe=I0()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bA{constructor(t){this.Ge=t,this.ze=new Map,this.je=ts(),this.Je=ih(),this.He=ih(),this.Ye=new bn(At)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,(r=>{const s=this.nt(r);switch(t.state){case 0:this.rt(r)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),s.Le(t.resumeToken));break;default:it(56790,{state:t.state})}}))}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach(((s,l)=>{this.rt(l)&&r(l)}))}st(t){const r=t.targetId,s=t.Ce.count,l=this.ot(r);if(l){const u=l.target;if(wm(u))if(s===0){const p=new We(u.path);this.et(r,p,xr.newNoDocument(p,ut.min()))}else qt(s===1,20013,{expectedCount:s});else{const p=this._t(r);if(p!==s){const _=this.ut(t),b=_?this.ct(_,t,p):1;if(b!==0){this.it(r);const v=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,v)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=r;let p,_;try{p=Zs(s).toUint8Array()}catch(b){if(b instanceof o_)return Do("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{_=new ap(p,l,u)}catch(b){return Do(b instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return _.ge===0?null:_}ct(t,r,s){return r.Ce.count===s-this.Pt(t,r.targetId)?0:2}Pt(t,r){const s=this.Ge.getRemoteKeysForTarget(r);let l=0;return s.forEach((u=>{const p=this.Ge.ht(),_=`projects/${p.projectId}/databases/${p.database}/documents/${u.path.canonicalString()}`;t.mightContain(_)||(this.et(r,u,null),l++)})),l}Tt(t){const r=new Map;this.ze.forEach(((u,p)=>{const _=this.ot(p);if(_){if(u.current&&wm(_.target)){const b=new We(_.target.path);this.It(b).has(p)||this.Et(p,b)||this.et(p,b,xr.newNoDocument(b,t))}u.Be&&(r.set(p,u.ke()),u.qe())}}));let s=Nt();this.He.forEach(((u,p)=>{let _=!0;p.forEachWhile((b=>{const v=this.ot(b);return!v||v.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)})),_&&(s=s.add(u))})),this.je.forEach(((u,p)=>p.setReadTime(t)));const l=new Jh(t,r,this.Ye,this.je,s);return this.je=ts(),this.Je=ih(),this.He=ih(),this.Ye=new bn(At),l}Xe(t,r){if(!this.rt(t))return;const s=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,s),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,r)?l.Qe(r,1):l.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),s&&(this.je=this.je.insert(r,s))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new D0,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Yn(At),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Yn(At),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||Ke("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new D0),this.Ge.getRemoteKeysForTarget(t).forEach((r=>{this.et(t,r,null)}))}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function ih(){return new bn(We.comparator)}function I0(){return new bn(We.comparator)}const _A={asc:"ASCENDING",desc:"DESCENDING"},xA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EA={and:"AND",or:"OR"};class wA{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Am(a,t){return a.useProto3Json||Gh(t)?t:{value:t}}function Dh(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function P_(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function TA(a,t){return Dh(a,t.toTimestamp())}function _i(a){return qt(!!a,49232),ut.fromTimestamp((function(r){const s=$s(r);return new tn(s.seconds,s.nanos)})(a))}function ip(a,t){return Nm(a,t).canonicalString()}function Nm(a,t){const r=(function(l){return new en(["projects",l.projectId,"databases",l.database])})(a).child("documents");return t===void 0?r:r.child(t)}function L_(a){const t=en.fromString(a);return qt(F_(t),10190,{key:t.toString()}),t}function Rm(a,t){return ip(a.databaseId,t.path)}function om(a,t){const r=L_(t);if(r.get(1)!==a.databaseId.projectId)throw new Ge(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Ge(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new We(U_(r))}function z_(a,t){return ip(a.databaseId,t)}function SA(a){const t=L_(a);return t.length===4?en.emptyPath():U_(t)}function Cm(a){return new en(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function U_(a){return qt(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function O0(a,t,r){return{name:Rm(a,t),fields:r.value.mapValue.fields}}function AA(a,t){let r;if("targetChange"in t){t.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:it(39313,{state:v})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(v,A){return v.useProto3Json?(qt(A===void 0||typeof A=="string",58123),ar.fromBase64String(A||"")):(qt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),ar.fromUint8Array(A||new Uint8Array))})(a,t.targetChange.resumeToken),p=t.targetChange.cause,_=p&&(function(v){const A=v.code===void 0?Se.UNKNOWN:M_(v.code);return new Ge(A,v.message||"")})(p);r=new k_(s,l,u,_||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=om(a,s.document.name),u=_i(s.document.updateTime),p=s.document.createTime?_i(s.document.createTime):ut.min(),_=new La({mapValue:{fields:s.document.fields}}),b=xr.newFoundDocument(l,u,p,_),v=s.targetIds||[],A=s.removedTargetIds||[];r=new mh(v,A,b.key,b)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=om(a,s.document),u=s.readTime?_i(s.readTime):ut.min(),p=xr.newNoDocument(l,u),_=s.removedTargetIds||[];r=new mh([],_,p.key,p)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=om(a,s.document),u=s.removedTargetIds||[];r=new mh([],u,l,null)}else{if(!("filter"in t))return it(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,p=new pA(l,u),_=s.targetId;r=new V_(_,p)}}return r}function NA(a,t){let r;if(t instanceof Xu)r={update:O0(a,t.key,t.value)};else if(t instanceof np)r={delete:Rm(a,t.key)};else if(t instanceof Vo)r={update:O0(a,t.key,t.data),updateMask:kA(t.fieldMask)};else{if(!(t instanceof fA))return it(16599,{Vt:t.type});r={verify:Rm(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map((s=>(function(u,p){const _=p.transform;if(_ instanceof Ch)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof qu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Fu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof jh)return{fieldPath:p.field.canonicalString(),increment:_.Ae};throw it(20930,{transform:p.transform})})(0,s)))),t.precondition.isNone||(r.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:TA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:it(27497)})(a,t.precondition)),r}function RA(a,t){return a&&a.length>0?(qt(t!==void 0,14353),a.map((r=>(function(l,u){let p=l.updateTime?_i(l.updateTime):_i(u);return p.isEqual(ut.min())&&(p=_i(u)),new uA(p,l.transformResults||[])})(r,t)))):[]}function CA(a,t){return{documents:[z_(a,t.path)]}}function jA(a,t){const r={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=z_(a,l);const u=(function(v){if(v.length!==0)return q_(ti.create(v,"and"))})(t.filters);u&&(r.structuredQuery.where=u);const p=(function(v){if(v.length!==0)return v.map((A=>(function(I){return{field:yl(I.field),direction:OA(I.dir)}})(A)))})(t.orderBy);p&&(r.structuredQuery.orderBy=p);const _=Am(a,t.limit);return _!==null&&(r.structuredQuery.limit=_),t.startAt&&(r.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(t.startAt)),t.endAt&&(r.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(t.endAt)),{ft:r,parent:l}}function DA(a){let t=SA(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let l=null;if(s>0){qt(s===1,65062);const A=r.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let u=[];r.where&&(u=(function(N){const I=B_(N);return I instanceof ti&&y_(I)?I.getFilters():[I]})(r.where));let p=[];r.orderBy&&(p=(function(N){return N.map((I=>(function(ce){return new Rh(vl(ce.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ce.direction))})(I)))})(r.orderBy));let _=null;r.limit&&(_=(function(N){let I;return I=typeof N=="object"?N.value:N,Gh(I)?null:I})(r.limit));let b=null;r.startAt&&(b=(function(N){const I=!!N.before,$=N.values||[];return new Nh($,I)})(r.startAt));let v=null;return r.endAt&&(v=(function(N){const I=!N.before,$=N.values||[];return new Nh($,I)})(r.endAt)),$S(t,l,p,u,_,"F",b,v)}function IA(a,t){const r=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it(28987,{purpose:l})}})(t.purpose);return r==null?null:{"goog-listen-tags":r}}function B_(a){return a.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=vl(r.unaryFilter.field);return Fn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=vl(r.unaryFilter.field);return Fn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vl(r.unaryFilter.field);return Fn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=vl(r.unaryFilter.field);return Fn.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return it(61313);default:return it(60726)}})(a):a.fieldFilter!==void 0?(function(r){return Fn.create(vl(r.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return it(58110);default:return it(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(r){return ti.create(r.compositeFilter.filters.map((s=>B_(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return it(1026)}})(r.compositeFilter.op))})(a):it(30097,{filter:a})}function OA(a){return _A[a]}function MA(a){return xA[a]}function VA(a){return EA[a]}function yl(a){return{fieldPath:a.canonicalString()}}function vl(a){return rr.fromServerFormat(a.fieldPath)}function q_(a){return a instanceof Fn?(function(r){if(r.op==="=="){if(_0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NAN"}};if(b0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(_0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NOT_NAN"}};if(b0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(r.field),op:MA(r.op),value:r.value}}})(a):a instanceof ti?(function(r){const s=r.getFilters().map((l=>q_(l)));return s.length===1?s[0]:{compositeFilter:{op:VA(r.op),filters:s}}})(a):it(54877,{filter:a})}function kA(a){const t=[];return a.fields.forEach((r=>t.push(r.canonicalString()))),{fieldPaths:t}}function F_(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class qs{constructor(t,r,s,l,u=ut.min(),p=ut.min(),_=ar.EMPTY_BYTE_STRING,b=null){this.target=t,this.targetId=r,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_,this.expectedCount=b}withSequenceNumber(t){return new qs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class PA{constructor(t){this.yt=t}}function LA(a){const t=DA({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Sm(t,t.limit,"L"):t}class zA{constructor(){this.Cn=new UA}addToCollectionParentIndex(t,r){return this.Cn.add(r),Ae.resolve()}getCollectionParents(t,r){return Ae.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Ae.resolve()}deleteFieldIndex(t,r){return Ae.resolve()}deleteAllFieldIndexes(t){return Ae.resolve()}createTargetIndexes(t,r){return Ae.resolve()}getDocumentsMatchingTarget(t,r){return Ae.resolve(null)}getIndexType(t,r){return Ae.resolve(0)}getFieldIndexes(t,r){return Ae.resolve([])}getNextCollectionGroupToUpdate(t){return Ae.resolve(null)}getMinOffset(t,r){return Ae.resolve(Xs.min())}getMinOffsetFromCollectionGroup(t,r){return Ae.resolve(Xs.min())}updateCollectionGroup(t,r,s){return Ae.resolve()}updateIndexEntries(t,r){return Ae.resolve()}}class UA{constructor(){this.index={}}add(t){const r=t.lastSegment(),s=t.popLast(),l=this.index[r]||new Yn(en.comparator),u=!l.has(s);return this.index[r]=l.add(s),u}has(t){const r=t.lastSegment(),s=t.popLast(),l=this.index[r];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Yn(en.comparator)).toArray()}}const M0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H_=41943040;class $r{static withCacheSize(t){return new $r(t,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}}$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(H_,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);class Al{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}const V0="LruGarbageCollector",BA=1048576;function k0([a,t],[r,s]){const l=At(a,r);return l===0?At(t,s):l}class qA{constructor(t){this.Ir=t,this.buffer=new Yn(k0),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();k0(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class FA{constructor(t,r,s){this.garbageCollector=t,this.asyncQueue=r,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Ke(V0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ll(r)?Ke(V0,"Ignoring IndexedDB error during garbage collection: ",r):await Pl(r)}await this.Vr(3e5)}))}}class HA{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next((s=>Math.floor(r/100*s)))}nthSequenceNumber(t,r){if(r===0)return Ae.resolve(Kh.ce);const s=new qA(r);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,r,s){return this.mr.removeTargets(t,r,s)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(M0)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M0):this.yr(t,r)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let s,l,u,p,_,b,v;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((N=>(N>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),l=this.params.maximumSequenceNumbersToCollect):l=N,p=Date.now(),this.nthSequenceNumber(t,l)))).next((N=>(s=N,_=Date.now(),this.removeTargets(t,s,r)))).next((N=>(u=N,b=Date.now(),this.removeOrphanedDocuments(t,s)))).next((N=>(v=Date.now(),pl()<=Ot.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-A}ms
	Determined least recently used ${l} in `+(_-p)+`ms
	Removed ${u} targets in `+(b-_)+`ms
	Removed ${N} documents in `+(v-b)+`ms
Total Duration: ${v-A}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:N}))))}}function KA(a,t){return new HA(a,t)}class GA{constructor(){this.changes=new Mo((t=>t.toString()),((t,r)=>t.isEqual(r))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,xr.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?Ae.resolve(s):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class QA{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class YA{constructor(t,r,s,l){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,r){let s=null;return this.documentOverlayCache.getOverlay(t,r).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,r)))).next((l=>(s!==null&&Ou(s.mutation,l,Ja.empty(),tn.now()),l)))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next((s=>this.getLocalViewOfDocuments(t,s,Nt()).next((()=>s))))}getLocalViewOfDocuments(t,r,s=Nt()){const l=Ao();return this.populateOverlays(t,l,r).next((()=>this.computeViews(t,r,l,s).next((u=>{let p=Nu();return u.forEach(((_,b)=>{p=p.insert(_,b.overlayedDocument)})),p}))))}getOverlayedDocuments(t,r){const s=Ao();return this.populateOverlays(t,s,r).next((()=>this.computeViews(t,r,s,Nt())))}populateOverlays(t,r,s){const l=[];return s.forEach((u=>{r.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((p,_)=>{r.set(p,_)}))}))}computeViews(t,r,s,l){let u=ts();const p=Iu(),_=(function(){return Iu()})();return r.forEach(((b,v)=>{const A=s.get(v.key);l.has(v.key)&&(A===void 0||A.mutation instanceof Vo)?u=u.insert(v.key,v):A!==void 0?(p.set(v.key,A.mutation.getFieldMask()),Ou(A.mutation,v,A.mutation.getFieldMask(),tn.now())):p.set(v.key,Ja.empty())})),this.recalculateAndSaveOverlays(t,u).next((b=>(b.forEach(((v,A)=>p.set(v,A))),r.forEach(((v,A)=>_.set(v,new QA(A,p.get(v)??null)))),_)))}recalculateAndSaveOverlays(t,r){const s=Iu();let l=new bn(((p,_)=>p-_)),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next((p=>{for(const _ of p)_.keys().forEach((b=>{const v=r.get(b);if(v===null)return;let A=s.get(b)||Ja.empty();A=_.applyToLocalView(v,A),s.set(b,A);const N=(l.get(_.batchId)||Nt()).add(b);l=l.insert(_.batchId,N)}))})).next((()=>{const p=[],_=l.getReverseIterator();for(;_.hasNext();){const b=_.getNext(),v=b.key,A=b.value,N=A_();A.forEach((I=>{if(!u.has(I)){const $=I_(r.get(I),s.get(I));$!==null&&N.set(I,$),u=u.add(I)}})),p.push(this.documentOverlayCache.saveOverlays(t,v,N))}return Ae.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,r,s,l){return(function(p){return We.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):x_(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,s,l):this.getDocumentsMatchingCollectionQuery(t,r,s,l)}getNextDocuments(t,r,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,s,l).next((u=>{const p=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,s.largestBatchId,l-u.size):Ae.resolve(Ao());let _=zu,b=u;return p.next((v=>Ae.forEach(v,((A,N)=>(_<N.largestBatchId&&(_=N.largestBatchId),u.get(A)?Ae.resolve():this.remoteDocumentCache.getEntry(t,A).next((I=>{b=b.insert(A,I)}))))).next((()=>this.populateOverlays(t,v,u))).next((()=>this.computeViews(t,b,v,Nt()))).next((A=>({batchId:_,changes:S_(A)})))))}))}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new We(r)).next((s=>{let l=Nu();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,r,s,l){const u=r.collectionGroup;let p=Nu();return this.indexManager.getCollectionParents(t,u).next((_=>Ae.forEach(_,(b=>{const v=(function(N,I){return new Yu(I,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)})(r,b.child(u));return this.getDocumentsMatchingCollectionQuery(t,v,s,l).next((A=>{A.forEach(((N,I)=>{p=p.insert(N,I)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(t,r,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,s.largestBatchId).next((p=>(u=p,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,s,u,l)))).next((p=>{u.forEach(((b,v)=>{const A=v.getKey();p.get(A)===null&&(p=p.insert(A,xr.newInvalidDocument(A)))}));let _=Nu();return p.forEach(((b,v)=>{const A=u.get(b);A!==void 0&&Ou(A.mutation,v,Ja.empty(),tn.now()),Xh(r,v)&&(_=_.insert(b,v))})),_}))}}class XA{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Ae.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,(function(l){return{id:l.id,version:l.version,createTime:_i(l.createTime)}})(r)),Ae.resolve()}getNamedQuery(t,r){return Ae.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,(function(l){return{name:l.name,query:LA(l.bundledQuery),readTime:_i(l.readTime)}})(r)),Ae.resolve()}}class $A{constructor(){this.overlays=new bn(We.comparator),this.qr=new Map}getOverlay(t,r){return Ae.resolve(this.overlays.get(r))}getOverlays(t,r){const s=Ao();return Ae.forEach(r,(l=>this.getOverlay(t,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(t,r,s){return s.forEach(((l,u)=>{this.St(t,r,u)})),Ae.resolve()}removeOverlaysForBatchId(t,r,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),Ae.resolve()}getOverlaysForCollection(t,r,s){const l=Ao(),u=r.length+1,p=new We(r.child("")),_=this.overlays.getIteratorFrom(p);for(;_.hasNext();){const b=_.getNext().value,v=b.getKey();if(!r.isPrefixOf(v.path))break;v.path.length===u&&b.largestBatchId>s&&l.set(b.getKey(),b)}return Ae.resolve(l)}getOverlaysForCollectionGroup(t,r,s,l){let u=new bn(((v,A)=>v-A));const p=this.overlays.getIterator();for(;p.hasNext();){const v=p.getNext().value;if(v.getKey().getCollectionGroup()===r&&v.largestBatchId>s){let A=u.get(v.largestBatchId);A===null&&(A=Ao(),u=u.insert(v.largestBatchId,A)),A.set(v.getKey(),v)}}const _=Ao(),b=u.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((v,A)=>_.set(v,A))),!(_.size()>=l)););return Ae.resolve(_)}St(t,r,s){const l=this.overlays.get(s.key);if(l!==null){const p=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new mA(r,s));let u=this.qr.get(r);u===void 0&&(u=Nt(),this.qr.set(r,u)),this.qr.set(r,u.add(s.key))}}class ZA{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(t){return Ae.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ae.resolve()}}class sp{constructor(){this.Qr=new Yn(nr.$r),this.Ur=new Yn(nr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const s=new nr(t,r);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,r){t.forEach((s=>this.addReference(s,r)))}removeReference(t,r){this.Gr(new nr(t,r))}zr(t,r){t.forEach((s=>this.removeReference(s,r)))}jr(t){const r=new We(new en([])),s=new nr(r,t),l=new nr(r,t+1),u=[];return this.Ur.forEachInRange([s,l],(p=>{this.Gr(p),u.push(p.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new We(new en([])),s=new nr(r,t),l=new nr(r,t+1);let u=Nt();return this.Ur.forEachInRange([s,l],(p=>{u=u.add(p.key)})),u}containsKey(t){const r=new nr(t,0),s=this.Qr.firstAfterOrEqual(r);return s!==null&&t.isEqual(s.key)}}class nr{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return We.comparator(t.key,r.key)||At(t.Yr,r.Yr)}static Kr(t,r){return At(t.Yr,r.Yr)||We.comparator(t.key,r.key)}}class JA{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Yn(nr.$r)}checkEmpty(t){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,s,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new dA(u,r,s,l);this.mutationQueue.push(p);for(const _ of l)this.Zr=this.Zr.add(new nr(_.key,u)),this.indexManager.addToCollectionParentIndex(t,_.key.path.popLast());return Ae.resolve(p)}lookupMutationBatch(t,r){return Ae.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const s=r+1,l=this.ei(s),u=l<0?0:l;return Ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(t){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const s=new nr(r,0),l=new nr(r,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,l],(p=>{const _=this.Xr(p.Yr);u.push(_)})),Ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,r){let s=new Yn(At);return r.forEach((l=>{const u=new nr(l,0),p=new nr(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,p],(_=>{s=s.add(_.Yr)}))})),Ae.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,r){const s=r.path,l=s.length+1;let u=s;We.isDocumentKey(u)||(u=u.child(""));const p=new nr(new We(u),0);let _=new Yn(At);return this.Zr.forEachWhile((b=>{const v=b.key.path;return!!s.isPrefixOf(v)&&(v.length===l&&(_=_.add(b.Yr)),!0)}),p),Ae.resolve(this.ti(_))}ti(t){const r=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&r.push(l)})),r}removeMutationBatch(t,r){qt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Ae.forEach(r.mutations,(l=>{const u=new nr(l.key,r.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,r){const s=new nr(r,0),l=this.Zr.firstAfterOrEqual(s);return Ae.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ae.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class WA{constructor(t){this.ri=t,this.docs=(function(){return new bn(We.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const s=r.key,l=this.docs.get(s),u=l?l.size:0,p=this.ri(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:p}),this.size+=p-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const s=this.docs.get(r);return Ae.resolve(s?s.document.mutableCopy():xr.newInvalidDocument(r))}getEntries(t,r){let s=ts();return r.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():xr.newInvalidDocument(l))})),Ae.resolve(s)}getDocumentsMatchingQuery(t,r,s,l){let u=ts();const p=r.path,_=new We(p.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(_);for(;b.hasNext();){const{key:v,value:{document:A}}=b.getNext();if(!p.isPrefixOf(v.path))break;v.path.length>p.length+1||RS(NS(A),s)<=0||(l.has(A.key)||Xh(r,A))&&(u=u.insert(A.key,A.mutableCopy()))}return Ae.resolve(u)}getAllFromCollectionGroup(t,r,s,l){it(9500)}ii(t,r){return Ae.forEach(this.docs,(s=>r(s)))}newChangeBuffer(t){return new eN(this)}getSize(t){return Ae.resolve(this.size)}}class eN extends GA{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?r.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),Ae.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}class tN{constructor(t){this.persistence=t,this.si=new Mo((r=>Jm(r)),Wm),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=Al.ur()}forEachTarget(t,r){return this.si.forEach(((s,l)=>r(l))),Ae.resolve()}getLastRemoteSnapshotVersion(t){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ae.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(t,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.oi&&(this.oi=r),Ae.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Al(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Ae.resolve()}updateTargetData(t,r){return this.Pr(r),Ae.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(t,r,s){let l=0;const u=[];return this.si.forEach(((p,_)=>{_.sequenceNumber<=r&&s.get(_.targetId)===null&&(this.si.delete(p),u.push(this.removeMatchingKeysForTargetId(t,_.targetId)),l++)})),Ae.waitFor(u).next((()=>l))}getTargetCount(t){return Ae.resolve(this.targetCount)}getTargetData(t,r){const s=this.si.get(r)||null;return Ae.resolve(s)}addMatchingKeys(t,r,s){return this._i.Wr(r,s),Ae.resolve()}removeMatchingKeys(t,r,s){this._i.zr(r,s);const l=this.persistence.referenceDelegate,u=[];return l&&r.forEach((p=>{u.push(l.markPotentiallyOrphaned(t,p))})),Ae.waitFor(u)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Ae.resolve()}getMatchingKeysForTargetId(t,r){const s=this._i.Hr(r);return Ae.resolve(s)}containsKey(t,r){return Ae.resolve(this._i.containsKey(r))}}class K_{constructor(t,r){this.ui={},this.overlays={},this.ci=new Kh(0),this.li=!1,this.li=!0,this.hi=new ZA,this.referenceDelegate=t(this),this.Pi=new tN(this),this.indexManager=new zA,this.remoteDocumentCache=(function(l){return new WA(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new PA(r),this.Ii=new XA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new $A,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let s=this.ui[t.toKey()];return s||(s=new JA(r,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,s){Ke("MemoryPersistence","Starting transaction:",t);const l=new nN(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,r){return Ae.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,r))))}}class nN extends jS{constructor(t){super(),this.currentSequenceNumber=t}}class op{constructor(t){this.persistence=t,this.Ri=new sp,this.Vi=null}static mi(t){return new op(t)}get fi(){if(this.Vi)return this.Vi;throw it(60996)}addReference(t,r,s){return this.Ri.addReference(s,r),this.fi.delete(s.toString()),Ae.resolve()}removeReference(t,r,s){return this.Ri.removeReference(s,r),this.fi.add(s.toString()),Ae.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Ae.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,r.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,r)))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.fi,(s=>{const l=We.fromPath(s);return this.gi(t,l).next((u=>{u||r.removeEntry(l,ut.min())}))})).next((()=>(this.Vi=null,r.apply(t))))}updateLimboDocument(t,r){return this.gi(t,r).next((s=>{s?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(t){return 0}gi(t,r){return Ae.or([()=>Ae.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class Ih{constructor(t,r){this.persistence=t,this.pi=new Mo((s=>OS(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=KA(this,r)}static mi(t,r){return new Ih(t,r)}Ei(){}di(t){return Ae.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>r.next((l=>s+l))))}wr(t){let r=0;return this.pr(t,(s=>{r++})).next((()=>r))}pr(t,r){return Ae.forEach(this.pi,((s,l)=>this.br(t,s,l).next((u=>u?Ae.resolve():r(l)))))}removeTargets(t,r,s){return this.persistence.getTargetCache().removeTargets(t,r,s)}removeOrphanedDocuments(t,r){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(p=>this.br(t,p,r).next((_=>{_||(s++,u.removeEntry(p,ut.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Ae.resolve()}removeTarget(t,r){const s=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,r,s){return this.pi.set(s,t.currentSequenceNumber),Ae.resolve()}removeReference(t,r,s){return this.pi.set(s,t.currentSequenceNumber),Ae.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Ae.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=hh(t.data.value)),r}br(t,r,s){return Ae.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const l=this.pi.get(r);return Ae.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class lp{constructor(t,r,s,l){this.targetId=t,this.fromCache=r,this.Es=s,this.ds=l}static As(t,r){let s=Nt(),l=Nt();for(const u of r.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new lp(t,r.fromCache,s,l)}}class rN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class aN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Z2()?8:DS(X2())>0?6:4})()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,s,l){const u={result:null};return this.ys(t,r).next((p=>{u.result=p})).next((()=>{if(!u.result)return this.ws(t,r,l,s).next((p=>{u.result=p}))})).next((()=>{if(u.result)return;const p=new rN;return this.Ss(t,r,p).next((_=>{if(u.result=_,this.Vs)return this.bs(t,r,p,_.size)}))})).next((()=>u.result))}bs(t,r,s,l){return s.documentReadCount<this.fs?(pl()<=Ot.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",gl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ae.resolve()):(pl()<=Ot.DEBUG&&Ke("QueryEngine","Query:",gl(r),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(pl()<=Ot.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",gl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,vi(r))):Ae.resolve())}ys(t,r){if(T0(r))return Ae.resolve(null);let s=vi(r);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(r.limit!==null&&l===1&&(r=Sm(r,null,"F"),s=vi(r)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const p=Nt(...u);return this.ps.getDocuments(t,p).next((_=>this.indexManager.getMinOffset(t,s).next((b=>{const v=this.Ds(r,_);return this.Cs(r,v,p,b.readTime)?this.ys(t,Sm(r,null,"F")):this.vs(t,v,r,b)}))))})))))}ws(t,r,s,l){return T0(r)||l.isEqual(ut.min())?Ae.resolve(null):this.ps.getDocuments(t,s).next((u=>{const p=this.Ds(r,u);return this.Cs(r,p,s,l)?Ae.resolve(null):(pl()<=Ot.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),gl(r)),this.vs(t,p,r,AS(l,zu)).next((_=>_)))}))}Ds(t,r){let s=new Yn(w_(t));return r.forEach(((l,u)=>{Xh(t,u)&&(s=s.add(u))})),s}Cs(t,r,s,l){if(t.limit===null)return!1;if(s.size!==r.size)return!0;const u=t.limitType==="F"?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,r,s){return pl()<=Ot.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",gl(r)),this.ps.getDocumentsMatchingQuery(t,r,Xs.min(),s)}vs(t,r,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((u=>(r.forEach((p=>{u=u.insert(p.key,p)})),u)))}}const up="LocalStore",iN=3e8;class sN{constructor(t,r,s,l){this.persistence=t,this.Fs=r,this.serializer=l,this.Ms=new bn(At),this.xs=new Mo((u=>Jm(u)),Wm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new YA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>t.collect(r,this.Ms)))}}function oN(a,t,r,s){return new sN(a,t,r,s)}async function G_(a,t){const r=ht(a);return await r.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return r.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,r.Bs(t),r.mutationQueue.getAllMutationBatches(s)))).next((u=>{const p=[],_=[];let b=Nt();for(const v of l){p.push(v.batchId);for(const A of v.mutations)b=b.add(A.key)}for(const v of u){_.push(v.batchId);for(const A of v.mutations)b=b.add(A.key)}return r.localDocuments.getDocuments(s,b).next((v=>({Ls:v,removedBatchIds:p,addedBatchIds:_})))}))}))}function lN(a,t){const r=ht(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),u=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(_,b,v,A){const N=v.batch,I=N.keys();let $=Ae.resolve();return I.forEach((ce=>{$=$.next((()=>A.getEntry(b,ce))).next((oe=>{const U=v.docVersions.get(ce);qt(U!==null,48541),oe.version.compareTo(U)<0&&(N.applyToRemoteDocument(oe,v),oe.isValidDocument()&&(oe.setReadTime(v.commitVersion),A.addEntry(oe)))}))})),$.next((()=>_.mutationQueue.removeMutationBatch(b,N)))})(r,s,t,u).next((()=>u.apply(s))).next((()=>r.mutationQueue.performConsistencyCheck(s))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(_){let b=Nt();for(let v=0;v<_.mutationResults.length;++v)_.mutationResults[v].transformResults.length>0&&(b=b.add(_.batch.mutations[v].key));return b})(t)))).next((()=>r.localDocuments.getDocuments(s,l)))}))}function Q_(a){const t=ht(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>t.Pi.getLastRemoteSnapshotVersion(r)))}function uN(a,t){const r=ht(a),s=t.snapshotVersion;let l=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const p=r.Ns.newChangeBuffer({trackRemovals:!0});l=r.Ms;const _=[];t.targetChanges.forEach(((A,N)=>{const I=l.get(N);if(!I)return;_.push(r.Pi.removeMatchingKeys(u,A.removedDocuments,N).next((()=>r.Pi.addMatchingKeys(u,A.addedDocuments,N))));let $=I.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(N)!==null?$=$.withResumeToken(ar.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):A.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(A.resumeToken,s)),l=l.insert(N,$),(function(oe,U,Q){return oe.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=iN?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(I,$,A)&&_.push(r.Pi.updateTargetData(u,$))}));let b=ts(),v=Nt();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&_.push(r.persistence.referenceDelegate.updateLimboDocument(u,A))})),_.push(cN(u,p,t.documentUpdates).next((A=>{b=A.ks,v=A.qs}))),!s.isEqual(ut.min())){const A=r.Pi.getLastRemoteSnapshotVersion(u).next((N=>r.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));_.push(A)}return Ae.waitFor(_).next((()=>p.apply(u))).next((()=>r.localDocuments.getLocalViewOfDocuments(u,b,v))).next((()=>b))})).then((u=>(r.Ms=l,u)))}function cN(a,t,r){let s=Nt(),l=Nt();return r.forEach((u=>s=s.add(u))),t.getEntries(a,s).next((u=>{let p=ts();return r.forEach(((_,b)=>{const v=u.get(_);b.isFoundDocument()!==v.isFoundDocument()&&(l=l.add(_)),b.isNoDocument()&&b.version.isEqual(ut.min())?(t.removeEntry(_,b.readTime),p=p.insert(_,b)):!v.isValidDocument()||b.version.compareTo(v.version)>0||b.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(b),p=p.insert(_,b)):Ke(up,"Ignoring outdated watch update for ",_,". Current version:",v.version," Watch version:",b.version)})),{ks:p,qs:l}}))}function hN(a,t){const r=ht(a);return r.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Xm),r.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function fN(a,t){const r=ht(a);return r.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return r.Pi.getTargetData(s,t).next((u=>u?(l=u,Ae.resolve(l)):r.Pi.allocateTargetId(s).next((p=>(l=new qs(t,p,"TargetPurposeListen",s.currentSequenceNumber),r.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=r.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(s.targetId,s),r.xs.set(t,s.targetId)),s}))}async function jm(a,t,r){const s=ht(a),l=s.Ms.get(t),u=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",u,(p=>s.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!Ll(p))throw p;Ke(up,`Failed to update sequence numbers for target ${t}: ${p}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function P0(a,t,r){const s=ht(a);let l=ut.min(),u=Nt();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(b,v,A){const N=ht(b),I=N.xs.get(A);return I!==void 0?Ae.resolve(N.Ms.get(I)):N.Pi.getTargetData(v,A)})(s,p,vi(t)).next((_=>{if(_)return l=_.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(p,_.targetId).next((b=>{u=b}))})).next((()=>s.Fs.getDocumentsMatchingQuery(p,t,r?l:ut.min(),r?u:Nt()))).next((_=>(dN(s,JS(t),_),{documents:_,Qs:u})))))}function dN(a,t,r){let s=a.Os.get(t)||ut.min();r.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),a.Os.set(t,s)}class L0{constructor(){this.activeTargetIds=aA()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mN{constructor(){this.Mo=new L0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,s){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,s){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new L0,Promise.resolve()}handleUserChange(t,r,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class pN{Oo(t){}shutdown(){}}const z0="ConnectivityMonitor";class U0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ke(z0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Ke(z0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let sh=null;function Dm(){return sh===null?sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():sh++,"0x"+sh.toString(16)}const lm="RestConnection",gN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Sh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,r,s,l,u){const p=Dm(),_=this.zo(t,r.toUriEncodedString());Ke(lm,`Sending RPC '${t}' ${p}:`,_,s);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,l,u);const{host:v}=new URL(_),A=Gm(v);return this.Jo(t,_,b,s,A).then((N=>(Ke(lm,`Received RPC '${t}' ${p}: `,N),N)),(N=>{throw Do(lm,`RPC '${t}' ${p} failed with error: `,N,"url: ",_,"request:",s),N}))}Ho(t,r,s,l,u,p){return this.Go(t,r,s,l,u)}jo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((l,u)=>t[u]=l)),s&&s.headers.forEach(((l,u)=>t[u]=l))}zo(t,r){const s=gN[t];return`${this.Uo}/v1/${r}:${s}`}terminate(){}}class vN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const br="WebChannelConnection";class bN extends yN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,s,l,u){const p=Dm();return new Promise(((_,b)=>{const v=new Yb;v.setWithCredentials(!0),v.listenOnce(Xb.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case ch.NO_ERROR:const N=v.getResponseJson();Ke(br,`XHR for RPC '${t}' ${p} received:`,JSON.stringify(N)),_(N);break;case ch.TIMEOUT:Ke(br,`RPC '${t}' ${p} timed out`),b(new Ge(Se.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const I=v.getStatus();if(Ke(br,`RPC '${t}' ${p} failed with status:`,I,"response text:",v.getResponseText()),I>0){let $=v.getResponseJson();Array.isArray($)&&($=$[0]);const ce=$?.error;if(ce&&ce.status&&ce.message){const oe=(function(Q){const Z=Q.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(Z)>=0?Z:Se.UNKNOWN})(ce.status);b(new Ge(oe,ce.message))}else b(new Ge(Se.UNKNOWN,"Server responded with status "+v.getStatus()))}else b(new Ge(Se.UNAVAILABLE,"Connection failed."));break;default:it(9055,{l_:t,streamId:p,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{Ke(br,`RPC '${t}' ${p} completed.`)}}));const A=JSON.stringify(l);Ke(br,`RPC '${t}' ${p} sending request:`,l),v.send(r,"POST",A,s,15)}))}T_(t,r,s){const l=Dm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],p=Jb(),_=Zb(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(b.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,r,s),b.encodeInitMessageHeaders=!0;const A=u.join("");Ke(br,`Creating RPC '${t}' stream ${l}: ${A}`,b);const N=p.createWebChannel(A,b);this.I_(N);let I=!1,$=!1;const ce=new vN({Yo:U=>{$?Ke(br,`Not sending because RPC '${t}' stream ${l} is closed:`,U):(I||(Ke(br,`Opening RPC '${t}' stream ${l} transport.`),N.open(),I=!0),Ke(br,`RPC '${t}' stream ${l} sending:`,U),N.send(U))},Zo:()=>N.close()}),oe=(U,Q,Z)=>{U.listen(Q,(he=>{try{Z(he)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return oe(N,Au.EventType.OPEN,(()=>{$||(Ke(br,`RPC '${t}' stream ${l} transport opened.`),ce.o_())})),oe(N,Au.EventType.CLOSE,(()=>{$||($=!0,Ke(br,`RPC '${t}' stream ${l} transport closed`),ce.a_(),this.E_(N))})),oe(N,Au.EventType.ERROR,(U=>{$||($=!0,Do(br,`RPC '${t}' stream ${l} transport errored. Name:`,U.name,"Message:",U.message),ce.a_(new Ge(Se.UNAVAILABLE,"The operation could not be completed")))})),oe(N,Au.EventType.MESSAGE,(U=>{if(!$){const Q=U.data[0];qt(!!Q,16349);const Z=Q,he=Z?.error||Z[0]?.error;if(he){Ke(br,`RPC '${t}' stream ${l} received error:`,he);const _e=he.status;let ke=(function(O){const V=qn[O];if(V!==void 0)return M_(V)})(_e),Qe=he.message;ke===void 0&&(ke=Se.INTERNAL,Qe="Unknown error status: "+_e+" with message "+he.message),$=!0,ce.a_(new Ge(ke,Qe)),N.close()}else Ke(br,`RPC '${t}' stream ${l} received:`,Q),ce.u_(Q)}})),oe(_,$b.STAT_EVENT,(U=>{U.stat===vm.PROXY?Ke(br,`RPC '${t}' stream ${l} detected buffering proxy`):U.stat===vm.NOPROXY&&Ke(br,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{ce.__()}),0),ce}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((r=>r===t))}}function um(){return typeof document<"u"?document:null}function Wh(a){return new wA(a,!0)}class Y_{constructor(t,r,s=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=r,this.d_=s,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,r-s);l>0&&Ke("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const B0="PersistentStream";class X_{constructor(t,r,s,l,u,p,_,b){this.Mi=t,this.S_=s,this.b_=l,this.connection=u,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Y_(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Se.RESOURCE_EXHAUSTED?(es(r.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===r&&this.G_(s,l)}),(s=>{t((()=>{const l=new Ge(Se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,r){const s=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Ke(B0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget((()=>this.D_===t?r():(Ke(B0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _N extends X_{constructor(t,r,s,l,u,p){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,l,p),this.serializer=u}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=AA(this.serializer,t),s=(function(u){if(!("targetChange"in u))return ut.min();const p=u.targetChange;return p.targetIds&&p.targetIds.length?ut.min():p.readTime?_i(p.readTime):ut.min()})(t);return this.listener.H_(r,s)}Y_(t){const r={};r.database=Cm(this.serializer),r.addTarget=(function(u,p){let _;const b=p.target;if(_=wm(b)?{documents:CA(u,b)}:{query:jA(u,b).ft},_.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){_.resumeToken=P_(u,p.resumeToken);const v=Am(u,p.expectedCount);v!==null&&(_.expectedCount=v)}else if(p.snapshotVersion.compareTo(ut.min())>0){_.readTime=Dh(u,p.snapshotVersion.toTimestamp());const v=Am(u,p.expectedCount);v!==null&&(_.expectedCount=v)}return _})(this.serializer,t);const s=IA(this.serializer,t);s&&(r.labels=s),this.q_(r)}Z_(t){const r={};r.database=Cm(this.serializer),r.removeTarget=t,this.q_(r)}}class xN extends X_{constructor(t,r,s,l,u,p){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,l,p),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=RA(t.writeResults,t.commitTime),s=_i(t.commitTime);return this.listener.na(s,r)}ra(){const t={};t.database=Cm(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map((s=>NA(this.serializer,s)))};this.q_(r)}}class EN{}class wN extends EN{constructor(t,r,s,l){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ge(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Go(t,Nm(r,s),l,u,p))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ge(Se.UNKNOWN,u.toString())}))}Ho(t,r,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,_])=>this.connection.Ho(t,Nm(r,s),l,p,_,u))).catch((p=>{throw p.name==="FirebaseError"?(p.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Ge(Se.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TN{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(r),this.aa=!1):Ke("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Io="RemoteStore";class SN{constructor(t,r,s,l,u){this.localStore=t,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((p=>{s.enqueueAndForget((async()=>{ko(this)&&(Ke(Io,"Restarting streams for network reachability change."),await(async function(b){const v=ht(b);v.Ea.add(4),await Zu(v),v.Ra.set("Unknown"),v.Ea.delete(4),await ef(v)})(this))}))})),this.Ra=new TN(s,l)}}async function ef(a){if(ko(a))for(const t of a.da)await t(!0)}async function Zu(a){for(const t of a.da)await t(!1)}function $_(a,t){const r=ht(a);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),dp(r)?fp(r):zl(r).O_()&&hp(r,t))}function cp(a,t){const r=ht(a),s=zl(r);r.Ia.delete(t),s.O_()&&Z_(r,t),r.Ia.size===0&&(s.O_()?s.L_():ko(r)&&r.Ra.set("Unknown"))}function hp(a,t){if(a.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ut.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}zl(a).Y_(t)}function Z_(a,t){a.Va.Ue(t),zl(a).Z_(t)}function fp(a){a.Va=new bA({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),At:t=>a.Ia.get(t)||null,ht:()=>a.datastore.serializer.databaseId}),zl(a).start(),a.Ra.ua()}function dp(a){return ko(a)&&!zl(a).x_()&&a.Ia.size>0}function ko(a){return ht(a).Ea.size===0}function J_(a){a.Va=void 0}async function AN(a){a.Ra.set("Online")}async function NN(a){a.Ia.forEach(((t,r)=>{hp(a,t)}))}async function RN(a,t){J_(a),dp(a)?(a.Ra.ha(t),fp(a)):a.Ra.set("Unknown")}async function CN(a,t,r){if(a.Ra.set("Online"),t instanceof k_&&t.state===2&&t.cause)try{await(async function(l,u){const p=u.cause;for(const _ of u.targetIds)l.Ia.has(_)&&(await l.remoteSyncer.rejectListen(_,p),l.Ia.delete(_),l.Va.removeTarget(_))})(a,t)}catch(s){Ke(Io,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Oh(a,s)}else if(t instanceof mh?a.Va.Ze(t):t instanceof V_?a.Va.st(t):a.Va.tt(t),!r.isEqual(ut.min()))try{const s=await Q_(a.localStore);r.compareTo(s)>=0&&await(function(u,p){const _=u.Va.Tt(p);return _.targetChanges.forEach(((b,v)=>{if(b.resumeToken.approximateByteSize()>0){const A=u.Ia.get(v);A&&u.Ia.set(v,A.withResumeToken(b.resumeToken,p))}})),_.targetMismatches.forEach(((b,v)=>{const A=u.Ia.get(b);if(!A)return;u.Ia.set(b,A.withResumeToken(ar.EMPTY_BYTE_STRING,A.snapshotVersion)),Z_(u,b);const N=new qs(A.target,b,v,A.sequenceNumber);hp(u,N)})),u.remoteSyncer.applyRemoteEvent(_)})(a,r)}catch(s){Ke(Io,"Failed to raise snapshot:",s),await Oh(a,s)}}async function Oh(a,t,r){if(!Ll(t))throw t;a.Ea.add(1),await Zu(a),a.Ra.set("Offline"),r||(r=()=>Q_(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{Ke(Io,"Retrying IndexedDB access"),await r(),a.Ea.delete(1),await ef(a)}))}function W_(a,t){return t().catch((r=>Oh(a,r,t)))}async function tf(a){const t=ht(a),r=Ws(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xm;for(;jN(t);)try{const l=await hN(t.localStore,s);if(l===null){t.Ta.length===0&&r.L_();break}s=l.batchId,DN(t,l)}catch(l){await Oh(t,l)}ex(t)&&tx(t)}function jN(a){return ko(a)&&a.Ta.length<10}function DN(a,t){a.Ta.push(t);const r=Ws(a);r.O_()&&r.X_&&r.ea(t.mutations)}function ex(a){return ko(a)&&!Ws(a).x_()&&a.Ta.length>0}function tx(a){Ws(a).start()}async function IN(a){Ws(a).ra()}async function ON(a){const t=Ws(a);for(const r of a.Ta)t.ea(r.mutations)}async function MN(a,t,r){const s=a.Ta.shift(),l=rp.from(s,t,r);await W_(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await tf(a)}async function VN(a,t){t&&Ws(a).X_&&await(async function(s,l){if((function(p){return gA(p)&&p!==Se.ABORTED})(l.code)){const u=s.Ta.shift();Ws(s).B_(),await W_(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await tf(s)}})(a,t),ex(a)&&tx(a)}async function q0(a,t){const r=ht(a);r.asyncQueue.verifyOperationInProgress(),Ke(Io,"RemoteStore received new credentials");const s=ko(r);r.Ea.add(3),await Zu(r),s&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await ef(r)}async function kN(a,t){const r=ht(a);t?(r.Ea.delete(2),await ef(r)):t||(r.Ea.add(2),await Zu(r),r.Ra.set("Unknown"))}function zl(a){return a.ma||(a.ma=(function(r,s,l){const u=ht(r);return u.sa(),new _N(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:AN.bind(null,a),t_:NN.bind(null,a),r_:RN.bind(null,a),H_:CN.bind(null,a)}),a.da.push((async t=>{t?(a.ma.B_(),dp(a)?fp(a):a.Ra.set("Unknown")):(await a.ma.stop(),J_(a))}))),a.ma}function Ws(a){return a.fa||(a.fa=(function(r,s,l){const u=ht(r);return u.sa(),new xN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:IN.bind(null,a),r_:VN.bind(null,a),ta:ON.bind(null,a),na:MN.bind(null,a)}),a.da.push((async t=>{t?(a.fa.B_(),await tf(a)):(await a.fa.stop(),a.Ta.length>0&&(Ke(Io,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class mp{constructor(t,r,s,l,u){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new No,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,r,s,l,u){const p=Date.now()+s,_=new mp(t,r,p,l,u);return _.start(s),_}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(Se.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(a,t){if(es("AsyncQueue",`${t}: ${a}`),Ll(a))return new Ge(Se.UNAVAILABLE,`${t}: ${a}`);throw a}class xl{static emptySet(t){return new xl(t.comparator)}constructor(t){this.comparator=t?(r,s)=>t(r,s)||We.comparator(r.key,s.key):(r,s)=>We.comparator(r.key,s.key),this.keyedMap=Nu(),this.sortedSet=new bn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((r,s)=>(t(r),!1)))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof xl)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((r=>{t.push(r.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const s=new xl;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=r,s}}class F0{constructor(){this.ga=new bn(We.comparator)}track(t){const r=t.doc.key,s=this.ga.get(r);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(r,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(r,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(r):t.type===1&&s.type===2?this.ga=this.ga.insert(r,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):it(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal(((r,s)=>{t.push(s)})),t}}class Nl{constructor(t,r,s,l,u,p,_,b,v){this.query=t,this.docs=r,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=b,this.hasCachedResults=v}static fromInitialDocuments(t,r,s,l,u){const p=[];return r.forEach((_=>{p.push({type:0,doc:_})})),new Nl(t,r,xl.emptySet(r),p,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,s=t.docChanges;if(r.length!==s.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==s[l].type||!r[l].doc.isEqual(s[l].doc))return!1;return!0}}class PN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class LN{constructor(){this.queries=H0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,s){const l=ht(r),u=l.queries;l.queries=H0(),u.forEach(((p,_)=>{for(const b of _.Sa)b.onError(s)}))})(this,new Ge(Se.ABORTED,"Firestore shutting down"))}}function H0(){return new Mo((a=>E_(a)),Yh)}async function zN(a,t){const r=ht(a);let s=3;const l=t.query;let u=r.queries.get(l);u?!u.ba()&&t.Da()&&(s=2):(u=new PN,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await r.onListen(l,!0);break;case 1:u.wa=await r.onListen(l,!1);break;case 2:await r.onFirstRemoteStoreListen(l)}}catch(p){const _=pp(p,`Initialization of query '${gl(t.query)}' failed`);return void t.onError(_)}r.queries.set(l,u),u.Sa.push(t),t.va(r.onlineState),u.wa&&t.Fa(u.wa)&&gp(r)}async function UN(a,t){const r=ht(a),s=t.query;let l=3;const u=r.queries.get(s);if(u){const p=u.Sa.indexOf(t);p>=0&&(u.Sa.splice(p,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function BN(a,t){const r=ht(a);let s=!1;for(const l of t){const u=l.query,p=r.queries.get(u);if(p){for(const _ of p.Sa)_.Fa(l)&&(s=!0);p.wa=l}}s&&gp(r)}function qN(a,t,r){const s=ht(a),l=s.queries.get(t);if(l)for(const u of l.Sa)u.onError(r);s.queries.delete(t)}function gp(a){a.Ca.forEach((t=>{t.next()}))}var Im,K0;(K0=Im||(Im={})).Ma="default",K0.Cache="cache";class FN{constructor(t,r,s){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Nl(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const s=r!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Nl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Im.Cache}}class nx{constructor(t){this.key=t}}class rx{constructor(t){this.key=t}}class HN{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nt(),this.mutatedKeys=Nt(),this.eu=w_(t),this.tu=new xl(this.eu)}get nu(){return this.Ya}ru(t,r){const s=r?r.iu:new F0,l=r?r.tu:this.tu;let u=r?r.mutatedKeys:this.mutatedKeys,p=l,_=!1;const b=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,v=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,N)=>{const I=l.get(A),$=Xh(this.query,N)?N:null,ce=!!I&&this.mutatedKeys.has(I.key),oe=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let U=!1;I&&$?I.data.isEqual($.data)?ce!==oe&&(s.track({type:3,doc:$}),U=!0):this.su(I,$)||(s.track({type:2,doc:$}),U=!0,(b&&this.eu($,b)>0||v&&this.eu($,v)<0)&&(_=!0)):!I&&$?(s.track({type:0,doc:$}),U=!0):I&&!$&&(s.track({type:1,doc:I}),U=!0,(b||v)&&(_=!0)),U&&($?(p=p.add($),u=oe?u.add(A):u.delete(A)):(p=p.delete(A),u=u.delete(A)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const A=this.query.limitType==="F"?p.last():p.first();p=p.delete(A.key),u=u.delete(A.key),s.track({type:1,doc:A})}return{tu:p,iu:s,Cs:_,mutatedKeys:u}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,s,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const p=t.iu.ya();p.sort(((A,N)=>(function($,ce){const oe=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it(20277,{Rt:U})}};return oe($)-oe(ce)})(A.type,N.type)||this.eu(A.doc,N.doc))),this.ou(s),l=l??!1;const _=r&&!l?this._u():[],b=this.Xa.size===0&&this.current&&!l?1:0,v=b!==this.Za;return this.Za=b,p.length!==0||v?{snapshot:new Nl(this.query,t.tu,u,p,t.mutatedKeys,b===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:_}:{au:_}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),t.modifiedDocuments.forEach((r=>{})),t.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Nt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const r=[];return t.forEach((s=>{this.Xa.has(s)||r.push(new rx(s))})),this.Xa.forEach((s=>{t.has(s)||r.push(new nx(s))})),r}cu(t){this.Ya=t.Qs,this.Xa=Nt();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yp="SyncEngine";class KN{constructor(t,r,s){this.query=t,this.targetId=r,this.view=s}}class GN{constructor(t){this.key=t,this.hu=!1}}class QN{constructor(t,r,s,l,u,p){this.localStore=t,this.remoteStore=r,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Mo((_=>E_(_)),Yh),this.Iu=new Map,this.Eu=new Set,this.du=new bn(We.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YN(a,t,r=!0){const s=ux(a);let l;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await ax(s,t,r,!0),l}async function XN(a,t){const r=ux(a);await ax(r,t,!0,!1)}async function ax(a,t,r,s){const l=await fN(a.localStore,vi(t)),u=l.targetId,p=a.sharedClientState.addLocalQueryTarget(u,r);let _;return s&&(_=await $N(a,t,u,p==="current",l.resumeToken)),a.isPrimaryClient&&r&&$_(a.remoteStore,l),_}async function $N(a,t,r,s,l){a.pu=(N,I,$)=>(async function(oe,U,Q,Z){let he=U.view.ru(Q);he.Cs&&(he=await P0(oe.localStore,U.query,!1).then((({documents:M})=>U.view.ru(M,he))));const _e=Z&&Z.targetChanges.get(U.targetId),ke=Z&&Z.targetMismatches.get(U.targetId)!=null,Qe=U.view.applyChanges(he,oe.isPrimaryClient,_e,ke);return Q0(oe,U.targetId,Qe.au),Qe.snapshot})(a,N,I,$);const u=await P0(a.localStore,t,!0),p=new HN(t,u.Qs),_=p.ru(u.documents),b=$u.createSynthesizedTargetChangeForCurrentChange(r,s&&a.onlineState!=="Offline",l),v=p.applyChanges(_,a.isPrimaryClient,b);Q0(a,r,v.au);const A=new KN(t,r,p);return a.Tu.set(t,A),a.Iu.has(r)?a.Iu.get(r).push(t):a.Iu.set(r,[t]),v.snapshot}async function ZN(a,t,r){const s=ht(a),l=s.Tu.get(t),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((p=>!Yh(p,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await jm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),r&&cp(s.remoteStore,l.targetId),Om(s,l.targetId)})).catch(Pl)):(Om(s,l.targetId),await jm(s.localStore,l.targetId,!0))}async function JN(a,t){const r=ht(a),s=r.Tu.get(t),l=r.Iu.get(s.targetId);r.isPrimaryClient&&l.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),cp(r.remoteStore,s.targetId))}async function WN(a,t,r){const s=sR(a);try{const l=await(function(p,_){const b=ht(p),v=tn.now(),A=_.reduce((($,ce)=>$.add(ce.key)),Nt());let N,I;return b.persistence.runTransaction("Locally write mutations","readwrite",($=>{let ce=ts(),oe=Nt();return b.Ns.getEntries($,A).next((U=>{ce=U,ce.forEach(((Q,Z)=>{Z.isValidDocument()||(oe=oe.add(Q))}))})).next((()=>b.localDocuments.getOverlayedDocuments($,ce))).next((U=>{N=U;const Q=[];for(const Z of _){const he=hA(Z,N.get(Z.key).overlayedDocument);he!=null&&Q.push(new Vo(Z.key,he,m_(he.value.mapValue),bi.exists(!0)))}return b.mutationQueue.addMutationBatch($,v,Q,_)})).next((U=>{I=U;const Q=U.applyToLocalDocumentSet(N,oe);return b.documentOverlayCache.saveOverlays($,U.batchId,Q)}))})).then((()=>({batchId:I.batchId,changes:S_(N)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(p,_,b){let v=p.Vu[p.currentUser.toKey()];v||(v=new bn(At)),v=v.insert(_,b),p.Vu[p.currentUser.toKey()]=v})(s,l.batchId,r),await Ju(s,l.changes),await tf(s.remoteStore)}catch(l){const u=pp(l,"Failed to persist write");r.reject(u)}}async function ix(a,t){const r=ht(a);try{const s=await uN(r.localStore,t);t.targetChanges.forEach(((l,u)=>{const p=r.Au.get(u);p&&(qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?qt(p.hu,14607):l.removedDocuments.size>0&&(qt(p.hu,42227),p.hu=!1))})),await Ju(r,s,t)}catch(s){await Pl(s)}}function G0(a,t,r){const s=ht(a);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const l=[];s.Tu.forEach(((u,p)=>{const _=p.view.va(t);_.snapshot&&l.push(_.snapshot)})),(function(p,_){const b=ht(p);b.onlineState=_;let v=!1;b.queries.forEach(((A,N)=>{for(const I of N.Sa)I.va(_)&&(v=!0)})),v&&gp(b)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function eR(a,t,r){const s=ht(a);s.sharedClientState.updateQueryState(t,"rejected",r);const l=s.Au.get(t),u=l&&l.key;if(u){let p=new bn(We.comparator);p=p.insert(u,xr.newNoDocument(u,ut.min()));const _=Nt().add(u),b=new Jh(ut.min(),new Map,new bn(At),p,_);await ix(s,b),s.du=s.du.remove(u),s.Au.delete(t),vp(s)}else await jm(s.localStore,t,!1).then((()=>Om(s,t,r))).catch(Pl)}async function tR(a,t){const r=ht(a),s=t.batch.batchId;try{const l=await lN(r.localStore,t);ox(r,s,null),sx(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await Ju(r,l)}catch(l){await Pl(l)}}async function nR(a,t,r){const s=ht(a);try{const l=await(function(p,_){const b=ht(p);return b.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let A;return b.mutationQueue.lookupMutationBatch(v,_).next((N=>(qt(N!==null,37113),A=N.keys(),b.mutationQueue.removeMutationBatch(v,N)))).next((()=>b.mutationQueue.performConsistencyCheck(v))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(v,A,_))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,A))).next((()=>b.localDocuments.getDocuments(v,A)))}))})(s.localStore,t);ox(s,t,r),sx(s,t),s.sharedClientState.updateMutationState(t,"rejected",r),await Ju(s,l)}catch(l){await Pl(l)}}function sx(a,t){(a.mu.get(t)||[]).forEach((r=>{r.resolve()})),a.mu.delete(t)}function ox(a,t,r){const s=ht(a);let l=s.Vu[s.currentUser.toKey()];if(l){const u=l.get(t);u&&(r?u.reject(r):u.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Om(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const s of a.Iu.get(t))a.Tu.delete(s),r&&a.Pu.yu(s,r);a.Iu.delete(t),a.isPrimaryClient&&a.Ru.jr(t).forEach((s=>{a.Ru.containsKey(s)||lx(a,s)}))}function lx(a,t){a.Eu.delete(t.path.canonicalString());const r=a.du.get(t);r!==null&&(cp(a.remoteStore,r),a.du=a.du.remove(t),a.Au.delete(r),vp(a))}function Q0(a,t,r){for(const s of r)s instanceof nx?(a.Ru.addReference(s.key,t),rR(a,s)):s instanceof rx?(Ke(yp,"Document no longer in limbo: "+s.key),a.Ru.removeReference(s.key,t),a.Ru.containsKey(s.key)||lx(a,s.key)):it(19791,{wu:s})}function rR(a,t){const r=t.key,s=r.path.canonicalString();a.du.get(r)||a.Eu.has(s)||(Ke(yp,"New document in limbo: "+r),a.Eu.add(s),vp(a))}function vp(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const t=a.Eu.values().next().value;a.Eu.delete(t);const r=new We(en.fromString(t)),s=a.fu.next();a.Au.set(s,new GN(r)),a.du=a.du.insert(r,s),$_(a.remoteStore,new qs(vi(ep(r.path)),s,"TargetPurposeLimboResolution",Kh.ce))}}async function Ju(a,t,r){const s=ht(a),l=[],u=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((_,b)=>{p.push(s.pu(b,t,r).then((v=>{if((v||r)&&s.isPrimaryClient){const A=v?!v.fromCache:r?.targetChanges.get(b.targetId)?.current;s.sharedClientState.updateQueryState(b.targetId,A?"current":"not-current")}if(v){l.push(v);const A=lp.As(b.targetId,v);u.push(A)}})))})),await Promise.all(p),s.Pu.H_(l),await(async function(b,v){const A=ht(b);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(N=>Ae.forEach(v,(I=>Ae.forEach(I.Es,($=>A.persistence.referenceDelegate.addReference(N,I.targetId,$))).next((()=>Ae.forEach(I.ds,($=>A.persistence.referenceDelegate.removeReference(N,I.targetId,$)))))))))}catch(N){if(!Ll(N))throw N;Ke(up,"Failed to update sequence numbers: "+N)}for(const N of v){const I=N.targetId;if(!N.fromCache){const $=A.Ms.get(I),ce=$.snapshotVersion,oe=$.withLastLimboFreeSnapshotVersion(ce);A.Ms=A.Ms.insert(I,oe)}}})(s.localStore,u))}async function aR(a,t){const r=ht(a);if(!r.currentUser.isEqual(t)){Ke(yp,"User change. New user:",t.toKey());const s=await G_(r.localStore,t);r.currentUser=t,(function(u,p){u.mu.forEach((_=>{_.forEach((b=>{b.reject(new Ge(Se.CANCELLED,p))}))})),u.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ju(r,s.Ls)}}function iR(a,t){const r=ht(a),s=r.Au.get(t);if(s&&s.hu)return Nt().add(s.key);{let l=Nt();const u=r.Iu.get(t);if(!u)return l;for(const p of u){const _=r.Tu.get(p);l=l.unionWith(_.view.nu)}return l}}function ux(a){const t=ht(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=ix.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eR.bind(null,t),t.Pu.H_=BN.bind(null,t.eventManager),t.Pu.yu=qN.bind(null,t.eventManager),t}function sR(a){const t=ht(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nR.bind(null,t),t}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return oN(this.persistence,new aN,t.initialUser,this.serializer)}Cu(t){return new K_(op.mi,this.serializer)}Du(t){return new mN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class oR extends Mh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){qt(this.persistence.referenceDelegate instanceof Ih,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new FA(s,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?$r.withCacheSize(this.cacheSizeBytes):$r.DEFAULT;return new K_((s=>Ih.mi(s,r)),this.serializer)}}class Mm{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>G0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=aR.bind(null,this.syncEngine),await kN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new LN})()}createDatastore(t){const r=Wh(t.databaseInfo.databaseId),s=(function(u){return new bN(u)})(t.databaseInfo);return(function(u,p,_,b){return new wN(u,p,_,b)})(t.authCredentials,t.appCheckCredentials,s,r)}createRemoteStore(t){return(function(s,l,u,p,_){return new SN(s,l,u,p,_)})(this.localStore,this.datastore,t.asyncQueue,(r=>G0(this.syncEngine,r,0)),(function(){return U0.v()?new U0:new pN})())}createSyncEngine(t,r){return(function(l,u,p,_,b,v,A){const N=new QN(l,u,p,_,b,v);return A&&(N.gu=!0),N})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const s=ht(r);Ke(Io,"RemoteStore shutting down."),s.Ea.add(5),await Zu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mm.provider={build:()=>new Mm};class lR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):es("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout((()=>{this.muted||t(r)}),0)}}const eo="FirestoreClient";class uR{constructor(t,r,s,l,u){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=l,this.user=_r.UNAUTHENTICATED,this.clientId=Fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async p=>{Ke(eo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(Ke(eo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new No;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=pp(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function cm(a,t){a.asyncQueue.verifyOperationInProgress(),Ke(eo,"Initializing OfflineComponentProvider");const r=a.configuration;await t.initialize(r);let s=r.initialUser;a.setCredentialChangeListener((async l=>{s.isEqual(l)||(await G_(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=t}async function Y0(a,t){a.asyncQueue.verifyOperationInProgress();const r=await cR(a);Ke(eo,"Initializing OnlineComponentProvider"),await t.initialize(r,a.configuration),a.setCredentialChangeListener((s=>q0(t.remoteStore,s))),a.setAppCheckTokenChangeListener(((s,l)=>q0(t.remoteStore,l))),a._onlineComponents=t}async function cR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ke(eo,"Using user provided OfflineComponentProvider");try{await cm(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Se.FAILED_PRECONDITION||l.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(r))throw r;Do("Error using user provided cache. Falling back to memory cache: "+r),await cm(a,new Mh)}}else Ke(eo,"Using default OfflineComponentProvider"),await cm(a,new oR(void 0));return a._offlineComponents}async function cx(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ke(eo,"Using user provided OnlineComponentProvider"),await Y0(a,a._uninitializedComponentsProvider._online)):(Ke(eo,"Using default OnlineComponentProvider"),await Y0(a,new Mm))),a._onlineComponents}function hR(a){return cx(a).then((t=>t.syncEngine))}async function X0(a){const t=await cx(a),r=t.eventManager;return r.onListen=YN.bind(null,t.syncEngine),r.onUnlisten=ZN.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=XN.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=JN.bind(null,t.syncEngine),r}function hx(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}const $0=new Map;const fx="firestore.googleapis.com",Z0=!0;class J0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ge(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fx,this.ssl=Z0}else this.host=t.host,this.ssl=t.ssl??Z0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=H_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<BA)throw new Ge(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}r_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hx(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ge(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ge(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ge(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nf{constructor(t,r,s,l){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ge(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new t_;switch(s.type){case"firstParty":return new _S(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ge(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const s=$0.get(r);s&&(Ke("ComponentProvider","Removing Datastore"),$0.delete(r),s.terminate())})(this),Promise.resolve()}}function dx(a,t,r,s={}){a=Gs(a,nf);const l=Gm(t),u=a._getSettings(),p={...u,emulatorOptions:a._getEmulatorOptions()},_=`${t}:${r}`;l&&(H2(`https://${_}`),Y2("Firestore",!0)),u.host!==fx&&u.host!==_&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...u,host:_,ssl:l,emulatorOptions:s};if(!xh(b,p)&&(a._setSettings(b),s.mockUserToken)){let v,A;if(typeof s.mockUserToken=="string")v=s.mockUserToken,A=_r.MOCK_USER;else{v=K2(s.mockUserToken,a._app?.options.projectId);const N=s.mockUserToken.sub||s.mockUserToken.user_id;if(!N)throw new Ge(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new _r(N)}a._authCredentials=new yS(new e_(v,A))}}class Po{constructor(t,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Po(this.firestore,t,this._query)}}class In{constructor(t,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new In(this.firestore,t,this._key)}toJSON(){return{type:In._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,s){if(Qu(r,In._jsonSchema))return new In(t,s||null,new We(en.fromString(r.referencePath)))}}In._jsonSchemaVersion="firestore/documentReference/1.0",In._jsonSchema={type:Hn("string",In._jsonSchemaVersion),referencePath:Hn("string")};class Zi extends Po{constructor(t,r,s){super(t,r,ep(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new In(this.firestore,null,new We(t))}withConverter(t){return new Zi(this.firestore,t,this._path)}}function mx(a,t,...r){if(a=Co(a),n_("collection","path",t),a instanceof nf){const s=en.fromString(t,...r);return c0(s),new Zi(a,null,s)}{if(!(a instanceof In||a instanceof Zi))throw new Ge(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(en.fromString(t,...r));return c0(s),new Zi(a.firestore,null,s)}}function bp(a,t,...r){if(a=Co(a),arguments.length===1&&(t=Fh.newId()),n_("doc","path",t),a instanceof nf){const s=en.fromString(t,...r);return u0(s),new In(a,null,new We(s))}{if(!(a instanceof In||a instanceof Zi))throw new Ge(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(en.fromString(t,...r));return u0(s),new In(a.firestore,a instanceof Zi?a.converter:null,new We(s))}}const W0="AsyncQueue";class eb{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Y_(this,"async_queue_retry"),this._c=()=>{const s=um();s&&Ke(W0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const r=um();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=um();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new No;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ll(t))throw t;Ke(W0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const r=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",tb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=r,r}enqueueAfterDelay(t,r,s){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const l=mp.createAndSchedule(this,t,r,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&it(47125,{Pc:tb(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((r,s)=>r.targetTimeMs-s.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function tb(a){let t=a.message||"";return a.stack&&(t=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),t}function nb(a){return(function(r,s){if(typeof r!="object"||r===null)return!1;const l=r;for(const u of s)if(u in l&&typeof l[u]=="function")return!0;return!1})(a,["next","error","complete"])}class Rl extends nf{constructor(t,r,s,l){super(t,r,s,l),this.type="firestore",this._queue=new eb,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new eb(t),this._firestoreClient=void 0,await t}}}function px(a,t){const r=typeof a=="object"?a:aS(),s=typeof a=="string"?a:Sh,l=WT(r,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=q2("firestore");u&&dx(l,...u)}return l}function _p(a){if(a._terminated)throw new Ge(Se.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||fR(a),a._firestoreClient}function fR(a){const t=a._freezeSettings(),r=(function(l,u,p,_){return new kS(l,u,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,hx(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,t);a._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),a._firestoreClient=new uR(a._authCredentials,a._appCheckCredentials,a._queue,r,a._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(a._componentsProvider))}class va{constructor(t){this._byteString=t}static fromBase64String(t){try{return new va(ar.fromBase64String(t))}catch(r){throw new Ge(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new va(ar.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:va._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qu(t,va._jsonSchema))return va.fromBase64String(t.bytes)}}va._jsonSchemaVersion="firestore/bytes/1.0",va._jsonSchema={type:Hn("string",va._jsonSchemaVersion),bytes:Hn("string")};class rf{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ge(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xp{constructor(t){this._methodName=t}}class Wa{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ge(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ge(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return At(this._lat,t._lat)||At(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wa._jsonSchemaVersion}}static fromJSON(t){if(Qu(t,Wa._jsonSchema))return new Wa(t.latitude,t.longitude)}}Wa._jsonSchemaVersion="firestore/geoPoint/1.0",Wa._jsonSchema={type:Hn("string",Wa._jsonSchemaVersion),latitude:Hn("number"),longitude:Hn("number")};class ei{constructor(t){this._values=(t||[]).map((r=>r))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qu(t,ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((r=>typeof r=="number")))return new ei(t.vectorValues);throw new Ge(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Hn("string",ei._jsonSchemaVersion),vectorValues:Hn("object")};const dR=/^__.*__$/;class mR{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return this.fieldMask!==null?new Vo(t,this.data,this.fieldMask,r,this.fieldTransforms):new Xu(t,this.data,r,this.fieldTransforms)}}function gx(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it(40011,{Ac:a})}}class Ep{constructor(t,r,s,l,u,p){this.settings=t,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ep({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const r=this.path?.child(t),s=this.Vc({path:r,fc:!1});return s.gc(t),s}yc(t){const r=this.path?.child(t),s=this.Vc({path:r,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Vh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((r=>t.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>t.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(gx(this.Ac)&&dR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class pR{constructor(t,r,s){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=s||Wh(t)}Cc(t,r,s,l=!1){return new Ep({Ac:t,methodName:r,Dc:s,path:rr.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yx(a){const t=a._freezeSettings(),r=Wh(a._databaseId);return new pR(a._databaseId,!!t.ignoreUndefinedProperties,r)}function gR(a,t,r,s,l,u={}){const p=a.Cc(u.merge||u.mergeFields?2:0,t,r,l);_x("Data must be an object, but it was:",p,s);const _=vx(s,p);let b,v;if(u.merge)b=new Ja(p.fieldMask),v=p.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const I=vR(t,N,r);if(!p.contains(I))throw new Ge(Se.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);_R(A,I)||A.push(I)}b=new Ja(A),v=p.fieldTransforms.filter((N=>b.covers(N.field)))}else b=null,v=p.fieldTransforms;return new mR(new La(_),b,v)}function yR(a,t,r,s=!1){return wp(r,a.Cc(s?4:3,t))}function wp(a,t){if(bx(a=Co(a)))return _x("Unsupported field value:",t,a),vx(a,t);if(a instanceof xp)return(function(s,l){if(!gx(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const u=[];let p=0;for(const _ of s){let b=wp(_,l.wc(p));b==null&&(b={nullValue:"NULL_VALUE"}),u.push(b),p++}return{arrayValue:{values:u}}})(a,t)}return(function(s,l){if((s=Co(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iA(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=tn.fromDate(s);return{timestampValue:Dh(l.serializer,u)}}if(s instanceof tn){const u=new tn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(l.serializer,u)}}if(s instanceof Wa)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof va)return{bytesValue:P_(l.serializer,s._byteString)};if(s instanceof In){const u=l.databaseId,p=s.firestore._databaseId;if(!p.isEqual(u))throw l.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof ei)return(function(p,_){return{mapValue:{fields:{[f_]:{stringValue:d_},[Ah]:{arrayValue:{values:p.toArray().map((v=>{if(typeof v!="number")throw _.Sc("VectorValues must only contain numeric values.");return tp(_.serializer,v)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Hh(s)}`)})(a,t)}function vx(a,t){const r={};return s_(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Oo(a,((s,l)=>{const u=wp(l,t.mc(s));u!=null&&(r[s]=u)})),{mapValue:{fields:r}}}function bx(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof tn||a instanceof Wa||a instanceof va||a instanceof In||a instanceof xp||a instanceof ei)}function _x(a,t,r){if(!bx(r)||!a_(r)){const s=Hh(r);throw s==="an object"?t.Sc(a+" a custom object"):t.Sc(a+" "+s)}}function vR(a,t,r){if((t=Co(t))instanceof rf)return t._internalPath;if(typeof t=="string")return xx(a,t);throw Vh("Field path arguments must be of type string or ",a,!1,void 0,r)}const bR=new RegExp("[~\\*/\\[\\]]");function xx(a,t,r){if(t.search(bR)>=0)throw Vh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new rf(...t.split("."))._internalPath}catch{throw Vh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function Vh(a,t,r,s,l){const u=s&&!s.isEmpty(),p=l!==void 0;let _=`Function ${t}() called with invalid data`;r&&(_+=" (via `toFirestore()`)"),_+=". ";let b="";return(u||p)&&(b+=" (found",u&&(b+=` in field ${s}`),p&&(b+=` in document ${l}`),b+=")"),new Ge(Se.INVALID_ARGUMENT,_+a+b)}function _R(a,t){return a.some((r=>r.isEqual(t)))}class Ex{constructor(t,r,s,l,u){this._firestore=t,this._userDataWriter=r,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new xR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(wx("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class xR extends Ex{data(){return super.data()}}function wx(a,t){return typeof t=="string"?xx(a,t):t instanceof rf?t._internalPath:t._delegate._internalPath}function ER(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ge(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tp{}class Tx extends Tp{}function Sx(a,t,...r){let s=[];t instanceof Tp&&s.push(t),s=s.concat(r),(function(u){const p=u.filter((b=>b instanceof sf)).length,_=u.filter((b=>b instanceof af)).length;if(p>1||p>0&&_>0)throw new Ge(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)a=l._apply(a);return a}class af extends Tx{constructor(t,r,s){super(),this._field=t,this._op=r,this._value=s,this.type="where"}static _create(t,r,s){return new af(t,r,s)}_apply(t){const r=this._parse(t);return Ax(t._query,r),new Po(t.firestore,t.converter,Tm(t._query,r))}_parse(t){const r=yx(t.firestore);return(function(u,p,_,b,v,A,N){let I;if(v.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new Ge(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){ab(N,A);const ce=[];for(const oe of N)ce.push(rb(b,u,oe));I={arrayValue:{values:ce}}}else I=rb(b,u,N)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||ab(N,A),I=yR(_,p,N,A==="in"||A==="not-in");return Fn.create(v,A,I)})(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}class sf extends Tp{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new sf(t,r)}_parse(t){const r=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return r.length===1?r[0]:ti.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:((function(l,u){let p=l;const _=u.getFlattenedFilters();for(const b of _)Ax(p,b),p=Tm(p,b)})(t._query,r),new Po(t.firestore,t.converter,Tm(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rb(a,t,r){if(typeof(r=Co(r))=="string"){if(r==="")throw new Ge(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(t)&&r.indexOf("/")!==-1)throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=t.path.child(en.fromString(r));if(!We.isDocumentKey(s))throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return v0(a,new We(s))}if(r instanceof In)return v0(a,r._key);throw new Ge(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(r)}.`)}function ab(a,t){if(!Array.isArray(a)||a.length===0)throw new Ge(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ax(a,t){const r=(function(l,u){for(const p of l)for(const _ of p.getFlattenedFilters())if(u.indexOf(_.op)>=0)return _.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(r!==null)throw r===t.op?new Ge(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ge(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Nx{convertValue(t,r="none"){switch(Js(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Dn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Zs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw it(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const s={};return Oo(t,((l,u)=>{s[l]=this.convertValue(u,r)})),s}convertVectorValue(t){const r=t.fields?.[Ah].arrayValue?.values?.map((s=>Dn(s.doubleValue)));return new ei(r)}convertGeoPoint(t){return new Wa(Dn(t.latitude),Dn(t.longitude))}convertArray(t,r){return(t.values||[]).map((s=>this.convertValue(s,r)))}convertServerTimestamp(t,r){switch(r){case"previous":const s=Qh(t);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Uu(t));default:return null}}convertTimestamp(t){const r=$s(t);return new tn(r.seconds,r.nanos)}convertDocumentKey(t,r){const s=en.fromString(t);qt(F_(s),9688,{name:t});const l=new wl(s.get(1),s.get(3)),u=new We(s.popFirst(5));return l.isEqual(r)||es(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),u}}function wR(a,t,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,s}class bl{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qs extends Ex{constructor(t,r,s,l,u,p){super(t,r,s,l,p),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const s=this._document.data.field(wx("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Qs._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:Hn("string",Qs._jsonSchemaVersion),bundleSource:Hn("string","DocumentSnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Mu extends Qs{data(t={}){return super.data(t)}}class Ro{constructor(t,r,s,l){this._firestore=t,this._userDataWriter=r,this._snapshot=l,this.metadata=new bl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((r=>t.push(r))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach((s=>{t.call(r,new Mu(this._firestore,this._userDataWriter,s.key,s,new bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ge(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map((_=>{const b=new Mu(l._firestore,l._userDataWriter,_.doc.key,_.doc,new bl(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);return _.doc,{type:"added",doc:b,oldIndex:-1,newIndex:p++}}))}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((_=>u||_.type!==3)).map((_=>{const b=new Mu(l._firestore,l._userDataWriter,_.doc.key,_.doc,new bl(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);let v=-1,A=-1;return _.type!==0&&(v=p.indexOf(_.doc.key),p=p.delete(_.doc.key)),_.type!==1&&(p=p.add(_.doc),A=p.indexOf(_.doc.key)),{type:TR(_.type),doc:b,oldIndex:v,newIndex:A}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ro._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Fh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(r.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function TR(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it(61501,{type:a})}}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:Hn("string",Ro._jsonSchemaVersion),bundleSource:Hn("string","QuerySnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Rx extends Nx{constructor(t){super(),this.firestore=t}convertBytes(t){return new va(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new In(this.firestore,null,r)}}function Cx(a,t,r){a=Gs(a,In);const s=Gs(a.firestore,Rl),l=wR(a.converter,t,r);return Sp(s,[gR(yx(s),"setDoc",a._key,l,a.converter!==null,r).toMutation(a._key,bi.none())])}function jx(a){return Sp(Gs(a.firestore,Rl),[new np(a._key,bi.none())])}function Dx(a,...t){a=Co(a);let r={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||nb(t[s])||(r=t[s++]);const l={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(nb(t[s])){const b=t[s];t[s]=b.next?.bind(b),t[s+1]=b.error?.bind(b),t[s+2]=b.complete?.bind(b)}let u,p,_;if(a instanceof In)p=Gs(a.firestore,Rl),_=ep(a._key.path),u={next:b=>{t[s]&&t[s](SR(p,a,b))},error:t[s+1],complete:t[s+2]};else{const b=Gs(a,Po);p=Gs(b.firestore,Rl),_=b._query;const v=new Rx(p);u={next:A=>{t[s]&&t[s](new Ro(p,v,b,A))},error:t[s+1],complete:t[s+2]},ER(a._query)}return(function(v,A,N,I){const $=new lR(I),ce=new FN(A,$,N);return v.asyncQueue.enqueueAndForget((async()=>zN(await X0(v),ce))),()=>{$.Nu(),v.asyncQueue.enqueueAndForget((async()=>UN(await X0(v),ce)))}})(_p(p),_,l,u)}function Sp(a,t){return(function(s,l){const u=new No;return s.asyncQueue.enqueueAndForget((async()=>WN(await hR(s),l,u))),u.promise})(_p(a),t)}function SR(a,t,r){const s=r.docs.get(t._key),l=new Rx(a);return new Qs(a,l,t._key,s,new bl(r.hasPendingWrites,r.fromCache),t.converter)}(function(t,r=!0){(function(l){kl=l})(rS),wh(new Pu("firestore",((s,{instanceIdentifier:l,options:u})=>{const p=s.getProvider("app").getImmediate(),_=new Rl(new vS(s.getProvider("auth-internal")),new xS(p,s.getProvider("app-check-internal")),(function(v,A){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Ge(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wl(v.options.projectId,A)})(p,l),p);return u={useFetchStreams:r,...u},_._setSettings(u),_}),"PUBLIC").setMultipleInstances(!0)),_l(i0,s0,t),_l(i0,s0,"esm2020")})();const AR=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Nx,Bytes:va,CollectionReference:Zi,DocumentReference:In,DocumentSnapshot:Qs,FieldPath:rf,FieldValue:xp,Firestore:Rl,FirestoreError:Ge,GeoPoint:Wa,Query:Po,QueryCompositeFilterConstraint:sf,QueryConstraint:Tx,QueryDocumentSnapshot:Mu,QueryFieldFilterConstraint:af,QuerySnapshot:Ro,SnapshotMetadata:bl,Timestamp:tn,VectorValue:ei,_AutoId:Fh,_ByteString:ar,_DatabaseId:wl,_DocumentKey:We,_EmptyAuthCredentialsProvider:t_,_FieldPath:rr,_cast:Gs,_logWarn:Do,_validateIsNotUsedTogether:r_,collection:mx,connectFirestoreEmulator:dx,deleteDoc:jx,doc:bp,ensureFirestoreConfigured:_p,executeWrite:Sp,getFirestore:px,onSnapshot:Dx,query:Sx,setDoc:Cx},Symbol.toStringTag,{value:"Module"})),NR={apiKey:"AIzaSyDUMSroR4ttcdohVK2Y8qq7yWIBrkAWKWQ",authDomain:"studio-7145332012-9a179.firebaseapp.com",projectId:"studio-7145332012-9a179",storageBucket:"studio-7145332012-9a179.firebasestorage.app",messagingSenderId:"832894479416",appId:"1:832894479416:web:2163932c408afeabdb8acd"},RR=Hb(NR),of=px(RR),CR=Object.freeze(Object.defineProperty({__proto__:null,db:of},Symbol.toStringTag,{value:"Module"}));var ph={exports:{}},jR=ph.exports,ib;function DR(){return ib||(ib=1,(function(a,t){(function(r,s){a.exports=s()})(jR,function(){var r=function(h,d){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(y[S]=E[S])})(h,d)},s=function(){return(s=Object.assign||function(h){for(var d,y=1,E=arguments.length;y<E;y++)for(var S in d=arguments[y])Object.prototype.hasOwnProperty.call(d,S)&&(h[S]=d[S]);return h}).apply(this,arguments)};function l(h,d,y){for(var E,S=0,R=d.length;S<R;S++)!E&&S in d||((E=E||Array.prototype.slice.call(d,0,S))[S]=d[S]);return h.concat(E||Array.prototype.slice.call(d))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$1,p=Object.keys,_=Array.isArray;function b(h,d){return typeof d!="object"||p(d).forEach(function(y){h[y]=d[y]}),h}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var v=Object.getPrototypeOf,A={}.hasOwnProperty;function N(h,d){return A.call(h,d)}function I(h,d){typeof d=="function"&&(d=d(v(h))),(typeof Reflect>"u"?p:Reflect.ownKeys)(d).forEach(function(y){ce(h,y,d[y])})}var $=Object.defineProperty;function ce(h,d,y,E){$(h,d,b(y&&N(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},E))}function oe(h){return{from:function(d){return h.prototype=Object.create(d.prototype),ce(h.prototype,"constructor",h),{extend:I.bind(null,h.prototype)}}}}var U=Object.getOwnPropertyDescriptor,Q=[].slice;function Z(h,d,y){return Q.call(h,d,y)}function he(h,d){return d(h)}function _e(h){if(!h)throw new Error("Assertion Failed")}function ke(h){u.setImmediate?setImmediate(h):setTimeout(h,0)}function Qe(h,d){if(typeof d=="string"&&N(h,d))return h[d];if(!d)return h;if(typeof d!="string"){for(var y=[],E=0,S=d.length;E<S;++E){var R=Qe(h,d[E]);y.push(R)}return y}var D=d.indexOf(".");if(D!==-1){var P=h[d.substr(0,D)];return P==null?void 0:Qe(P,d.substr(D+1))}}function M(h,d,y){if(h&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof d!="string"&&"length"in d){_e(typeof y!="string"&&"length"in y);for(var E=0,S=d.length;E<S;++E)M(h,d[E],y[E])}else{var R,D,P=d.indexOf(".");P!==-1?(R=d.substr(0,P),(D=d.substr(P+1))===""?y===void 0?_(h)&&!isNaN(parseInt(R))?h.splice(R,1):delete h[R]:h[R]=y:M(P=!(P=h[R])||!N(h,R)?h[R]={}:P,D,y)):y===void 0?_(h)&&!isNaN(parseInt(d))?h.splice(d,1):delete h[d]:h[d]=y}}function O(h){var d,y={};for(d in h)N(h,d)&&(y[d]=h[d]);return y}var V=[].concat;function F(h){return V.apply([],h)}var Jr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(F([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(d){return d+h+"Array"})}))).filter(function(h){return u[h]}),B=new Set(Jr.map(function(h){return u[h]})),ee=null;function k(h){return ee=new WeakMap,h=(function d(y){if(!y||typeof y!="object")return y;var E=ee.get(y);if(E)return E;if(_(y)){E=[],ee.set(y,E);for(var S=0,R=y.length;S<R;++S)E.push(d(y[S]))}else if(B.has(y.constructor))E=y;else{var D,P=v(y);for(D in E=P===Object.prototype?{}:Object.create(P),ee.set(y,E),y)N(y,D)&&(E[D]=d(y[D]))}return E})(h),ee=null,h}var ft={}.toString;function _t(h){return ft.call(h).slice(8,-1)}var J=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ne=typeof J=="symbol"?function(h){var d;return h!=null&&(d=h[J])&&d.apply(h)}:function(){return null};function Y(h,d){return d=h.indexOf(d),0<=d&&h.splice(d,1),0<=d}var qe={};function $e(h){var d,y,E,S;if(arguments.length===1){if(_(h))return h.slice();if(this===qe&&typeof h=="string")return[h];if(S=Ne(h)){for(y=[];!(E=S.next()).done;)y.push(E.value);return y}if(h==null)return[h];if(typeof(d=h.length)!="number")return[h];for(y=new Array(d);d--;)y[d]=h[d];return y}for(d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];return y}var L=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ar=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zr),ve={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ce(h,d){this.name=h,this.message=d}function Re(h,d){return h+". Errors: "+Object.keys(d).map(function(y){return d[y].toString()}).filter(function(y,E,S){return S.indexOf(y)===E}).join(`
`)}function He(h,d,y,E){this.failures=d,this.failedKeys=E,this.successCount=y,this.message=Re(h,d)}function Je(h,d){this.name="BulkError",this.failures=Object.keys(d).map(function(y){return d[y]}),this.failuresByPos=d,this.message=Re(h,this.failures)}oe(Ce).from(Error).extend({toString:function(){return this.name+": "+this.message}}),oe(He).from(Ce),oe(Je).from(Ce);var at=Ar.reduce(function(h,d){return h[d]=d+"Error",h},{}),Ft=Ce,Oe=Ar.reduce(function(h,d){var y=d+"Error";function E(S,R){this.name=y,S?typeof S=="string"?(this.message="".concat(S).concat(R?`
 `+R:""),this.inner=R||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=ve[d]||y,this.inner=null)}return oe(E).from(Ft),h[d]=E,h},{});Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError;var fn=Zr.reduce(function(h,d){return h[d+"Error"]=Oe[d],h},{}),On=Ar.reduce(function(h,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(h[d+"Error"]=Oe[d]),h},{});function Ye(){}function et(h){return h}function Ht(h,d){return h==null||h===et?d:function(y){return d(h(y))}}function gt(h,d){return function(){h.apply(this,arguments),d.apply(this,arguments)}}function Ut(h,d){return h===Ye?d:function(){var y=h.apply(this,arguments);y!==void 0&&(arguments[0]=y);var E=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var R=d.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?gt(E,this.onsuccess):E),S&&(this.onerror=this.onerror?gt(S,this.onerror):S),R!==void 0?R:y}}function on(h,d){return h===Ye?d:function(){h.apply(this,arguments);var y=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?gt(y,this.onsuccess):y),E&&(this.onerror=this.onerror?gt(E,this.onerror):E)}}function Xn(h,d){return h===Ye?d:function(y){var E=h.apply(this,arguments);b(y,E);var S=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,y=d.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?gt(S,this.onsuccess):S),R&&(this.onerror=this.onerror?gt(R,this.onerror):R),E===void 0?y===void 0?void 0:y:b(E,y)}}function Rt(h,d){return h===Ye?d:function(){return d.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function Mt(h,d){return h===Ye?d:function(){var y=h.apply(this,arguments);if(y&&typeof y.then=="function"){for(var E=this,S=arguments.length,R=new Array(S);S--;)R[S]=arguments[S];return y.then(function(){return d.apply(E,R)})}return d.apply(this,arguments)}}On.ModifyError=He,On.DexieError=Ce,On.BulkError=Je;var wn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Lo(h){wn=h}var ri={},$n=100,Jr=typeof Promise>"u"?[]:(function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,v(h),h];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,v(d),h]})(),Zr=Jr[0],Ar=Jr[1],Jr=Jr[2],Ar=Ar&&Ar.then,Wr=Zr&&Zr.constructor,ba=!!Jr,Ei=function(h,d){ai.push([h,d]),wi&&(queueMicrotask(zo),wi=!1)},rs=!0,wi=!0,_a=[],dr=[],Tn=et,Sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ye,pgp:!1,env:{},finalize:Ye},Be=Sn,ai=[],Rr=0,Ti=[];function Pe(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=Be;if(typeof h!="function"){if(h!==ri)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Cr(this,this._value))}this._state=null,this._value=null,++d.ref,(function y(E,S){try{S(function(R){if(E._state===null){if(R===E)throw new TypeError("A promise cannot be resolved with itself.");var D=E._lib&&ir();R&&typeof R.then=="function"?y(E,function(P,H){R instanceof Pe?R._then(P,H):R.then(P,H)}):(E._state=!0,E._value=R,ea(E)),D&&jr()}},Cr.bind(null,E))}catch(R){Cr(E,R)}})(this,h)}var Ba={get:function(){var h=Be,d=mr;function y(E,S){var R=this,D=!h.global&&(h!==Be||d!==mr),P=D&&!Kn(),H=new Pe(function(K,ne){Er(R,new dn(Ni(E,h,D,P),Ni(S,h,D,P),K,ne,h))});return this._consoleTask&&(H._consoleTask=this._consoleTask),H}return y.prototype=ri,y},set:function(h){ce(this,"then",h&&h.prototype===ri?Ba:{get:function(){return h},set:Ba.set})}};function dn(h,d,y,E,S){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof d=="function"?d:null,this.resolve=y,this.reject=E,this.psd=S}function Cr(h,d){var y,E;dr.push(d),h._state===null&&(y=h._lib&&ir(),d=Tn(d),h._state=!1,h._value=d,E=h,_a.some(function(S){return S._value===E._value})||_a.push(E),ea(h),y&&jr())}function ea(h){var d=h._listeners;h._listeners=[];for(var y=0,E=d.length;y<E;++y)Er(h,d[y]);var S=h._PSD;--S.ref||S.finalize(),Rr===0&&(++Rr,Ei(function(){--Rr==0&&to()},[]))}function Er(h,d){if(h._state!==null){var y=h._state?d.onFulfilled:d.onRejected;if(y===null)return(h._state?d.resolve:d.reject)(h._value);++d.psd.ref,++Rr,Ei(Ul,[y,h,d])}else h._listeners.push(d)}function Ul(h,d,y){try{var E,S=d._value;!d._state&&dr.length&&(dr=[]),E=wn&&d._consoleTask?d._consoleTask.run(function(){return h(S)}):h(S),d._state||dr.indexOf(S)!==-1||(function(R){for(var D=_a.length;D;)if(_a[--D]._value===R._value)return _a.splice(D,1)})(d),y.resolve(E)}catch(R){y.reject(R)}finally{--Rr==0&&to(),--y.psd.ref||y.psd.finalize()}}function zo(){Zn(Sn,function(){ir()&&jr()})}function ir(){var h=rs;return wi=rs=!1,h}function jr(){var h,d,y;do for(;0<ai.length;)for(h=ai,ai=[],y=h.length,d=0;d<y;++d){var E=h[d];E[0].apply(null,E[1])}while(0<ai.length);wi=rs=!0}function to(){var h=_a;_a=[],h.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var d=Ti.slice(0),y=d.length;y;)d[--y]()}function xa(h){return new Pe(ri,!1,h)}function Bt(h,d){var y=Be;return function(){var E=ir(),S=Be;try{return na(y,!0),h.apply(this,arguments)}catch(R){d&&d(R)}finally{na(S,!1),E&&jr()}}}I(Pe.prototype,{then:Ba,_then:function(h,d){Er(this,new dn(null,null,h,d,Be))},catch:function(h){if(arguments.length===1)return this.then(null,h);var d=h,y=arguments[1];return typeof d=="function"?this.then(null,function(E){return(E instanceof d?y:xa)(E)}):this.then(null,function(E){return(E&&E.name===d?y:xa)(E)})},finally:function(h){return this.then(function(d){return Pe.resolve(h()).then(function(){return d})},function(d){return Pe.resolve(h()).then(function(){return xa(d)})})},timeout:function(h,d){var y=this;return h<1/0?new Pe(function(E,S){var R=setTimeout(function(){return S(new Oe.Timeout(d))},h);y.then(E,S).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ce(Pe.prototype,Symbol.toStringTag,"Dexie.Promise"),Sn.env=no(),I(Pe,{all:function(){var h=$e.apply(null,arguments).map(qa);return new Pe(function(d,y){h.length===0&&d([]);var E=h.length;h.forEach(function(S,R){return Pe.resolve(S).then(function(D){h[R]=D,--E||d(h)},y)})})},resolve:function(h){return h instanceof Pe?h:h&&typeof h.then=="function"?new Pe(function(d,y){h.then(d,y)}):new Pe(ri,!0,h)},reject:xa,race:function(){var h=$e.apply(null,arguments).map(qa);return new Pe(function(d,y){h.map(function(E){return Pe.resolve(E).then(d,y)})})},PSD:{get:function(){return Be},set:function(h){return Be=h}},totalEchoes:{get:function(){return mr}},newPSD:Kt,usePSD:Zn,scheduler:{get:function(){return Ei},set:function(h){Ei=h}},rejectionMapper:{get:function(){return Tn},set:function(h){Tn=h}},follow:function(h,d){return new Pe(function(y,E){return Kt(function(S,R){var D=Be;D.unhandleds=[],D.onunhandled=R,D.finalize=gt(function(){var P,H=this;P=function(){H.unhandleds.length===0?S():R(H.unhandleds[0])},Ti.push(function K(){P(),Ti.splice(Ti.indexOf(K),1)}),++Rr,Ei(function(){--Rr==0&&to()},[])},D.finalize),h()},d,y,E)})}}),Wr&&(Wr.allSettled&&ce(Pe,"allSettled",function(){var h=$e.apply(null,arguments).map(qa);return new Pe(function(d){h.length===0&&d([]);var y=h.length,E=new Array(y);h.forEach(function(S,R){return Pe.resolve(S).then(function(D){return E[R]={status:"fulfilled",value:D}},function(D){return E[R]={status:"rejected",reason:D}}).then(function(){return--y||d(E)})})})}),Wr.any&&typeof AggregateError<"u"&&ce(Pe,"any",function(){var h=$e.apply(null,arguments).map(qa);return new Pe(function(d,y){h.length===0&&y(new AggregateError([]));var E=h.length,S=new Array(E);h.forEach(function(R,D){return Pe.resolve(R).then(function(P){return d(P)},function(P){S[D]=P,--E||y(new AggregateError(S))})})})}),Wr.withResolvers&&(Pe.withResolvers=Wr.withResolvers));var ln={awaits:0,echoes:0,id:0},Si=0,Dr=[],Ai=0,mr=0,ta=0;function Kt(h,d,y,E){var S=Be,R=Object.create(S);return R.parent=S,R.ref=0,R.global=!1,R.id=++ta,Sn.env,R.env=ba?{Promise:Pe,PromiseProp:{value:Pe,configurable:!0,writable:!0},all:Pe.all,race:Pe.race,allSettled:Pe.allSettled,any:Pe.any,resolve:Pe.resolve,reject:Pe.reject}:{},d&&b(R,d),++S.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Zn(R,h,y,E),R.ref===0&&R.finalize(),E}function nn(){return ln.id||(ln.id=++Si),++ln.awaits,ln.echoes+=$n,ln.id}function Kn(){return!!ln.awaits&&(--ln.awaits==0&&(ln.id=0),ln.echoes=ln.awaits*$n,!0)}function qa(h){return ln.echoes&&h&&h.constructor===Wr?(nn(),h.then(function(d){return Kn(),d},function(d){return Kn(),Dt(d)})):h}function Bl(){var h=Dr[Dr.length-1];Dr.pop(),na(h,!1)}function na(h,d){var y,E=Be;(d?!ln.echoes||Ai++&&h===Be:!Ai||--Ai&&h===Be)||queueMicrotask(d?(function(S){++mr,ln.echoes&&--ln.echoes!=0||(ln.echoes=ln.awaits=ln.id=0),Dr.push(Be),na(S,!0)}).bind(null,h):Bl),h!==Be&&(Be=h,E===Sn&&(Sn.env=no()),ba&&(y=Sn.env.Promise,d=h.env,(E.global||h.global)&&(Object.defineProperty(u,"Promise",d.PromiseProp),y.all=d.all,y.race=d.race,y.resolve=d.resolve,y.reject=d.reject,d.allSettled&&(y.allSettled=d.allSettled),d.any&&(y.any=d.any))))}function no(){var h=u.Promise;return ba?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function Zn(h,d,y,E,S){var R=Be;try{return na(h,!0),d(y,E,S)}finally{na(R,!1)}}function Ni(h,d,y,E){return typeof h!="function"?h:function(){var S=Be;y&&nn(),na(d,!0);try{return h.apply(this,arguments)}finally{na(S,!1),E&&queueMicrotask(Kn)}}}function Ir(h){Promise===Wr&&ln.echoes===0?Ai===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+Ar).indexOf("[native code]")===-1&&(nn=Kn=Ye);var Dt=Pe.reject,An="",Mn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mn="String expected.",Ea=[],ii="__dbnames",Or="readonly",Mr="readwrite";function ra(h,d){return h?d?function(){return h.apply(this,arguments)&&d.apply(this,arguments)}:h:d}var as={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function si(h){return typeof h!="string"||/\./.test(h)?function(d){return d}:function(d){return d[h]===void 0&&h in d&&delete(d=k(d))[h],d}}function ro(){throw Oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function dt(h,d){try{var y=pr(h),E=pr(d);if(y!==E)return y==="Array"?1:E==="Array"?-1:y==="binary"?1:E==="binary"?-1:y==="string"?1:E==="string"?-1:y==="Date"?1:E!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return d<h?1:h<d?-1:0;case"binary":return(function(S,R){for(var D=S.length,P=R.length,H=D<P?D:P,K=0;K<H;++K)if(S[K]!==R[K])return S[K]<R[K]?-1:1;return D===P?0:D<P?-1:1})(pn(h),pn(d));case"Array":return(function(S,R){for(var D=S.length,P=R.length,H=D<P?D:P,K=0;K<H;++K){var ne=dt(S[K],R[K]);if(ne!==0)return ne}return D===P?0:D<P?-1:1})(h,d)}}catch{}return NaN}function pr(h){var d=typeof h;return d!="object"?d:ArrayBuffer.isView(h)?"binary":(h=_t(h),h==="ArrayBuffer"?"binary":h)}function pn(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function gn(h,d,y){var E=h.schema.yProps;return E?(d&&0<y.numFailures&&(d=d.filter(function(S,R){return!y.failures[R]})),Promise.all(E.map(function(S){return S=S.updatesTable,d?h.db.table(S).where("k").anyOf(d).delete():h.db.table(S).clear()})).then(function(){return y})):y}var Vr=(is.prototype.execute=function(h){var d=this["@@propmod"];if(d.add!==void 0){var y=d.add;if(_(y))return l(l([],_(h)?h:[],!0),y).sort();if(typeof y=="number")return(Number(h)||0)+y;if(typeof y=="bigint")try{return BigInt(h)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(d.remove!==void 0){var E=d.remove;if(_(E))return _(h)?h.filter(function(S){return!E.includes(S)}).sort():[];if(typeof E=="number")return Number(h)-E;if(typeof E=="bigint")try{return BigInt(h)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return y=(y=d.replacePrefix)===null||y===void 0?void 0:y[0],y&&typeof h=="string"&&h.startsWith(y)?d.replacePrefix[1]+h.substring(y.length):h},is);function is(h){this["@@propmod"]=h}function Vt(h,d){for(var y=p(d),E=y.length,S=!1,R=0;R<E;++R){var D=y[R],P=d[D],H=Qe(h,D);P instanceof Vr?(M(h,D,P.execute(H)),S=!0):H!==P&&(M(h,D,P),S=!0)}return S}var oi=(xt.prototype._trans=function(h,d,y){var E=this._tx||Be.trans,S=this.name,R=wn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function D(K,ne,q){if(!q.schema[S])throw new Oe.NotFound("Table "+S+" not part of transaction");return d(q.idbtrans,q)}var P=ir();try{var H=E&&E.db._novip===this.db._novip?E===Be.trans?E._promise(h,D,y):Kt(function(){return E._promise(h,D,y)},{trans:E,transless:Be.transless||Be}):(function K(ne,q,ae,G){if(ne.idbdb&&(ne._state.openComplete||Be.letThrough||ne._vip)){var W=ne._createTransaction(q,ae,ne._dbSchema);try{W.create(),ne._state.PR1398_maxLoop=3}catch(te){return te.name===at.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return K(ne,q,ae,G)})):Dt(te)}return W._promise(q,function(te,re){return Kt(function(){return Be.trans=W,G(te,re,W)})}).then(function(te){if(q==="readwrite")try{W.idbtrans.commit()}catch{}return q==="readonly"?te:W._completion.then(function(){return te})})}if(ne._state.openComplete)return Dt(new Oe.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return Dt(new Oe.DatabaseClosed);ne.open().catch(Ye)}return ne._state.dbReadyPromise.then(function(){return K(ne,q,ae,G)})})(this.db,h,[this.name],D);return R&&(H._consoleTask=R,H=H.catch(function(K){return console.trace(K),Dt(K)})),H}finally{P&&jr()}},xt.prototype.get=function(h,d){var y=this;return h&&h.constructor===Object?this.where(h).first(d):h==null?Dt(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return y.core.get({trans:E,key:h}).then(function(S){return y.hook.reading.fire(S)})}).then(d)},xt.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(_(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var d=p(h);if(d.length===1)return this.where(d[0]).equals(h[d[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&d.every(function(K){return 0<=P.keyPath.indexOf(K)})){for(var H=0;H<d.length;++H)if(d.indexOf(P.keyPath[H])===-1)return!1;return!0}return!1}).sort(function(P,H){return P.keyPath.length-H.keyPath.length})[0];if(y&&this.db._maxKey!==An){var R=y.keyPath.slice(0,d.length);return this.where(R).equals(R.map(function(H){return h[H]}))}!y&&wn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var E=this.schema.idxByName;function S(P,H){return dt(P,H)===0}var D=d.reduce(function(q,H){var K=q[0],ne=q[1],q=E[H],ae=h[H];return[K||q,K||!q?ra(ne,q&&q.multi?function(G){return G=Qe(G,H),_(G)&&G.some(function(W){return S(ae,W)})}:function(G){return S(ae,Qe(G,H))}):ne]},[null,null]),R=D[0],D=D[1];return R?this.where(R.name).equals(h[R.keyPath]).filter(D):y?this.filter(D):this.where(d).equals("")},xt.prototype.filter=function(h){return this.toCollection().and(h)},xt.prototype.count=function(h){return this.toCollection().count(h)},xt.prototype.offset=function(h){return this.toCollection().offset(h)},xt.prototype.limit=function(h){return this.toCollection().limit(h)},xt.prototype.each=function(h){return this.toCollection().each(h)},xt.prototype.toArray=function(h){return this.toCollection().toArray(h)},xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xt.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,_(h)?"[".concat(h.join("+"),"]"):h))},xt.prototype.reverse=function(){return this.toCollection().reverse()},xt.prototype.mapToClass=function(h){var d,y=this.db,E=this.name;function S(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof ro&&((function(H,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function ne(){this.constructor=H}r(H,K),H.prototype=K===null?Object.create(K):(ne.prototype=K.prototype,new ne)})(S,d=h),Object.defineProperty(S.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),S.prototype.table=function(){return E},h=S);for(var R=new Set,D=h.prototype;D;D=v(D))Object.getOwnPropertyNames(D).forEach(function(H){return R.add(H)});function P(H){if(!H)return H;var K,ne=Object.create(h.prototype);for(K in H)if(!R.has(K))try{ne[K]=H[K]}catch{}return ne}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),h},xt.prototype.defineClass=function(){return this.mapToClass(function(h){b(this,h)})},xt.prototype.add=function(h,d){var y=this,E=this.schema.primKey,S=E.auto,R=E.keyPath,D=h;return R&&S&&(D=si(R)(h)),this._trans("readwrite",function(P){return y.core.mutate({trans:P,type:"add",keys:d!=null?[d]:null,values:[D]})}).then(function(P){return P.numFailures?Pe.reject(P.failures[0]):P.lastResult}).then(function(P){if(R)try{M(h,R,P)}catch{}return P})},xt.prototype.upsert=function(h,d){var y=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(S){return y.core.get({trans:S,key:h}).then(function(R){var D=R??{};return Vt(D,d),E&&M(D,E,h),y.core.mutate({trans:S,type:"put",values:[D],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[d]}}).then(function(P){return P.numFailures?Pe.reject(P.failures[0]):!!R})})})},xt.prototype.update=function(h,d){return typeof h!="object"||_(h)?this.where(":id").equals(h).modify(d):(h=Qe(h,this.schema.primKey.keyPath),h===void 0?Dt(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(d))},xt.prototype.put=function(h,d){var y=this,E=this.schema.primKey,S=E.auto,R=E.keyPath,D=h;return R&&S&&(D=si(R)(h)),this._trans("readwrite",function(P){return y.core.mutate({trans:P,type:"put",values:[D],keys:d!=null?[d]:null})}).then(function(P){return P.numFailures?Pe.reject(P.failures[0]):P.lastResult}).then(function(P){if(R)try{M(h,R,P)}catch{}return P})},xt.prototype.delete=function(h){var d=this;return this._trans("readwrite",function(y){return d.core.mutate({trans:y,type:"delete",keys:[h]}).then(function(E){return gn(d,[h],E)}).then(function(E){return E.numFailures?Pe.reject(E.failures[0]):void 0})})},xt.prototype.clear=function(){var h=this;return this._trans("readwrite",function(d){return h.core.mutate({trans:d,type:"deleteRange",range:as}).then(function(y){return gn(h,null,y)})}).then(function(d){return d.numFailures?Pe.reject(d.failures[0]):void 0})},xt.prototype.bulkGet=function(h){var d=this;return this._trans("readonly",function(y){return d.core.getMany({keys:h,trans:y}).then(function(E){return E.map(function(S){return d.hook.reading.fire(S)})})})},xt.prototype.bulkAdd=function(h,d,y){var E=this,S=Array.isArray(d)?d:void 0,R=(y=y||(S?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(D){var K=E.schema.primKey,P=K.auto,K=K.keyPath;if(K&&S)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var H=h.length,K=K&&P?h.map(si(K)):h;return E.core.mutate({trans:D,type:"add",keys:S,values:K,wantResults:R}).then(function(W){var q=W.numFailures,ae=W.results,G=W.lastResult,W=W.failures;if(q===0)return R?ae:G;throw new Je("".concat(E.name,".bulkAdd(): ").concat(q," of ").concat(H," operations failed"),W)})})},xt.prototype.bulkPut=function(h,d,y){var E=this,S=Array.isArray(d)?d:void 0,R=(y=y||(S?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(D){var K=E.schema.primKey,P=K.auto,K=K.keyPath;if(K&&S)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var H=h.length,K=K&&P?h.map(si(K)):h;return E.core.mutate({trans:D,type:"put",keys:S,values:K,wantResults:R}).then(function(W){var q=W.numFailures,ae=W.results,G=W.lastResult,W=W.failures;if(q===0)return R?ae:G;throw new Je("".concat(E.name,".bulkPut(): ").concat(q," of ").concat(H," operations failed"),W)})})},xt.prototype.bulkUpdate=function(h){var d=this,y=this.core,E=h.map(function(D){return D.key}),S=h.map(function(D){return D.changes}),R=[];return this._trans("readwrite",function(D){return y.getMany({trans:D,keys:E,cache:"clone"}).then(function(P){var H=[],K=[];h.forEach(function(q,ae){var G=q.key,W=q.changes,te=P[ae];if(te){for(var re=0,ue=Object.keys(W);re<ue.length;re++){var me=ue[re],be=W[me];if(me===d.schema.primKey.keyPath){if(dt(be,G)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else M(te,me,be)}R.push(ae),H.push(G),K.push(te)}});var ne=H.length;return y.mutate({trans:D,type:"put",keys:H,values:K,updates:{keys:E,changeSpecs:S}}).then(function(q){var ae=q.numFailures,G=q.failures;if(ae===0)return ne;for(var W=0,te=Object.keys(G);W<te.length;W++){var re,ue=te[W],me=R[Number(ue)];me!=null&&(re=G[ue],delete G[ue],G[me]=re)}throw new Je("".concat(d.name,".bulkUpdate(): ").concat(ae," of ").concat(ne," operations failed"),G)})})})},xt.prototype.bulkDelete=function(h){var d=this,y=h.length;return this._trans("readwrite",function(E){return d.core.mutate({trans:E,type:"delete",keys:h}).then(function(S){return gn(d,h,S)})}).then(function(D){var S=D.numFailures,R=D.lastResult,D=D.failures;if(S===0)return R;throw new Je("".concat(d.name,".bulkDelete(): ").concat(S," of ").concat(y," operations failed"),D)})},xt);function xt(){}function aa(h){function d(D,P){if(P){for(var H=arguments.length,K=new Array(H-1);--H;)K[H-1]=arguments[H];return y[D].subscribe.apply(null,K),h}if(typeof D=="string")return y[D]}var y={};d.addEventType=R;for(var E=1,S=arguments.length;E<S;++E)R(arguments[E]);return d;function R(D,P,H){if(typeof D!="object"){var K;P=P||Rt;var ne={subscribers:[],fire:H=H||Ye,subscribe:function(q){ne.subscribers.indexOf(q)===-1&&(ne.subscribers.push(q),ne.fire=P(ne.fire,q))},unsubscribe:function(q){ne.subscribers=ne.subscribers.filter(function(ae){return ae!==q}),ne.fire=ne.subscribers.reduce(P,H)}};return y[D]=d[D]=ne}p(K=D).forEach(function(q){var ae=K[q];if(_(ae))R(q,K[q][0],K[q][1]);else{if(ae!=="asap")throw new Oe.InvalidArgument("Invalid event config");var G=R(q,et,function(){for(var W=arguments.length,te=new Array(W);W--;)te[W]=arguments[W];G.subscribers.forEach(function(re){ke(function(){re.apply(null,te)})})})}})}}function Vn(h,d){return oe(d).from({prototype:h}),d}function ia(h,d){return!(h.filter||h.algorithm||h.or)&&(d?h.justLimit:!h.replayFilter)}function ss(h,d){h.filter=ra(h.filter,d)}function Ri(h,d,y){var E=h.replayFilter;h.replayFilter=E?function(){return ra(E(),d())}:d,h.justLimit=y&&!E}function sa(h,d){if(h.isPrimKey)return d.primaryKey;var y=d.getIndexByKeyPath(h.index);if(!y)throw new Oe.Schema("KeyPath "+h.index+" on object store "+d.name+" is not indexed");return y}function ao(h,d,y){var E=sa(h,d.schema);return d.openCursor({trans:y,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:E,range:h.range}})}function oa(h,d,y,E){var S=h.replayFilter?ra(h.filter,h.replayFilter()):h.filter;if(h.or){var R={},D=function(P,H,K){var ne,q;S&&!S(H,K,function(ae){return H.stop(ae)},function(ae){return H.fail(ae)})||((q=""+(ne=H.primaryKey))=="[object ArrayBuffer]"&&(q=""+new Uint8Array(ne)),N(R,q)||(R[q]=!0,d(P,H,K)))};return Promise.all([h.or._iterate(D,y),sr(ao(h,E,y),h.algorithm,D,!h.keysOnly&&h.valueMapper)])}return sr(ao(h,E,y),ra(h.algorithm,S),d,!h.keysOnly&&h.valueMapper)}function sr(h,d,y,E){var S=Bt(E?function(R,D,P){return y(E(R),D,P)}:y);return h.then(function(R){if(R)return R.start(function(){var D=function(){return R.continue()};d&&!d(R,function(P){return D=P},function(P){R.stop(P),D=Ye},function(P){R.fail(P),D=Ye})||S(R.value,R,function(P){return D=P}),D()})})}var Uo=(bt.prototype._read=function(h,d){var y=this._ctx;return y.error?y.table._trans(null,Dt.bind(null,y.error)):y.table._trans("readonly",h).then(d)},bt.prototype._write=function(h){var d=this._ctx;return d.error?d.table._trans(null,Dt.bind(null,d.error)):d.table._trans("readwrite",h,"locked")},bt.prototype._addAlgorithm=function(h){var d=this._ctx;d.algorithm=ra(d.algorithm,h)},bt.prototype._iterate=function(h,d){return oa(this._ctx,h,d,this._ctx.table.core)},bt.prototype.clone=function(h){var d=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return h&&b(y,h),d._ctx=y,d},bt.prototype.raw=function(){return this._ctx.valueMapper=null,this},bt.prototype.each=function(h){var d=this._ctx;return this._read(function(y){return oa(d,h,y,d.table.core)})},bt.prototype.count=function(h){var d=this;return this._read(function(y){var E=d._ctx,S=E.table.core;if(ia(E,!0))return S.count({trans:y,query:{index:sa(E,S.schema),range:E.range}}).then(function(D){return Math.min(D,E.limit)});var R=0;return oa(E,function(){return++R,!1},y,S).then(function(){return R})}).then(h)},bt.prototype.sortBy=function(h,d){var y=h.split(".").reverse(),E=y[0],S=y.length-1;function R(H,K){return K?R(H[y[K]],K-1):H[E]}var D=this._ctx.dir==="next"?1:-1;function P(H,K){return dt(R(H,S),R(K,S))*D}return this.toArray(function(H){return H.sort(P)}).then(d)},bt.prototype.toArray=function(h){var d=this;return this._read(function(y){var E=d._ctx;if(E.dir==="next"&&ia(E,!0)&&0<E.limit){var S=E.valueMapper,R=sa(E,E.table.core.schema);return E.table.core.query({trans:y,limit:E.limit,values:!0,query:{index:R,range:E.range}}).then(function(P){return P=P.result,S?P.map(S):P})}var D=[];return oa(E,function(P){return D.push(P)},y,E.table.core).then(function(){return D})},h)},bt.prototype.offset=function(h){var d=this._ctx;return h<=0||(d.offset+=h,ia(d)?Ri(d,function(){var y=h;return function(E,S){return y===0||(y===1?--y:S(function(){E.advance(y),y=0}),!1)}}):Ri(d,function(){var y=h;return function(){return--y<0}})),this},bt.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),Ri(this._ctx,function(){var d=h;return function(y,E,S){return--d<=0&&E(S),0<=d}},!0),this},bt.prototype.until=function(h,d){return ss(this._ctx,function(y,E,S){return!h(y.value)||(E(S),d)}),this},bt.prototype.first=function(h){return this.limit(1).toArray(function(d){return d[0]}).then(h)},bt.prototype.last=function(h){return this.reverse().first(h)},bt.prototype.filter=function(h){var d;return ss(this._ctx,function(y){return h(y.value)}),(d=this._ctx).isMatch=ra(d.isMatch,h),this},bt.prototype.and=function(h){return this.filter(h)},bt.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},bt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bt.prototype.desc=function(){return this.reverse()},bt.prototype.eachKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,E){h(E.key,E)})},bt.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},bt.prototype.eachPrimaryKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,E){h(E.primaryKey,E)})},bt.prototype.keys=function(h){var d=this._ctx;d.keysOnly=!d.isMatch;var y=[];return this.each(function(E,S){y.push(S.key)}).then(function(){return y}).then(h)},bt.prototype.primaryKeys=function(h){var d=this._ctx;if(d.dir==="next"&&ia(d,!0)&&0<d.limit)return this._read(function(E){var S=sa(d,d.table.core.schema);return d.table.core.query({trans:E,values:!1,limit:d.limit,query:{index:S,range:d.range}})}).then(function(E){return E.result}).then(h);d.keysOnly=!d.isMatch;var y=[];return this.each(function(E,S){y.push(S.primaryKey)}).then(function(){return y}).then(h)},bt.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},bt.prototype.firstKey=function(h){return this.limit(1).keys(function(d){return d[0]}).then(h)},bt.prototype.lastKey=function(h){return this.reverse().firstKey(h)},bt.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var d={};return ss(this._ctx,function(S){var E=S.primaryKey.toString(),S=N(d,E);return d[E]=!0,!S}),this},bt.prototype.modify=function(h){var d=this,y=this._ctx;return this._write(function(E){var S=typeof h=="function"?h:function(te){return Vt(te,h)},R=y.table.core,K=R.schema.primaryKey,D=K.outbound,P=K.extractKey,H=200,K=d.db._options.modifyChunkSize;K&&(H=typeof K=="object"?K[R.name]||K["*"]||200:K);function ne(te,me){var ue=me.failures,me=me.numFailures;ae+=te-me;for(var be=0,we=p(ue);be<we.length;be++){var Ie=we[be];q.push(ue[Ie])}}var q=[],ae=0,G=[],W=h===os;return d.clone().primaryKeys().then(function(te){function re(me){var be=Math.min(H,te.length-me),we=te.slice(me,me+be);return(W?Promise.resolve([]):R.getMany({trans:E,keys:we,cache:"immutable"})).then(function(Ie){var Ue=[],je=[],Ve=D?[]:null,ze=W?we:[];if(!W)for(var De=0;De<be;++De){var Fe=Ie[De],tt={value:k(Fe),primKey:te[me+De]};S.call(tt,tt.value,tt)!==!1&&(tt.value==null?ze.push(te[me+De]):D||dt(P(Fe),P(tt.value))===0?(je.push(tt.value),D&&Ve.push(te[me+De])):(ze.push(te[me+De]),Ue.push(tt.value)))}return Promise.resolve(0<Ue.length&&R.mutate({trans:E,type:"add",values:Ue}).then(function(ot){for(var mt in ot.failures)ze.splice(parseInt(mt),1);ne(Ue.length,ot)})).then(function(){return(0<je.length||ue&&typeof h=="object")&&R.mutate({trans:E,type:"put",keys:Ve,values:je,criteria:ue,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<me}).then(function(ot){return ne(je.length,ot)})}).then(function(){return(0<ze.length||ue&&W)&&R.mutate({trans:E,type:"delete",keys:ze,criteria:ue,isAdditionalChunk:0<me}).then(function(ot){return gn(y.table,ze,ot)}).then(function(ot){return ne(ze.length,ot)})}).then(function(){return te.length>me+be&&re(me+H)})})}var ue=ia(y)&&y.limit===1/0&&(typeof h!="function"||W)&&{index:y.index,range:y.range};return re(0).then(function(){if(0<q.length)throw new He("Error modifying one or more objects",q,ae,G);return te.length})})})},bt.prototype.delete=function(){var h=this._ctx,d=h.range;return!ia(h)||h.table.schema.yProps||!h.isPrimKey&&d.type!==3?this.modify(os):this._write(function(y){var E=h.table.core.schema.primaryKey,S=d;return h.table.core.count({trans:y,query:{index:E,range:S}}).then(function(R){return h.table.core.mutate({trans:y,type:"deleteRange",range:S}).then(function(H){var P=H.failures,H=H.numFailures;if(H)throw new He("Could not delete some values",Object.keys(P).map(function(K){return P[K]}),R-H);return R-H})})})},bt);function bt(){}var os=function(h,d){return d.value=null};function ls(h,d){return h<d?-1:h===d?0:1}function Bo(h,d){return d<h?-1:h===d?0:1}function _n(h,d,y){return h=h instanceof Fa?new h.Collection(h):h,h._ctx.error=new(y||TypeError)(d),h}function la(h){return new h.Collection(h,function(){return wr("")}).limit(0)}function gr(h,d,y,E){var S,R,D,P,H,K,ne,q=y.length;if(!y.every(function(W){return typeof W=="string"}))return _n(h,mn);function ae(W){S=W==="next"?function(re){return re.toUpperCase()}:function(re){return re.toLowerCase()},R=W==="next"?function(re){return re.toLowerCase()}:function(re){return re.toUpperCase()},D=W==="next"?ls:Bo;var te=y.map(function(re){return{lower:R(re),upper:S(re)}}).sort(function(re,ue){return D(re.lower,ue.lower)});P=te.map(function(re){return re.upper}),H=te.map(function(re){return re.lower}),ne=(K=W)==="next"?"":E}ae("next"),h=new h.Collection(h,function(){return kr(P[0],H[q-1]+E)}),h._ondirectionchange=function(W){ae(W)};var G=0;return h._addAlgorithm(function(W,te,re){var ue=W.key;if(typeof ue!="string")return!1;var me=R(ue);if(d(me,H,G))return!0;for(var be=null,we=G;we<q;++we){var Ie=(function(Ue,je,Ve,ze,De,Fe){for(var tt=Math.min(Ue.length,ze.length),ot=-1,mt=0;mt<tt;++mt){var er=je[mt];if(er!==ze[mt])return De(Ue[mt],Ve[mt])<0?Ue.substr(0,mt)+Ve[mt]+Ve.substr(mt+1):De(Ue[mt],ze[mt])<0?Ue.substr(0,mt)+ze[mt]+Ve.substr(mt+1):0<=ot?Ue.substr(0,ot)+je[ot]+Ve.substr(ot+1):null;De(Ue[mt],er)<0&&(ot=mt)}return tt<ze.length&&Fe==="next"?Ue+Ve.substr(Ue.length):tt<Ue.length&&Fe==="prev"?Ue.substr(0,Ve.length):ot<0?null:Ue.substr(0,ot)+ze[ot]+Ve.substr(ot+1)})(ue,me,P[we],H[we],D,K);Ie===null&&be===null?G=we+1:(be===null||0<D(be,Ie))&&(be=Ie)}return te(be!==null?function(){W.continue(be+ne)}:re),!1}),h}function kr(h,d,y,E){return{type:2,lower:h,upper:d,lowerOpen:y,upperOpen:E}}function wr(h){return{type:1,lower:h,upper:h}}var Fa=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(h,d,y,E){y=y!==!1,E=E===!0;try{return 0<this._cmp(h,d)||this._cmp(h,d)===0&&(y||E)&&(!y||!E)?la(this):new this.Collection(this,function(){return kr(h,d,!y,!E)})}catch{return _n(this,Mn)}},Gt.prototype.equals=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return wr(h)})},Gt.prototype.above=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(h,void 0,!0)})},Gt.prototype.aboveOrEqual=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(h,void 0,!1)})},Gt.prototype.below=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(void 0,h,!1,!0)})},Gt.prototype.belowOrEqual=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return kr(void 0,h)})},Gt.prototype.startsWith=function(h){return typeof h!="string"?_n(this,mn):this.between(h,h+An,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):gr(this,function(d,y){return d.indexOf(y[0])===0},[h],An)},Gt.prototype.equalsIgnoreCase=function(h){return gr(this,function(d,y){return d===y[0]},[h],"")},Gt.prototype.anyOfIgnoreCase=function(){var h=$e.apply(qe,arguments);return h.length===0?la(this):gr(this,function(d,y){return y.indexOf(d)!==-1},h,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var h=$e.apply(qe,arguments);return h.length===0?la(this):gr(this,function(d,y){return y.some(function(E){return d.indexOf(E)===0})},h,An)},Gt.prototype.anyOf=function(){var h=this,d=$e.apply(qe,arguments),y=this._cmp;try{d.sort(y)}catch{return _n(this,Mn)}if(d.length===0)return la(this);var E=new this.Collection(this,function(){return kr(d[0],d[d.length-1])});E._ondirectionchange=function(R){y=R==="next"?h._ascending:h._descending,d.sort(y)};var S=0;return E._addAlgorithm(function(R,D,P){for(var H=R.key;0<y(H,d[S]);)if(++S===d.length)return D(P),!1;return y(H,d[S])===0||(D(function(){R.continue(d[S])}),!1)}),E},Gt.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var h=$e.apply(qe,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return _n(this,Mn)}var d=h.reduce(function(y,E){return y?y.concat([[y[y.length-1][1],E]]):[[-1/0,E]]},null);return d.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(ue,d){var y=this,E=this._cmp,S=this._ascending,R=this._descending,D=this._min,P=this._max;if(ue.length===0)return la(this);if(!ue.every(function(me){return me[0]!==void 0&&me[1]!==void 0&&S(me[0],me[1])<=0}))return _n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var H=!d||d.includeLowers!==!1,K=d&&d.includeUppers===!0,ne,q=S;function ae(me,be){return q(me[0],be[0])}try{(ne=ue.reduce(function(me,be){for(var we=0,Ie=me.length;we<Ie;++we){var Ue=me[we];if(E(be[0],Ue[1])<0&&0<E(be[1],Ue[0])){Ue[0]=D(Ue[0],be[0]),Ue[1]=P(Ue[1],be[1]);break}}return we===Ie&&me.push(be),me},[])).sort(ae)}catch{return _n(this,Mn)}var G=0,W=K?function(me){return 0<S(me,ne[G][1])}:function(me){return 0<=S(me,ne[G][1])},te=H?function(me){return 0<R(me,ne[G][0])}:function(me){return 0<=R(me,ne[G][0])},re=W,ue=new this.Collection(this,function(){return kr(ne[0][0],ne[ne.length-1][1],!H,!K)});return ue._ondirectionchange=function(me){q=me==="next"?(re=W,S):(re=te,R),ne.sort(ae)},ue._addAlgorithm(function(me,be,we){for(var Ie,Ue=me.key;re(Ue);)if(++G===ne.length)return be(we),!1;return!W(Ie=Ue)&&!te(Ie)||(y._cmp(Ue,ne[G][1])===0||y._cmp(Ue,ne[G][0])===0||be(function(){q===S?me.continue(ne[G][0]):me.continue(ne[G][1])}),!1)}),ue},Gt.prototype.startsWithAnyOf=function(){var h=$e.apply(qe,arguments);return h.every(function(d){return typeof d=="string"})?h.length===0?la(this):this.inAnyRange(h.map(function(d){return[d,d+An]})):_n(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function Jn(h){return Bt(function(d){return wa(d),h(d.target.error),!1})}function wa(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var Pr="storagemutated",Tr="x-storagemutated-1",Nn=aa(null,Pr),Ci=(vt.prototype._lock=function(){return _e(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this},vt.prototype._unlock=function(){if(_e(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{Zn(h[1],h[0])}catch{}}return this},vt.prototype._locked=function(){return this._reculock&&Be.lockOwnerFor!==this},vt.prototype.create=function(h){var d=this;if(!this.mode)return this;var y=this.db.idbdb,E=this.db._state.dbOpenError;if(_e(!this.idbtrans),!h&&!y)switch(E&&E.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(E);case"MissingAPIError":throw new Oe.MissingAPI(E.message,E);default:throw new Oe.OpenFailed(E)}if(!this.active)throw new Oe.TransactionInactive;return _e(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Bt(function(S){wa(S),d._reject(h.error)}),h.onabort=Bt(function(S){wa(S),d.active&&d._reject(new Oe.Abort(h.error)),d.active=!1,d.on("abort").fire(S)}),h.oncomplete=Bt(function(){d.active=!1,d._resolve(),"mutatedParts"in h&&Nn.storagemutated.fire(h.mutatedParts)}),this},vt.prototype._promise=function(h,d,y){var E=this;if(h==="readwrite"&&this.mode!=="readwrite")return Dt(new Oe.ReadOnly("Transaction is readonly"));if(!this.active)return Dt(new Oe.TransactionInactive);if(this._locked())return new Pe(function(R,D){E._blockedFuncs.push([function(){E._promise(h,d,y).then(R,D)},Be])});if(y)return Kt(function(){var R=new Pe(function(D,P){E._lock();var H=d(D,P,E);H&&H.then&&H.then(D,P)});return R.finally(function(){return E._unlock()}),R._lib=!0,R});var S=new Pe(function(R,D){var P=d(R,D,E);P&&P.then&&P.then(R,D)});return S._lib=!0,S},vt.prototype._root=function(){return this.parent?this.parent._root():this},vt.prototype.waitFor=function(h){var d,y=this._root(),E=Pe.resolve(h);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return E}):(y._waitingFor=E,y._waitingQueue=[],d=y.idbtrans.objectStore(y.storeNames[0]),(function R(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(d.get(-1/0).onsuccess=R)})());var S=y._waitingFor;return new Pe(function(R,D){E.then(function(P){return y._waitingQueue.push(Bt(R.bind(null,P)))},function(P){return y._waitingQueue.push(Bt(D.bind(null,P)))}).finally(function(){y._waitingFor===S&&(y._waitingFor=null)})})},vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},vt.prototype.table=function(h){var d=this._memoizedTables||(this._memoizedTables={});if(N(d,h))return d[h];var y=this.schema[h];if(!y)throw new Oe.NotFound("Table "+h+" not part of transaction");return y=new this.db.Table(h,y,this),y.core=this.db.core.table(h),d[h]=y},vt);function vt(){}function Lr(h,d,y,E,S,R,D,P){return{name:h,keyPath:d,unique:y,multi:E,auto:S,compound:R,src:(y&&!D?"&":"")+(E?"*":"")+(S?"++":"")+us(d),type:P}}function us(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function Ha(h,d,y){return{name:h,primKey:d,indexes:y,mappedClass:null,idxByName:(E=function(S){return[S.name,S]},y.reduce(function(S,R,D){return D=E(R,D),D&&(S[D[0]]=D[1]),S},{}))};var E}var Ka=function(h){try{return h.only([[]]),Ka=function(){return[[]]},[[]]}catch{return Ka=function(){return An},An}};function Ga(h){return h==null?function(){}:typeof h=="string"?(d=h).split(".").length===1?function(y){return y[d]}:function(y){return Qe(y,d)}:function(y){return Qe(y,h)};var d}function Ta(h){return[].slice.call(h)}var ua=0;function yn(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function Qa(h,d,H){function E(re){if(re.type===3)return null;if(re.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var G=re.lower,W=re.upper,te=re.lowerOpen,re=re.upperOpen;return G===void 0?W===void 0?null:d.upperBound(W,!!re):W===void 0?d.lowerBound(G,!!te):d.bound(G,W,!!te,!!re)}function S(ae){var G,W=ae.name;return{name:W,schema:ae,mutate:function(te){var re=te.trans,ue=te.type,me=te.keys,be=te.values,we=te.range;return new Promise(function(Ie,Ue){Ie=Bt(Ie);var je=re.objectStore(W),Ve=je.keyPath==null,ze=ue==="put"||ue==="add";if(!ze&&ue!=="delete"&&ue!=="deleteRange")throw new Error("Invalid operation type: "+ue);var De,Fe=(me||be||{length:1}).length;if(me&&be&&me.length!==be.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Ie({numFailures:0,failures:{},results:[],lastResult:void 0});function tt(Pn){++er,wa(Pn)}var ot=[],mt=[],er=0;if(ue==="deleteRange"){if(we.type===4)return Ie({numFailures:er,failures:mt,results:[],lastResult:void 0});we.type===3?ot.push(De=je.clear()):ot.push(De=je.delete(E(we)))}else{var Ve=ze?Ve?[be,me]:[be,null]:[me,null],st=Ve[0],kn=Ve[1];if(ze)for(var un=0;un<Fe;++un)ot.push(De=kn&&kn[un]!==void 0?je[ue](st[un],kn[un]):je[ue](st[un])),De.onerror=tt;else for(un=0;un<Fe;++un)ot.push(De=je[ue](st[un])),De.onerror=tt}function co(Pn){Pn=Pn.target.result,ot.forEach(function(Fr,Hl){return Fr.error!=null&&(mt[Hl]=Fr.error)}),Ie({numFailures:er,failures:mt,results:ue==="delete"?me:ot.map(function(Fr){return Fr.result}),lastResult:Pn})}De.onerror=function(Pn){tt(Pn),co(Pn)},De.onsuccess=co})},getMany:function(te){var re=te.trans,ue=te.keys;return new Promise(function(me,be){me=Bt(me);for(var we,Ie=re.objectStore(W),Ue=ue.length,je=new Array(Ue),Ve=0,ze=0,De=function(ot){ot=ot.target,je[ot._pos]=ot.result,++ze===Ve&&me(je)},Fe=Jn(be),tt=0;tt<Ue;++tt)ue[tt]!=null&&((we=Ie.get(ue[tt]))._pos=tt,we.onsuccess=De,we.onerror=Fe,++Ve);Ve===0&&me(je)})},get:function(te){var re=te.trans,ue=te.key;return new Promise(function(me,be){me=Bt(me);var we=re.objectStore(W).get(ue);we.onsuccess=function(Ie){return me(Ie.target.result)},we.onerror=Jn(be)})},query:(G=K,function(te){return new Promise(function(re,ue){re=Bt(re);var me,be,we,Ve=te.trans,Ie=te.values,Ue=te.limit,De=te.query,je=Ue===1/0?void 0:Ue,ze=De.index,De=De.range,Ve=Ve.objectStore(W),ze=ze.isPrimaryKey?Ve:Ve.index(ze.name),De=E(De);if(Ue===0)return re({result:[]});G?((je=Ie?ze.getAll(De,je):ze.getAllKeys(De,je)).onsuccess=function(Fe){return re({result:Fe.target.result})},je.onerror=Jn(ue)):(me=0,be=!Ie&&"openKeyCursor"in ze?ze.openKeyCursor(De):ze.openCursor(De),we=[],be.onsuccess=function(Fe){var tt=be.result;return tt?(we.push(Ie?tt.value:tt.primaryKey),++me===Ue?re({result:we}):void tt.continue()):re({result:we})},be.onerror=Jn(ue))})}),openCursor:function(te){var re=te.trans,ue=te.values,me=te.query,be=te.reverse,we=te.unique;return new Promise(function(Ie,Ue){Ie=Bt(Ie);var ze=me.index,je=me.range,Ve=re.objectStore(W),Ve=ze.isPrimaryKey?Ve:Ve.index(ze.name),ze=be?we?"prevunique":"prev":we?"nextunique":"next",De=!ue&&"openKeyCursor"in Ve?Ve.openKeyCursor(E(je),ze):Ve.openCursor(E(je),ze);De.onerror=Jn(Ue),De.onsuccess=Bt(function(Fe){var tt,ot,mt,er,st=De.result;st?(st.___id=++ua,st.done=!1,tt=st.continue.bind(st),ot=(ot=st.continuePrimaryKey)&&ot.bind(st),mt=st.advance.bind(st),er=function(){throw new Error("Cursor not stopped")},st.trans=re,st.stop=st.continue=st.continuePrimaryKey=st.advance=function(){throw new Error("Cursor not started")},st.fail=Bt(Ue),st.next=function(){var kn=this,un=1;return this.start(function(){return un--?kn.continue():kn.stop()}).then(function(){return kn})},st.start=function(kn){function un(){if(De.result)try{kn()}catch(Pn){st.fail(Pn)}else st.done=!0,st.start=function(){throw new Error("Cursor behind last entry")},st.stop()}var co=new Promise(function(Pn,Fr){Pn=Bt(Pn),De.onerror=Jn(Fr),st.fail=Fr,st.stop=function(Hl){st.stop=st.continue=st.continuePrimaryKey=st.advance=er,Pn(Hl)}});return De.onsuccess=Bt(function(Pn){De.onsuccess=un,un()}),st.continue=tt,st.continuePrimaryKey=ot,st.advance=mt,un(),co},Ie(st)):Ie(null)},Ue)})},count:function(te){var re=te.query,ue=te.trans,me=re.index,be=re.range;return new Promise(function(we,Ie){var Ue=ue.objectStore(W),je=me.isPrimaryKey?Ue:Ue.index(me.name),Ue=E(be),je=Ue?je.count(Ue):je.count();je.onsuccess=Bt(function(Ve){return we(Ve.target.result)}),je.onerror=Jn(Ie)})}}}var R,D,P,ne=(D=H,P=Ta((R=h).objectStoreNames),{schema:{name:R.name,tables:P.map(function(ae){return D.objectStore(ae)}).map(function(ae){var G=ae.keyPath,re=ae.autoIncrement,W=_(G),te={},re={name:ae.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:G==null,compound:W,keyPath:G,autoIncrement:re,unique:!0,extractKey:Ga(G)},indexes:Ta(ae.indexNames).map(function(ue){return ae.index(ue)}).map(function(we){var me=we.name,be=we.unique,Ie=we.multiEntry,we=we.keyPath,Ie={name:me,compound:_(we),keyPath:we,unique:be,multiEntry:Ie,extractKey:Ga(we)};return te[yn(we)]=Ie}),getIndexByKeyPath:function(ue){return te[yn(ue)]}};return te[":id"]=re.primaryKey,G!=null&&(te[yn(G)]=re.primaryKey),re})},hasGetAll:0<P.length&&"getAll"in D.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),H=ne.schema,K=ne.hasGetAll,ne=H.tables.map(S),q={};return ne.forEach(function(ae){return q[ae.name]=ae}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(ae){if(!q[ae])throw new Error("Table '".concat(ae,"' not found"));return q[ae]},MIN_KEY:-1/0,MAX_KEY:Ka(d),schema:H}}function Sa(h,d,y,E){var S=y.IDBKeyRange;return y.indexedDB,{dbcore:(E=Qa(d,S,E),h.dbcore.reduce(function(R,D){return D=D.create,s(s({},R),D(R))},E))}}function ca(h,E){var y=E.db,E=Sa(h._middlewares,y,h._deps,E);h.core=E.dbcore,h.tables.forEach(function(S){var R=S.name;h.core.schema.tables.some(function(D){return D.name===R})&&(S.core=h.core.table(R),h[R]instanceof h.Table&&(h[R].core=S.core))})}function li(h,d,y,E){y.forEach(function(S){var R=E[S];d.forEach(function(D){var P=(function H(K,ne){return U(K,ne)||(K=v(K))&&H(K,ne)})(D,S);(!P||"value"in P&&P.value===void 0)&&(D===h.Transaction.prototype||D instanceof h.Transaction?ce(D,S,{get:function(){return this.table(S)},set:function(H){$(this,S,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):D[S]=new h.Table(S,R))})})}function Aa(h,d){d.forEach(function(y){for(var E in y)y[E]instanceof h.Table&&delete y[E]})}function cs(h,d){return h._cfg.version-d._cfg.version}function Na(h,d,y,E){var S=h._dbSchema;y.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Ha("$meta",so("")[0],[]),h._storeNames.push("$meta"));var R=h._createTransaction("readwrite",h._storeNames,S);R.create(y),R._completion.catch(E);var D=R._reject.bind(R),P=Be.transless||Be;Kt(function(){return Be.trans=R,Be.transless=P,d!==0?(ca(h,y),K=d,((H=R).storeNames.includes("$meta")?H.table("$meta").get("version").then(function(ne){return ne??K}):Pe.resolve(K)).then(function(ne){return ae=ne,G=R,W=y,te=[],ne=(q=h)._versions,re=q._dbSchema=Ra(0,q.idbdb,W),(ne=ne.filter(function(ue){return ue._cfg.version>=ae})).length!==0?(ne.forEach(function(ue){te.push(function(){var me=re,be=ue._cfg.dbschema;ui(q,me,W),ui(q,be,W),re=q._dbSchema=be;var we=ji(me,be);we.add.forEach(function(ze){Ya(W,ze[0],ze[1].primKey,ze[1].indexes)}),we.change.forEach(function(ze){if(ze.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var De=W.objectStore(ze.name);ze.add.forEach(function(Fe){return Di(De,Fe)}),ze.change.forEach(function(Fe){De.deleteIndex(Fe.name),Di(De,Fe)}),ze.del.forEach(function(Fe){return De.deleteIndex(Fe)})});var Ie=ue._cfg.contentUpgrade;if(Ie&&ue._cfg.version>ae){ca(q,W),G._memoizedTables={};var Ue=O(be);we.del.forEach(function(ze){Ue[ze]=me[ze]}),Aa(q,[q.Transaction.prototype]),li(q,[q.Transaction.prototype],p(Ue),Ue),G.schema=Ue;var je,Ve=L(Ie);return Ve&&nn(),we=Pe.follow(function(){var ze;(je=Ie(G))&&Ve&&(ze=Kn.bind(null,null),je.then(ze,ze))}),je&&typeof je.then=="function"?Pe.resolve(je):we.then(function(){return je})}}),te.push(function(me){var be,we,Ie=ue._cfg.dbschema;be=Ie,we=me,[].slice.call(we.db.objectStoreNames).forEach(function(Ue){return be[Ue]==null&&we.db.deleteObjectStore(Ue)}),Aa(q,[q.Transaction.prototype]),li(q,[q.Transaction.prototype],q._storeNames,q._dbSchema),G.schema=q._dbSchema}),te.push(function(me){q.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(q.idbdb.version/10)===ue._cfg.version?(q.idbdb.deleteObjectStore("$meta"),delete q._dbSchema.$meta,q._storeNames=q._storeNames.filter(function(be){return be!=="$meta"})):me.objectStore("$meta").put(ue._cfg.version,"version"))})}),(function ue(){return te.length?Pe.resolve(te.shift()(G.idbtrans)).then(ue):Pe.resolve()})().then(function(){io(re,W)})):Pe.resolve();var q,ae,G,W,te,re}).catch(D)):(p(S).forEach(function(ne){Ya(y,ne,S[ne].primKey,S[ne].indexes)}),ca(h,y),void Pe.follow(function(){return h.on.populate.fire(R)}).catch(D));var H,K})}function hs(h,d){io(h._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var y=Ra(0,h.idbdb,d);ui(h,h._dbSchema,d);for(var E=0,S=ji(y,h._dbSchema).change;E<S.length;E++){var R=(function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=d.objectStore(D.name);D.add.forEach(function(H){wn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(H.src)),Di(P,H)})})(S[E]);if(typeof R=="object")return R.value}}function ji(h,d){var y,E={del:[],add:[],change:[]};for(y in h)d[y]||E.del.push(y);for(y in d){var S=h[y],R=d[y];if(S){var D={name:y,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||S.primKey.auto!==R.primKey.auto)D.recreate=!0,E.change.push(D);else{var P=S.idxByName,H=R.idxByName,K=void 0;for(K in P)H[K]||D.del.push(K);for(K in H){var ne=P[K],q=H[K];ne?ne.src!==q.src&&D.change.push(q):D.add.push(q)}(0<D.del.length||0<D.add.length||0<D.change.length)&&E.change.push(D)}}else E.add.push([y,R])}return E}function Ya(h,d,y,E){var S=h.db.createObjectStore(d,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return E.forEach(function(R){return Di(S,R)}),S}function io(h,d){p(h).forEach(function(y){d.db.objectStoreNames.contains(y)||(wn&&console.debug("Dexie: Creating missing table",y),Ya(d,y,h[y].primKey,h[y].indexes))})}function Di(h,d){h.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function Ra(h,d,y){var E={};return Z(d.objectStoreNames,0).forEach(function(S){for(var R=y.objectStore(S),D=Lr(us(K=R.keyPath),K||"",!0,!1,!!R.autoIncrement,K&&typeof K!="string",!0),P=[],H=0;H<R.indexNames.length;++H){var ne=R.index(R.indexNames[H]),K=ne.keyPath,ne=Lr(ne.name,K,!!ne.unique,!!ne.multiEntry,!1,K&&typeof K!="string",!1);P.push(ne)}E[S]=Ha(S,D,P)}),E}function ui(h,d,y){for(var E=y.db.objectStoreNames,S=0;S<E.length;++S){var R=E[S],D=y.objectStore(R);h._hasGetAll="getAll"in D;for(var P=0;P<D.indexNames.length;++P){var H=D.indexNames[P],K=D.index(H).keyPath,ne=typeof K=="string"?K:"["+Z(K).join("+")+"]";!d[R]||(K=d[R].idxByName[ne])&&(K.name=H,delete d[R].idxByName[ne],d[R].idxByName[H]=K)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function so(h){return h.split(",").map(function(d,y){var R=d.split(":"),E=(S=R[1])===null||S===void 0?void 0:S.trim(),S=(d=R[0].trim()).replace(/([&*]|\+\+)/g,""),R=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return Lr(S,R||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),_(R),y===0,E)})}var fs=(Xa.prototype._createTableSchema=Ha,Xa.prototype._parseIndexSyntax=so,Xa.prototype._parseStoresSpec=function(h,d){var y=this;p(h).forEach(function(E){if(h[E]!==null){var S=y._parseIndexSyntax(h[E]),R=S.shift();if(!R)throw new Oe.Schema("Invalid schema for table "+E+": "+h[E]);if(R.unique=!0,R.multi)throw new Oe.Schema("Primary key cannot be multiEntry*");S.forEach(function(D){if(D.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),S=y._createTableSchema(E,R,S),d[E]=S}})},Xa.prototype.stores=function(y){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,y):y;var y=d._versions,E={},S={};return y.forEach(function(R){b(E,R._cfg.storesSource),S=R._cfg.dbschema={},R._parseStoresSpec(E,S)}),d._dbSchema=S,Aa(d,[d._allTables,d,d.Transaction.prototype]),li(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],p(S),S),d._storeNames=p(S),this},Xa.prototype.upgrade=function(h){return this._cfg.contentUpgrade=Mt(this._cfg.contentUpgrade||Ye,h),this},Xa);function Xa(){}function ds(h,d){var y=h._dbNamesDB;return y||(y=h._dbNamesDB=new ja(ii,{addons:[],indexedDB:h,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function zr(h){return h&&typeof h.databases=="function"}function ms(h){return Kt(function(){return Be.letThrough=!0,h()})}function ps(h){return!("from"in h)}var Rn=function(h,d){if(!this){var y=new Rn;return h&&"d"in h&&b(y,h),y}b(this,arguments.length?{d:1,from:h,to:1<arguments.length?d:h}:{d:0})};function ci(h,d,y){var E=dt(d,y);if(!isNaN(E)){if(0<E)throw RangeError();if(ps(h))return b(h,{from:d,to:y,d:1});var S=h.l,E=h.r;if(dt(y,h.from)<0)return S?ci(S,d,y):h.l={from:d,to:y,d:1,l:null,r:null},oo(h);if(0<dt(d,h.to))return E?ci(E,d,y):h.r={from:d,to:y,d:1,l:null,r:null},oo(h);dt(d,h.from)<0&&(h.from=d,h.l=null,h.d=E?E.d+1:1),0<dt(y,h.to)&&(h.to=y,h.r=null,h.d=h.l?h.l.d+1:1),y=!h.r,S&&!h.l&&Ur(h,S),E&&y&&Ur(h,E)}}function Ur(h,d){ps(d)||(function y(E,H){var R=H.from,D=H.to,P=H.l,H=H.r;ci(E,R,D),P&&y(E,P),H&&y(E,H)})(h,d)}function Wn(h,d){var y=Ii(d),E=y.next();if(E.done)return!1;for(var S=E.value,R=Ii(h),D=R.next(S.from),P=D.value;!E.done&&!D.done;){if(dt(P.from,S.to)<=0&&0<=dt(P.to,S.from))return!0;dt(S.from,P.from)<0?S=(E=y.next(P.from)).value:P=(D=R.next(S.from)).value}return!1}function Ii(h){var d=ps(h)?null:{s:0,n:h};return{next:function(y){for(var E=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,E)for(;d.n.l&&dt(y,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!E||dt(y,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function oo(h){var d,y,E=(((d=h.r)===null||d===void 0?void 0:d.d)||0)-(((y=h.l)===null||y===void 0?void 0:y.d)||0),S=1<E?"r":E<-1?"l":"";S&&(d=S=="r"?"l":"r",y=s({},h),E=h[S],h.from=E.from,h.to=E.to,h[S]=E[S],y[S]=E[d],(h[d]=y).d=Ca(y)),h.d=Ca(h)}function Ca(y){var d=y.r,y=y.l;return(d?y?Math.max(d.d,y.d):d.d:y?y.d:0)+1}function c(h,d){return p(d).forEach(function(y){h[y]?Ur(h[y],d[y]):h[y]=(function E(S){var R,D,P={};for(R in S)N(S,R)&&(D=S[R],P[R]=!D||typeof D!="object"||B.has(D.constructor)?D:E(D));return P})(d[y])}),h}function x(h,d){return h.all||d.all||Object.keys(h).some(function(y){return d[y]&&Wn(d[y],h[y])})}I(Rn.prototype,((Ar={add:function(h){return Ur(this,h),this},addKey:function(h){return ci(this,h,h),this},addKeys:function(h){var d=this;return h.forEach(function(y){return ci(d,y,y)}),this},hasKey:function(h){var d=Ii(this).next(h).value;return d&&dt(d.from,h)<=0&&0<=dt(d.to,h)}})[J]=function(){return Ii(this)},Ar));var T={},j={},le=!1;function ge(h){c(j,h),le||(le=!0,setTimeout(function(){le=!1,Me(j,!(j={}))},0))}function Me(h,d){d===void 0&&(d=!1);var y=new Set;if(h.all)for(var E=0,S=Object.values(T);E<S.length;E++)lt(D=S[E],h,y,d);else for(var R in h){var D,P=/^idb\:\/\/(.*)\/(.*)\//.exec(R);P&&(R=P[1],P=P[2],(D=T["idb://".concat(R,"/").concat(P)])&&lt(D,h,y,d))}y.forEach(function(H){return H()})}function lt(h,d,y,E){for(var S=[],R=0,D=Object.entries(h.queries.query);R<D.length;R++){for(var P=D[R],H=P[0],K=[],ne=0,q=P[1];ne<q.length;ne++){var ae=q[ne];x(d,ae.obsSet)?ae.subscribers.forEach(function(re){return y.add(re)}):E&&K.push(ae)}E&&S.push([H,K])}if(E)for(var G=0,W=S;G<W.length;G++){var te=W[G],H=te[0],K=te[1];h.queries.query[H]=K}}function vn(h){var d=h._state,y=h._deps.indexedDB;if(d.isBeingOpened||h.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?Dt(d.dbOpenError):h});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var E=d.openCanceller,S=Math.round(10*h.verno),R=!1;function D(){if(d.openCanceller!==E)throw new Oe.DatabaseClosed("db.open() was cancelled")}function P(){return new Pe(function(ae,G){if(D(),!y)throw new Oe.MissingAPI;var W=h.name,te=d.autoSchema||!S?y.open(W):y.open(W,S);if(!te)throw new Oe.MissingAPI;te.onerror=Jn(G),te.onblocked=Bt(h._fireOnBlocked),te.onupgradeneeded=Bt(function(re){var ue;ne=te.transaction,d.autoSchema&&!h._options.allowEmptyDB?(te.onerror=wa,ne.abort(),te.result.close(),(ue=y.deleteDatabase(W)).onsuccess=ue.onerror=Bt(function(){G(new Oe.NoSuchDatabase("Database ".concat(W," doesnt exist")))})):(ne.onerror=Jn(G),re=re.oldVersion>Math.pow(2,62)?0:re.oldVersion,q=re<1,h.idbdb=te.result,R&&hs(h,ne),Na(h,re/10,ne,G))},G),te.onsuccess=Bt(function(){ne=null;var re,ue,me,be,we,Ie=h.idbdb=te.result,Ue=Z(Ie.objectStoreNames);if(0<Ue.length)try{var je=Ie.transaction((be=Ue).length===1?be[0]:be,"readonly");if(d.autoSchema)ue=Ie,me=je,(re=h).verno=ue.version/10,me=re._dbSchema=Ra(0,ue,me),re._storeNames=Z(ue.objectStoreNames,0),li(re,[re._allTables],p(me),me);else if(ui(h,h._dbSchema,je),((we=ji(Ra(0,(we=h).idbdb,je),we._dbSchema)).add.length||we.change.some(function(Ve){return Ve.add.length||Ve.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ie.close(),S=Ie.version+1,R=!0,ae(P());ca(h,je)}catch{}Ea.push(h),Ie.onversionchange=Bt(function(Ve){d.vcFired=!0,h.on("versionchange").fire(Ve)}),Ie.onclose=Bt(function(){h.close({disableAutoOpen:!1})}),q&&(we=h._deps,je=W,Ie=we.indexedDB,we=we.IDBKeyRange,zr(Ie)||je===ii||ds(Ie,we).put({name:je}).catch(Ye)),ae()},G)}).catch(function(ae){switch(ae?.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(0<S)return S=0,P()}return Pe.reject(ae)})}var H,K=d.dbReadyResolve,ne=null,q=!1;return Pe.race([E,(typeof navigator>"u"?Pe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ae){function G(){return indexedDB.databases().finally(ae)}H=setInterval(G,100),G()}).finally(function(){return clearInterval(H)}):Promise.resolve()).then(P)]).then(function(){return D(),d.onReadyBeingFired=[],Pe.resolve(ms(function(){return h.on.ready.fire(h.vip)})).then(function ae(){if(0<d.onReadyBeingFired.length){var G=d.onReadyBeingFired.reduce(Mt,Ye);return d.onReadyBeingFired=[],Pe.resolve(ms(function(){return G(h.vip)})).then(ae)}})}).finally(function(){d.openCanceller===E&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(ae){d.dbOpenError=ae;try{ne&&ne.abort()}catch{}return E===d.openCanceller&&h._close(),Dt(ae)}).finally(function(){d.openComplete=!0,K()}).then(function(){var ae;return q&&(ae={},h.tables.forEach(function(G){G.schema.indexes.forEach(function(W){W.name&&(ae["idb://".concat(h.name,"/").concat(G.name,"/").concat(W.name)]=new Rn(-1/0,[[[]]]))}),ae["idb://".concat(h.name,"/").concat(G.name,"/")]=ae["idb://".concat(h.name,"/").concat(G.name,"/:dels")]=new Rn(-1/0,[[[]]])}),Nn(Pr).fire(ae),Me(ae,!0)),h})}function Ct(h){function d(R){return h.next(R)}var y=S(d),E=S(function(R){return h.throw(R)});function S(R){return function(H){var P=R(H),H=P.value;return P.done?H:H&&typeof H.then=="function"?H.then(y,E):_(H)?Promise.all(H).then(y,E):y(H)}}return S(d)()}function Qt(h,d,y){for(var E=_(h)?h.slice():[h],S=0;S<y;++S)E.push(d);return E}var Br={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return s(s({},h),{table:function(d){var y=h.table(d),E=y.schema,S={},R=[];function D(q,ae,G){var W=yn(q),te=S[W]=S[W]||[],re=q==null?0:typeof q=="string"?1:q.length,ue=0<ae,ue=s(s({},G),{name:ue?"".concat(W,"(virtual-from:").concat(G.name,")"):G.name,lowLevelIndex:G,isVirtual:ue,keyTail:ae,keyLength:re,extractKey:Ga(q),unique:!ue&&G.unique});return te.push(ue),ue.isPrimaryKey||R.push(ue),1<re&&D(re===2?q[0]:q.slice(0,re-1),ae+1,G),te.sort(function(me,be){return me.keyTail-be.keyTail}),ue}d=D(E.primaryKey.keyPath,0,E.primaryKey),S[":id"]=[d];for(var P=0,H=E.indexes;P<H.length;P++){var K=H[P];D(K.keyPath,0,K)}function ne(q){var ae,G=q.query.index;return G.isVirtual?s(s({},q),{query:{index:G.lowLevelIndex,range:(ae=q.query.range,G=G.keyTail,{type:ae.type===1?2:ae.type,lower:Qt(ae.lower,ae.lowerOpen?h.MAX_KEY:h.MIN_KEY,G),lowerOpen:!0,upper:Qt(ae.upper,ae.upperOpen?h.MIN_KEY:h.MAX_KEY,G),upperOpen:!0})}}):q}return s(s({},y),{schema:s(s({},E),{primaryKey:d,indexes:R,getIndexByKeyPath:function(q){return(q=S[yn(q)])&&q[0]}}),count:function(q){return y.count(ne(q))},query:function(q){return y.query(ne(q))},openCursor:function(q){var ae=q.query.index,G=ae.keyTail,W=ae.isVirtual,te=ae.keyLength;return W?y.openCursor(ne(q)).then(function(ue){return ue&&re(ue)}):y.openCursor(q);function re(ue){return Object.create(ue,{continue:{value:function(me){me!=null?ue.continue(Qt(me,q.reverse?h.MAX_KEY:h.MIN_KEY,G)):q.unique?ue.continue(ue.key.slice(0,te).concat(q.reverse?h.MIN_KEY:h.MAX_KEY,G)):ue.continue()}},continuePrimaryKey:{value:function(me,be){ue.continuePrimaryKey(Qt(me,h.MAX_KEY,G),be)}},primaryKey:{get:function(){return ue.primaryKey}},key:{get:function(){var me=ue.key;return te===1?me[0]:me.slice(0,te)}},value:{get:function(){return ue.value}}})}}})}})}};function qr(h,d,y,E){return y=y||{},E=E||"",p(h).forEach(function(S){var R,D,P;N(d,S)?(R=h[S],D=d[S],typeof R=="object"&&typeof D=="object"&&R&&D?(P=_t(R))!==_t(D)?y[E+S]=d[S]:P==="Object"?qr(R,D,y,E+S+"."):R!==D&&(y[E+S]=d[S]):R!==D&&(y[E+S]=d[S])):y[E+S]=void 0}),p(d).forEach(function(S){N(h,S)||(y[E+S]=d[S])}),y}function Sr(h,d){return d.type==="delete"?d.keys:d.keys||d.values.map(h.extractKey)}var ha={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return s(s({},h),{table:function(d){var y=h.table(d),E=y.schema.primaryKey;return s(s({},y),{mutate:function(S){var R=Be.trans,D=R.table(d).hook,P=D.deleting,H=D.creating,K=D.updating;switch(S.type){case"add":if(H.fire===Ye)break;return R._promise("readwrite",function(){return ne(S)},!0);case"put":if(H.fire===Ye&&K.fire===Ye)break;return R._promise("readwrite",function(){return ne(S)},!0);case"delete":if(P.fire===Ye)break;return R._promise("readwrite",function(){return ne(S)},!0);case"deleteRange":if(P.fire===Ye)break;return R._promise("readwrite",function(){return(function q(ae,G,W){return y.query({trans:ae,values:!1,query:{index:E,range:G},limit:W}).then(function(te){var re=te.result;return ne({type:"delete",keys:re,trans:ae}).then(function(ue){return 0<ue.numFailures?Promise.reject(ue.failures[0]):re.length<W?{failures:[],numFailures:0,lastResult:void 0}:q(ae,s(s({},G),{lower:re[re.length-1],lowerOpen:!0}),W)})})})(S.trans,S.range,1e4)},!0)}return y.mutate(S);function ne(q){var ae,G,W,te=Be.trans,re=q.keys||Sr(E,q);if(!re)throw new Error("Keys missing");return(q=q.type==="add"||q.type==="put"?s(s({},q),{keys:re}):s({},q)).type!=="delete"&&(q.values=l([],q.values)),q.keys&&(q.keys=l([],q.keys)),ae=y,W=re,((G=q).type==="add"?Promise.resolve([]):ae.getMany({trans:G.trans,keys:W,cache:"immutable"})).then(function(ue){var me=re.map(function(be,we){var Ie,Ue,je,Ve=ue[we],ze={onerror:null,onsuccess:null};return q.type==="delete"?P.fire.call(ze,be,Ve,te):q.type==="add"||Ve===void 0?(Ie=H.fire.call(ze,be,q.values[we],te),be==null&&Ie!=null&&(q.keys[we]=be=Ie,E.outbound||M(q.values[we],E.keyPath,be))):(Ie=qr(Ve,q.values[we]),(Ue=K.fire.call(ze,Ie,be,Ve,te))&&(je=q.values[we],Object.keys(Ue).forEach(function(De){N(je,De)?je[De]=Ue[De]:M(je,De,Ue[De])}))),ze});return y.mutate(q).then(function(be){for(var we=be.failures,Ie=be.results,Ue=be.numFailures,be=be.lastResult,je=0;je<re.length;++je){var Ve=(Ie||re)[je],ze=me[je];Ve==null?ze.onerror&&ze.onerror(we[je]):ze.onsuccess&&ze.onsuccess(q.type==="put"&&ue[je]?q.values[je]:Ve)}return{failures:we,results:Ie,numFailures:Ue,lastResult:be}}).catch(function(be){return me.forEach(function(we){return we.onerror&&we.onerror(be)}),Promise.reject(be)})})}}})}})}};function hi(h,d,y){try{if(!d||d.keys.length<h.length)return null;for(var E=[],S=0,R=0;S<d.keys.length&&R<h.length;++S)dt(d.keys[S],h[R])===0&&(E.push(y?k(d.values[S]):d.values[S]),++R);return E.length===h.length?E:null}catch{return null}}var gs={stack:"dbcore",level:-1,create:function(h){return{table:function(d){var y=h.table(d);return s(s({},y),{getMany:function(E){if(!E.cache)return y.getMany(E);var S=hi(E.keys,E.trans._cache,E.cache==="clone");return S?Pe.resolve(S):y.getMany(E).then(function(R){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?k(R):R},R})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),y.mutate(E)}})}}}};function Oi(h,d){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function Wu(h,d){switch(h){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var lf={stack:"dbcore",level:0,name:"Observability",create:function(h){var d=h.schema.name,y=new Rn(h.MIN_KEY,h.MAX_KEY);return s(s({},h),{transaction:function(E,S,R){if(Be.subscr&&S!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Be.querier));return h.transaction(E,S,R)},table:function(E){var S=h.table(E),R=S.schema,D=R.primaryKey,q=R.indexes,P=D.extractKey,H=D.outbound,K=D.autoIncrement&&q.filter(function(G){return G.compound&&G.keyPath.includes(D.keyPath)}),ne=s(s({},S),{mutate:function(G){function W(De){return De="idb://".concat(d,"/").concat(E,"/").concat(De),be[De]||(be[De]=new Rn)}var te,re,ue,me=G.trans,be=G.mutatedParts||(G.mutatedParts={}),we=W(""),Ie=W(":dels"),Ue=G.type,ze=G.type==="deleteRange"?[G.range]:G.type==="delete"?[G.keys]:G.values.length<50?[Sr(D,G).filter(function(De){return De}),G.values]:[],je=ze[0],Ve=ze[1],ze=G.trans._cache;return _(je)?(we.addKeys(je),(ze=Ue==="delete"||je.length===Ve.length?hi(je,ze):null)||Ie.addKeys(je),(ze||Ve)&&(te=W,re=ze,ue=Ve,R.indexes.forEach(function(De){var Fe=te(De.name||"");function tt(mt){return mt!=null?De.extractKey(mt):null}function ot(mt){return De.multiEntry&&_(mt)?mt.forEach(function(er){return Fe.addKey(er)}):Fe.addKey(mt)}(re||ue).forEach(function(mt,kn){var st=re&&tt(re[kn]),kn=ue&&tt(ue[kn]);dt(st,kn)!==0&&(st!=null&&ot(st),kn!=null&&ot(kn))})}))):je?(Ve={from:(Ve=je.lower)!==null&&Ve!==void 0?Ve:h.MIN_KEY,to:(Ve=je.upper)!==null&&Ve!==void 0?Ve:h.MAX_KEY},Ie.add(Ve),we.add(Ve)):(we.add(y),Ie.add(y),R.indexes.forEach(function(De){return W(De.name).add(y)})),S.mutate(G).then(function(De){return!je||G.type!=="add"&&G.type!=="put"||(we.addKeys(De.results),K&&K.forEach(function(Fe){for(var tt=G.values.map(function(st){return Fe.extractKey(st)}),ot=Fe.keyPath.findIndex(function(st){return st===D.keyPath}),mt=0,er=De.results.length;mt<er;++mt)tt[mt][ot]=De.results[mt];W(Fe.name).addKeys(tt)})),me.mutatedParts=c(me.mutatedParts||{},be),De})}}),q=function(W){var te=W.query,W=te.index,te=te.range;return[W,new Rn((W=te.lower)!==null&&W!==void 0?W:h.MIN_KEY,(te=te.upper)!==null&&te!==void 0?te:h.MAX_KEY)]},ae={get:function(G){return[D,new Rn(G.key)]},getMany:function(G){return[D,new Rn().addKeys(G.keys)]},count:q,query:q,openCursor:q};return p(ae).forEach(function(G){ne[G]=function(W){var te=Be.subscr,re=!!te,ue=Oi(Be,S)&&Wu(G,W)?W.obsSet={}:te;if(re){var me=function(Ve){return Ve="idb://".concat(d,"/").concat(E,"/").concat(Ve),ue[Ve]||(ue[Ve]=new Rn)},be=me(""),we=me(":dels"),te=ae[G](W),re=te[0],te=te[1];if((G==="query"&&re.isPrimaryKey&&!W.values?we:me(re.name||"")).add(te),!re.isPrimaryKey){if(G!=="count"){var Ie=G==="query"&&H&&W.values&&S.query(s(s({},W),{values:!1}));return S[G].apply(this,arguments).then(function(Ve){if(G==="query"){if(H&&W.values)return Ie.then(function(tt){return tt=tt.result,be.addKeys(tt),Ve});var ze=W.values?Ve.result.map(P):Ve.result;(W.values?be:we).addKeys(ze)}else if(G==="openCursor"){var De=Ve,Fe=W.values;return De&&Object.create(De,{key:{get:function(){return we.addKey(De.primaryKey),De.key}},primaryKey:{get:function(){var tt=De.primaryKey;return we.addKey(tt),tt}},value:{get:function(){return Fe&&be.addKey(De.primaryKey),De.value}}})}return Ve})}we.add(y)}}return S[G].apply(this,arguments)}}),ne}})}};function ec(h,d,y){if(y.numFailures===0)return d;if(d.type==="deleteRange")return null;var E=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return y.numFailures===E?null:(d=s({},d),_(d.keys)&&(d.keys=d.keys.filter(function(S,R){return!(R in y.failures)})),"values"in d&&_(d.values)&&(d.values=d.values.filter(function(S,R){return!(R in y.failures)})),d)}function qo(h,d){return y=h,((E=d).lower===void 0||(E.lowerOpen?0<dt(y,E.lower):0<=dt(y,E.lower)))&&(h=h,(d=d).upper===void 0||(d.upperOpen?dt(h,d.upper)<0:dt(h,d.upper)<=0));var y,E}function ql(h,d,ae,E,S,R){if(!ae||ae.length===0)return h;var D=d.query.index,P=D.multiEntry,H=d.query.range,K=E.schema.primaryKey.extractKey,ne=D.extractKey,q=(D.lowLevelIndex||D).extractKey,ae=ae.reduce(function(G,W){var te=G,re=[];if(W.type==="add"||W.type==="put")for(var ue=new Rn,me=W.values.length-1;0<=me;--me){var be,we=W.values[me],Ie=K(we);ue.hasKey(Ie)||(be=ne(we),(P&&_(be)?be.some(function(De){return qo(De,H)}):qo(be,H))&&(ue.addKey(Ie),re.push(we)))}switch(W.type){case"add":var Ue=new Rn().addKeys(d.values?G.map(function(Fe){return K(Fe)}):G),te=G.concat(d.values?re.filter(function(Fe){return Fe=K(Fe),!Ue.hasKey(Fe)&&(Ue.addKey(Fe),!0)}):re.map(function(Fe){return K(Fe)}).filter(function(Fe){return!Ue.hasKey(Fe)&&(Ue.addKey(Fe),!0)}));break;case"put":var je=new Rn().addKeys(W.values.map(function(Fe){return K(Fe)}));te=G.filter(function(Fe){return!je.hasKey(d.values?K(Fe):Fe)}).concat(d.values?re:re.map(function(Fe){return K(Fe)}));break;case"delete":var Ve=new Rn().addKeys(W.keys);te=G.filter(function(Fe){return!Ve.hasKey(d.values?K(Fe):Fe)});break;case"deleteRange":var ze=W.range;te=G.filter(function(Fe){return!qo(K(Fe),ze)})}return te},h);return ae===h?h:(ae.sort(function(G,W){return dt(q(G),q(W))||dt(K(G),K(W))}),d.limit&&d.limit<1/0&&(ae.length>d.limit?ae.length=d.limit:h.length===d.limit&&ae.length<d.limit&&(S.dirty=!0)),R?Object.freeze(ae):ae)}function ys(h,d){return dt(h.lower,d.lower)===0&&dt(h.upper,d.upper)===0&&!!h.lowerOpen==!!d.lowerOpen&&!!h.upperOpen==!!d.upperOpen}function lo(h,d){return(function(y,E,S,R){if(y===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=dt(y,E))===0){if(S&&R)return 0;if(S)return 1;if(R)return-1}return E})(h.lower,d.lower,h.lowerOpen,d.lowerOpen)<=0&&0<=(function(y,E,S,R){if(y===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=dt(y,E))===0){if(S&&R)return 0;if(S)return-1;if(R)return 1}return E})(h.upper,d.upper,h.upperOpen,d.upperOpen)}function uf(h,d,y,E){h.subscribers.add(y),E.addEventListener("abort",function(){var S,R;h.subscribers.delete(y),h.subscribers.size===0&&(S=h,R=d,setTimeout(function(){S.subscribers.size===0&&Y(R,S)},3e3))})}var Fo={stack:"dbcore",level:0,name:"Cache",create:function(h){var d=h.schema.name;return s(s({},h),{transaction:function(y,E,S){var R,D,P=h.transaction(y,E,S);return E==="readwrite"&&(D=(R=new AbortController).signal,S=function(H){return function(){if(R.abort(),E==="readwrite"){for(var K=new Set,ne=0,q=y;ne<q.length;ne++){var ae=q[ne],G=T["idb://".concat(d,"/").concat(ae)];if(G){var W=h.table(ae),te=G.optimisticOps.filter(function(Fe){return Fe.trans===P});if(P._explicit&&H&&P.mutatedParts)for(var re=0,ue=Object.values(G.queries.query);re<ue.length;re++)for(var me=0,be=(Ue=ue[re]).slice();me<be.length;me++)x((je=be[me]).obsSet,P.mutatedParts)&&(Y(Ue,je),je.subscribers.forEach(function(Fe){return K.add(Fe)}));else if(0<te.length){G.optimisticOps=G.optimisticOps.filter(function(Fe){return Fe.trans!==P});for(var we=0,Ie=Object.values(G.queries.query);we<Ie.length;we++)for(var Ue,je,Ve,ze=0,De=(Ue=Ie[we]).slice();ze<De.length;ze++)(je=De[ze]).res!=null&&P.mutatedParts&&(H&&!je.dirty?(Ve=Object.isFrozen(je.res),Ve=ql(je.res,je.req,te,W,je,Ve),je.dirty?(Y(Ue,je),je.subscribers.forEach(function(Fe){return K.add(Fe)})):Ve!==je.res&&(je.res=Ve,je.promise=Pe.resolve({result:Ve}))):(je.dirty&&Y(Ue,je),je.subscribers.forEach(function(Fe){return K.add(Fe)})))}}}K.forEach(function(Fe){return Fe()})}}},P.addEventListener("abort",S(!1),{signal:D}),P.addEventListener("error",S(!1),{signal:D}),P.addEventListener("complete",S(!0),{signal:D})),P},table:function(y){var E=h.table(y),S=E.schema.primaryKey;return s(s({},E),{mutate:function(R){var D=Be.trans;if(S.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return E.mutate(R);var P=T["idb://".concat(d,"/").concat(y)];return P?(D=E.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||Sr(S,R).some(function(H){return H==null}))?(P.optimisticOps.push(R),R.mutatedParts&&ge(R.mutatedParts),D.then(function(H){0<H.numFailures&&(Y(P.optimisticOps,R),(H=ec(0,R,H))&&P.optimisticOps.push(H),R.mutatedParts&&ge(R.mutatedParts))}),D.catch(function(){Y(P.optimisticOps,R),R.mutatedParts&&ge(R.mutatedParts)})):D.then(function(H){var K=ec(0,s(s({},R),{values:R.values.map(function(ne,q){var ae;return H.failures[q]?ne:(ne=(ae=S.keyPath)!==null&&ae!==void 0&&ae.includes(".")?k(ne):s({},ne),M(ne,S.keyPath,H.results[q]),ne)})}),H);P.optimisticOps.push(K),queueMicrotask(function(){return R.mutatedParts&&ge(R.mutatedParts)})}),D):E.mutate(R)},query:function(R){if(!Oi(Be,E)||!Wu("query",R))return E.query(R);var D=((K=Be.trans)===null||K===void 0?void 0:K.db._options.cache)==="immutable",q=Be,P=q.requery,H=q.signal,K=(function(W,te,re,ue){var me=T["idb://".concat(W,"/").concat(te)];if(!me)return[];if(!(te=me.queries[re]))return[null,!1,me,null];var be=te[(ue.query?ue.query.index.name:null)||""];if(!be)return[null,!1,me,null];switch(re){case"query":var we=be.find(function(Ie){return Ie.req.limit===ue.limit&&Ie.req.values===ue.values&&ys(Ie.req.query.range,ue.query.range)});return we?[we,!0,me,be]:[be.find(function(Ie){return("limit"in Ie.req?Ie.req.limit:1/0)>=ue.limit&&(!ue.values||Ie.req.values)&&lo(Ie.req.query.range,ue.query.range)}),!1,me,be];case"count":return we=be.find(function(Ie){return ys(Ie.req.query.range,ue.query.range)}),[we,!!we,me,be]}})(d,y,"query",R),ne=K[0],q=K[1],ae=K[2],G=K[3];return ne&&q?ne.obsSet=R.obsSet:(q=E.query(R).then(function(W){var te=W.result;if(ne&&(ne.res=te),D){for(var re=0,ue=te.length;re<ue;++re)Object.freeze(te[re]);Object.freeze(te)}else W.result=k(te);return W}).catch(function(W){return G&&ne&&Y(G,ne),Promise.reject(W)}),ne={obsSet:R.obsSet,promise:q,subscribers:new Set,type:"query",req:R,dirty:!1},G?G.push(ne):(G=[ne],(ae=ae||(T["idb://".concat(d,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=G)),uf(ne,G,P,H),ne.promise.then(function(W){return{result:ql(W.result,R,ae?.optimisticOps,E,ne,D)}})}})}})}};function uo(h,d){return new Proxy(h,{get:function(y,E,S){return E==="db"?d:Reflect.get(y,E,S)}})}var ja=(rn.prototype.version=function(h){if(isNaN(h)||h<.1)throw new Oe.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var d=this._versions,y=d.filter(function(E){return E._cfg.version===h})[0];return y||(y=new this.Version(h),d.push(y),d.sort(cs),y.stores({}),this._state.autoSchema=!1,y)},rn.prototype._whenReady=function(h){var d=this;return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?h():new Pe(function(y,E){if(d._state.openComplete)return E(new Oe.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void E(new Oe.DatabaseClosed);d.open().catch(Ye)}d._state.dbReadyPromise.then(y,E)}).then(h)},rn.prototype.use=function(h){var d=h.stack,y=h.create,E=h.level,S=h.name;return S&&this.unuse({stack:d,name:S}),h=this._middlewares[d]||(this._middlewares[d]=[]),h.push({stack:d,create:y,level:E??10,name:S}),h.sort(function(R,D){return R.level-D.level}),this},rn.prototype.unuse=function(h){var d=h.stack,y=h.name,E=h.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(S){return E?S.create!==E:!!y&&S.name!==y})),this},rn.prototype.open=function(){var h=this;return Zn(Sn,function(){return vn(h)})},rn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,d=Ea.indexOf(this);if(0<=d&&Ea.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new Pe(function(y){h.dbReadyResolve=y}),h.openCanceller=new Pe(function(y,E){h.cancelOpen=E}))},rn.prototype.close=function(y){var d=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;d?(y.isBeingOpened&&y.cancelOpen(new Oe.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new Oe.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},rn.prototype.delete=function(h){var d=this;h===void 0&&(h={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Pe(function(S,R){function D(){d.close(h);var P=d._deps.indexedDB.deleteDatabase(d.name);P.onsuccess=Bt(function(){var H,K,ne;H=d._deps,K=d.name,ne=H.indexedDB,H=H.IDBKeyRange,zr(ne)||K===ii||ds(ne,H).delete(K).catch(Ye),S()}),P.onerror=Jn(R),P.onblocked=d._fireOnBlocked}if(y)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(D):D()})},rn.prototype.backendDB=function(){return this.idbdb},rn.prototype.isOpen=function(){return this.idbdb!==null},rn.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},rn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},rn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rn.prototype,"tables",{get:function(){var h=this;return p(this._allTables).map(function(d){return h._allTables[d]})},enumerable:!1,configurable:!0}),rn.prototype.transaction=function(){var h=(function(d,y,E){var S=arguments.length;if(S<2)throw new Oe.InvalidArgument("Too few arguments");for(var R=new Array(S-1);--S;)R[S-1]=arguments[S];return E=R.pop(),[d,F(R),E]}).apply(this,arguments);return this._transaction.apply(this,h)},rn.prototype._transaction=function(h,d,y){var E=this,S=Be.trans;S&&S.db===this&&h.indexOf("!")===-1||(S=null);var R,D,P=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(D=d.map(function(K){if(K=K instanceof E.Table?K.name:K,typeof K!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return K}),h=="r"||h===Or)R=Or;else{if(h!="rw"&&h!=Mr)throw new Oe.InvalidArgument("Invalid transaction mode: "+h);R=Mr}if(S){if(S.mode===Or&&R===Mr){if(!P)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&D.forEach(function(K){if(S&&S.storeNames.indexOf(K)===-1){if(!P)throw new Oe.SubTransaction("Table "+K+" not included in parent transaction.");S=null}}),P&&S&&!S.active&&(S=null)}}catch(K){return S?S._promise(null,function(ne,q){q(K)}):Dt(K)}var H=(function K(ne,q,ae,G,W){return Pe.resolve().then(function(){var te=Be.transless||Be,re=ne._createTransaction(q,ae,ne._dbSchema,G);if(re.explicit=!0,te={trans:re,transless:te},G)re.idbtrans=G.idbtrans;else try{re.create(),re.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(be){return be.name===at.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return K(ne,q,ae,null,W)})):Dt(be)}var ue,me=L(W);return me&&nn(),te=Pe.follow(function(){var be;(ue=W.call(re,re))&&(me?(be=Kn.bind(null,null),ue.then(be,be)):typeof ue.next=="function"&&typeof ue.throw=="function"&&(ue=Ct(ue)))},te),(ue&&typeof ue.then=="function"?Pe.resolve(ue).then(function(be){return re.active?be:Dt(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):te.then(function(){return ue})).then(function(be){return G&&re._resolve(),re._completion.then(function(){return be})}).catch(function(be){return re._reject(be),Dt(be)})})}).bind(null,this,R,D,S,y);return S?S._promise(R,H,"lock"):Be.trans?Zn(Be.transless,function(){return E._whenReady(H)}):this._whenReady(H)},rn.prototype.table=function(h){if(!N(this._allTables,h))throw new Oe.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},rn);function rn(h,d){var y=this;this._middlewares={},this.verno=0;var E=rn.dependencies;this._options=d=s({addons:rn.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},E=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,R,D,P,H,K={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ye,dbReadyPromise:null,cancelOpen:Ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};K.dbReadyPromise=new Pe(function(q){K.dbReadyResolve=q}),K.openCanceller=new Pe(function(q,ae){K.cancelOpen=ae}),this._state=K,this.name=h,this.on=aa(this,"populate","blocked","versionchange","close",{ready:[Mt,Ye]}),this.once=function(q,ae){var G=function(){for(var W=[],te=0;te<arguments.length;te++)W[te]=arguments[te];y.on(q).unsubscribe(G),ae.apply(y,W)};return y.on(q,G)},this.on.ready.subscribe=he(this.on.ready.subscribe,function(q){return function(ae,G){rn.vip(function(){var W,te=y._state;te.openComplete?(te.dbOpenError||Pe.resolve().then(ae),G&&q(ae)):te.onReadyBeingFired?(te.onReadyBeingFired.push(ae),G&&q(ae)):(q(ae),W=y,G||q(function re(){W.on.ready.unsubscribe(ae),W.on.ready.unsubscribe(re)}))})}}),this.Collection=(S=this,Vn(Uo.prototype,function(ue,re){this.db=S;var G=as,W=null;if(re)try{G=re()}catch(me){W=me}var te=ue._ctx,re=te.table,ue=re.hook.reading.fire;this._ctx={table:re,index:te.index,isPrimKey:!te.index||re.schema.primKey.keyPath&&te.index===re.schema.primKey.name,range:G,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:W,or:te.or,valueMapper:ue!==et?ue:null}})),this.Table=(R=this,Vn(oi.prototype,function(q,ae,G){this.db=R,this._tx=G,this.name=q,this.schema=ae,this.hook=R._allTables[q]?R._allTables[q].hook:aa(null,{creating:[Ut,Ye],reading:[Ht,et],updating:[Xn,Ye],deleting:[on,Ye]})})),this.Transaction=(D=this,Vn(Ci.prototype,function(q,ae,G,W,te){var re=this;q!=="readonly"&&ae.forEach(function(ue){ue=(ue=G[ue])===null||ue===void 0?void 0:ue.yProps,ue&&(ae=ae.concat(ue.map(function(me){return me.updatesTable})))}),this.db=D,this.mode=q,this.storeNames=ae,this.schema=G,this.chromeTransactionDurability=W,this.idbtrans=null,this.on=aa(this,"complete","error","abort"),this.parent=te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pe(function(ue,me){re._resolve=ue,re._reject=me}),this._completion.then(function(){re.active=!1,re.on.complete.fire()},function(ue){var me=re.active;return re.active=!1,re.on.error.fire(ue),re.parent?re.parent._reject(ue):me&&re.idbtrans&&re.idbtrans.abort(),Dt(ue)})})),this.Version=(P=this,Vn(fs.prototype,function(q){this.db=P,this._cfg={version:q,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(H=this,Vn(Fa.prototype,function(q,ae,G){if(this.db=H,this._ctx={table:q,index:ae===":id"?null:ae,or:G},this._cmp=this._ascending=dt,this._descending=function(W,te){return dt(te,W)},this._max=function(W,te){return 0<dt(W,te)?W:te},this._min=function(W,te){return dt(W,te)<0?W:te},this._IDBKeyRange=H._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(q){0<q.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(q){!q.newVersion||q.newVersion<q.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(q.oldVersion/10))}),this._maxKey=Ka(d.IDBKeyRange),this._createTransaction=function(q,ae,G,W){return new y.Transaction(q,ae,G,y._options.chromeTransactionDurability,W)},this._fireOnBlocked=function(q){y.on("blocked").fire(q),Ea.filter(function(ae){return ae.name===y.name&&ae!==y&&!ae._state.vcFired}).map(function(ae){return ae.on("versionchange").fire(q)})},this.use(gs),this.use(Fo),this.use(lf),this.use(Br),this.use(ha);var ne=new Proxy(this,{get:function(q,ae,G){if(ae==="_vip")return!0;if(ae==="table")return function(te){return uo(y.table(te),ne)};var W=Reflect.get(q,ae,G);return W instanceof oi?uo(W,ne):ae==="tables"?W.map(function(te){return uo(te,ne)}):ae==="_createTransaction"?function(){return uo(W.apply(this,arguments),ne)}:W}});this.vip=ne,E.forEach(function(q){return q(y)})}var vs,Ar=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",tc=(Ho.prototype.subscribe=function(h,d,y){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:d,complete:y})},Ho.prototype[Ar]=function(){return this},Ho);function Ho(h){this._subscribe=h}try{vs={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{vs={indexedDB:null,IDBKeyRange:null}}function nc(h){var d,y=!1,E=new tc(function(S){var R=L(h),D,P=!1,H={},K={},ne={get closed(){return P},unsubscribe:function(){P||(P=!0,D&&D.abort(),q&&Nn.storagemutated.unsubscribe(G))}};S.start&&S.start(ne);var q=!1,ae=function(){return Ir(W)},G=function(te){c(H,te),x(K,H)&&ae()},W=function(){var te,re,ue;!P&&vs.indexedDB&&(H={},te={},D&&D.abort(),D=new AbortController,ue=(function(me){var be=ir();try{R&&nn();var we=Kt(h,me);return we=R?we.finally(Kn):we}finally{be&&jr()}})(re={subscr:te,signal:D.signal,requery:ae,querier:h,trans:null}),Promise.resolve(ue).then(function(me){y=!0,d=me,P||re.signal.aborted||(H={},(function(be){for(var we in be)if(N(be,we))return;return 1})(K=te)||q||(Nn(Pr,G),q=!0),Ir(function(){return!P&&S.next&&S.next(me)}))},function(me){y=!1,["DatabaseClosedError","AbortError"].includes(me?.name)||P||Ir(function(){P||S.error&&S.error(me)})}))};return setTimeout(ae,0),ne});return E.hasValue=function(){return y},E.getValue=function(){return d},E}var Mi=ja;function Fl(h){var d=fi;try{fi=!0,Nn.storagemutated.fire(h),Me(h,!0)}finally{fi=d}}I(Mi,s(s({},On),{delete:function(h){return new Mi(h,{addons:[]}).delete()},exists:function(h){return new Mi(h,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return d=Mi.dependencies,y=d.indexedDB,d=d.IDBKeyRange,(zr(y)?Promise.resolve(y.databases()).then(function(E){return E.map(function(S){return S.name}).filter(function(S){return S!==ii})}):ds(y,d).toCollection().primaryKeys()).then(h)}catch{return Dt(new Oe.MissingAPI)}var d,y},defineClass:function(){return function(h){b(this,h)}},ignoreTransaction:function(h){return Be.trans?Zn(Be.transless,h):h()},vip:ms,async:function(h){return function(){try{var d=Ct(h.apply(this,arguments));return d&&typeof d.then=="function"?d:Pe.resolve(d)}catch(y){return Dt(y)}}},spawn:function(h,d,y){try{var E=Ct(h.apply(y,d||[]));return E&&typeof E.then=="function"?E:Pe.resolve(E)}catch(S){return Dt(S)}},currentTransaction:{get:function(){return Be.trans||null}},waitFor:function(h,d){return d=Pe.resolve(typeof h=="function"?Mi.ignoreTransaction(h):h).timeout(d||6e4),Be.trans?Be.trans.waitFor(d):d},Promise:Pe,debug:{get:function(){return wn},set:function(h){Lo(h)}},derive:oe,extend:b,props:I,override:he,Events:aa,on:Nn,liveQuery:nc,extendObservabilitySet:c,getByKeyPath:Qe,setByKeyPath:M,delByKeyPath:function(h,d){typeof d=="string"?M(h,d,void 0):"length"in d&&[].map.call(d,function(y){M(h,y,void 0)})},shallowClone:O,deepClone:k,getObjectDiff:qr,cmp:dt,asap:ke,minKey:-1/0,addons:[],connections:Ea,errnames:at,dependencies:vs,cache:T,semVer:"4.2.1",version:"4.2.1".split(".").map(function(h){return parseInt(h)}).reduce(function(h,d,y){return h+d/Math.pow(10,2*y)})})),Mi.maxKey=Ka(Mi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nn(Pr,function(h){fi||(h=new CustomEvent(Tr,{detail:h}),fi=!0,dispatchEvent(h),fi=!1)}),addEventListener(Tr,function(h){h=h.detail,fi||Fl(h)}));var bs,fi=!1,yr=function(){};return typeof BroadcastChannel<"u"&&((yr=function(){(bs=new BroadcastChannel(Tr)).onmessage=function(h){return h.data&&Fl(h.data)}})(),typeof bs.unref=="function"&&bs.unref(),Nn(Pr,function(h){fi||bs.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!ja.disableBfCache&&h.persisted){wn&&console.debug("Dexie: handling persisted pagehide"),bs?.close();for(var d=0,y=Ea;d<y.length;d++)y[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!ja.disableBfCache&&h.persisted&&(wn&&console.debug("Dexie: handling persisted pageshow"),yr(),Fl({all:new Rn(-1/0,[[]])}))})),Pe.rejectionMapper=function(h,d){return!h||h instanceof Ce||h instanceof TypeError||h instanceof SyntaxError||!h.name||!fn[h.name]?h:(d=new fn[h.name](d||h.message,h),"stack"in h&&ce(d,"stack",{get:function(){return this.inner.stack}}),d)},Lo(wn),s(ja,Object.freeze({__proto__:null,Dexie:ja,liveQuery:nc,Entity:ro,cmp:dt,PropModification:Vr,replacePrefix:function(h,d){return new Vr({replacePrefix:[h,d]})},add:function(h){return new Vr({add:h})},remove:function(h){return new Vr({remove:h})},default:ja,RangeSet:Rn,mergeRanges:Ur,rangesOverlap:Wn}),{default:ja}),ja})})(ph)),ph.exports}var IR=DR();const Vm=km(IR),sb=Symbol.for("Dexie"),Cl=globalThis[sb]||(globalThis[sb]=Vm);if(Vm.semVer!==Cl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Vm.semVer} and ${Cl.semVer}`);const{liveQuery:pC,mergeRanges:gC,rangesOverlap:yC,RangeSet:vC,cmp:bC,Entity:_C,PropModification:xC,replacePrefix:EC,add:wC,remove:TC,DexieYProvider:SC}=Cl;function OR(a,t,r){var s,l;typeof a=="function"?(s=t||[],l=r):(s=[],l=t);var u=So.useRef({hasResult:!1,result:l,error:null}),p=So.useReducer(function(v){return v+1},0);p[0];var _=p[1],b=So.useMemo(function(){var v=typeof a=="function"?a():a;if(!v||typeof v.subscribe!="function")throw a===v?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!u.current.hasResult&&typeof window<"u"&&(typeof v.hasValue!="function"||v.hasValue()))if(typeof v.getValue=="function")u.current.result=v.getValue(),u.current.hasResult=!0;else{var A=v.subscribe(function(N){u.current.result=N,u.current.hasResult=!0});typeof A=="function"?A():A.unsubscribe()}return v},s);if(So.useDebugValue(u.current.result),So.useEffect(function(){var v=b.subscribe(function(A){var N=u.current;(N.error!==null||N.result!==A)&&(N.error=null,N.result=A,N.hasResult=!0,_())},function(A){var N=u.current;N.error!==A&&(N.error=A,_())});return typeof v=="function"?v:v.unsubscribe.bind(v)},s),u.current.error)throw u.current.error;return u.current.result}function Qn(a,t,r){return OR(function(){return Cl.liveQuery(a)},t||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(a){var t=Cl.DexieYProvider;t&&t.release(a)});const Le=new Cl("SPFamilyVenturesDB");Le.version(6).stores({settings:"++id",customers:"++id, name, email",products:"++id, name",sales:"++id, customerId, date",users:"++id, username",vendors:"++id, name, email",vendor_purchases:"++id",payments:"++id, customerId, date"});["customers","products","sales","settings","users","vendors","vendor_purchases","payments"].forEach(a=>{Le[a].hook("creating",function(t,r,s){this.onsuccess=function(l){ob(a,{...r,id:l})}}),Le[a].hook("updating",function(t,r,s,l){const u={...s,...t,id:r};ob(a,u)}),Le[a].hook("deleting",function(t,r,s){PR(a,t)})});Le.on("populate",()=>{Le.settings.add({companyName:"SP FAMILY VENTURES EST ENTERPRISE",regNum:"(002905563-H)",desc1:"PEMBORONG AYAM HIDUP / AYAM PROSES",desc2:"AYAM DAGING(BROILER), AYAM KAMPUNG & AYAM TUA (TELOR)",contact:"H/P (012)627-3691",logoLeft:null,logoRight:null}),Le.users.add({username:"svanathan75",password:"sp1234"})});Le.on("ready",async()=>{try{await Le.users.count()===0&&(await Le.users.add({username:"svanathan75",password:"sp1234"}),console.log("Default user seeded via ready hook"))}catch(a){console.error("Error checking/seeding users:",a)}});function Ap(){return Qn(()=>Le.settings.toArray())?.[0]||{}}const MR=["customers","products","sales","settings","vendors","vendor_purchases","payments"],VR=async a=>{const t=Sx(mx(of,a));return Dx(t,async s=>{const l=s.docChanges();l.length!==0&&(await Le.transaction("rw",Le[a],async()=>{for(const u of l){const p=u.doc.data();p.id=parseInt(u.doc.id)||u.doc.id,u.type==="added"||u.type==="modified"?await Le[a].put(p):u.type==="removed"&&await Le[a].delete(p.id)}}),console.log(`Synced ${l.length} changes for ${a} from Cloud.`))})},kR=async()=>{const a=[];for(const t of MR){const r=await VR(t);a.push(r)}return()=>a.forEach(t=>t())},ob=async(a,t)=>{try{const r=bp(of,a,String(t.id));await Cx(r,t),console.log(`Pushed ${a}/${t.id} to Cloud.`)}catch(r){console.error("Failed to push to cloud:",r)}},PR=async(a,t)=>{try{await jx(bp(of,a,String(t))),console.log(`Deleted ${a}/${t} from Cloud.`)}catch(r){console.error("Failed to delete from cloud:",r)}};function LR(){const a=ns();ie.useEffect(()=>{const r=kR();return()=>{r.then(s=>s&&s())}},[]);const t=[{path:"/",icon:a2,label:"Sales"},{path:"/products",icon:vh,label:"Products"},{path:"/customers",icon:bh,label:"Customers"},{path:"/vendors",icon:E2,label:"Vendors"},{path:"/vendor-bills",icon:Ob,label:"Bills"},{path:"/reports",icon:Hm,label:"Reports"},{path:"/settings",icon:b2,label:"Settings"}];return g.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 print:h-auto print:block",children:[g.jsx("main",{className:"flex-1 overflow-y-auto pb-20 print:pb-0 print:h-auto print:overflow-visible",children:g.jsx(Eb,{})}),g.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 flex justify-around items-center z-50 no-print",children:t.map(r=>{const s=r.icon,l=a.pathname===r.path;return g.jsxs(zh,{to:r.path,className:D2("flex flex-col items-center p-2 rounded-lg transition-colors",l?"text-blue-600":"text-gray-500 hover:text-gray-900"),children:[g.jsx(s,{size:24}),g.jsx("span",{className:"text-xs mt-1 font-medium",children:r.label})]},r.path)})})]})}function zR(a,t={}){const r={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Kuala_Lumpur",hour12:!1,...t};return new Intl.DateTimeFormat("en-MY",r).format(a)}function fr(a){const t=new Date(a.toLocaleString("en-US",{timeZone:"Asia/Kuala_Lumpur"})),r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${r}-${s}-${l}`}const UR=[{name:"KANTIN (PARKLAND)",contact:"0176335879",email:"",address:"",id:6},{name:"Kantin Empire Code Parkland",contact:"0165105419",email:"",address:"",id:7},{name:"Kantin Hossain Ali (KJawa)",contact:"0189554212",email:"",address:"",id:8},{name:"Kantin KALAM (Telok Gong)",contact:"0163040557",email:"",address:"",id:9},{name:"KANTIN KEBUN CLC ",contact:"01139307848",email:"",address:"Jln Johan Setia",id:10},{name:"Kantin Wafiq(TelokGong)",contact:"0183703384",email:"",address:"",id:11},{name:"Kantin2 Telok Gong",contact:"0173285626",email:"",address:"",id:12},{name:"KEDAI AYAM ECONSAVE (KANNAN)",contact:"01137654211",email:"",address:"",id:13},{name:"KEDAI AYAM PAMAKO",contact:"0136774960",email:"",address:"",id:14},{name:"KEDAI AYAM PANDIAN",contact:"0163567484",email:"",address:"",id:15},{name:"KEDAI AYAM PRAKASH",contact:"0124560655",email:"",address:"",id:16},{name:"KEDAI AYAM YAZID",contact:"0182166964",email:"",address:"",id:17},{name:"KANTIN MAKAN Abdullah ",contact:"0175783216",email:"",address:"Jln Universiti",id:18},{name:"KEDAI MAKAN IMRAN (GARDENIA)",contact:"001141164909",email:"",address:"",id:19},{name:"KEDAI MAKAN MEENA'S",contact:"0169643450",email:"",address:"",id:20},{name:"KEDAI MASAK Hossain (BT.8 )",contact:"+8801709143499",email:"",address:"",id:21},{name:"Kedai NK WIN ENTERPRISE",contact:"0102531902",email:"",address:"",id:22},{name:"KEDAI RUNCIT 100PLUS",contact:"01111935575",email:"",address:"",id:23},{name:"KEDAI RUNCIT B.PUTERA",contact:"0109657446",email:"",address:"",id:24},{name:"KEDAI RUNCIT DHESIGA",contact:"0162743503",email:"",address:"",id:25},{name:"KEDAI RUNCIT FORID (JLN GAMBUT)",contact:"+8801889111881",email:"",address:"",id:26},{name:"KEDAI RUNCIT MERANTI NIL",contact:"0183910436",email:"",address:"",id:27},{name:"KEDAI RUNCIT SOFIQ BT.8",contact:"01112219170",email:"",address:"",id:28},{name:"KEDAI RUNCIT W.Z LEGACY",contact:"0102652140",email:"",address:"",id:29},{name:"Kedai SJ FRESHMART",contact:"0129022533",email:"",address:"",id:30},{name:"PASAR MINI AROMA SUPERMART",contact:"01133798249",email:"",address:"",id:31},{name:"PASAR MINI SHBBIR",contact:"0149159733",email:"",address:"",id:32},{name:"PASAR MINI SR SMA",contact:"0169368535",email:"",address:"",id:33},{name:"PasarMini Berjaya(Wafiq)",contact:"0183703354",email:"",address:"",id:34},{name:"PasarMini SubangMas(Wafiq)",contact:"0183703354",email:"",address:"",id:35}],BR=[{name:"Ayam Putih (H)",price:8.6,id:8},{name:"Ayam Putih (P)",price:8.9,id:9},{name:"Ayam Gajah (H)",price:25,id:10},{name:"Ayam Tua (H)",price:6.8,id:11},{name:"Ayam Kpg Jantan (H",price:11.3,id:12},{name:"Ayam Kpg Betina (H)",price:10.5,id:13}],qR="/spfamilyventuresbook/assets/logo_company-dgHSd-ed.jpg",FR="/spfamilyventuresbook/assets/logo_poultry-RsWDEZrg.jpg",HR=UR,KR=BR.map(a=>({...a,unit:a.unit||"Kg"})),GR={id:1,companyName:"SP Family Venture EST Enterprise",regNum:"(002905563-H)",desc1:"PEMBORONG AYAM HIDUP / AYAM SEGAR (PROSES)",desc2:"AYAM DAGING (BROILER), AYAM KAMPUNG & AYAM TUA (TELOR)",contact:"H/P (012)627-3691 (Mr.SELVA)",logoLeft:qR,logoRight:FR,invoiceStart:1e4},Ix=async()=>{try{const a=await Le.customers.count(),t=await Le.products.count();if(await Le.settings.put(GR),a>0||t>0)return console.log("Database already has data. Skipping seed."),{success:!1,message:"Database already contains data. Settings updated."};await Le.customers.bulkAdd(HR),await Le.products.bulkAdd(KR);const r=await Le.customers.toArray(),s=await Le.products.toArray(),l=[],u=new Date;for(let p=0;p<15;p++){const _=new Date(u);_.setDate(u.getDate()-Math.floor(Math.random()*7));const b=r[Math.floor(Math.random()*r.length)],v=Math.floor(Math.random()*3)+1,A=[];let N=0;for(let I=0;I<v;I++){const $=s[Math.floor(Math.random()*s.length)],ce=Math.floor(Math.random()*10)+1,oe=ce*$.price;A.push({productId:$.id,qty:ce,unit:$.unit,price:$.price}),N+=oe}l.push({date:_.toISOString().split("T")[0],customerId:b.id,items:A,subtotal:N,prevBalance:0,memo:"",grandTotal:N})}return await Le.sales.bulkAdd(l),{success:!0,message:"Sample data and logos added successfully!"}}catch(a){return console.error("Error seeding database:",a),{success:!1,message:"Failed to seed data."}}},lb=async()=>{try{return await Le.delete(),await Le.open(),{success:!0,message:"Database cleared and reset."}}catch(a){return console.error("Error clearing database:",a),{success:!1,message:"Failed to clear database."}}};function QR(){const a=Ol(),t=Ap(),[r,s]=ie.useState({todaySales:0,todayBills:0,netProfit:0,totalRevenue:0,customerCount:0,productCount:0}),[l,u]=ie.useState([]),[p,_]=ie.useState(!1),b=Qn(()=>Le.customers.toArray()),v=Qn(()=>Le.products.toArray()),A=Qn(()=>Le.sales.toArray()),N=Qn(()=>Le.vendor_purchases.toArray());ie.useEffect(()=>{if(A&&b&&v&&N){const ce=fr(new Date),oe=A.filter(_e=>_e.date===ce).reduce((_e,ke)=>_e+(parseFloat(ke.subtotal)||0),0),U=N.filter(_e=>_e.date===ce).reduce((_e,ke)=>_e+(parseFloat(ke.total)||0),0),Q=oe-U,Z=A.reduce((_e,ke)=>_e+(parseFloat(ke.subtotal)||0),0);s({todaySales:oe,todayBills:U,netProfit:Q,totalRevenue:Z,customerCount:b.length,productCount:v.length});const he=[...A].sort((_e,ke)=>new Date(ke.date)-new Date(_e.date)).slice(0,5);u(he)}},[A,b,v,N]);const I=async()=>{if(confirm("This will populate the database with sample data. Continue?")){_(!0);const ce=await Ix();alert(ce.message),_(!1)}},$=ce=>b?.find(oe=>oe.id===ce)?.name||"Unknown";return g.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[g.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-8 pb-32",children:g.jsxs("div",{className:"max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsxs("div",{className:"flex items-center gap-5",children:[t.logoLeft&&g.jsx("div",{className:"w-20 h-20 bg-white/10 backdrop-blur-sm rounded-2xl p-2 border border-white/20 shadow-xl flex items-center justify-center",children:g.jsx("img",{src:t.logoLeft,alt:"Logo",className:"w-full h-full object-contain drop-shadow-md"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white drop-shadow-sm",children:t.companyName||"Welcome Back!"}),g.jsx("p",{className:"text-blue-100 mt-1 font-medium opacity-90",children:"Dashboard Overview"})]})]}),g.jsx("div",{className:"text-right hidden md:block",children:g.jsx("p",{className:"text-2xl font-bold",children:zR(new Date)})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-green-400/20 rounded-lg",children:g.jsx(ku,{size:20,className:"text-green-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Today's Sales"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.todaySales.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-orange-400/20 rounded-lg",children:g.jsx(Ob,{size:20,className:"text-orange-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Today's Vendor Bills"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.todayBills.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-green-400/20 rounded-lg",children:g.jsx(ku,{size:20,className:"text-green-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Daily Net Profit"})]}),g.jsxs("p",{className:`text-2xl font-bold ${r.netProfit>=0?"text-white":"text-red-300"}`,children:["RM ",r.netProfit.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-blue-400/20 rounded-lg",children:g.jsx(Hm,{size:20,className:"text-blue-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Total Revenue"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.totalRevenue.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-purple-400/20 rounded-lg",children:g.jsx(bh,{size:20,className:"text-purple-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Customers"})]}),g.jsx("p",{className:"text-2xl font-bold",children:r.customerCount})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-orange-400/20 rounded-lg",children:g.jsx(vh,{size:20,className:"text-orange-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Products"})]}),g.jsx("p",{className:"text-2xl font-bold",children:r.productCount})]})]})]})}),g.jsxs("div",{className:"max-w-5xl mx-auto px-4 -mt-24",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsxs("button",{onClick:()=>a("/sales/new"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:g.jsx(Qw,{size:32,className:"text-blue-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"New Sale"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Create a new invoice for a customer"})]}),g.jsxs("button",{onClick:()=>a("/customers"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:g.jsx(bh,{size:32,className:"text-purple-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Manage Customers"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Add or edit customer details"})]}),g.jsxs("button",{onClick:()=>a("/products"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:g.jsx(vh,{size:32,className:"text-orange-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Inventory"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Manage products and pricing"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Recent Sales"}),g.jsxs("button",{onClick:()=>a("/sales"),className:"text-blue-600 text-sm font-medium hover:underline flex items-center gap-1",children:["View All ",g.jsx(Fw,{size:16})]})]}),g.jsx("div",{className:"divide-y divide-gray-50",children:l.length>0?l.map(ce=>g.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500",children:g.jsx(Kw,{size:18})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-gray-800",children:$(ce.customerId)}),g.jsxs("p",{className:"text-xs text-gray-500",children:[fr(new Date(ce.date)),ce.memo&&g.jsxs("span",{className:"ml-2 italic text-gray-400",children:["- ",ce.memo]})]})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"font-bold text-gray-800",children:["RM ",(ce.grandTotal||0).toFixed(2)]}),g.jsxs("p",{className:"text-xs text-gray-500",children:["Inv #",ce.id]})]})]},ce.id)):g.jsx("div",{className:"p-8 text-center text-gray-500",children:"No sales found. Start by creating a new sale!"})})]}),g.jsxs("div",{className:"space-y-6",children:[r.customerCount===0&&r.productCount===0&&g.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 border border-blue-100",children:[g.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"New here?"}),g.jsx("p",{className:"text-sm text-indigo-700 mb-4",children:"Populate your database with sample data to see how the app looks and feels."}),g.jsxs("button",{onClick:I,disabled:p,className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[g.jsx(uh,{size:18}),p?"Seeding...":"Load Sample Data"]})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[g.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Quick Links"}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("button",{onClick:()=>a("/settings"),className:"w-full text-left px-4 py-2 rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm transition-colors",children:"Company Settings"}),g.jsx("button",{onClick:()=>a("/sales"),className:"w-full text-left px-4 py-2 rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm transition-colors",children:"Sales History"})]})]})]})]})]})]})}const YR="modulepreload",XR=function(a){return"/spfamilyventuresbook/"+a},ub={},cb=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let v=function(A){return Promise.all(A.map(N=>Promise.resolve(N).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var p=v;document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),b=_?.nonce||_?.getAttribute("nonce");l=v(r.map(A=>{if(A=XR(A),A in ub)return;ub[A]=!0;const N=A.endsWith(".css"),I=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${I}`))return;const $=document.createElement("link");if($.rel=N?"stylesheet":YR,N||($.as="script"),$.crossOrigin="",$.href=A,b&&$.setAttribute("nonce",b),document.head.appendChild($),N)return new Promise((ce,oe)=>{$.addEventListener("load",ce),$.addEventListener("error",()=>oe(new Error(`Unable to preload CSS for ${A}`)))})}))}function u(_){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=_,window.dispatchEvent(b),!b.defaultPrevented)throw _}return l.then(_=>{for(const b of _||[])b.status==="rejected"&&u(b.reason);return t().catch(u)})},$R=async()=>{try{const a=await Le.customers.toArray(),t=await Le.products.toArray(),r=await Le.sales.toArray(),s=await Le.settings.toArray(),l={version:1,timestamp:new Date().toISOString(),customers:a,products:t,sales:r,settings:s},u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),p=URL.createObjectURL(u),_=document.createElement("a");return _.href=p,_.download=`sp_sales_backup_${fr(new Date)}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(p),{success:!0,message:"Backup exported successfully."}}catch(a){return console.error("Export failed:",a),{success:!1,message:"Failed to export backup."}}},ZR=async a=>new Promise((t,r)=>{const s=new FileReader;s.onload=async l=>{try{const u=JSON.parse(l.target.result);if(!u.customers||!u.products||!u.sales)throw new Error("Invalid backup file format.");await Le.transaction("rw",Le.customers,Le.products,Le.sales,Le.settings,async()=>{u.customers.length&&await Le.customers.bulkPut(u.customers),u.products.length&&await Le.products.bulkPut(u.products),u.sales.length&&await Le.sales.bulkPut(u.sales),u.settings&&u.settings.length&&await Le.settings.bulkPut(u.settings)}),t({success:!0,message:"Backup imported successfully."})}catch(u){console.error("Import failed:",u),t({success:!1,message:"Failed to import backup. Invalid file."})}},s.onerror=()=>{t({success:!1,message:"Failed to read file."})},s.readAsText(a)}),Ox=ie.createContext(null),JR=({children:a})=>{const[t,r]=ie.useState(null),[s,l]=ie.useState(!0);ie.useEffect(()=>{const b=localStorage.getItem("user");b&&r(JSON.parse(b)),l(!1)},[]);const u=async(b,v)=>{try{const A=await Le.users.where("username").equals(b).first();if(A&&A.password===v){const N={id:A.id,username:A.username};return r(N),localStorage.setItem("user",JSON.stringify(N)),{success:!0}}return{success:!1,message:"Invalid username or password"}}catch(A){return console.error("Login error:",A),{success:!1,message:"Login failed"}}},p=()=>{r(null),localStorage.removeItem("user")},_=async b=>{if(!t)return{success:!1,message:"Not logged in"};try{return await Le.users.update(t.id,{password:b}),{success:!0,message:"Password updated successfully"}}catch(v){return console.error("Update password error:",v),{success:!1,message:"Failed to update password"}}};return g.jsx(Ox.Provider,{value:{user:t,login:u,logout:p,updatePassword:_,loading:s},children:!s&&a})},Np=()=>ie.useContext(Ox);function WR(){const a=Ap(),[t,r]=ie.useState({}),[s,l]=ie.useState(""),{user:u,updatePassword:p,logout:_}=Np(),[b,v]=ie.useState(""),[A,N]=ie.useState("");ie.useEffect(()=>{a.id&&!t.id&&r(a)},[a,t.id]);const I=oe=>{const{name:U,value:Q}=oe.target;r(Z=>({...Z,[U]:Q}))},$=async(oe,U)=>{const Q=oe.target.files[0];if(Q){const Z=new FileReader;Z.onloadend=()=>{r(he=>({...he,[U]:Z.result}))},Z.readAsDataURL(Q)}},ce=async oe=>{oe.preventDefault();try{t.id&&(await Le.settings.put(t),l("Settings saved successfully!"),setTimeout(()=>l(""),3e3))}catch(U){console.error("Failed to save settings:",U),l("Error saving settings.")}};return t.id?g.jsxs("div",{className:"p-4 max-w-lg mx-auto pb-24",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Company Settings"}),g.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 space-y-3",children:[g.jsx("h2",{className:"font-semibold text-gray-700 mb-2",children:"Company Details"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Company Name"}),g.jsx("input",{type:"text",name:"companyName",value:t.companyName||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Registration Number"}),g.jsx("input",{type:"text",name:"regNum",value:t.regNum||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description Line 1"}),g.jsx("input",{type:"text",name:"desc1",value:t.desc1||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description Line 2"}),g.jsx("input",{type:"text",name:"desc2",value:t.desc2||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Contact Info"}),g.jsx("input",{type:"text",name:"contact",value:t.contact||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Invoice Start Number"}),g.jsx("input",{type:"number",name:"invoiceStart",value:t.invoiceStart||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 10000"})]})]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 space-y-4",children:[g.jsx("h2",{className:"font-semibold text-gray-700 mb-2",children:"Logos"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Left Logo (Company)"}),g.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors",children:[t.logoLeft?g.jsx("img",{src:t.logoLeft,alt:"Left Logo",className:"h-20 mx-auto object-contain mb-2"}):g.jsx("div",{className:"h-20 flex items-center justify-center text-gray-400",children:"No Logo"}),g.jsxs("label",{className:"cursor-pointer block",children:[g.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Change"}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:oe=>$(oe,"logoLeft")})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Right Logo (Poultry)"}),g.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors",children:[t.logoRight?g.jsx("img",{src:t.logoRight,alt:"Right Logo",className:"h-20 mx-auto object-contain mb-2"}):g.jsx("div",{className:"h-20 flex items-center justify-center text-gray-400",children:"No Logo"}),g.jsxs("label",{className:"cursor-pointer block",children:[g.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Change"}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:oe=>$(oe,"logoRight")})]})]})]})]})]}),g.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2",children:[g.jsx(Mb,{size:20}),"Save Settings"]}),s&&g.jsx("div",{className:`text-center p-2 rounded ${s.includes("Error")?"text-red-600 bg-red-50":"text-green-600 bg-green-50"}`,children:s})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8 mt-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[g.jsx(Vb,{size:24,className:"text-blue-600"}),"User Profile"]}),g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Logged in as"}),g.jsx("p",{className:"font-bold text-gray-900",children:u?.username})]}),g.jsx("button",{onClick:_,className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Sign Out"})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsxs("h3",{className:"font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[g.jsx(Cb,{size:16})," Change Password"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"password",placeholder:"New Password",value:b,onChange:oe=>v(oe.target.value),className:"flex-1 p-2 border rounded-md text-sm"}),g.jsx("button",{onClick:async()=>{if(!b)return;const oe=await p(b);N(oe.message),oe.success&&v(""),setTimeout(()=>N(""),3e3)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:"Update"})]}),A&&g.jsx("p",{className:`text-xs mt-2 ${A.includes("Failed")?"text-red-600":"text-green-600"}`,children:A})]})]})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[g.jsx(uh,{size:24,className:"text-blue-600"}),"Data Management"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[g.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Backup & Restore"}),g.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Save your data to a file or restore from a backup. Use this to move data between devices."}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[g.jsxs("button",{onClick:async()=>{const oe=await $R();alert(oe.message)},className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[g.jsx(Uh,{size:18})," Export Data"]}),g.jsxs("label",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer",children:[g.jsx(qh,{size:18})," Import Data",g.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:async oe=>{if(oe.target.files?.[0]&&confirm("This will merge the backup data with your current data. Continue?")){const U=await ZR(oe.target.files[0]);alert(U.message),U.success&&window.location.reload()}}})]})]})]}),g.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[g.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Cloud Sync Status"}),g.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Check if your device can connect to the cloud database."}),g.jsxs("button",{onClick:async()=>{try{const{doc:oe,setDoc:U}=await cb(async()=>{const{doc:Z,setDoc:he}=await Promise.resolve().then(()=>AR);return{doc:Z,setDoc:he}},[]),{db:Q}=await cb(async()=>{const{db:Z}=await Promise.resolve().then(()=>CR);return{db:Z}},void 0);await U(oe(Q,"_connection_test","test"),{timestamp:new Date().toISOString(),device:navigator.userAgent}),alert("Connection Successful! Cloud sync is working.")}catch(oe){console.error(oe),alert("Connection Failed: "+oe.message+`

Please check your Firestore Rules in the Firebase Console.`)}},className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[g.jsx(uh,{size:18})," Test Connection"]})]})]})]}),g.jsxs("div",{className:"mt-12 border-t pt-8",children:[g.jsx("h2",{className:"text-lg font-bold text-red-600 mb-4",children:"Danger Zone"}),g.jsxs("button",{onClick:async()=>{if(confirm("WARNING: This will delete ALL data (customers, products, sales). This action cannot be undone. Are you sure?")){const oe=await lb();alert(oe.message)}},className:"w-full bg-red-50 text-red-600 border border-red-200 py-3 rounded-lg font-semibold hover:bg-red-100 flex items-center justify-center gap-2 mb-3",children:[g.jsx(Ys,{size:20}),"Clear All Data"]}),g.jsxs("button",{onClick:async()=>{if(confirm("WARNING: This will delete ALL data (customers, products, sales) and replace it with sample data. Are you sure?")){await lb();const oe=await Ix();alert(oe.message)}},className:"w-full bg-red-50 text-red-600 border border-red-200 py-3 rounded-lg font-semibold hover:bg-red-100 flex items-center justify-center gap-2",children:[g.jsx(uh,{size:20}),"Reset & Seed Sample Data"]})]})]}):g.jsx("div",{className:"p-4",children:"Loading settings..."})}function eC(){const a=Qn(()=>Le.products.toArray()),[t,r]=ie.useState(!1),[s,l]=ie.useState(null),[u,p]=ie.useState(""),_=ie.useRef(null),[b,v]=ie.useState({name:"",price:""}),A=(Q=null)=>{Q?(l(Q),v({name:Q.name,price:Q.price})):(l(null),v({name:"",price:""})),r(!0)},N=()=>{r(!1),l(null)},I=async Q=>{Q.preventDefault();try{s?await Le.products.update(s.id,{name:b.name,price:parseFloat(b.price)}):await Le.products.add({name:b.name,price:parseFloat(b.price)}),N()}catch(Z){console.error("Failed to save product:",Z),alert("Error saving product")}},$=async Q=>{window.confirm("Are you sure you want to delete this product?")&&await Le.products.delete(Q)},ce=()=>{const Q=JSON.stringify(a,null,2),Z=new Blob([Q],{type:"application/json"}),he=URL.createObjectURL(Z),_e=document.createElement("a");_e.href=he,_e.download="products_backup.json",document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)},oe=Q=>{const Z=Q.target.files[0];if(!Z)return;const he=new FileReader;he.onload=async _e=>{try{const ke=JSON.parse(_e.target.result);Array.isArray(ke)?(await Le.products.bulkPut(ke),alert("Products imported successfully!")):alert("Invalid file format")}catch(ke){console.error("Import failed:",ke),alert("Failed to import products")}},he.readAsText(Z),Q.target.value=null},U=a?.filter(Q=>Q.name.toLowerCase().includes(u.toLowerCase()))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-4xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Products"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>_.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(qh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:oe}),g.jsxs("button",{onClick:ce,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Uh,{size:16})," Export"]}),g.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Product"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search products...",value:u,onChange:Q=>p(Q.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Name"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Price (RM)"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[U.map(Q=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3",children:Q.name}),g.jsxs("td",{className:"px-4 py-3",children:["RM ",Q.price?.toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>A(Q),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(Bh,{size:18})}),g.jsx("button",{onClick:()=>$(Q.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:18})})]})]},Q.id)),U.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"px-4 py-8 text-center text-gray-500",children:"No products found. Add one to get started."})})]})]})}),t&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:s?"Edit Product":"Add Product"}),g.jsxs("form",{onSubmit:I,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),g.jsx("input",{type:"text",required:!0,value:b.name,onChange:Q=>v({...b,name:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (RM)"}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:b.price,onChange:Q=>v({...b,price:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function tC(){const a=Qn(()=>Le.customers.toArray()),t=Qn(()=>Le.sales.toArray()),r=Qn(()=>Le.payments.toArray()),[s,l]=ie.useState(!1),[u,p]=ie.useState(!1),[_,b]=ie.useState(!1),[v,A]=ie.useState(null),[N,I]=ie.useState(null),[$,ce]=ie.useState(null),[oe,U]=ie.useState(""),Q=ie.useRef(null),[Z,he]=ie.useState({name:"",contact:"",email:"",address:""}),[_e,ke]=ie.useState({customerId:"",date:fr(new Date),amount:"",memo:""}),Qe=(Y=null)=>{Y?(ce(Y),he({name:Y.name,contact:Y.contact,email:Y.email||"",address:Y.address||""})):(ce(null),he({name:"",contact:"",email:"",address:""})),l(!0)},M=()=>{l(!1),ce(null)},O=async Y=>{Y.preventDefault();try{$?await Le.customers.update($.id,Z):await Le.customers.add(Z),M()}catch(qe){console.error("Failed to save customer:",qe),alert("Error saving customer")}},V=(Y=null,qe=null)=>{qe?(I(qe),ke({customerId:qe.customerId,date:qe.date,amount:qe.amount,memo:qe.memo||""})):(I(null),ke({customerId:Y?Y.id:"",date:fr(new Date),amount:"",memo:""})),p(!0)},F=async Y=>{Y.preventDefault();try{const qe=parseFloat(_e.amount);if(!_e.customerId){alert("Please select a customer");return}if(isNaN(qe)||qe<=0){alert("Please enter a valid amount");return}const $e=a.find(ve=>String(ve.id)===String(_e.customerId)),L=$e?$e.id:_e.customerId;N?(await Le.payments.update(N.id,{customerId:L,date:_e.date,amount:qe,memo:_e.memo}),alert("Payment updated successfully!")):(await Le.payments.add({customerId:L,date:_e.date,amount:qe,memo:_e.memo}),alert("Payment recorded successfully!")),p(!1),I(null)}catch(qe){console.error("Failed to save payment:",qe),alert(`Error saving payment: ${qe.message}`)}},B=async Y=>{window.confirm("Are you sure you want to delete this payment?")&&await Le.payments.delete(Y)},ee=Y=>{A(Y),b(!0)},k=async Y=>{window.confirm("Are you sure you want to delete this customer?")&&await Le.customers.delete(Y)},ft=()=>{const Y=JSON.stringify(a,null,2),qe=new Blob([Y],{type:"application/json"}),$e=URL.createObjectURL(qe),L=document.createElement("a");L.href=$e,L.download="customers_backup.json",document.body.appendChild(L),L.click(),document.body.removeChild(L)},_t=Y=>{const qe=Y.target.files[0];if(!qe)return;const $e=new FileReader;$e.onload=async L=>{try{const ve=JSON.parse(L.target.result);Array.isArray(ve)?(await Le.customers.bulkPut(ve),alert("Customers imported successfully!")):alert("Invalid file format")}catch(ve){console.error("Import failed:",ve),alert("Failed to import customers")}},$e.readAsText(qe),Y.target.value=null},J=Y=>{if(!t||!r)return 0;const qe=t.filter(Ce=>String(Ce.customerId)===String(Y)),$e=r.filter(Ce=>String(Ce.customerId)===String(Y)),L=qe.reduce((Ce,Re)=>Ce+(parseFloat(Re.grandTotal)||0),0),ve=$e.reduce((Ce,Re)=>Ce+(parseFloat(Re.amount)||0),0);return L-ve},Ne=a?.filter(Y=>Y.name.toLowerCase().includes(oe.toLowerCase())||Y.contact.includes(oe))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Customers"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>Q.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(qh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:Q,className:"hidden",accept:".json",onChange:_t}),g.jsxs("button",{onClick:ft,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Uh,{size:16})," Export"]}),g.jsxs("button",{onClick:V,className:"flex items-center gap-1 px-3 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200",children:[g.jsx(Gv,{size:16})," Receive Payment"]}),g.jsxs("button",{onClick:()=>Qe(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Customer"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search customers...",value:oe,onChange:Y=>U(Y.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ne.map(Y=>g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:Y.name}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>ee(Y),className:"text-gray-600 hover:text-gray-800 p-1",title:"View History",children:g.jsx(n2,{size:16})}),g.jsx("button",{onClick:()=>Qe(Y),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(Bh,{size:16})}),g.jsx("button",{onClick:()=>k(Y.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:16})})]})]}),g.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ib,{size:14,className:"text-gray-400"}),g.jsx("span",{children:Y.contact})]}),Y.email&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(jb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:Y.email})]}),Y.address&&g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Db,{size:14,className:"text-gray-400 mt-1"}),g.jsx("span",{className:"flex-1",children:Y.address})]}),g.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-100 flex justify-between items-center",children:[g.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Outstanding:"}),g.jsxs("span",{className:`font-bold ${J(Y.id)>0?"text-red-500":"text-green-600"}`,children:["RM ",J(Y.id).toFixed(2)]})]})]})]},Y.id))}),Ne.length===0&&g.jsx("div",{className:"text-center py-12 text-gray-500",children:"No customers found. Add one to get started."}),s&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:$?"Edit Customer":"Add Customer"}),g.jsxs("form",{onSubmit:O,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),g.jsx("input",{type:"text",required:!0,value:Z.name,onChange:Y=>he({...Z,name:Y.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact No."}),g.jsx("input",{type:"text",required:!0,value:Z.contact,onChange:Y=>he({...Z,contact:Y.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),g.jsx("input",{type:"email",value:Z.email,onChange:Y=>he({...Z,email:Y.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),g.jsx("textarea",{value:Z.address,onChange:Y=>he({...Z,address:Y.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"3"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})}),u&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4 text-green-700",children:[g.jsx(Gv,{size:24}),g.jsx("h2",{className:"text-xl font-bold",children:N?"Edit Payment":"Receive Payment"})]}),g.jsxs("form",{onSubmit:F,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),g.jsxs("select",{required:!0,value:_e.customerId,onChange:Y=>ke({..._e,customerId:Y.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",disabled:!!N&&!_e.customerId,children:[g.jsx("option",{value:"",children:"Select Customer"}),a?.map(Y=>g.jsxs("option",{value:Y.id,children:[Y.name," (Outstanding: RM ",J(Y.id).toFixed(2),")"]},Y.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",required:!0,value:_e.date,onChange:Y=>ke({..._e,date:Y.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (RM)"}),g.jsxs("div",{className:"relative",children:[g.jsx(ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:_e.amount,onChange:Y=>ke({..._e,amount:Y.target.value}),className:"w-full pl-10 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Memo (Optional)"}),g.jsx("textarea",{value:_e.memo,onChange:Y=>ke({..._e,memo:Y.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"2",placeholder:"Payment method, ref no, etc."})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:()=>{p(!1),I(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:N?"Update Payment":"Save Payment"})]})]})]})}),_&&v&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl p-6 max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Transaction History"}),g.jsx("p",{className:"text-sm text-gray-600",children:v.name})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Current Outstanding"}),g.jsxs("p",{className:`text-xl font-bold ${J(v.id)>0?"text-red-500":"text-green-600"}`,children:["RM ",J(v.id).toFixed(2)]})]})]}),g.jsx("div",{className:"overflow-auto flex-1 -mx-6 px-6",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{className:"bg-gray-50 sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Date"}),g.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Type"}),g.jsx("th",{className:"text-left py-3 px-2 font-medium text-gray-600",children:"Reference / Memo"}),g.jsx("th",{className:"text-right py-3 px-2 font-medium text-gray-600",children:"Amount (RM)"}),g.jsx("th",{className:"text-center py-3 px-2 font-medium text-gray-600",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[[...t?.filter(Y=>String(Y.customerId)===String(v.id)).map(Y=>({...Y,type:"SALE"}))||[],...r?.filter(Y=>String(Y.customerId)===String(v.id)).map(Y=>({...Y,type:"PAYMENT"}))||[]].sort((Y,qe)=>new Date(qe.date)-new Date(Y.date)).map(Y=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"py-3 px-2 text-gray-800",children:fr(new Date(Y.date))}),g.jsx("td",{className:"py-3 px-2",children:g.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.type==="SALE"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:Y.type})}),g.jsxs("td",{className:"py-3 px-2 text-gray-600",children:[Y.type==="SALE"?`Invoice #${Y.id}`:Y.memo||"-",Y.type==="SALE"&&Y.memo&&g.jsx("span",{className:"block text-xs text-gray-400 italic",children:Y.memo})]}),g.jsx("td",{className:`py-3 px-2 text-right font-medium ${Y.type==="SALE"?"text-gray-800":"text-green-600"}`,children:Y.type==="SALE"?(Y.grandTotal||0).toFixed(2):(Y.amount||0).toFixed(2)}),g.jsx("td",{className:"py-3 px-2 text-center",children:Y.type==="PAYMENT"&&g.jsxs("div",{className:"flex justify-center gap-2",children:[g.jsx("button",{onClick:()=>{b(!1),V(null,Y)},className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Edit"}),g.jsx("button",{onClick:()=>B(Y.id),className:"text-red-600 hover:text-red-800 text-xs font-medium",children:"Delete"})]})})]},`${Y.type}-${Y.id}`)),!t?.some(Y=>String(Y.customerId)===String(v?.id))&&!r?.some(Y=>String(Y.customerId)===String(v?.id))&&g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"py-8 text-center text-gray-400",children:"No transactions found."})})]})]})}),g.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-100",children:g.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900",children:"Close"})})]})})]})}function nC(){const a=Qn(()=>Le.sales.reverse().toArray()),t=Qn(()=>Le.customers.toArray()),[r,s]=ie.useState(""),l=Ol(),u=v=>t?.find(A=>A.id===v)?.name||"Unknown Customer",p=v=>v?.reduce((A,N)=>A+(N.discount||0),0)||0,_=a?.filter(v=>{const A=u(v.customerId).toLowerCase(),N=fr(new Date(v.date)),I=v.memo?.toLowerCase()||"";return A.includes(r.toLowerCase())||N.includes(r)||I.includes(r.toLowerCase())})||[],b=async v=>{window.confirm("Are you sure you want to delete this sale record?")&&await Le.sales.delete(v)};return g.jsxs("div",{className:"p-4 pb-24 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Sales Dashboard"}),g.jsxs(zh,{to:"/sales/new",className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," New Sale"]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search by customer, date, or memo...",value:r,onChange:v=>s(v.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Date"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Customer"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Memo"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Discount"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Grand Total"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[_.map(v=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3 text-sm",children:fr(new Date(v.date))}),g.jsx("td",{className:"px-4 py-3 font-medium",children:u(v.customerId)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 italic",children:v.memo||"-"}),g.jsx("td",{className:"px-4 py-3 text-right text-red-500 text-sm",children:p(v.items)>0?`RM ${p(v.items).toFixed(2)}`:"-"}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["RM ",(v.grandTotal||0).toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>l(`/sales/${v.id}`),className:"text-blue-600 hover:text-blue-800 p-1",title:"View Invoice",children:g.jsx(e2,{size:18})}),g.jsx("button",{onClick:()=>b(v.id),className:"text-red-600 hover:text-red-800 p-1",title:"Delete",children:g.jsx(Ys,{size:18})})]})]},v.id)),_.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"No sales found. Create a new sale to get started."})})]})]})})]})}var gh={exports:{}},rC=gh.exports,hb;function aC(){return hb||(hb=1,(function(a,t){(function(r,s){a.exports=s(kh())})(typeof self<"u"?self:rC,function(r){return(function(){var s={155:function(Z){Z.exports=r}},l={};function u(Z){var he=l[Z];if(he!==void 0)return he.exports;var _e=l[Z]={exports:{}};return s[Z](_e,_e.exports,u),_e.exports}u.d=function(Z,he){for(var _e in he)u.o(he,_e)&&!u.o(Z,_e)&&Object.defineProperty(Z,_e,{enumerable:!0,get:he[_e]})},u.o=function(Z,he){return Object.prototype.hasOwnProperty.call(Z,he)},u.r=function(Z){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Z,"__esModule",{value:!0})};var p={};u.r(p),u.d(p,{useReactToPrint:function(){return Q}});var _=u(155);const b="printWindow";function v({level:Z="error",messages:he,suppressErrors:_e=!1}){_e||(Z==="error"?console.error(he):Z==="warning"?console.warn(he):console.debug(he))}function A(Z,he){if(he||!Z){const _e=document.getElementById(b);_e&&document.body.removeChild(_e)}}function N(Z){return Z instanceof Error?Z:new Error("Unknown Error")}function I(Z,he){const{documentTitle:_e,onAfterPrint:ke,onPrintError:Qe,preserveAfterPrint:M,print:O,suppressErrors:V}=he;setTimeout(()=>{var F,B;if(Z.contentWindow){let k=function(){ke?.(),A(M)};var ee=k;if(Z.contentWindow.focus(),O)O(Z).then(k).catch(ft=>{Qe?Qe("print",N(ft)):v({messages:["An error was thrown by the specified `print` function"],suppressErrors:V})});else{if(Z.contentWindow.print){const ft=(B=(F=Z.contentDocument)===null||F===void 0?void 0:F.title)!==null&&B!==void 0?B:"",_t=Z.ownerDocument.title;_e&&(Z.ownerDocument.title=_e,Z.contentDocument&&(Z.contentDocument.title=_e)),Z.contentWindow.print(),_e&&(Z.ownerDocument.title=_t,Z.contentDocument&&(Z.contentDocument.title=ft))}else v({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:V});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(ft=>{var _t,J;return((J=(_t=navigator.userAgent)!==null&&_t!==void 0?_t:navigator.vendor)!==null&&J!==void 0?J:"opera"in window&&window.opera).match(ft)})?setTimeout(k,500):k()}}else v({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:V})},500)}function $(Z){const he=[],_e=document.createTreeWalker(Z,NodeFilter.SHOW_ELEMENT,null);let ke=_e.nextNode();for(;ke;)he.push(ke),ke=_e.nextNode();return he}function ce(Z,he,_e){const ke=$(Z),Qe=$(he);if(ke.length===Qe.length)for(let M=0;M<ke.length;M++){const O=ke[M],V=Qe[M],F=O.shadowRoot;if(F!==null){const B=V.attachShadow({mode:F.mode});B.innerHTML=F.innerHTML,ce(F,B,_e)}}else v({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",Z,he],suppressErrors:_e})}const oe=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function U(Z,he,_e,ke){var Qe,M,O,V,F;const{contentNode:B,clonedContentNode:ee,clonedImgNodes:k,clonedVideoNodes:ft,numResourcesToLoad:_t,originalCanvasNodes:J}=_e,{bodyClass:Ne,fonts:Y,ignoreGlobalStyles:qe,pageStyle:$e,nonce:L,suppressErrors:ve,copyShadowRoots:Ce}=ke;Z.onload=null;const Re=(Qe=Z.contentDocument)!==null&&Qe!==void 0?Qe:(M=Z.contentWindow)===null||M===void 0?void 0:M.document;if(Re){const He=Re.body.appendChild(ee);Ce&&ce(B,He,!!ve),Y&&(!((O=Z.contentDocument)===null||O===void 0)&&O.fonts&&(!((V=Z.contentWindow)===null||V===void 0)&&V.FontFace)?Y.forEach(Ye=>{const et=new FontFace(Ye.family,Ye.source,{weight:Ye.weight,style:Ye.style});Z.contentDocument.fonts.add(et),et.loaded.then(()=>{he(et)}).catch(Ht=>{he(et,["Failed loading the font:",et,"Load error:",N(Ht)])})}):(Y.forEach(Ye=>{he(Ye)}),v({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:ve})));const Je=$e??oe,at=Re.createElement("style");L&&(at.setAttribute("nonce",L),Re.head.setAttribute("nonce",L)),at.appendChild(Re.createTextNode(Je)),Re.head.appendChild(at),Ne&&Re.body.classList.add(...Ne.split(" "));const Ft=Re.querySelectorAll("canvas");for(let Ye=0;Ye<J.length;++Ye){const et=J[Ye],Ht=Ft[Ye];if(Ht===void 0){v({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",et],suppressErrors:ve});continue}const gt=Ht.getContext("2d");gt&&gt.drawImage(et,0,0)}for(let Ye=0;Ye<k.length;Ye++){const et=k[Ye],Ht=et.getAttribute("src");if(Ht){const gt=new Image;gt.onload=()=>{he(et)},gt.onerror=(Ut,on,Xn,Rt,Mt)=>{he(et,["Error loading <img>",et,"Error",Mt])},gt.src=Ht}else he(et,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',et])}for(let Ye=0;Ye<ft.length;Ye++){const et=ft[Ye];et.preload="auto";const Ht=et.getAttribute("poster");if(Ht){const gt=new Image;gt.onload=()=>{he(et)},gt.onerror=(Ut,on,Xn,Rt,Mt)=>{he(et,["Error loading video poster",Ht,"for video",et,"Error:",Mt])},gt.src=Ht}else et.readyState>=2?he(et):et.src?(et.onloadeddata=()=>{he(et)},et.onerror=(gt,Ut,on,Xn,Rt)=>{he(et,["Error loading video",et,"Error",Rt])},et.onstalled=()=>{he(et,["Loading video stalled, skipping",et])}):he(et,["Error loading video, `src` is empty",et])}const Oe="select",fn=B.querySelectorAll(Oe),On=Re.querySelectorAll(Oe);for(let Ye=0;Ye<fn.length;Ye++)On[Ye].value=fn[Ye].value;if(!qe){const Ye=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let et=0,Ht=Ye.length;et<Ht;++et){const gt=Ye[et];if(gt.tagName.toLowerCase()==="style"){const Ut=Re.createElement(gt.tagName),on=gt.sheet;if(on){let Xn="";try{const Rt=on.cssRules.length;for(let Mt=0;Mt<Rt;++Mt)typeof on.cssRules[Mt].cssText=="string"&&(Xn+=`${on.cssRules[Mt].cssText}\r
`)}catch(Rt){v({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",gt,`Original error: ${N(Rt).message}`],level:"warning"})}Ut.setAttribute("id",`react-to-print-${et}`),L&&Ut.setAttribute("nonce",L),Ut.appendChild(Re.createTextNode(Xn)),Re.head.appendChild(Ut)}}else if(gt.getAttribute("href"))if(gt.hasAttribute("disabled"))v({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",gt],level:"warning"}),he(gt);else{const Ut=Re.createElement(gt.tagName);for(let on=0,Xn=gt.attributes.length;on<Xn;++on){const Rt=gt.attributes[on];Rt&&Ut.setAttribute(Rt.nodeName,(F=Rt.nodeValue)!==null&&F!==void 0?F:"")}Ut.onload=()=>{he(Ut)},Ut.onerror=(on,Xn,Rt,Mt,wn)=>{he(Ut,["Failed to load",Ut,"Error:",wn])},L&&Ut.setAttribute("nonce",L),Re.head.appendChild(Ut)}else v({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",gt],level:"warning"}),he(gt)}}}_t===0&&I(Z,ke)}function Q({bodyClass:Z,contentRef:he,copyShadowRoots:_e,documentTitle:ke,fonts:Qe,ignoreGlobalStyles:M,nonce:O,onAfterPrint:V,onBeforePrint:F,onPrintError:B,pageStyle:ee,preserveAfterPrint:k,print:ft,printIframeProps:_t,suppressErrors:J}){return(0,_.useCallback)(Y=>{function qe(){const $e={bodyClass:Z,contentRef:he,copyShadowRoots:_e,documentTitle:ke,fonts:Qe,ignoreGlobalStyles:M,nonce:O,onAfterPrint:V,onPrintError:B,pageStyle:ee,preserveAfterPrint:k,print:ft,suppressErrors:J},L=(function(Re){const He=document.createElement("iframe");return He.width=`${document.documentElement.clientWidth}px`,He.height=`${document.documentElement.clientHeight}px`,He.style.position="absolute",He.style.top=`-${document.documentElement.clientHeight+100}px`,He.style.left=`-${document.documentElement.clientWidth+100}px`,He.id=b,He.srcdoc="<!DOCTYPE html>",Re&&(Re.allow&&(He.allow=Re.allow),Re.referrerPolicy!==void 0&&(He.referrerPolicy=Re.referrerPolicy),Re.sandbox!==void 0&&(He.sandbox=Re.sandbox)),He})(_t),ve=(function(Re,He){const{contentRef:Je,fonts:at,ignoreGlobalStyles:Ft,suppressErrors:Oe}=He,fn=(function({contentRef:Ut,optionalContent:on,suppressErrors:Xn}){return on&&typeof on=="function"?(Ut&&v({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),on()):Ut?Ut.current:void v({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Xn})})({contentRef:Je,optionalContent:Re,suppressErrors:Oe});if(!fn)return;const On=fn.cloneNode(!0),Ye=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),et=On.querySelectorAll("img"),Ht=On.querySelectorAll("video"),gt=at?at.length:0;return{contentNode:fn,clonedContentNode:On,clonedImgNodes:et,clonedVideoNodes:Ht,numResourcesToLoad:(Ft?0:Ye.length)+et.length+Ht.length+gt,originalCanvasNodes:fn.querySelectorAll("canvas")}})(Y,$e);if(!ve)return void v({messages:["There is nothing to print"],suppressErrors:J});const Ce=(function(Re,He,Je){const{suppressErrors:at}=Re,Ft=[],Oe=[];return function(fn,On){Ft.includes(fn)?v({level:"debug",messages:["Tried to mark a resource that has already been handled",fn],suppressErrors:at}):(On?(v({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...On],suppressErrors:at}),Oe.push(fn)):Ft.push(fn),Ft.length+Oe.length===He&&I(Je,Re))}})($e,ve.numResourcesToLoad,L);(function(Re,He,Je,at){Re.onload=()=>{U(Re,He,Je,at)},document.body.appendChild(Re)})(L,Ce,ve,$e)}A(k,!0),F?F().then(()=>{qe()}).catch($e=>{B?.("onBeforePrint",N($e))}):qe()},[Z,he,_e,ke,Qe,M,O,V,F,B,ee,k,ft,J])}return p})()})})(gh)),gh.exports}var iC=aC();const sC=({settings:a,customer:t,saleDate:r,id:s,items:l,products:u,prevBalance:p,prevBalanceMemo:_,subtotal:b,paidAmount:v,grandTotal:A})=>{const N=U=>u?.find(Q=>Q.id===U)?.name||"Unknown",I=l.reduce((U,Q)=>U+(Q.discount||0),0),$=A-(v||0),ce=parseInt(a.invoiceStart)||1e4,oe=s?ce+(parseInt(s)-1):"NEW";return g.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto print:p-0 print:w-full print:max-w-none font-sans",children:[g.jsxs("div",{className:"flex flex-col md:flex-row print:flex-row justify-between items-center md:items-start print:items-start mb-8 border-b-2 border-gray-100 pb-6 gap-4",children:[g.jsx("div",{className:"w-40 h-40 flex-shrink-0",children:a.logoLeft&&g.jsx("img",{src:a.logoLeft,alt:"Logo",className:"w-full h-full object-contain"})}),g.jsxs("div",{className:"text-center flex-1 px-4 order-first md:order-none print:order-none w-full",children:[g.jsx("h1",{className:"text-xl font-extrabold uppercase tracking-wide text-gray-900",children:a.companyName}),g.jsx("p",{className:"text-sm font-bold text-gray-600",children:a.regNum}),g.jsx("p",{className:"text-xs mt-1 text-gray-500 font-medium",children:a.desc1}),g.jsx("p",{className:"text-xs text-gray-500 font-medium",children:a.desc2}),g.jsx("p",{className:"text-sm font-bold mt-2 text-gray-800",children:a.contact})]}),g.jsx("div",{className:"w-40 h-40 flex-shrink-0 hidden md:block print:block",children:a.logoRight&&g.jsx("img",{src:a.logoRight,alt:"Poultry",className:"w-full h-full object-contain"})})]}),g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-6",children:[g.jsxs("div",{className:"w-full md:w-auto",children:[g.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Billed To"}),g.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t.name}),g.jsx("p",{className:"text-sm text-gray-600 max-w-[250px]",children:t.address}),g.jsx("p",{className:"text-sm text-gray-600",children:t.contact})]}),g.jsxs("div",{className:"text-left md:text-right w-full md:w-auto",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-400 uppercase mb-1",children:"Delivery Order / Invoice"}),g.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["#INV-",oe]}),g.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["Date: ",fr(new Date(r))]})]})]}),g.jsx("div",{className:"hidden md:block print:!block overflow-x-auto",children:g.jsxs("table",{className:"w-full mb-8 border-collapse min-w-[600px] print:!min-w-full print:!table",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[g.jsx("th",{className:"text-center py-3 px-2 text-sm font-bold text-gray-600 w-12",children:"#"}),g.jsx("th",{className:"text-left py-3 px-2 text-sm font-bold text-gray-600",children:"Item"}),g.jsx("th",{className:"text-center py-3 px-2 text-sm font-bold text-gray-600",children:"Quantity"}),g.jsx("th",{className:"text-right py-3 px-2 text-sm font-bold text-gray-600",children:"Unit Price"}),g.jsx("th",{className:"text-right py-3 px-2 text-sm font-bold text-gray-600",children:"Total"})]})}),g.jsx("tbody",{children:l.map((U,Q)=>g.jsxs("tr",{className:"border-b border-gray-50",children:[g.jsx("td",{className:"text-center py-3 px-2 text-sm text-gray-600",children:Q+1}),g.jsxs("td",{className:"py-3 px-2",children:[g.jsx("div",{className:"font-bold text-gray-800",children:N(parseInt(U.productId))}),U.memo&&g.jsx("div",{className:"text-xs text-gray-500 italic mt-0.5",children:U.memo}),U.discount>0&&g.jsxs("div",{className:"text-xs text-red-500 mt-0.5",children:["Disc: -",parseFloat(U.discount).toFixed(2)]})]}),g.jsxs("td",{className:"text-center py-3 px-2 text-sm text-gray-800 font-medium",children:[U.qty," ",U.unit]}),g.jsxs("td",{className:"text-right py-3 px-2 text-sm text-gray-800",children:["RM ",parseFloat(U.price).toFixed(2)]}),g.jsxs("td",{className:"text-right py-3 px-2 text-sm font-bold text-gray-800",children:["RM ",(U.qty*U.price-(U.discount||0)).toFixed(2)]})]},Q))})]})}),g.jsx("div",{className:"md:hidden print:hidden space-y-4 mb-8",children:l.map((U,Q)=>g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-gray-900",children:N(parseInt(U.productId))}),U.memo&&g.jsx("div",{className:"text-xs text-gray-500 italic",children:U.memo})]}),g.jsxs("div",{className:"text-xs font-bold text-gray-500 bg-white px-2 py-1 rounded border",children:["#",Q+1]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-500 text-xs block",children:"Quantity"}),g.jsxs("span",{className:"font-medium",children:[U.qty," ",U.unit]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("span",{className:"text-gray-500 text-xs block",children:"Unit Price"}),g.jsxs("span",{className:"font-medium",children:["RM ",parseFloat(U.price).toFixed(2)]})]})]}),U.discount>0&&g.jsxs("div",{className:"flex justify-between text-xs text-red-500 mb-2",children:[g.jsx("span",{children:"Discount"}),g.jsxs("span",{children:["- RM ",parseFloat(U.discount).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 pt-2",children:[g.jsx("span",{className:"font-bold text-gray-600",children:"Total"}),g.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["RM ",(U.qty*U.price-(U.discount||0)).toFixed(2)]})]})]},Q))}),g.jsx("div",{className:"flex justify-end mb-12",children:g.jsxs("div",{className:"w-80",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[g.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Subtotal"}),g.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["RM ",b.toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-green-700 text-white px-3 py-1.5 rounded-sm mb-1",children:[g.jsx("span",{className:"text-sm font-medium",children:"Discount"}),g.jsxs("span",{className:"text-sm font-bold",children:["- RM ",I.toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-green-700 text-white px-3 py-1.5 rounded-sm mb-2",children:[g.jsxs("span",{className:"text-sm font-medium",children:["Previous Balance ",_&&`(${_})`]}),g.jsxs("span",{className:"text-sm font-bold",children:["RM ",parseFloat(p).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[g.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Paid"}),g.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["- RM ",parseFloat(v||0).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center border-t-2 border-gray-200 pt-2 px-2",children:[g.jsx("span",{className:"text-lg font-extrabold text-gray-900",children:"Balance Due"}),g.jsxs("span",{className:"text-lg font-extrabold text-gray-900",children:["RM ",$.toFixed(2)]})]})]})}),g.jsxs("div",{className:"text-center space-y-1",children:[g.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Thank you for your business!"}),g.jsx("p",{className:"text-xs text-gray-400 italic",children:"This is a computer-generated document. No signature is required."})]})]})};function fb(){const{id:a}=UE(),t=Ol(),r=Ap(),s=Qn(()=>Le.customers.toArray()),l=Qn(()=>Le.products.toArray()),[u,p]=ie.useState(fr(new Date)),[_,b]=ie.useState(""),[v,A]=ie.useState([]),[N,I]=ie.useState(0),[$,ce]=ie.useState(""),[oe,U]=ie.useState(0),[Q,Z]=ie.useState(!1),[he,_e]=ie.useState(!1),[ke,Qe]=ie.useState(!0),M=ie.useRef(),O=iC.useReactToPrint({contentRef:M,documentTitle:`Invoice-${a||"New"}`});ie.useEffect(()=>{a&&Le.sales.get(parseInt(a)).then(J=>{J&&(p(J.date),b(J.customerId),A(J.items),I(J.prevBalance||0),ce(J.memo||""),U(J.paidAmount||0),Z(!0))})},[a]);const V=()=>{A([...v,{productId:"",qty:1,unit:"Kg",price:0,discount:0,memo:""}])},F=(J,Ne,Y)=>{const qe=[...v];if(qe[J][Ne]=Y,Ne==="productId"){const $e=l.find(L=>L.id===parseInt(Y));$e&&(qe[J].price=$e.price)}A(qe)},B=J=>{A(v.filter((Ne,Y)=>Y!==J))},ee=()=>v.reduce((J,Ne)=>J+(Ne.qty*Ne.price-(Ne.discount||0)),0),k=()=>ee()+parseFloat(N||0),ft=async(J=!1)=>{if(!_){alert("Please select a customer");return}if(v.length===0){alert("Please add at least one item");return}const Ne={date:u,customerId:parseInt(_),items:v.map(Y=>({...Y,productId:parseInt(Y.productId),qty:parseFloat(Y.qty),price:parseFloat(Y.price),discount:parseFloat(Y.discount||0),memo:Y.memo||""})),subtotal:ee(),prevBalance:parseFloat(N),memo:$,paidAmount:parseFloat(oe),grandTotal:k()};try{let Y=a?parseInt(a):null;if(Y)await Le.sales.update(Y,Ne),alert("Sale updated!");else{if(Y=await Le.sales.add(Ne),!J){t(`/sales/${Y}`);return}if(!a){t(`/sales/${Y}?print=true`);return}}J?(Z(!0),_e(!0)):Z(!0)}catch(Y){console.error("Error saving sale:",Y),alert("Failed to save sale")}};ie.useEffect(()=>{new URLSearchParams(window.location.search).get("print")==="true"&&Q&&(window.history.replaceState({},"",window.location.pathname),_e(!0))},[Q]),ie.useEffect(()=>{if(he&&Q){const J=setTimeout(()=>{O(),_e(!1)},500);return()=>clearTimeout(J)}},[he,Q]);const _t=()=>s?.find(J=>J.id===parseInt(_))||{};return g.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 print:bg-white print:pb-0",children:[ke&&g.jsxs("div",{className:"sticky top-0 bg-white shadow-sm p-4 flex justify-between items-center z-10 no-print",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>t("/"),className:"p-2 hover:bg-gray-100 rounded-full",children:g.jsx(Bw,{size:20})}),g.jsx("h1",{className:"text-xl font-bold",children:a?"Invoice View":"New Sale"})]}),g.jsx("div",{className:"flex gap-2",children:Q?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>Qe(!1),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Screenshot Mode",children:g.jsx(u2,{size:20})}),g.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 text-blue-600 font-medium hover:bg-blue-50 rounded-lg",children:"Edit"}),g.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900",children:[g.jsx(m2,{size:18})," Save as PDF"]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-600 font-medium hover:bg-gray-100 rounded-lg",children:[g.jsx(Jw,{size:18})," Preview"]}),g.jsxs("button",{onClick:()=>ft(!1),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[g.jsx(Mb,{size:18})," Save"]})]})})]}),!ke&&g.jsx("button",{onClick:()=>Qe(!0),className:"fixed top-4 right-4 z-50 p-2 bg-gray-800 text-white rounded-full shadow-lg opacity-50 hover:opacity-100 transition-opacity no-print",title:"Exit Screenshot Mode",children:g.jsx(j2,{size:20})}),Q?g.jsx("div",{ref:M,children:g.jsx(sC,{settings:r,customer:_t(),saleDate:u,id:a,items:v,products:l,prevBalance:N,prevBalanceMemo:$,paidAmount:oe,subtotal:ee(),grandTotal:k()})}):g.jsxs("div",{className:"max-w-5xl mx-auto p-4 space-y-6",children:[g.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",value:u,onChange:J=>p(J.target.value),className:"w-full p-2 border rounded-md"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),g.jsxs("select",{value:_,onChange:J=>b(J.target.value),className:"w-full p-2 border rounded-md",children:[g.jsx("option",{value:"",children:"Select Customer"}),s?.map(J=>g.jsx("option",{value:J.id,children:J.name},J.id))]})]})]})}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[g.jsx("h2",{className:"font-semibold mb-4",children:"Items"}),g.jsxs("div",{children:[g.jsxs("div",{className:"hidden md:flex gap-2 border-b pb-2 mb-2 text-sm font-medium text-gray-600",children:[g.jsx("div",{className:"flex-1 min-w-[200px]",children:"Product"}),g.jsx("div",{className:"w-48",children:"Memo"}),g.jsx("div",{className:"w-20",children:"Qty"}),g.jsx("div",{className:"w-24",children:"Unit"}),g.jsx("div",{className:"w-24",children:"Price"}),g.jsx("div",{className:"w-24",children:"Discount"}),g.jsx("div",{className:"w-24 text-right",children:"Total"}),g.jsx("div",{className:"w-10"})]}),g.jsx("div",{className:"space-y-4 md:space-y-2",children:v.map((J,Ne)=>g.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-2 items-start border md:border-none p-4 md:p-0 rounded-lg md:rounded-none bg-gray-50 md:bg-white relative",children:[g.jsx("button",{onClick:()=>B(Ne),className:"absolute top-2 right-2 p-2 text-red-500 hover:bg-red-100 rounded-full md:hidden",children:g.jsx(Ys,{size:18})}),g.jsxs("div",{className:"w-full md:flex-1 md:min-w-[200px]",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Product"}),g.jsxs("select",{value:J.productId,onChange:Y=>F(Ne,"productId",Y.target.value),className:"w-full p-2 border rounded-md text-sm bg-white",children:[g.jsx("option",{value:"",children:"Select Product"}),l?.map(Y=>g.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),g.jsxs("div",{className:"w-full md:w-48",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Memo"}),g.jsx("input",{type:"text",placeholder:"Memo",value:J.memo||"",onChange:Y=>F(Ne,"memo",Y.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("div",{className:"w-1/2 md:w-20",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Qty"}),g.jsx("input",{type:"number",value:J.qty,onChange:Y=>F(Ne,"qty",Y.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Unit"}),g.jsxs("select",{value:J.unit,onChange:Y=>F(Ne,"unit",Y.target.value),className:"w-full p-2 border rounded-md text-sm bg-white",children:[g.jsx("option",{value:"Kg",children:"Kg"}),g.jsx("option",{value:"Pcs",children:"Pcs"})]})]})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Price"}),g.jsx("input",{type:"number",step:"0.01",value:J.price,onChange:Y=>F(Ne,"price",Y.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Discount"}),g.jsx("input",{type:"number",step:"0.01",value:J.discount,onChange:Y=>F(Ne,"discount",Y.target.value),className:"w-full p-2 border rounded-md text-sm text-red-600",placeholder:"0.00"})]})]}),g.jsxs("div",{className:"w-full md:w-24 md:text-right flex justify-between md:block items-center mt-2 md:mt-0 pt-2 md:pt-2 border-t md:border-none",children:[g.jsx("span",{className:"md:hidden text-sm font-bold text-gray-600",children:"Total:"}),g.jsx("span",{className:"font-medium text-sm",children:(J.qty*J.price-(J.discount||0)).toFixed(2)})]}),g.jsx("div",{className:"hidden md:flex w-10 justify-center",children:g.jsx("button",{onClick:()=>B(Ne),className:"p-2 text-red-500 hover:bg-red-50 rounded-full",children:g.jsx(Ys,{size:18})})})]},Ne))})]}),g.jsxs("button",{onClick:V,className:"mt-4 flex items-center gap-2 text-blue-600 font-medium hover:bg-blue-50 px-3 py-2 rounded-lg",children:[g.jsx(Ml,{size:18})," Add Item"]})]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"font-medium",children:"Subtotal"}),g.jsx("span",{className:"text-xl font-bold",children:ee().toFixed(2)})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous Balance"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",placeholder:"Memo (e.g. Bal b/f)",value:$,onChange:J=>ce(J.target.value),className:"flex-1 p-2 border rounded-md"}),g.jsx("input",{type:"number",step:"0.01",placeholder:"Amount",value:N,onChange:J=>I(J.target.value),className:"w-32 p-2 border rounded-md text-right"})]})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid"}),g.jsx("div",{className:"flex justify-end",children:g.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:oe,onChange:J=>U(J.target.value),className:"w-32 p-2 border rounded-md text-right font-bold text-green-700"})})]}),g.jsxs("div",{className:"flex justify-between items-center border-t pt-4 text-lg",children:[g.jsx("span",{className:"font-bold",children:"Grand Total"}),g.jsxs("span",{className:"font-bold text-blue-600",children:["RM ",k().toFixed(2)]})]})]})]})]})}function oC(){const a=Qn(()=>Le.vendors.toArray()),[t,r]=ie.useState(!1),[s,l]=ie.useState(null),[u,p]=ie.useState(""),_=ie.useRef(null),[b,v]=ie.useState({name:"",contact:"",email:"",address:""}),A=(Q=null)=>{Q?(l(Q),v({name:Q.name,contact:Q.contact,email:Q.email||"",address:Q.address||""})):(l(null),v({name:"",contact:"",email:"",address:""})),r(!0)},N=()=>{r(!1),l(null)},I=async Q=>{Q.preventDefault();try{s?await Le.vendors.update(s.id,b):await Le.vendors.add(b),N()}catch(Z){console.error("Failed to save vendor:",Z),alert("Error saving vendor")}},$=async Q=>{window.confirm("Are you sure you want to delete this vendor?")&&await Le.vendors.delete(Q)},ce=()=>{const Q=JSON.stringify(a,null,2),Z=new Blob([Q],{type:"application/json"}),he=URL.createObjectURL(Z),_e=document.createElement("a");_e.href=he,_e.download="vendors_backup.json",document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)},oe=Q=>{const Z=Q.target.files[0];if(!Z)return;const he=new FileReader;he.onload=async _e=>{try{const ke=JSON.parse(_e.target.result);Array.isArray(ke)?(await Le.vendors.bulkPut(ke),alert("Vendors imported successfully!")):alert("Invalid file format")}catch(ke){console.error("Import failed:",ke),alert("Failed to import vendors")}},he.readAsText(Z),Q.target.value=null},U=a?.filter(Q=>Q.name.toLowerCase().includes(u.toLowerCase())||Q.contact.includes(u))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Vendors"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>_.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(qh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:oe}),g.jsxs("button",{onClick:ce,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Uh,{size:16})," Export"]}),g.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Vendor"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search vendors...",value:u,onChange:Q=>p(Q.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(Q=>g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:Q.name}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>A(Q),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(Bh,{size:16})}),g.jsx("button",{onClick:()=>$(Q.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:16})})]})]}),g.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ib,{size:14,className:"text-gray-400"}),g.jsx("span",{children:Q.contact})]}),Q.email&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(jb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:Q.email})]}),Q.address&&g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Db,{size:14,className:"text-gray-400 mt-1"}),g.jsx("span",{className:"flex-1",children:Q.address})]})]})]},Q.id))}),U.length===0&&g.jsx("div",{className:"text-center py-12 text-gray-500",children:"No vendors found. Add one to get started."}),t&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:s?"Edit Vendor":"Add Vendor"}),g.jsxs("form",{onSubmit:I,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),g.jsx("input",{type:"text",required:!0,value:b.name,onChange:Q=>v({...b,name:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact No."}),g.jsx("input",{type:"text",required:!0,value:b.contact,onChange:Q=>v({...b,contact:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),g.jsx("input",{type:"email",value:b.email,onChange:Q=>v({...b,email:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),g.jsx("textarea",{value:b.address,onChange:Q=>v({...b,address:Q.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"3"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function lC(){const a=Qn(()=>Le.vendor_purchases.orderBy("id").reverse().toArray()),t=Qn(()=>Le.vendors.toArray()),[r,s]=ie.useState(""),[l,u]=ie.useState(!1),[p,_]=ie.useState(null),[b,v]=ie.useState({vendorId:"",date:fr(new Date),total:"",memo:""}),A=U=>t?.find(Q=>Q.id===U)?.name||"Unknown Vendor",N=(U=null)=>{U&&U.id?(_(U),v({vendorId:U.vendorId,date:U.date,total:U.total,memo:U.memo||""})):(_(null),v({vendorId:"",date:fr(new Date),total:"",memo:""})),u(!0)},I=()=>{u(!1),_(null)},$=async U=>{U.preventDefault();try{console.log("Saving vendor bill:",b);const Q=parseInt(b.vendorId),Z=parseFloat(b.total);if(!Q||isNaN(Q)){alert("Please select a valid vendor.");return}if(isNaN(Z)){alert("Please enter a valid total amount.");return}if(!b.date){alert("Please select a valid date.");return}const he={vendorId:Q,date:String(b.date),total:Z,memo:b.memo};p?await Le.vendor_purchases.update(p.id,he):await Le.vendor_purchases.add(he),I()}catch(Q){console.error("Failed to save vendor bill:",Q);const Z=Le.verno,he=Le.vendor_purchases?JSON.stringify(Le.vendor_purchases.schema):"Table Missing";alert(`DEBUG INFO:
Error: ${Q.name} - ${Q.message}

DB Version: ${Z}
Table Schema: ${he}

Please send me this screenshot!`)}},ce=async U=>{window.confirm("Are you sure you want to delete this vendor bill?")&&await Le.vendor_purchases.delete(U)},oe=a?.filter(U=>{const Q=A(U.vendorId).toLowerCase(),Z=fr(new Date(U.date)),he=U.memo?.toLowerCase()||"";return Q.includes(r.toLowerCase())||Z.includes(r)||he.includes(r.toLowerCase())})||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Vendor Bills"}),g.jsxs("button",{onClick:N,className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," New Bill"]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search by vendor, date, or memo...",value:r,onChange:U=>s(U.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Date"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Vendor"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Memo"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Total"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[oe.map(U=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3 text-sm",children:fr(new Date(U.date))}),g.jsx("td",{className:"px-4 py-3 font-medium",children:A(U.vendorId)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 italic",children:U.memo||"-"}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:["RM ",(U.total||0).toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>N(U),className:"text-blue-600 hover:text-blue-800 p-1",title:"Edit",children:g.jsx(Bh,{size:18})}),g.jsx("button",{onClick:()=>ce(U.id),className:"text-red-600 hover:text-red-800 p-1",title:"Delete",children:g.jsx(Ys,{size:18})})]})]},U.id)),oe.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No vendor bills found. Create a new bill to get started."})})]})]})}),l&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"Edit Vendor Bill":"New Vendor Bill"}),g.jsxs("form",{onSubmit:$,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",required:!0,value:b.date,onChange:U=>v({...b,date:U.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor"}),g.jsxs("select",{required:!0,value:b.vendorId,onChange:U=>v({...b,vendorId:U.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",children:[g.jsx("option",{value:"",children:"Select Vendor"}),t?.map(U=>g.jsx("option",{value:U.id,children:U.name},U.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount (RM)"}),g.jsxs("div",{className:"relative",children:[g.jsx(ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:b.total,onChange:U=>v({...b,total:U.target.value}),className:"w-full pl-10 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Memo (Optional)"}),g.jsx("textarea",{value:b.memo,onChange:U=>v({...b,memo:U.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"2",placeholder:"Notes or description..."})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function uC(){const[a,t]=ie.useState({start:fr(new Date(new Date().getFullYear(),new Date().getMonth(),1)),end:fr(new Date)}),[r,s]=ie.useState("sales"),l=Qn(async()=>(await Le.sales.where("date").between(a.start,a.end,!0,!0).toArray()).sort((v,A)=>new Date(A.date)-new Date(v.date)),[a]),u=Qn(()=>Le.products.toArray()),p=Qn(()=>Le.customers.toArray()),_=ie.useMemo(()=>{if(!l||!u||!p)return null;const b={revenue:0,paid:0,balance:0,count:l.length},v={},A={};return l.forEach(N=>{b.revenue+=N.subtotal||0,b.paid+=N.paidAmount||0,b.balance+=(N.grandTotal||0)-(N.paidAmount||0),N.items.forEach(I=>{v[I.productId]||(v[I.productId]={id:I.productId,name:u.find($=>$.id===I.productId)?.name||"Unknown",qty:0,revenue:0,unit:I.unit}),v[I.productId].qty+=parseFloat(I.qty)||0,v[I.productId].revenue+=I.qty*I.price-(I.discount||0)}),A[N.customerId]||(A[N.customerId]={id:N.customerId,name:p.find(I=>I.id===N.customerId)?.name||"Unknown",count:0,total:0}),A[N.customerId].count+=1,A[N.customerId].total+=N.subtotal||0}),{summary:b,products:Object.values(v).sort((N,I)=>I.revenue-N.revenue),customers:Object.values(A).sort((N,I)=>I.total-N.total)}},[l,u,p]);return _?g.jsxs("div",{className:"p-4 max-w-6xl mx-auto pb-24",children:[g.jsxs("h1",{className:"text-2xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[g.jsx(Hm,{className:"text-blue-600"})," Reports & Analytics"]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6 flex flex-col md:flex-row gap-4 items-end md:items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Start Date"}),g.jsx("input",{type:"date",value:a.start,onChange:b=>t(v=>({...v,start:b.target.value})),className:"p-2 border rounded-md text-sm w-full"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"End Date"}),g.jsx("input",{type:"date",value:a.end,onChange:b=>t(v=>({...v,end:b.target.value})),className:"p-2 border rounded-md text-sm w-full"})]})]}),g.jsxs("div",{className:"flex gap-4 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[g.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-green-600 font-bold uppercase",children:"Revenue"}),g.jsxs("p",{className:"text-lg font-bold text-green-900",children:["RM ",_.summary.revenue.toFixed(2)]})]}),g.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase",children:"Paid"}),g.jsxs("p",{className:"text-lg font-bold text-blue-900",children:["RM ",_.summary.paid.toFixed(2)]})]}),g.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-red-600 font-bold uppercase",children:"Balance"}),g.jsxs("p",{className:"text-lg font-bold text-red-900",children:["RM ",_.summary.balance.toFixed(2)]})]})]})]}),g.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[g.jsxs("button",{onClick:()=>s("sales"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="sales"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(ku,{size:16})," Sales"]}),g.jsxs("button",{onClick:()=>s("products"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="products"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(vh,{size:16})," Products"]}),g.jsxs("button",{onClick:()=>s("customers"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="customers"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(bh,{size:16})," Customers"]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r==="sales"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Date"}),g.jsx("th",{className:"p-3",children:"Customer"}),g.jsx("th",{className:"p-3 text-right",children:"Total"}),g.jsx("th",{className:"p-3 text-right",children:"Paid"}),g.jsx("th",{className:"p-3 text-right",children:"Balance"})]})}),g.jsxs("tbody",{className:"divide-y",children:[l.map(b=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3",children:fr(new Date(b.date))}),g.jsx("td",{className:"p-3 font-medium",children:p?.find(v=>v.id===b.customerId)?.name||"Unknown"}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",(b.grandTotal||0).toFixed(2)]}),g.jsxs("td",{className:"p-3 text-right text-green-600",children:["RM ",(b.paidAmount||0).toFixed(2)]}),g.jsxs("td",{className:"p-3 text-right text-red-600",children:["RM ",((b.grandTotal||0)-(b.paidAmount||0)).toFixed(2)]})]},b.id)),l.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:"No sales found in this period."})})]})]})}),r==="products"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Product Name"}),g.jsx("th",{className:"p-3 text-center",children:"Units Sold"}),g.jsx("th",{className:"p-3 text-right",children:"Total Revenue"})]})}),g.jsxs("tbody",{className:"divide-y",children:[_.products.map(b=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3 font-medium",children:b.name}),g.jsxs("td",{className:"p-3 text-center",children:[b.qty.toFixed(2)," ",b.unit]}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",b.revenue.toFixed(2)]})]},b.id)),_.products.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"p-8 text-center text-gray-500",children:"No product data available."})})]})]})}),r==="customers"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Customer Name"}),g.jsx("th",{className:"p-3 text-center",children:"Orders"}),g.jsx("th",{className:"p-3 text-right",children:"Total Spent"})]})}),g.jsxs("tbody",{className:"divide-y",children:[_.customers.map(b=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3 font-medium",children:b.name}),g.jsx("td",{className:"p-3 text-center",children:b.count}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",b.total.toFixed(2)]})]},b.id)),_.customers.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"p-8 text-center text-gray-500",children:"No customer data available."})})]})]})})]})]}):g.jsx("div",{className:"p-8 text-center",children:"Loading reports..."})}function cC(){const{user:a}=Np();return a?g.jsx(Eb,{}):g.jsx(ew,{to:"/login",replace:!0})}function hC(){const[a,t]=ie.useState(""),[r,s]=ie.useState(""),[l,u]=ie.useState(""),{login:p}=Np(),_=Ol(),b=async v=>{v.preventDefault(),u("");const A=await p(a,r);A.success?_("/"):u(A.message)};return g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),g.jsx("p",{className:"text-gray-500 mt-2",children:"Please sign in to continue"})]}),g.jsxs("form",{onSubmit:b,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(Vb,{size:20,className:"text-gray-400"})}),g.jsx("input",{type:"text",value:a,onChange:v=>t(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your username",required:!0})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(Cb,{size:20,className:"text-gray-400"})}),g.jsx("input",{type:"password",value:r,onChange:v=>s(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",required:!0})]})]}),l&&g.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 p-2 rounded",children:l}),g.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign In"})]})]})})}function fC(){return g.jsx(JR,{children:g.jsx(Sw,{basename:"/spfamilyventuresbook",children:g.jsxs(nw,{children:[g.jsx(Xr,{path:"/login",element:g.jsx(hC,{})}),g.jsx(Xr,{element:g.jsx(cC,{}),children:g.jsxs(Xr,{path:"/",element:g.jsx(LR,{}),children:[g.jsx(Xr,{index:!0,element:g.jsx(QR,{})}),g.jsx(Xr,{path:"sales",element:g.jsx(nC,{})}),g.jsx(Xr,{path:"sales/new",element:g.jsx(fb,{})}),g.jsx(Xr,{path:"sales/:id",element:g.jsx(fb,{})}),g.jsx(Xr,{path:"products",element:g.jsx(eC,{})}),g.jsx(Xr,{path:"customers",element:g.jsx(tC,{})}),g.jsx(Xr,{path:"vendors",element:g.jsx(oC,{})}),g.jsx(Xr,{path:"vendor-bills",element:g.jsx(lC,{})}),g.jsx(Xr,{path:"reports",element:g.jsx(uC,{})}),g.jsx(Xr,{path:"settings",element:g.jsx(WR,{})})]})})]})})})}class dC extends So.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("Uncaught error:",t,r)}render(){return this.state.hasError?g.jsxs("div",{className:"p-8 bg-red-50 text-red-900 min-h-screen",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong."}),g.jsxs("details",{className:"whitespace-pre-wrap",children:[this.state.error&&this.state.error.toString(),g.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}oE.createRoot(document.getElementById("root")).render(g.jsx(So.StrictMode,{children:g.jsx(dC,{children:g.jsx(fC,{})})}));
