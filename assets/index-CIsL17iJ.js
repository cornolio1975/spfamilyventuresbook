(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var Y1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pm(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Xd={exports:{}},wu={};var Cv;function X1(){if(Cv)return wu;Cv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,u){var p=null;if(u!==void 0&&(p=""+u),l.key!==void 0&&(p=""+l.key),"key"in l){u={};for(var _ in l)_!=="key"&&(u[_]=l[_])}else u=l;return l=u.ref,{$$typeof:a,type:s,key:p,ref:l!==void 0?l:null,props:u}}return wu.Fragment=t,wu.jsx=r,wu.jsxs=r,wu}var Dv;function $1(){return Dv||(Dv=1,Xd.exports=X1()),Xd.exports}var g=$1(),$d={exports:{}},ct={};var jv;function Z1(){if(jv)return ct;jv=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),p=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),I=Symbol.iterator;function X(H){return H===null||typeof H!="object"?null:(H=I&&H[I]||H["@@iterator"],typeof H=="function"?H:null)}var ue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oe=Object.assign,B={};function L(H,be,Ie){this.props=H,this.context=be,this.refs=B,this.updater=Ie||ue}L.prototype.isReactComponent={},L.prototype.setState=function(H,be){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,be,"setState")},L.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function ee(){}ee.prototype=L.prototype;function fe(H,be,Ie){this.props=H,this.context=be,this.refs=B,this.updater=Ie||ue}var xe=fe.prototype=new ee;xe.constructor=fe,oe(xe,L.prototype),xe.isPureReactComponent=!0;var Pe=Array.isArray;function Ye(){}var M={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function V(H,be,Ie){var Re=Ie.ref;return{$$typeof:a,type:H,key:be,ref:Re!==void 0?Re:null,props:Ie}}function F(H,be){return V(H.type,be,H.props)}function q(H){return typeof H=="object"&&H!==null&&H.$$typeof===a}function J(H){var be={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ie){return be[Ie]})}var k=/\/+/g;function yt(H,be){return typeof H=="object"&&H!==null&&H.key!=null?J(""+H.key):be.toString(36)}function Nt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Ye,Ye):(H.status="pending",H.then(function(be){H.status==="pending"&&(H.status="fulfilled",H.value=be)},function(be){H.status==="pending"&&(H.status="rejected",H.reason=be)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function W(H,be,Ie,Re,Fe){var $e=typeof H;($e==="undefined"||$e==="boolean")&&(H=null);var rt=!1;if(H===null)rt=!0;else switch($e){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(H.$$typeof){case a:case t:rt=!0;break;case A:return rt=H._init,W(rt(H._payload),be,Ie,Re,Fe)}}if(rt)return Fe=Fe(H),rt=Re===""?"."+yt(H,0):Re,Pe(Fe)?(Ie="",rt!=null&&(Ie=rt.replace(k,"$&/")+"/"),W(Fe,be,Ie,"",function(fn){return fn})):Fe!=null&&(q(Fe)&&(Fe=F(Fe,Ie+(Fe.key==null||H&&H.key===Fe.key?"":(""+Fe.key).replace(k,"$&/")+"/")+rt)),be.push(Fe)),1;rt=0;var Ft=Re===""?".":Re+":";if(Pe(H))for(var Oe=0;Oe<H.length;Oe++)Re=H[Oe],$e=Ft+yt(Re,Oe),rt+=W(Re,be,Ie,$e,Fe);else if(Oe=X(H),typeof Oe=="function")for(H=Oe.call(H),Oe=0;!(Re=H.next()).done;)Re=Re.value,$e=Ft+yt(Re,Oe++),rt+=W(Re,be,Ie,$e,Fe);else if($e==="object"){if(typeof H.then=="function")return W(Nt(H),be,Ie,Re,Fe);throw be=String(H),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return rt}function Ae(H,be,Ie){if(H==null)return H;var Re=[],Fe=0;return W(H,Re,"","",function($e){return be.call(Ie,$e,Fe++)}),Re}function Ne(H){if(H._status===-1){var be=H._result;be=be(),be.then(function(Ie){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ie)},function(Ie){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ie)}),H._status===-1&&(H._status=0,H._result=be)}if(H._status===1)return H._result.default;throw H._result}var at=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},tt={map:Ae,forEach:function(H,be,Ie){Ae(H,function(){be.apply(this,arguments)},Ie)},count:function(H){var be=0;return Ae(H,function(){be++}),be},toArray:function(H){return Ae(H,function(be){return be})||[]},only:function(H){if(!q(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ct.Activity=N,ct.Children=tt,ct.Component=L,ct.Fragment=r,ct.Profiler=l,ct.PureComponent=fe,ct.StrictMode=s,ct.Suspense=v,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ct.__COMPILER_RUNTIME={__proto__:null,c:function(H){return M.H.useMemoCache(H)}},ct.cache=function(H){return function(){return H.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(H,be,Ie){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Re=oe({},H.props),Fe=H.key;if(be!=null)for($e in be.key!==void 0&&(Fe=""+be.key),be)!O.call(be,$e)||$e==="key"||$e==="__self"||$e==="__source"||$e==="ref"&&be.ref===void 0||(Re[$e]=be[$e]);var $e=arguments.length-2;if($e===1)Re.children=Ie;else if(1<$e){for(var rt=Array($e),Ft=0;Ft<$e;Ft++)rt[Ft]=arguments[Ft+2];Re.children=rt}return V(H.type,Fe,Re)},ct.createContext=function(H){return H={$$typeof:p,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},ct.createElement=function(H,be,Ie){var Re,Fe={},$e=null;if(be!=null)for(Re in be.key!==void 0&&($e=""+be.key),be)O.call(be,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(Fe[Re]=be[Re]);var rt=arguments.length-2;if(rt===1)Fe.children=Ie;else if(1<rt){for(var Ft=Array(rt),Oe=0;Oe<rt;Oe++)Ft[Oe]=arguments[Oe+2];Fe.children=Ft}if(H&&H.defaultProps)for(Re in rt=H.defaultProps,rt)Fe[Re]===void 0&&(Fe[Re]=rt[Re]);return V(H,$e,Fe)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(H){return{$$typeof:_,render:H}},ct.isValidElement=q,ct.lazy=function(H){return{$$typeof:A,_payload:{_status:-1,_result:H},_init:Ne}},ct.memo=function(H,be){return{$$typeof:b,type:H,compare:be===void 0?null:be}},ct.startTransition=function(H){var be=M.T,Ie={};M.T=Ie;try{var Re=H(),Fe=M.S;Fe!==null&&Fe(Ie,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(Ye,at)}catch($e){at($e)}finally{be!==null&&Ie.types!==null&&(be.types=Ie.types),M.T=be}},ct.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ct.use=function(H){return M.H.use(H)},ct.useActionState=function(H,be,Ie){return M.H.useActionState(H,be,Ie)},ct.useCallback=function(H,be){return M.H.useCallback(H,be)},ct.useContext=function(H){return M.H.useContext(H)},ct.useDebugValue=function(){},ct.useDeferredValue=function(H,be){return M.H.useDeferredValue(H,be)},ct.useEffect=function(H,be){return M.H.useEffect(H,be)},ct.useEffectEvent=function(H){return M.H.useEffectEvent(H)},ct.useId=function(){return M.H.useId()},ct.useImperativeHandle=function(H,be,Ie){return M.H.useImperativeHandle(H,be,Ie)},ct.useInsertionEffect=function(H,be){return M.H.useInsertionEffect(H,be)},ct.useLayoutEffect=function(H,be){return M.H.useLayoutEffect(H,be)},ct.useMemo=function(H,be){return M.H.useMemo(H,be)},ct.useOptimistic=function(H,be){return M.H.useOptimistic(H,be)},ct.useReducer=function(H,be,Ie){return M.H.useReducer(H,be,Ie)},ct.useRef=function(H){return M.H.useRef(H)},ct.useState=function(H){return M.H.useState(H)},ct.useSyncExternalStore=function(H,be,Ie){return M.H.useSyncExternalStore(H,be,Ie)},ct.useTransition=function(){return M.H.useTransition()},ct.version="19.2.0",ct}var Iv;function Ph(){return Iv||(Iv=1,$d.exports=Z1()),$d.exports}var ie=Ph();const So=Pm(ie);var Zd={exports:{}},Tu={},Jd={exports:{}},Wd={};var Ov;function J1(){return Ov||(Ov=1,(function(a){function t(W,Ae){var Ne=W.length;W.push(Ae);e:for(;0<Ne;){var at=Ne-1>>>1,tt=W[at];if(0<l(tt,Ae))W[at]=Ae,W[Ne]=tt,Ne=at;else break e}}function r(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var Ae=W[0],Ne=W.pop();if(Ne!==Ae){W[0]=Ne;e:for(var at=0,tt=W.length,H=tt>>>1;at<H;){var be=2*(at+1)-1,Ie=W[be],Re=be+1,Fe=W[Re];if(0>l(Ie,Ne))Re<tt&&0>l(Fe,Ie)?(W[at]=Fe,W[Re]=Ne,at=Re):(W[at]=Ie,W[be]=Ne,at=be);else if(Re<tt&&0>l(Fe,Ne))W[at]=Fe,W[Re]=Ne,at=Re;else break e}}return Ae}function l(W,Ae){var Ne=W.sortIndex-Ae.sortIndex;return Ne!==0?Ne:W.id-Ae.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var p=Date,_=p.now();a.unstable_now=function(){return p.now()-_}}var v=[],b=[],A=1,N=null,I=3,X=!1,ue=!1,oe=!1,B=!1,L=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function xe(W){for(var Ae=r(b);Ae!==null;){if(Ae.callback===null)s(b);else if(Ae.startTime<=W)s(b),Ae.sortIndex=Ae.expirationTime,t(v,Ae);else break;Ae=r(b)}}function Pe(W){if(oe=!1,xe(W),!ue)if(r(v)!==null)ue=!0,Ye||(Ye=!0,J());else{var Ae=r(b);Ae!==null&&Nt(Pe,Ae.startTime-W)}}var Ye=!1,M=-1,O=5,V=-1;function F(){return B?!0:!(a.unstable_now()-V<O)}function q(){if(B=!1,Ye){var W=a.unstable_now();V=W;var Ae=!0;try{e:{ue=!1,oe&&(oe=!1,ee(M),M=-1),X=!0;var Ne=I;try{t:{for(xe(W),N=r(v);N!==null&&!(N.expirationTime>W&&F());){var at=N.callback;if(typeof at=="function"){N.callback=null,I=N.priorityLevel;var tt=at(N.expirationTime<=W);if(W=a.unstable_now(),typeof tt=="function"){N.callback=tt,xe(W),Ae=!0;break t}N===r(v)&&s(v),xe(W)}else s(v);N=r(v)}if(N!==null)Ae=!0;else{var H=r(b);H!==null&&Nt(Pe,H.startTime-W),Ae=!1}}break e}finally{N=null,I=Ne,X=!1}Ae=void 0}}finally{Ae?J():Ye=!1}}}var J;if(typeof fe=="function")J=function(){fe(q)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,yt=k.port2;k.port1.onmessage=q,J=function(){yt.postMessage(null)}}else J=function(){L(q,0)};function Nt(W,Ae){M=L(function(){W(a.unstable_now())},Ae)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(W){W.callback=null},a.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<W?Math.floor(1e3/W):5},a.unstable_getCurrentPriorityLevel=function(){return I},a.unstable_next=function(W){switch(I){case 1:case 2:case 3:var Ae=3;break;default:Ae=I}var Ne=I;I=Ae;try{return W()}finally{I=Ne}},a.unstable_requestPaint=function(){B=!0},a.unstable_runWithPriority=function(W,Ae){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ne=I;I=W;try{return Ae()}finally{I=Ne}},a.unstable_scheduleCallback=function(W,Ae,Ne){var at=a.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?at+Ne:at):Ne=at,W){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=Ne+tt,W={id:A++,callback:Ae,priorityLevel:W,startTime:Ne,expirationTime:tt,sortIndex:-1},Ne>at?(W.sortIndex=Ne,t(b,W),r(v)===null&&W===r(b)&&(oe?(ee(M),M=-1):oe=!0,Nt(Pe,Ne-at))):(W.sortIndex=tt,t(v,W),ue||X||(ue=!0,Ye||(Ye=!0,J()))),W},a.unstable_shouldYield=F,a.unstable_wrapCallback=function(W){var Ae=I;return function(){var Ne=I;I=Ae;try{return W.apply(this,arguments)}finally{I=Ne}}}})(Wd)),Wd}var Mv;function W1(){return Mv||(Mv=1,Jd.exports=J1()),Jd.exports}var em={exports:{}},yr={};var Vv;function eE(){if(Vv)return yr;Vv=1;var a=Ph();function t(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)b+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(v,b,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:N==null?null:""+N,children:v,containerInfo:b,implementation:A}}var p=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return yr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yr.createPortal=function(v,b){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(t(299));return u(v,b,null,A)},yr.flushSync=function(v){var b=p.T,A=s.p;try{if(p.T=null,s.p=2,v)return v()}finally{p.T=b,s.p=A,s.d.f()}},yr.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(v,b))},yr.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},yr.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var A=b.as,N=_(A,b.crossOrigin),I=typeof b.integrity=="string"?b.integrity:void 0,X=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;A==="style"?s.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:N,integrity:I,fetchPriority:X}):A==="script"&&s.d.X(v,{crossOrigin:N,integrity:I,fetchPriority:X,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},yr.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var A=_(b.as,b.crossOrigin);s.d.M(v,{crossOrigin:A,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(v)},yr.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var A=b.as,N=_(A,b.crossOrigin);s.d.L(v,A,{crossOrigin:N,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},yr.preloadModule=function(v,b){if(typeof v=="string")if(b){var A=_(b.as,b.crossOrigin);s.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:A,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(v)},yr.requestFormReset=function(v){s.d.r(v)},yr.unstable_batchedUpdates=function(v,b){return v(b)},yr.useFormState=function(v,b,A){return p.H.useFormState(v,b,A)},yr.useFormStatus=function(){return p.H.useHostTransitionStatus()},yr.version="19.2.0",yr}var kv;function tE(){if(kv)return em.exports;kv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),em.exports=eE(),em.exports}var Pv;function nE(){if(Pv)return Tu;Pv=1;var a=W1(),t=Ph(),r=tE();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function p(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function v(e){if(u(e)!==e)throw Error(s(188))}function b(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,o=n;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){i=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return v(f),e;if(m===o)return v(f),n;m=m.sibling}throw Error(s(188))}if(i.return!==o.return)i=f,o=m;else{for(var w=!1,C=f.child;C;){if(C===i){w=!0,i=f,o=m;break}if(C===o){w=!0,o=f,i=m;break}C=C.sibling}if(!w){for(C=m.child;C;){if(C===i){w=!0,i=m,o=f;break}if(C===o){w=!0,o=m,i=f;break}C=C.sibling}if(!w)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var N=Object.assign,I=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),ue=Symbol.for("react.portal"),oe=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var k=Symbol.for("react.client.reference");function yt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===k?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case oe:return"Fragment";case L:return"Profiler";case B:return"StrictMode";case Pe:return"Suspense";case Ye:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ue:return"Portal";case fe:return e.displayName||"Context";case ee:return(e._context.displayName||"Context")+".Consumer";case xe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:yt(e.type)||"Memo";case O:n=e._payload,e=e._init;try{return yt(e(n))}catch{}}return null}var Nt=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},at=[],tt=-1;function H(e){return{current:e}}function be(e){0>tt||(e.current=at[tt],at[tt]=null,tt--)}function Ie(e,n){tt++,at[tt]=e.current,e.current=n}var Re=H(null),Fe=H(null),$e=H(null),rt=H(null);function Ft(e,n){switch(Ie($e,n),Ie(Fe,e),Ie(Re,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Jy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Jy(n),e=Wy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}be(Re),Ie(Re,e)}function Oe(){be(Re),be(Fe),be($e)}function fn(e){e.memoizedState!==null&&Ie(rt,e);var n=Re.current,i=Wy(n,e.type);n!==i&&(Ie(Fe,e),Ie(Re,i))}function On(e){Fe.current===e&&(be(Re),be(Fe)),rt.current===e&&(be(rt),bu._currentValue=Ne)}var Ge,Je;function Ht(e){if(Ge===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Ge=n&&n[1]||"",Je=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ge+e+Je}var pt=!1;function zt(e,n){if(!e||pt)return"";pt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ge){var me=ge}Reflect.construct(e,[],we)}else{try{we.call()}catch(ge){me=ge}e.call(we.prototype)}}else{try{throw Error()}catch(ge){me=ge}(we=e())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ge){if(ge&&me&&typeof ge.stack=="string")return[ge.stack,me.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),w=m[0],C=m[1];if(w&&C){var z=w.split(`
`),he=C.split(`
`);for(f=o=0;o<z.length&&!z[o].includes("DetermineComponentFrameRoot");)o++;for(;f<he.length&&!he[f].includes("DetermineComponentFrameRoot");)f++;if(o===z.length||f===he.length)for(o=z.length-1,f=he.length-1;1<=o&&0<=f&&z[o]!==he[f];)f--;for(;1<=o&&0<=f;o--,f--)if(z[o]!==he[f]){if(o!==1||f!==1)do if(o--,f--,0>f||z[o]!==he[f]){var ve=`
`+z[o].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),ve}while(1<=o&&0<=f);break}}}finally{pt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ht(i):""}function on(e,n){switch(e.tag){case 26:case 27:case 5:return Ht(e.type);case 16:return Ht("Lazy");case 13:return e.child!==n&&n!==null?Ht("Suspense Fallback"):Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 15:return zt(e.type,!1);case 11:return zt(e.type.render,!1);case 1:return zt(e.type,!0);case 31:return Ht("Activity");default:return""}}function Yn(e){try{var n="",i=null;do n+=on(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Rt=Object.prototype.hasOwnProperty,Mt=a.unstable_scheduleCallback,wn=a.unstable_cancelCallback,Lo=a.unstable_shouldYield,ri=a.unstable_requestPaint,Xn=a.unstable_now,Zr=a.unstable_getCurrentPriorityLevel,Jr=a.unstable_ImmediatePriority,Wr=a.unstable_UserBlockingPriority,ba=a.unstable_NormalPriority,Ei=a.unstable_LowPriority,rs=a.unstable_IdlePriority,wi=a.log,_a=a.unstable_setDisableYieldValue,fr=null,Tn=null;function Sn(e){if(typeof wi=="function"&&_a(e),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(fr,e)}catch{}}var Ue=Math.clz32?Math.clz32:Ti,ai=Math.log,Nr=Math.LN2;function Ti(e){return e>>>=0,e===0?32:31-(ai(e)/Nr|0)|0}var ke=256,Ba=262144,dn=4194304;function Rr(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ea(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var f=0,m=e.suspendedLanes,w=e.pingedLanes;e=e.warmLanes;var C=o&134217727;return C!==0?(o=C&~m,o!==0?f=Rr(o):(w&=C,w!==0?f=Rr(w):i||(i=C&~e,i!==0&&(f=Rr(i))))):(C=o&~m,C!==0?f=Rr(C):w!==0?f=Rr(w):i||(i=o&~e,i!==0&&(f=Rr(i)))),f===0?0:n!==0&&n!==f&&(n&m)===0&&(m=f&-f,i=n&-n,m>=i||m===32&&(i&4194048)!==0)?n:f}function xr(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ul(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(){var e=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),e}function ar(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Cr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function to(e,n,i,o,f,m){var w=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,z=e.expirationTimes,he=e.hiddenUpdates;for(i=w&~i;0<i;){var ve=31-Ue(i),we=1<<ve;C[ve]=0,z[ve]=-1;var me=he[ve];if(me!==null)for(he[ve]=null,ve=0;ve<me.length;ve++){var ge=me[ve];ge!==null&&(ge.lane&=-536870913)}i&=~we}o!==0&&xa(e,o,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(w&~n))}function xa(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ue(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Ut(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-Ue(i),f=1<<o;f&n|e[o]&n&&(e[o]|=n),i&=~f}}function ln(e,n){var i=n&-n;return i=(i&42)!==0?1:Si(i),(i&(e.suspendedLanes|n))!==0?0:i}function Si(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ai(){var e=Ae.p;return e!==0?e:(e=window.event,e===void 0?32:Ev(e.type))}function dr(e,n){var i=Ae.p;try{return Ae.p=e,n()}finally{Ae.p=i}}var ta=Math.random().toString(36).slice(2),Kt="__reactFiber$"+ta,nn="__reactProps$"+ta,Kn="__reactContainer$"+ta,qa="__reactEvents$"+ta,Bl="__reactListeners$"+ta,na="__reactHandles$"+ta,no="__reactResources$"+ta,$n="__reactMarker$"+ta;function Ni(e){delete e[Kt],delete e[nn],delete e[qa],delete e[Bl],delete e[na]}function jr(e){var n=e[Kt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Kn]||i[Kt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=sv(e);e!==null;){if(i=e[Kt])return i;e=sv(e)}return n}e=i,i=e.parentNode}return null}function jt(e){if(e=e[Kt]||e[Kn]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function An(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Mn(e){var n=e[no];return n||(n=e[no]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function mn(e){e[$n]=!0}var Ea=new Set,ii={};function Ir(e,n){Or(e,n),Or(e+"Capture",n)}function Or(e,n){for(ii[e]=n,e=0;e<n.length;e++)Ea.add(n[e])}var ra=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},si={};function ro(e){return Rt.call(si,e)?!0:Rt.call(as,e)?!1:ra.test(e)?si[e]=!0:(as[e]=!0,!1)}function ft(e,n,i){if(ro(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function mr(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function pn(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function gn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mr(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function is(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(w){i=""+w,m.call(this,w)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Vt(e){if(!e._valueTracker){var n=Mr(e)?"checked":"value";e._valueTracker=is(e,n,""+e[n])}}function oi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=Mr(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function _t(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var aa=/[\n"\\]/g;function Vn(e){return e.replace(aa,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ia(e,n,i,o,f,m,w,C){e.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.type=w:e.removeAttribute("type"),n!=null?w==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+gn(n)):e.value!==""+gn(n)&&(e.value=""+gn(n)):w!=="submit"&&w!=="reset"||e.removeAttribute("value"),n!=null?Ri(e,w,gn(n)):i!=null?Ri(e,w,gn(i)):o!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+gn(C):e.removeAttribute("name")}function ss(e,n,i,o,f,m,w,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Vt(e);return}i=i!=null?""+gn(i):"",n=n!=null?""+gn(n):i,C||n===e.value||(e.value=n),e.defaultValue=n}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=C?e.checked:!!o,e.defaultChecked=!!o,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.name=w),Vt(e)}function Ri(e,n,i){n==="number"&&_t(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function sa(e,n,i,o){if(e=e.options,n){n={};for(var f=0;f<i.length;f++)n["$"+i[f]]=!0;for(i=0;i<e.length;i++)f=n.hasOwnProperty("$"+e[i].value),e[i].selected!==f&&(e[i].selected=f),f&&o&&(e[i].defaultSelected=!0)}else{for(i=""+gn(i),n=null,f=0;f<e.length;f++){if(e[f].value===i){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function ao(e,n,i){if(n!=null&&(n=""+gn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+gn(i):""}function oa(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(s(92));if(Nt(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=gn(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Vt(e)}function ir(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Uo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bt(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||Uo.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function os(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in n)o=n[f],n.hasOwnProperty(f)&&i[f]!==o&&bt(e,f,o)}else for(var m in n)n.hasOwnProperty(m)&&bt(e,m,n[m])}function ls(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_n=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(e){return _n.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pr(){}var Vr=null;function Er(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fa=null,Gt=null;function Zn(e){var n=jt(e);if(n&&(e=n.stateNode)){var i=e[nn]||null;e:switch(e=n.stateNode,n.type){case"input":if(ia(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Vn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var f=o[nn]||null;if(!f)throw Error(s(90));ia(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&oi(o)}break e;case"textarea":ao(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&sa(e,!!i.multiple,n,!1)}}}var wa=!1;function kr(e,n,i){if(wa)return e(n,i);wa=!0;try{var o=e(n);return o}finally{if(wa=!1,(Fa!==null||Gt!==null)&&(Ic(),Fa&&(n=Fa,e=Gt,Gt=Fa=null,Zn(n),e)))for(n=0;n<e.length;n++)Zn(e[n])}}function wr(e,n){var i=e.stateNode;if(i===null)return null;var o=i[nn]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(Nn)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{Ci=!1}var Pr=null,us=null,Ha=null;function Ka(){if(Ha)return Ha;var e,n=us,i=n.length,o,f="value"in Pr?Pr.value:Pr.textContent,m=f.length;for(e=0;e<i&&n[e]===f[e];e++);var w=i-e;for(o=1;o<=w&&n[i-o]===f[m-o];o++);return Ha=f.slice(e,1<o?1-o:void 0)}function Ga(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ta(){return!0}function ua(){return!1}function yn(e){function n(i,o,f,m,w){this._reactName=i,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(i=e[C],this[C]=i?i(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ta:ua,this.isPropagationStopped=ua,this}return N(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),n}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=yn(Qa),ca=N({},Qa,{view:0,detail:0}),li=yn(ca),Aa,cs,Na,hs=N({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Na&&(Na&&e.type==="mousemove"?(Aa=e.screenX-Na.screenX,cs=e.screenY-Na.screenY):cs=Aa=0,Na=e),Aa)},movementY:function(e){return"movementY"in e?e.movementY:cs}}),Di=yn(hs),Ya=N({},hs,{dataTransfer:0}),io=yn(Ya),ji=N({},ca,{relatedTarget:0}),Ra=yn(ji),ui=N({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),so=yn(ui),fs=N({},Qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xa=yn(fs),ds=N({},Qa,{data:0}),Lr=yn(ds),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ci(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Rn[e])?!!n[e]:!1}function zr(){return ci}var Jn=N({},ca,{key:function(e){if(e.key){var n=ms[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(e){return e.type==="keypress"?Ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ii=yn(Jn),oo=N({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=yn(oo),c=N({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),x=yn(c),T=N({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=yn(T),se=N({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pe=yn(se),Me=N({},Qa,{newState:0,oldState:0}),lt=yn(Me),vn=[9,13,27,32],Ct=Nn&&"CompositionEvent"in window,Qt=null;Nn&&"documentMode"in document&&(Qt=document.documentMode);var Ur=Nn&&"TextEvent"in window&&!Qt,Br=Nn&&(!Ct||Qt&&8<Qt&&11>=Qt),Tr=" ",ha=!1;function hi(e,n){switch(e){case"keyup":return vn.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gs(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oi=!1;function Ju(e,n){switch(e){case"compositionend":return gs(n);case"keypress":return n.which!==32?null:(ha=!0,Tr);case"textInput":return e=n.data,e===Tr&&ha?null:e;default:return null}}function uf(e,n){if(Oi)return e==="compositionend"||!Ct&&hi(e,n)?(e=Ka(),Ha=us=Pr=null,Oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Br&&n.locale!=="ko"?null:n.data;default:return null}}var Wu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Wu[e.type]:n==="textarea"}function ql(e,n,i,o){Fa?Gt?Gt.push(o):Gt=[o]:Fa=o,n=zc(n,"onChange"),0<n.length&&(i=new Sa("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var ys=null,lo=null;function cf(e){Gy(e,0)}function Fo(e){var n=An(e);if(oi(n))return e}function uo(e,n){if(e==="change")return n}var Da=!1;if(Nn){var rn;if(Nn){var vs="oninput"in document;if(!vs){var Sr=document.createElement("div");Sr.setAttribute("oninput","return;"),vs=typeof Sr.oninput=="function"}rn=vs}else rn=!1;Da=rn&&(!document.documentMode||9<document.documentMode)}function ec(){ys&&(ys.detachEvent("onpropertychange",Ho),lo=ys=null)}function Ho(e){if(e.propertyName==="value"&&Fo(lo)){var n=[];ql(n,lo,e,Er(e)),kr(cf,n)}}function tc(e,n,i){e==="focusin"?(ec(),ys=n,lo=i,ys.attachEvent("onpropertychange",Ho)):e==="focusout"&&ec()}function Mi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fo(lo)}function Fl(e,n){if(e==="click")return Fo(n)}function bs(e,n){if(e==="input"||e==="change")return Fo(n)}function fi(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var gr=typeof Object.is=="function"?Object.is:fi;function h(e,n){if(gr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var f=i[o];if(!Rt.call(n,f)||!gr(e[f],n[f]))return!1}return!0}function d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function y(e,n){var i=d(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=d(i)}}function E(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?E(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function S(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=_t(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=_t(e.document)}return n}function R(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var j=Nn&&"documentMode"in document&&11>=document.documentMode,P=null,K=null,G=null,te=!1;function U(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;te||P==null||P!==_t(o)||(o=P,"selectionStart"in o&&R(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),G&&h(G,o)||(G=o,o=zc(K,"onSelect"),0<o.length&&(n=new Sa("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=P)))}function re(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Q={animationend:re("Animation","AnimationEnd"),animationiteration:re("Animation","AnimationIteration"),animationstart:re("Animation","AnimationStart"),transitionrun:re("Transition","TransitionRun"),transitionstart:re("Transition","TransitionStart"),transitioncancel:re("Transition","TransitionCancel"),transitionend:re("Transition","TransitionEnd")},$={},Z={};Nn&&(Z=document.createElement("div").style,"AnimationEvent"in window||(delete Q.animationend.animation,delete Q.animationiteration.animation,delete Q.animationstart.animation),"TransitionEvent"in window||delete Q.transitionend.transition);function ne(e){if($[e])return $[e];if(!Q[e])return e;var n=Q[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Z)return $[e]=n[i];return e}var le=ne("animationend"),de=ne("animationiteration"),ye=ne("animationstart"),Ee=ne("transitionrun"),je=ne("transitionstart"),ze=ne("transitioncancel"),Ce=ne("transitionend"),Ve=new Map,Le="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Le.push("scrollEnd");function De(e,n){Ve.set(e,n),Ir(n,[e])}var qe=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},We=[],ot=0,dt=0;function Wn(){for(var e=ot,n=dt=ot=0;n<e;){var i=We[n];We[n++]=null;var o=We[n];We[n++]=null;var f=We[n];We[n++]=null;var m=We[n];if(We[n++]=null,o!==null&&f!==null){var w=o.pending;w===null?f.next=f:(f.next=w.next,w.next=f),o.pending=f}m!==0&&co(i,f,m)}}function st(e,n,i,o){We[ot++]=e,We[ot++]=n,We[ot++]=i,We[ot++]=o,dt|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function kn(e,n,i,o){return st(e,n,i,o),Pn(e)}function un(e,n){return st(e,null,null,n),Pn(e)}function co(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var f=!1,m=e.return;m!==null;)m.childLanes|=i,o=m.alternate,o!==null&&(o.childLanes|=i),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&n!==null&&(f=31-Ue(i),e=m.hiddenUpdates,o=e[f],o===null?e[f]=[n]:o.push(n),n.lane=i|536870912),m):null}function Pn(e){if(50<fu)throw fu=0,bd=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var qr={};function Hl(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,n,i,o){return new Hl(e,n,i,o)}function hf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vi(e,n){var i=e.alternate;return i===null?(i=fa(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Rp(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function nc(e,n,i,o,f,m){var w=0;if(o=e,typeof e=="function")hf(e)&&(w=1);else if(typeof e=="string")w=k1(e,i,Re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=fa(31,i,n,f),e.elementType=V,e.lanes=m,e;case oe:return ho(i.children,f,m,n);case B:w=8,f|=24;break;case L:return e=fa(12,i,n,f|2),e.elementType=L,e.lanes=m,e;case Pe:return e=fa(13,i,n,f),e.elementType=Pe,e.lanes=m,e;case Ye:return e=fa(19,i,n,f),e.elementType=Ye,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:w=10;break e;case ee:w=9;break e;case xe:w=11;break e;case M:w=14;break e;case O:w=16,o=null;break e}w=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=fa(w,i,n,f),n.elementType=e,n.type=o,n.lanes=m,n}function ho(e,n,i,o){return e=fa(7,e,o,n),e.lanes=i,e}function ff(e,n,i){return e=fa(6,e,null,n),e.lanes=i,e}function Cp(e){var n=fa(18,null,null,0);return n.stateNode=e,n}function df(e,n,i){return n=fa(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Dp=new WeakMap;function ja(e,n){if(typeof e=="object"&&e!==null){var i=Dp.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Yn(n)},Dp.set(e,n),n)}return{value:e,source:n,stack:Yn(n)}}var Ko=[],Go=0,rc=null,Kl=0,Ia=[],Oa=0,_s=null,di=1,mi="";function ki(e,n){Ko[Go++]=Kl,Ko[Go++]=rc,rc=e,Kl=n}function jp(e,n,i){Ia[Oa++]=di,Ia[Oa++]=mi,Ia[Oa++]=_s,_s=e;var o=di;e=mi;var f=32-Ue(o)-1;o&=~(1<<f),i+=1;var m=32-Ue(n)+f;if(30<m){var w=f-f%5;m=(o&(1<<w)-1).toString(32),o>>=w,f-=w,di=1<<32-Ue(n)+f|i<<f|o,mi=m+e}else di=1<<m|i<<f|o,mi=e}function mf(e){e.return!==null&&(ki(e,1),jp(e,1,0))}function pf(e){for(;e===rc;)rc=Ko[--Go],Ko[Go]=null,Kl=Ko[--Go],Ko[Go]=null;for(;e===_s;)_s=Ia[--Oa],Ia[Oa]=null,mi=Ia[--Oa],Ia[Oa]=null,di=Ia[--Oa],Ia[Oa]=null}function Ip(e,n){Ia[Oa++]=di,Ia[Oa++]=mi,Ia[Oa++]=_s,di=n.id,mi=n.overflow,_s=e}var sr=null,an=null,Dt=!1,xs=null,Ma=!1,gf=Error(s(519));function Es(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(ja(n,e)),gf}function Op(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[Kt]=e,n[nn]=o,i){case"dialog":Et("cancel",n),Et("close",n);break;case"iframe":case"object":case"embed":Et("load",n);break;case"video":case"audio":for(i=0;i<mu.length;i++)Et(mu[i],n);break;case"source":Et("error",n);break;case"img":case"image":case"link":Et("error",n),Et("load",n);break;case"details":Et("toggle",n);break;case"input":Et("invalid",n),ss(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Et("invalid",n);break;case"textarea":Et("invalid",n),oa(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||$y(n.textContent,i)?(o.popover!=null&&(Et("beforetoggle",n),Et("toggle",n)),o.onScroll!=null&&Et("scroll",n),o.onScrollEnd!=null&&Et("scrollend",n),o.onClick!=null&&(n.onclick=pr),n=!0):n=!1,n||Es(e,!0)}function Mp(e){for(sr=e.return;sr;)switch(sr.tag){case 5:case 31:case 13:Ma=!1;return;case 27:case 3:Ma=!0;return;default:sr=sr.return}}function Qo(e){if(e!==sr)return!1;if(!Dt)return Mp(e),Dt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Md(e.type,e.memoizedProps)),i=!i),i&&an&&Es(e),Mp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=iv(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));an=iv(e)}else n===27?(n=an,ks(e.type)?(e=zd,zd=null,an=e):an=n):an=sr?ka(e.stateNode.nextSibling):null;return!0}function fo(){an=sr=null,Dt=!1}function yf(){var e=xs;return e!==null&&(Gr===null?Gr=e:Gr.push.apply(Gr,e),xs=null),e}function Gl(e){xs===null?xs=[e]:xs.push(e)}var vf=H(null),mo=null,Pi=null;function ws(e,n,i){Ie(vf,n._currentValue),n._currentValue=i}function Li(e){e._currentValue=vf.current,be(vf)}function bf(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function _f(e,n,i,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var z=0;z<n.length;z++)if(C.context===n[z]){m.lanes|=i,C=m.alternate,C!==null&&(C.lanes|=i),bf(m.return,i,e),o||(w=null);break e}m=C.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=i,m=w.alternate,m!==null&&(m.lanes|=i),bf(w,i,e),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===e){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Yo(e,n,i,o){e=null;for(var f=n,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var C=f.type;gr(f.pendingProps.value,w.value)||(e!==null?e.push(C):e=[C])}}else if(f===rt.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(bu):e=[bu])}f=f.return}e!==null&&_f(n,e,i,o),n.flags|=262144}function ac(e){for(e=e.firstContext;e!==null;){if(!gr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function po(e){mo=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function or(e){return Vp(mo,e)}function ic(e,n){return mo===null&&po(e),Vp(e,n)}function Vp(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Pi===null){if(e===null)throw Error(s(308));Pi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Pi=Pi.next=n;return i}var Ix=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Ox=a.unstable_scheduleCallback,Mx=a.unstable_NormalPriority,Ln={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new Ix,data:new Map,refCount:0}}function Ql(e){e.refCount--,e.refCount===0&&Ox(Mx,function(){e.controller.abort()})}var Yl=null,Ef=0,Xo=0,$o=null;function Vx(e,n){if(Yl===null){var i=Yl=[];Ef=0,Xo=Sd(),$o={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Ef++,n.then(kp,kp),n}function kp(){if(--Ef===0&&Yl!==null){$o!==null&&($o.status="fulfilled");var e=Yl;Yl=null,Xo=0,$o=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function kx(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var f=0;f<i.length;f++)(0,i[f])(n)},function(f){for(o.status="rejected",o.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),o}var Pp=W.S;W.S=function(e,n){_y=Xn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Vx(e,n),Pp!==null&&Pp(e,n)};var go=H(null);function wf(){var e=go.current;return e!==null?e:Wt.pooledCache}function sc(e,n){n===null?Ie(go,go.current):Ie(go,n.pool)}function Lp(){var e=wf();return e===null?null:{parent:Ln._currentValue,pool:e}}var Zo=Error(s(460)),Tf=Error(s(474)),oc=Error(s(542)),lc={then:function(){}};function zp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Up(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(pr,pr),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,qp(e),e;default:if(typeof n.status=="string")n.then(pr,pr);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=o}},function(o){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,qp(e),e}throw vo=n,Zo}}function yo(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(vo=i,Zo):i}}var vo=null;function Bp(){if(vo===null)throw Error(s(459));var e=vo;return vo=null,e}function qp(e){if(e===Zo||e===oc)throw Error(s(483))}var Jo=null,Xl=0;function uc(e){var n=Xl;return Xl+=1,Jo===null&&(Jo=[]),Up(Jo,e,n)}function $l(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function cc(e,n){throw n.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Fp(e){function n(ae,Y){if(e){var ce=ae.deletions;ce===null?(ae.deletions=[Y],ae.flags|=16):ce.push(Y)}}function i(ae,Y){if(!e)return null;for(;Y!==null;)n(ae,Y),Y=Y.sibling;return null}function o(ae){for(var Y=new Map;ae!==null;)ae.key!==null?Y.set(ae.key,ae):Y.set(ae.index,ae),ae=ae.sibling;return Y}function f(ae,Y){return ae=Vi(ae,Y),ae.index=0,ae.sibling=null,ae}function m(ae,Y,ce){return ae.index=ce,e?(ce=ae.alternate,ce!==null?(ce=ce.index,ce<Y?(ae.flags|=67108866,Y):ce):(ae.flags|=67108866,Y)):(ae.flags|=1048576,Y)}function w(ae){return e&&ae.alternate===null&&(ae.flags|=67108866),ae}function C(ae,Y,ce,_e){return Y===null||Y.tag!==6?(Y=ff(ce,ae.mode,_e),Y.return=ae,Y):(Y=f(Y,ce),Y.return=ae,Y)}function z(ae,Y,ce,_e){var et=ce.type;return et===oe?ve(ae,Y,ce.props.children,_e,ce.key):Y!==null&&(Y.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===O&&yo(et)===Y.type)?(Y=f(Y,ce.props),$l(Y,ce),Y.return=ae,Y):(Y=nc(ce.type,ce.key,ce.props,null,ae.mode,_e),$l(Y,ce),Y.return=ae,Y)}function he(ae,Y,ce,_e){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ce.containerInfo||Y.stateNode.implementation!==ce.implementation?(Y=df(ce,ae.mode,_e),Y.return=ae,Y):(Y=f(Y,ce.children||[]),Y.return=ae,Y)}function ve(ae,Y,ce,_e,et){return Y===null||Y.tag!==7?(Y=ho(ce,ae.mode,_e,et),Y.return=ae,Y):(Y=f(Y,ce),Y.return=ae,Y)}function we(ae,Y,ce){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=ff(""+Y,ae.mode,ce),Y.return=ae,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case X:return ce=nc(Y.type,Y.key,Y.props,null,ae.mode,ce),$l(ce,Y),ce.return=ae,ce;case ue:return Y=df(Y,ae.mode,ce),Y.return=ae,Y;case O:return Y=yo(Y),we(ae,Y,ce)}if(Nt(Y)||J(Y))return Y=ho(Y,ae.mode,ce,null),Y.return=ae,Y;if(typeof Y.then=="function")return we(ae,uc(Y),ce);if(Y.$$typeof===fe)return we(ae,ic(ae,Y),ce);cc(ae,Y)}return null}function me(ae,Y,ce,_e){var et=Y!==null?Y.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return et!==null?null:C(ae,Y,""+ce,_e);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:return ce.key===et?z(ae,Y,ce,_e):null;case ue:return ce.key===et?he(ae,Y,ce,_e):null;case O:return ce=yo(ce),me(ae,Y,ce,_e)}if(Nt(ce)||J(ce))return et!==null?null:ve(ae,Y,ce,_e,null);if(typeof ce.then=="function")return me(ae,Y,uc(ce),_e);if(ce.$$typeof===fe)return me(ae,Y,ic(ae,ce),_e);cc(ae,ce)}return null}function ge(ae,Y,ce,_e,et){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return ae=ae.get(ce)||null,C(Y,ae,""+_e,et);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case X:return ae=ae.get(_e.key===null?ce:_e.key)||null,z(Y,ae,_e,et);case ue:return ae=ae.get(_e.key===null?ce:_e.key)||null,he(Y,ae,_e,et);case O:return _e=yo(_e),ge(ae,Y,ce,_e,et)}if(Nt(_e)||J(_e))return ae=ae.get(ce)||null,ve(Y,ae,_e,et,null);if(typeof _e.then=="function")return ge(ae,Y,ce,uc(_e),et);if(_e.$$typeof===fe)return ge(ae,Y,ce,ic(Y,_e),et);cc(Y,_e)}return null}function Qe(ae,Y,ce,_e){for(var et=null,kt=null,Xe=Y,gt=Y=0,Tt=null;Xe!==null&&gt<ce.length;gt++){Xe.index>gt?(Tt=Xe,Xe=null):Tt=Xe.sibling;var Pt=me(ae,Xe,ce[gt],_e);if(Pt===null){Xe===null&&(Xe=Tt);break}e&&Xe&&Pt.alternate===null&&n(ae,Xe),Y=m(Pt,Y,gt),kt===null?et=Pt:kt.sibling=Pt,kt=Pt,Xe=Tt}if(gt===ce.length)return i(ae,Xe),Dt&&ki(ae,gt),et;if(Xe===null){for(;gt<ce.length;gt++)Xe=we(ae,ce[gt],_e),Xe!==null&&(Y=m(Xe,Y,gt),kt===null?et=Xe:kt.sibling=Xe,kt=Xe);return Dt&&ki(ae,gt),et}for(Xe=o(Xe);gt<ce.length;gt++)Tt=ge(Xe,ae,gt,ce[gt],_e),Tt!==null&&(e&&Tt.alternate!==null&&Xe.delete(Tt.key===null?gt:Tt.key),Y=m(Tt,Y,gt),kt===null?et=Tt:kt.sibling=Tt,kt=Tt);return e&&Xe.forEach(function(Bs){return n(ae,Bs)}),Dt&&ki(ae,gt),et}function nt(ae,Y,ce,_e){if(ce==null)throw Error(s(151));for(var et=null,kt=null,Xe=Y,gt=Y=0,Tt=null,Pt=ce.next();Xe!==null&&!Pt.done;gt++,Pt=ce.next()){Xe.index>gt?(Tt=Xe,Xe=null):Tt=Xe.sibling;var Bs=me(ae,Xe,Pt.value,_e);if(Bs===null){Xe===null&&(Xe=Tt);break}e&&Xe&&Bs.alternate===null&&n(ae,Xe),Y=m(Bs,Y,gt),kt===null?et=Bs:kt.sibling=Bs,kt=Bs,Xe=Tt}if(Pt.done)return i(ae,Xe),Dt&&ki(ae,gt),et;if(Xe===null){for(;!Pt.done;gt++,Pt=ce.next())Pt=we(ae,Pt.value,_e),Pt!==null&&(Y=m(Pt,Y,gt),kt===null?et=Pt:kt.sibling=Pt,kt=Pt);return Dt&&ki(ae,gt),et}for(Xe=o(Xe);!Pt.done;gt++,Pt=ce.next())Pt=ge(Xe,ae,gt,Pt.value,_e),Pt!==null&&(e&&Pt.alternate!==null&&Xe.delete(Pt.key===null?gt:Pt.key),Y=m(Pt,Y,gt),kt===null?et=Pt:kt.sibling=Pt,kt=Pt);return e&&Xe.forEach(function(Q1){return n(ae,Q1)}),Dt&&ki(ae,gt),et}function Jt(ae,Y,ce,_e){if(typeof ce=="object"&&ce!==null&&ce.type===oe&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:e:{for(var et=ce.key;Y!==null;){if(Y.key===et){if(et=ce.type,et===oe){if(Y.tag===7){i(ae,Y.sibling),_e=f(Y,ce.props.children),_e.return=ae,ae=_e;break e}}else if(Y.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===O&&yo(et)===Y.type){i(ae,Y.sibling),_e=f(Y,ce.props),$l(_e,ce),_e.return=ae,ae=_e;break e}i(ae,Y);break}else n(ae,Y);Y=Y.sibling}ce.type===oe?(_e=ho(ce.props.children,ae.mode,_e,ce.key),_e.return=ae,ae=_e):(_e=nc(ce.type,ce.key,ce.props,null,ae.mode,_e),$l(_e,ce),_e.return=ae,ae=_e)}return w(ae);case ue:e:{for(et=ce.key;Y!==null;){if(Y.key===et)if(Y.tag===4&&Y.stateNode.containerInfo===ce.containerInfo&&Y.stateNode.implementation===ce.implementation){i(ae,Y.sibling),_e=f(Y,ce.children||[]),_e.return=ae,ae=_e;break e}else{i(ae,Y);break}else n(ae,Y);Y=Y.sibling}_e=df(ce,ae.mode,_e),_e.return=ae,ae=_e}return w(ae);case O:return ce=yo(ce),Jt(ae,Y,ce,_e)}if(Nt(ce))return Qe(ae,Y,ce,_e);if(J(ce)){if(et=J(ce),typeof et!="function")throw Error(s(150));return ce=et.call(ce),nt(ae,Y,ce,_e)}if(typeof ce.then=="function")return Jt(ae,Y,uc(ce),_e);if(ce.$$typeof===fe)return Jt(ae,Y,ic(ae,ce),_e);cc(ae,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Y!==null&&Y.tag===6?(i(ae,Y.sibling),_e=f(Y,ce),_e.return=ae,ae=_e):(i(ae,Y),_e=ff(ce,ae.mode,_e),_e.return=ae,ae=_e),w(ae)):i(ae,Y)}return function(ae,Y,ce,_e){try{Xl=0;var et=Jt(ae,Y,ce,_e);return Jo=null,et}catch(Xe){if(Xe===Zo||Xe===oc)throw Xe;var kt=fa(29,Xe,null,ae.mode);return kt.lanes=_e,kt.return=ae,kt}finally{}}}var bo=Fp(!0),Hp=Fp(!1),Ts=!1;function Sf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Af(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function As(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Lt&2)!==0){var f=o.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),o.pending=n,n=Pn(e),co(e,null,i),n}return st(e,o,n,i),Pn(e)}function Zl(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Ut(e,i)}}function Nf(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,i=i.next}while(i!==null);m===null?f=m=n:m=m.next=n}else f=m=n;i={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Rf=!1;function Jl(){if(Rf){var e=$o;if(e!==null)throw e}}function Wl(e,n,i,o){Rf=!1;var f=e.updateQueue;Ts=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var z=C,he=z.next;z.next=null,w===null?m=he:w.next=he,w=z;var ve=e.alternate;ve!==null&&(ve=ve.updateQueue,C=ve.lastBaseUpdate,C!==w&&(C===null?ve.firstBaseUpdate=he:C.next=he,ve.lastBaseUpdate=z))}if(m!==null){var we=f.baseState;w=0,ve=he=z=null,C=m;do{var me=C.lane&-536870913,ge=me!==C.lane;if(ge?(wt&me)===me:(o&me)===me){me!==0&&me===Xo&&(Rf=!0),ve!==null&&(ve=ve.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Qe=e,nt=C;me=n;var Jt=i;switch(nt.tag){case 1:if(Qe=nt.payload,typeof Qe=="function"){we=Qe.call(Jt,we,me);break e}we=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=nt.payload,me=typeof Qe=="function"?Qe.call(Jt,we,me):Qe,me==null)break e;we=N({},we,me);break e;case 2:Ts=!0}}me=C.callback,me!==null&&(e.flags|=64,ge&&(e.flags|=8192),ge=f.callbacks,ge===null?f.callbacks=[me]:ge.push(me))}else ge={lane:me,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ve===null?(he=ve=ge,z=we):ve=ve.next=ge,w|=me;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ge=C,C=ge.next,ge.next=null,f.lastBaseUpdate=ge,f.shared.pending=null}}while(!0);ve===null&&(z=we),f.baseState=z,f.firstBaseUpdate=he,f.lastBaseUpdate=ve,m===null&&(f.shared.lanes=0),js|=w,e.lanes=w,e.memoizedState=we}}function Kp(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Gp(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Kp(i[e],n)}var Wo=H(null),hc=H(0);function Qp(e,n){e=Qi,Ie(hc,e),Ie(Wo,n),Qi=e|n.baseLanes}function Cf(){Ie(hc,Qi),Ie(Wo,Wo.current)}function Df(){Qi=hc.current,be(Wo),be(hc)}var da=H(null),Va=null;function Ns(e){var n=e.alternate;Ie(Cn,Cn.current&1),Ie(da,e),Va===null&&(n===null||Wo.current!==null||n.memoizedState!==null)&&(Va=e)}function jf(e){Ie(Cn,Cn.current),Ie(da,e),Va===null&&(Va=e)}function Yp(e){e.tag===22?(Ie(Cn,Cn.current),Ie(da,e),Va===null&&(Va=e)):Rs()}function Rs(){Ie(Cn,Cn.current),Ie(da,da.current)}function ma(e){be(da),Va===e&&(Va=null),be(Cn)}var Cn=H(0);function fc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Pd(i)||Ld(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var zi=0,mt=null,$t=null,zn=null,dc=!1,el=!1,_o=!1,mc=0,eu=0,tl=null,Px=0;function xn(){throw Error(s(321))}function If(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!gr(e[i],n[i]))return!1;return!0}function Of(e,n,i,o,f,m){return zi=m,mt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,W.H=e===null||e.memoizedState===null?jg:Yf,_o=!1,m=i(o,f),_o=!1,el&&(m=$p(n,i,o,f)),Xp(e),m}function Xp(e){W.H=ru;var n=$t!==null&&$t.next!==null;if(zi=0,zn=$t=mt=null,dc=!1,eu=0,tl=null,n)throw Error(s(300));e===null||Un||(e=e.dependencies,e!==null&&ac(e)&&(Un=!0))}function $p(e,n,i,o){mt=e;var f=0;do{if(el&&(tl=null),eu=0,el=!1,25<=f)throw Error(s(301));if(f+=1,zn=$t=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=Ig,m=n(i,o)}while(el);return m}function Lx(){var e=W.H,n=e.useState()[0];return n=typeof n.then=="function"?tu(n):n,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(mt.flags|=1024),n}function Mf(){var e=mc!==0;return mc=0,e}function Vf(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function kf(e){if(dc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}dc=!1}zi=0,zn=$t=mt=null,el=!1,eu=mc=0,tl=null}function Ar(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?mt.memoizedState=zn=e:zn=zn.next=e,zn}function Dn(){if($t===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var n=zn===null?mt.memoizedState:zn.next;if(n!==null)zn=n,$t=e;else{if(e===null)throw mt.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},zn===null?mt.memoizedState=zn=e:zn=zn.next=e}return zn}function pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(e){var n=eu;return eu+=1,tl===null&&(tl=[]),e=Up(tl,e,n),n=mt,(zn===null?n.memoizedState:zn.next)===null&&(n=n.alternate,W.H=n===null||n.memoizedState===null?jg:Yf),e}function gc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tu(e);if(e.$$typeof===fe)return or(e)}throw Error(s(438,String(e)))}function Pf(e){var n=null,i=mt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=mt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=pc(),mt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=F;return n.index++,i}function Ui(e,n){return typeof n=="function"?n(e):n}function yc(e){var n=Dn();return Lf(n,$t,e)}function Lf(e,n,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var f=e.baseQueue,m=o.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}n.baseQueue=f=m,o.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{n=f.next;var C=w=null,z=null,he=n,ve=!1;do{var we=he.lane&-536870913;if(we!==he.lane?(wt&we)===we:(zi&we)===we){var me=he.revertLane;if(me===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),we===Xo&&(ve=!0);else if((zi&me)===me){he=he.next,me===Xo&&(ve=!0);continue}else we={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},z===null?(C=z=we,w=m):z=z.next=we,mt.lanes|=me,js|=me;we=he.action,_o&&i(m,we),m=he.hasEagerState?he.eagerState:i(m,we)}else me={lane:we,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},z===null?(C=z=me,w=m):z=z.next=me,mt.lanes|=we,js|=we;he=he.next}while(he!==null&&he!==n);if(z===null?w=m:z.next=C,!gr(m,e.memoizedState)&&(Un=!0,ve&&(i=$o,i!==null)))throw i;e.memoizedState=m,e.baseState=w,e.baseQueue=z,o.lastRenderedState=m}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function zf(e){var n=Dn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,f=i.pending,m=n.memoizedState;if(f!==null){i.pending=null;var w=f=f.next;do m=e(m,w.action),w=w.next;while(w!==f);gr(m,n.memoizedState)||(Un=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),i.lastRenderedState=m}return[m,o]}function Zp(e,n,i){var o=mt,f=Dn(),m=Dt;if(m){if(i===void 0)throw Error(s(407));i=i()}else i=n();var w=!gr(($t||f).memoizedState,i);if(w&&(f.memoizedState=i,Un=!0),f=f.queue,qf(eg.bind(null,o,f,e),[e]),f.getSnapshot!==n||w||zn!==null&&zn.memoizedState.tag&1){if(o.flags|=2048,nl(9,{destroy:void 0},Wp.bind(null,o,f,i,n),null),Wt===null)throw Error(s(349));m||(zi&127)!==0||Jp(o,n,i)}return i}function Jp(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=mt.updateQueue,n===null?(n=pc(),mt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Wp(e,n,i,o){n.value=i,n.getSnapshot=o,tg(n)&&ng(e)}function eg(e,n,i){return i(function(){tg(n)&&ng(e)})}function tg(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!gr(e,i)}catch{return!0}}function ng(e){var n=un(e,2);n!==null&&Qr(n,e,2)}function Uf(e){var n=Ar();if(typeof e=="function"){var i=e;if(e=i(),_o){Sn(!0);try{i()}finally{Sn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},n}function rg(e,n,i,o){return e.baseState=i,Lf(e,$t,typeof o=="function"?o:Ui)}function zx(e,n,i,o,f){if(_c(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};W.T!==null?i(!0):m.isTransition=!1,o(m),i=n.pending,i===null?(m.next=n.pending=m,ag(n,m)):(m.next=i.next,n.pending=i.next=m)}}function ag(e,n){var i=n.action,o=n.payload,f=e.state;if(n.isTransition){var m=W.T,w={};W.T=w;try{var C=i(f,o),z=W.S;z!==null&&z(w,C),ig(e,n,C)}catch(he){Bf(e,n,he)}finally{m!==null&&w.types!==null&&(m.types=w.types),W.T=m}}else try{m=i(f,o),ig(e,n,m)}catch(he){Bf(e,n,he)}}function ig(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){sg(e,n,o)},function(o){return Bf(e,n,o)}):sg(e,n,i)}function sg(e,n,i){n.status="fulfilled",n.value=i,og(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,ag(e,i)))}function Bf(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,og(n),n=n.next;while(n!==o)}e.action=null}function og(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function lg(e,n){return n}function ug(e,n){if(Dt){var i=Wt.formState;if(i!==null){e:{var o=mt;if(Dt){if(an){t:{for(var f=an,m=Ma;f.nodeType!==8;){if(!m){f=null;break t}if(f=ka(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){an=ka(f.nextSibling),o=f.data==="F!";break e}}Es(o)}o=!1}o&&(n=i[0])}}return i=Ar(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lg,lastRenderedState:n},i.queue=o,i=Rg.bind(null,mt,o),o.dispatch=i,o=Uf(!1),m=Qf.bind(null,mt,!1,o.queue),o=Ar(),f={state:n,dispatch:null,action:e,pending:null},o.queue=f,i=zx.bind(null,mt,f,m,i),f.dispatch=i,o.memoizedState=e,[n,i,!1]}function cg(e){var n=Dn();return hg(n,$t,e)}function hg(e,n,i){if(n=Lf(e,n,lg)[0],e=yc(Ui)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=tu(n)}catch(w){throw w===Zo?oc:w}else o=n;n=Dn();var f=n.queue,m=f.dispatch;return i!==n.memoizedState&&(mt.flags|=2048,nl(9,{destroy:void 0},Ux.bind(null,f,i),null)),[o,m,e]}function Ux(e,n){e.action=n}function fg(e){var n=Dn(),i=$t;if(i!==null)return hg(n,i,e);Dn(),n=n.memoizedState,i=Dn();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function nl(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=mt.updateQueue,n===null&&(n=pc(),mt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function dg(){return Dn().memoizedState}function vc(e,n,i,o){var f=Ar();mt.flags|=e,f.memoizedState=nl(1|n,{destroy:void 0},i,o===void 0?null:o)}function bc(e,n,i,o){var f=Dn();o=o===void 0?null:o;var m=f.memoizedState.inst;$t!==null&&o!==null&&If(o,$t.memoizedState.deps)?f.memoizedState=nl(n,m,i,o):(mt.flags|=e,f.memoizedState=nl(1|n,m,i,o))}function mg(e,n){vc(8390656,8,e,n)}function qf(e,n){bc(2048,8,e,n)}function Bx(e){mt.flags|=4;var n=mt.updateQueue;if(n===null)n=pc(),mt.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function pg(e){var n=Dn().memoizedState;return Bx({ref:n,nextImpl:e}),function(){if((Lt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function gg(e,n){return bc(4,2,e,n)}function yg(e,n){return bc(4,4,e,n)}function vg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function bg(e,n,i){i=i!=null?i.concat([e]):null,bc(4,4,vg.bind(null,n,e),i)}function Ff(){}function _g(e,n){var i=Dn();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&If(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function xg(e,n){var i=Dn();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&If(n,o[1]))return o[0];if(o=e(),_o){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[o,n],o}function Hf(e,n,i){return i===void 0||(zi&1073741824)!==0&&(wt&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Ey(),mt.lanes|=e,js|=e,i)}function Eg(e,n,i,o){return gr(i,n)?i:Wo.current!==null?(e=Hf(e,i,o),gr(e,n)||(Un=!0),e):(zi&42)===0||(zi&1073741824)!==0&&(wt&261930)===0?(Un=!0,e.memoizedState=i):(e=Ey(),mt.lanes|=e,js|=e,n)}function wg(e,n,i,o,f){var m=Ae.p;Ae.p=m!==0&&8>m?m:8;var w=W.T,C={};W.T=C,Qf(e,!1,n,i);try{var z=f(),he=W.S;if(he!==null&&he(C,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ve=kx(z,o);nu(e,n,ve,ya(e))}else nu(e,n,o,ya(e))}catch(we){nu(e,n,{then:function(){},status:"rejected",reason:we},ya())}finally{Ae.p=m,w!==null&&C.types!==null&&(w.types=C.types),W.T=w}}function qx(){}function Kf(e,n,i,o){if(e.tag!==5)throw Error(s(476));var f=Tg(e).queue;wg(e,f,n,Ne,i===null?qx:function(){return Sg(e),i(o)})}function Tg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:Ne},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Sg(e){var n=Tg(e);n.next===null&&(n=e.alternate.memoizedState),nu(e,n.next.queue,{},ya())}function Gf(){return or(bu)}function Ag(){return Dn().memoizedState}function Ng(){return Dn().memoizedState}function Fx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=ya();e=Ss(i);var o=As(n,e,i);o!==null&&(Qr(o,n,i),Zl(o,n,i)),n={cache:xf()},e.payload=n;return}n=n.return}}function Hx(e,n,i){var o=ya();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},_c(e)?Cg(n,i):(i=kn(e,n,i,o),i!==null&&(Qr(i,e,o),Dg(i,n,o)))}function Rg(e,n,i){var o=ya();nu(e,n,i,o)}function nu(e,n,i,o){var f={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(_c(e))Cg(n,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var w=n.lastRenderedState,C=m(w,i);if(f.hasEagerState=!0,f.eagerState=C,gr(C,w))return st(e,n,f,0),Wt===null&&Wn(),!1}catch{}finally{}if(i=kn(e,n,f,o),i!==null)return Qr(i,e,o),Dg(i,n,o),!0}return!1}function Qf(e,n,i,o){if(o={lane:2,revertLane:Sd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},_c(e)){if(n)throw Error(s(479))}else n=kn(e,i,o,2),n!==null&&Qr(n,e,2)}function _c(e){var n=e.alternate;return e===mt||n!==null&&n===mt}function Cg(e,n){el=dc=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Dg(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Ut(e,i)}}var ru={readContext:or,use:gc,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn};ru.useEffectEvent=xn;var jg={readContext:or,use:gc,useCallback:function(e,n){return Ar().memoizedState=[e,n===void 0?null:n],e},useContext:or,useEffect:mg,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,vc(4194308,4,vg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return vc(4194308,4,e,n)},useInsertionEffect:function(e,n){vc(4,2,e,n)},useMemo:function(e,n){var i=Ar();n=n===void 0?null:n;var o=e();if(_o){Sn(!0);try{e()}finally{Sn(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=Ar();if(i!==void 0){var f=i(n);if(_o){Sn(!0);try{i(n)}finally{Sn(!1)}}}else f=n;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=Hx.bind(null,mt,e),[o.memoizedState,e]},useRef:function(e){var n=Ar();return e={current:e},n.memoizedState=e},useState:function(e){e=Uf(e);var n=e.queue,i=Rg.bind(null,mt,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Ff,useDeferredValue:function(e,n){var i=Ar();return Hf(i,e,n)},useTransition:function(){var e=Uf(!1);return e=wg.bind(null,mt,e.queue,!0,!1),Ar().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=mt,f=Ar();if(Dt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Wt===null)throw Error(s(349));(wt&127)!==0||Jp(o,n,i)}f.memoizedState=i;var m={value:i,getSnapshot:n};return f.queue=m,mg(eg.bind(null,o,m,e),[e]),o.flags|=2048,nl(9,{destroy:void 0},Wp.bind(null,o,m,i,n),null),i},useId:function(){var e=Ar(),n=Wt.identifierPrefix;if(Dt){var i=mi,o=di;i=(o&~(1<<32-Ue(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=mc++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=Px++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gf,useFormState:ug,useActionState:ug,useOptimistic:function(e){var n=Ar();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Qf.bind(null,mt,!0,i),i.dispatch=n,[e,n]},useMemoCache:Pf,useCacheRefresh:function(){return Ar().memoizedState=Fx.bind(null,mt)},useEffectEvent:function(e){var n=Ar(),i={impl:e};return n.memoizedState=i,function(){if((Lt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Yf={readContext:or,use:gc,useCallback:_g,useContext:or,useEffect:qf,useImperativeHandle:bg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:xg,useReducer:yc,useRef:dg,useState:function(){return yc(Ui)},useDebugValue:Ff,useDeferredValue:function(e,n){var i=Dn();return Eg(i,$t.memoizedState,e,n)},useTransition:function(){var e=yc(Ui)[0],n=Dn().memoizedState;return[typeof e=="boolean"?e:tu(e),n]},useSyncExternalStore:Zp,useId:Ag,useHostTransitionStatus:Gf,useFormState:cg,useActionState:cg,useOptimistic:function(e,n){var i=Dn();return rg(i,$t,e,n)},useMemoCache:Pf,useCacheRefresh:Ng};Yf.useEffectEvent=pg;var Ig={readContext:or,use:gc,useCallback:_g,useContext:or,useEffect:qf,useImperativeHandle:bg,useInsertionEffect:gg,useLayoutEffect:yg,useMemo:xg,useReducer:zf,useRef:dg,useState:function(){return zf(Ui)},useDebugValue:Ff,useDeferredValue:function(e,n){var i=Dn();return $t===null?Hf(i,e,n):Eg(i,$t.memoizedState,e,n)},useTransition:function(){var e=zf(Ui)[0],n=Dn().memoizedState;return[typeof e=="boolean"?e:tu(e),n]},useSyncExternalStore:Zp,useId:Ag,useHostTransitionStatus:Gf,useFormState:fg,useActionState:fg,useOptimistic:function(e,n){var i=Dn();return $t!==null?rg(i,$t,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Pf,useCacheRefresh:Ng};Ig.useEffectEvent=pg;function Xf(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:N({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var $f={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=ya(),f=Ss(o);f.payload=n,i!=null&&(f.callback=i),n=As(e,f,o),n!==null&&(Qr(n,e,o),Zl(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=ya(),f=Ss(o);f.tag=1,f.payload=n,i!=null&&(f.callback=i),n=As(e,f,o),n!==null&&(Qr(n,e,o),Zl(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=ya(),o=Ss(i);o.tag=2,n!=null&&(o.callback=n),n=As(e,o,i),n!==null&&(Qr(n,e,i),Zl(n,e,i))}};function Og(e,n,i,o,f,m,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,w):n.prototype&&n.prototype.isPureReactComponent?!h(i,o)||!h(f,m):!0}function Mg(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&$f.enqueueReplaceState(n,n.state,null)}function xo(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=N({},i));for(var f in e)i[f]===void 0&&(i[f]=e[f])}return i}function Vg(e){qe(e)}function kg(e){console.error(e)}function Pg(e){qe(e)}function xc(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Lg(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Zf(e,n,i){return i=Ss(i),i.tag=3,i.payload={element:null},i.callback=function(){xc(e,n)},i}function zg(e){return e=Ss(e),e.tag=3,e}function Ug(e,n,i,o){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;e.payload=function(){return f(m)},e.callback=function(){Lg(n,i,o)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(e.callback=function(){Lg(n,i,o),typeof f!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})})}function Kx(e,n,i,o,f){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&Yo(n,i,f,!0),i=da.current,i!==null){switch(i.tag){case 31:case 13:return Va===null?Oc():i.alternate===null&&En===0&&(En=3),i.flags&=-257,i.flags|=65536,i.lanes=f,o===lc?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),Ed(e,o,f)),!1;case 22:return i.flags|=65536,o===lc?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),Ed(e,o,f)),!1}throw Error(s(435,i.tag))}return Ed(e,o,f),Oc(),!1}if(Dt)return n=da.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,o!==gf&&(e=Error(s(422),{cause:o}),Gl(ja(e,i)))):(o!==gf&&(n=Error(s(423),{cause:o}),Gl(ja(n,i))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=ja(o,i),f=Zf(e.stateNode,o,f),Nf(e,f),En!==4&&(En=2)),!1;var m=Error(s(520),{cause:o});if(m=ja(m,i),hu===null?hu=[m]:hu.push(m),En!==4&&(En=2),n===null)return!0;o=ja(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=f&-f,i.lanes|=e,e=Zf(i.stateNode,o,e),Nf(i,e),!1;case 1:if(n=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Is===null||!Is.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=zg(f),Ug(f,e,i,o),Nf(i,f),!1}i=i.return}while(i!==null);return!1}var Jf=Error(s(461)),Un=!1;function lr(e,n,i,o){n.child=e===null?Hp(n,null,i,o):bo(n,e.child,i,o)}function Bg(e,n,i,o,f){i=i.render;var m=n.ref;if("ref"in o){var w={};for(var C in o)C!=="ref"&&(w[C]=o[C])}else w=o;return po(n),o=Of(e,n,i,w,m,f),C=Mf(),e!==null&&!Un?(Vf(e,n,f),Bi(e,n,f)):(Dt&&C&&mf(n),n.flags|=1,lr(e,n,o,f),n.child)}function qg(e,n,i,o,f){if(e===null){var m=i.type;return typeof m=="function"&&!hf(m)&&m.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=m,Fg(e,n,m,o,f)):(e=nc(i.type,null,o,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!sd(e,f)){var w=m.memoizedProps;if(i=i.compare,i=i!==null?i:h,i(w,o)&&e.ref===n.ref)return Bi(e,n,f)}return n.flags|=1,e=Vi(m,o),e.ref=n.ref,e.return=n,n.child=e}function Fg(e,n,i,o,f){if(e!==null){var m=e.memoizedProps;if(h(m,o)&&e.ref===n.ref)if(Un=!1,n.pendingProps=o=m,sd(e,f))(e.flags&131072)!==0&&(Un=!0);else return n.lanes=e.lanes,Bi(e,n,f)}return Wf(e,n,i,o,f)}function Hg(e,n,i,o){var f=o.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,e!==null){for(o=n.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,n.child=null;return Kg(e,n,m,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&sc(n,m!==null?m.cachePool:null),m!==null?Qp(n,m):Cf(),Yp(n);else return o=n.lanes=536870912,Kg(e,n,m!==null?m.baseLanes|i:i,i,o)}else m!==null?(sc(n,m.cachePool),Qp(n,m),Rs(),n.memoizedState=null):(e!==null&&sc(n,null),Cf(),Rs());return lr(e,n,f,i),n.child}function au(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Kg(e,n,i,o,f){var m=wf();return m=m===null?null:{parent:Ln._currentValue,pool:m},n.memoizedState={baseLanes:i,cachePool:m},e!==null&&sc(n,null),Cf(),Yp(n),e!==null&&Yo(e,n,o,!0),n.childLanes=f,null}function Ec(e,n){return n=Tc({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Gg(e,n,i){return bo(n,e.child,null,i),e=Ec(n,n.pendingProps),e.flags|=2,ma(n),n.memoizedState=null,e}function Gx(e,n,i){var o=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Dt){if(o.mode==="hidden")return e=Ec(n,o),n.lanes=536870912,au(null,e);if(jf(n),(e=an)?(e=av(e,Ma),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_s!==null?{id:di,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},i=Cp(e),i.return=n,n.child=i,sr=n,an=null)):e=null,e===null)throw Es(n);return n.lanes=536870912,null}return Ec(n,o)}var m=e.memoizedState;if(m!==null){var w=m.dehydrated;if(jf(n),f)if(n.flags&256)n.flags&=-257,n=Gg(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Un||Yo(e,n,i,!1),f=(i&e.childLanes)!==0,Un||f){if(o=Wt,o!==null&&(w=ln(o,i),w!==0&&w!==m.retryLane))throw m.retryLane=w,un(e,w),Qr(o,e,w),Jf;Oc(),n=Gg(e,n,i)}else e=m.treeContext,an=ka(w.nextSibling),sr=n,Dt=!0,xs=null,Ma=!1,e!==null&&Ip(n,e),n=Ec(n,o),n.flags|=4096;return n}return e=Vi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function wc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Wf(e,n,i,o,f){return po(n),i=Of(e,n,i,o,void 0,f),o=Mf(),e!==null&&!Un?(Vf(e,n,f),Bi(e,n,f)):(Dt&&o&&mf(n),n.flags|=1,lr(e,n,i,f),n.child)}function Qg(e,n,i,o,f,m){return po(n),n.updateQueue=null,i=$p(n,o,i,f),Xp(e),o=Mf(),e!==null&&!Un?(Vf(e,n,m),Bi(e,n,m)):(Dt&&o&&mf(n),n.flags|=1,lr(e,n,i,m),n.child)}function Yg(e,n,i,o,f){if(po(n),n.stateNode===null){var m=qr,w=i.contextType;typeof w=="object"&&w!==null&&(m=or(w)),m=new i(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=$f,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},Sf(n),w=i.contextType,m.context=typeof w=="object"&&w!==null?or(w):qr,m.state=n.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(Xf(n,i,w,o),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&$f.enqueueReplaceState(m,m.state,null),Wl(n,o,m,f),Jl(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){m=n.stateNode;var C=n.memoizedProps,z=xo(i,C);m.props=z;var he=m.context,ve=i.contextType;w=qr,typeof ve=="object"&&ve!==null&&(w=or(ve));var we=i.getDerivedStateFromProps;ve=typeof we=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,ve||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||he!==w)&&Mg(n,m,o,w),Ts=!1;var me=n.memoizedState;m.state=me,Wl(n,o,m,f),Jl(),he=n.memoizedState,C||me!==he||Ts?(typeof we=="function"&&(Xf(n,i,we,o),he=n.memoizedState),(z=Ts||Og(n,i,z,o,me,he,w))?(ve||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=he),m.props=o,m.state=he,m.context=w,o=z):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,Af(e,n),w=n.memoizedProps,ve=xo(i,w),m.props=ve,we=n.pendingProps,me=m.context,he=i.contextType,z=qr,typeof he=="object"&&he!==null&&(z=or(he)),C=i.getDerivedStateFromProps,(he=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==we||me!==z)&&Mg(n,m,o,z),Ts=!1,me=n.memoizedState,m.state=me,Wl(n,o,m,f),Jl();var ge=n.memoizedState;w!==we||me!==ge||Ts||e!==null&&e.dependencies!==null&&ac(e.dependencies)?(typeof C=="function"&&(Xf(n,i,C,o),ge=n.memoizedState),(ve=Ts||Og(n,i,ve,o,me,ge,z)||e!==null&&e.dependencies!==null&&ac(e.dependencies))?(he||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ge,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ge,z)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=ge),m.props=o,m.state=ge,m.context=z,o=ve):(typeof m.componentDidUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&me===e.memoizedState||(n.flags|=1024),o=!1)}return m=o,wc(e,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&o?(n.child=bo(n,e.child,null,f),n.child=bo(n,null,i,f)):lr(e,n,i,f),n.memoizedState=m.state,e=n.child):e=Bi(e,n,f),e}function Xg(e,n,i,o){return fo(),n.flags|=256,lr(e,n,i,o),n.child}var ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function td(e){return{baseLanes:e,cachePool:Lp()}}function nd(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=ga),e}function $g(e,n,i){var o=n.pendingProps,f=!1,m=(n.flags&128)!==0,w;if((w=m)||(w=e!==null&&e.memoizedState===null?!1:(Cn.current&2)!==0),w&&(f=!0,n.flags&=-129),w=(n.flags&32)!==0,n.flags&=-33,e===null){if(Dt){if(f?Ns(n):Rs(),(e=an)?(e=av(e,Ma),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:_s!==null?{id:di,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},i=Cp(e),i.return=n,n.child=i,sr=n,an=null)):e=null,e===null)throw Es(n);return Ld(e)?n.lanes=32:n.lanes=536870912,null}var C=o.children;return o=o.fallback,f?(Rs(),f=n.mode,C=Tc({mode:"hidden",children:C},f),o=ho(o,f,i,null),C.return=n,o.return=n,C.sibling=o,n.child=C,o=n.child,o.memoizedState=td(i),o.childLanes=nd(e,w,i),n.memoizedState=ed,au(null,o)):(Ns(n),rd(n,C))}var z=e.memoizedState;if(z!==null&&(C=z.dehydrated,C!==null)){if(m)n.flags&256?(Ns(n),n.flags&=-257,n=ad(e,n,i)):n.memoizedState!==null?(Rs(),n.child=e.child,n.flags|=128,n=null):(Rs(),C=o.fallback,f=n.mode,o=Tc({mode:"visible",children:o.children},f),C=ho(C,f,i,null),C.flags|=2,o.return=n,C.return=n,o.sibling=C,n.child=o,bo(n,e.child,null,i),o=n.child,o.memoizedState=td(i),o.childLanes=nd(e,w,i),n.memoizedState=ed,n=au(null,o));else if(Ns(n),Ld(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var he=w.dgst;w=he,o=Error(s(419)),o.stack="",o.digest=w,Gl({value:o,source:null,stack:null}),n=ad(e,n,i)}else if(Un||Yo(e,n,i,!1),w=(i&e.childLanes)!==0,Un||w){if(w=Wt,w!==null&&(o=ln(w,i),o!==0&&o!==z.retryLane))throw z.retryLane=o,un(e,o),Qr(w,e,o),Jf;Pd(C)||Oc(),n=ad(e,n,i)}else Pd(C)?(n.flags|=192,n.child=e.child,n=null):(e=z.treeContext,an=ka(C.nextSibling),sr=n,Dt=!0,xs=null,Ma=!1,e!==null&&Ip(n,e),n=rd(n,o.children),n.flags|=4096);return n}return f?(Rs(),C=o.fallback,f=n.mode,z=e.child,he=z.sibling,o=Vi(z,{mode:"hidden",children:o.children}),o.subtreeFlags=z.subtreeFlags&65011712,he!==null?C=Vi(he,C):(C=ho(C,f,i,null),C.flags|=2),C.return=n,o.return=n,o.sibling=C,n.child=o,au(null,o),o=n.child,C=e.child.memoizedState,C===null?C=td(i):(f=C.cachePool,f!==null?(z=Ln._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Lp(),C={baseLanes:C.baseLanes|i,cachePool:f}),o.memoizedState=C,o.childLanes=nd(e,w,i),n.memoizedState=ed,au(e.child,o)):(Ns(n),i=e.child,e=i.sibling,i=Vi(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(w=n.deletions,w===null?(n.deletions=[e],n.flags|=16):w.push(e)),n.child=i,n.memoizedState=null,i)}function rd(e,n){return n=Tc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Tc(e,n){return e=fa(22,e,null,n),e.lanes=0,e}function ad(e,n,i){return bo(n,e.child,null,i),e=rd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Zg(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),bf(e.return,n,i)}function id(e,n,i,o,f,m){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:f,treeForkCount:m}:(w.isBackwards=n,w.rendering=null,w.renderingStartTime=0,w.last=o,w.tail=i,w.tailMode=f,w.treeForkCount=m)}function Jg(e,n,i){var o=n.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var w=Cn.current,C=(w&2)!==0;if(C?(w=w&1|2,n.flags|=128):w&=1,Ie(Cn,w),lr(e,n,o,i),o=Dt?Kl:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zg(e,i,n);else if(e.tag===19)Zg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(i=n.child,f=null;i!==null;)e=i.alternate,e!==null&&fc(e)===null&&(f=i),i=i.sibling;i=f,i===null?(f=n.child,n.child=null):(f=i.sibling,i.sibling=null),id(n,!1,f,i,m,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&fc(e)===null){n.child=f;break}e=f.sibling,f.sibling=i,i=f,f=e}id(n,!0,i,null,m,o);break;case"together":id(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Bi(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),js|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Yo(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=Vi(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Vi(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function sd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ac(e)))}function Qx(e,n,i){switch(n.tag){case 3:Ft(n,n.stateNode.containerInfo),ws(n,Ln,e.memoizedState.cache),fo();break;case 27:case 5:fn(n);break;case 4:Ft(n,n.stateNode.containerInfo);break;case 10:ws(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,jf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ns(n),n.flags|=128,null):(i&n.child.childLanes)!==0?$g(e,n,i):(Ns(n),e=Bi(e,n,i),e!==null?e.sibling:null);Ns(n);break;case 19:var f=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(Yo(e,n,i,!1),o=(i&n.childLanes)!==0),f){if(o)return Jg(e,n,i);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ie(Cn,Cn.current),o)break;return null;case 22:return n.lanes=0,Hg(e,n,i,n.pendingProps);case 24:ws(n,Ln,e.memoizedState.cache)}return Bi(e,n,i)}function Wg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Un=!0;else{if(!sd(e,i)&&(n.flags&128)===0)return Un=!1,Qx(e,n,i);Un=(e.flags&131072)!==0}else Un=!1,Dt&&(n.flags&1048576)!==0&&jp(n,Kl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=yo(n.elementType),n.type=e,typeof e=="function")hf(e)?(o=xo(e,o),n.tag=1,n=Yg(null,n,e,o,i)):(n.tag=0,n=Wf(null,n,e,o,i));else{if(e!=null){var f=e.$$typeof;if(f===xe){n.tag=11,n=Bg(null,n,e,o,i);break e}else if(f===M){n.tag=14,n=qg(null,n,e,o,i);break e}}throw n=yt(e)||e,Error(s(306,n,""))}}return n;case 0:return Wf(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,f=xo(o,n.pendingProps),Yg(e,n,o,f,i);case 3:e:{if(Ft(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var m=n.memoizedState;f=m.element,Af(e,n),Wl(n,o,null,i);var w=n.memoizedState;if(o=w.cache,ws(n,Ln,o),o!==m.cache&&_f(n,[Ln],i,!0),Jl(),o=w.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:w.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Xg(e,n,o,i);break e}else if(o!==f){f=ja(Error(s(424)),n),Gl(f),n=Xg(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(an=ka(e.firstChild),sr=n,Dt=!0,xs=null,Ma=!0,i=Hp(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(fo(),o===f){n=Bi(e,n,i);break e}lr(e,n,o,i)}n=n.child}return n;case 26:return wc(e,n),e===null?(i=cv(n.type,null,n.pendingProps,null))?n.memoizedState=i:Dt||(i=n.type,e=n.pendingProps,o=Uc($e.current).createElement(i),o[Kt]=n,o[nn]=e,ur(o,i,e),mn(o),n.stateNode=o):n.memoizedState=cv(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return fn(n),e===null&&Dt&&(o=n.stateNode=ov(n.type,n.pendingProps,$e.current),sr=n,Ma=!0,f=an,ks(n.type)?(zd=f,an=ka(o.firstChild)):an=f),lr(e,n,n.pendingProps.children,i),wc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Dt&&((f=o=an)&&(o=w1(o,n.type,n.pendingProps,Ma),o!==null?(n.stateNode=o,sr=n,an=ka(o.firstChild),Ma=!1,f=!0):f=!1),f||Es(n)),fn(n),f=n.type,m=n.pendingProps,w=e!==null?e.memoizedProps:null,o=m.children,Md(f,m)?o=null:w!==null&&Md(f,w)&&(n.flags|=32),n.memoizedState!==null&&(f=Of(e,n,Lx,null,null,i),bu._currentValue=f),wc(e,n),lr(e,n,o,i),n.child;case 6:return e===null&&Dt&&((e=i=an)&&(i=T1(i,n.pendingProps,Ma),i!==null?(n.stateNode=i,sr=n,an=null,e=!0):e=!1),e||Es(n)),null;case 13:return $g(e,n,i);case 4:return Ft(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=bo(n,null,o,i):lr(e,n,o,i),n.child;case 11:return Bg(e,n,n.type,n.pendingProps,i);case 7:return lr(e,n,n.pendingProps,i),n.child;case 8:return lr(e,n,n.pendingProps.children,i),n.child;case 12:return lr(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,ws(n,n.type,o.value),lr(e,n,o.children,i),n.child;case 9:return f=n.type._context,o=n.pendingProps.children,po(n),f=or(f),o=o(f),n.flags|=1,lr(e,n,o,i),n.child;case 14:return qg(e,n,n.type,n.pendingProps,i);case 15:return Fg(e,n,n.type,n.pendingProps,i);case 19:return Jg(e,n,i);case 31:return Gx(e,n,i);case 22:return Hg(e,n,i,n.pendingProps);case 24:return po(n),o=or(Ln),e===null?(f=wf(),f===null&&(f=Wt,m=xf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),n.memoizedState={parent:o,cache:f},Sf(n),ws(n,Ln,f)):((e.lanes&i)!==0&&(Af(e,n),Wl(n,null,null,i),Jl()),f=e.memoizedState,m=n.memoizedState,f.parent!==o?(f={parent:o,cache:o},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),ws(n,Ln,o)):(o=m.cache,ws(n,Ln,o),o!==f.cache&&_f(n,[Ln],i,!0))),lr(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function qi(e){e.flags|=4}function od(e,n,i,o,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Ay())e.flags|=8192;else throw vo=lc,Tf}else e.flags&=-16777217}function ey(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!pv(n))if(Ay())e.flags|=8192;else throw vo=lc,Tf}function Sc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?zo():536870912,e.lanes|=n,sl|=n)}function iu(e,n){if(!Dt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function sn(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var f=e.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)i|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function Yx(e,n,i){var o=n.pendingProps;switch(pf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(n),null;case 1:return sn(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Li(Ln),Oe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Qo(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,yf())),sn(n),null;case 26:var f=n.type,m=n.memoizedState;return e===null?(qi(n),m!==null?(sn(n),ey(n,m)):(sn(n),od(n,f,null,o,i))):m?m!==e.memoizedState?(qi(n),sn(n),ey(n,m)):(sn(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&qi(n),sn(n),od(n,f,e,o,i)),null;case 27:if(On(n),i=$e.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return sn(n),null}e=Re.current,Qo(n)?Op(n):(e=ov(f,o,i),n.stateNode=e,qi(n))}return sn(n),null;case 5:if(On(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return sn(n),null}if(m=Re.current,Qo(n))Op(n);else{var w=Uc($e.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?w.createElement("select",{is:o.is}):w.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?w.createElement(f,{is:o.is}):w.createElement(f)}}m[Kt]=n,m[nn]=o;e:for(w=n.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===n)break e;for(;w.sibling===null;){if(w.return===null||w.return===n)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}n.stateNode=m;e:switch(ur(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&qi(n)}}return sn(n),od(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=$e.current,Qo(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,f=sr,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Kt]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||$y(e.nodeValue,i)),e||Es(n,!0)}else e=Uc(e).createTextNode(o),e[Kt]=n,n.stateNode=e}return sn(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=Qo(n),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Kt]=n}else fo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;sn(n),e=!1}else i=yf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(ma(n),n):(ma(n),null);if((n.flags&128)!==0)throw Error(s(558))}return sn(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Qo(n),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Kt]=n}else fo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;sn(n),f=!1}else f=yf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(ma(n),n):(ma(n),null)}return ma(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Sc(n,n.updateQueue),sn(n),null);case 4:return Oe(),e===null&&Cd(n.stateNode.containerInfo),sn(n),null;case 10:return Li(n.type),sn(n),null;case 19:if(be(Cn),o=n.memoizedState,o===null)return sn(n),null;if(f=(n.flags&128)!==0,m=o.rendering,m===null)if(f)iu(o,!1);else{if(En!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=fc(e),m!==null){for(n.flags|=128,iu(o,!1),e=m.updateQueue,n.updateQueue=e,Sc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Rp(i,e),i=i.sibling;return Ie(Cn,Cn.current&1|2),Dt&&ki(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&Xn()>Dc&&(n.flags|=128,f=!0,iu(o,!1),n.lanes=4194304)}else{if(!f)if(e=fc(m),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Sc(n,e),iu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!Dt)return sn(n),null}else 2*Xn()-o.renderingStartTime>Dc&&i!==536870912&&(n.flags|=128,f=!0,iu(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(e=o.last,e!==null?e.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xn(),e.sibling=null,i=Cn.current,Ie(Cn,f?i&1|2:i&1),Dt&&ki(n,o.treeForkCount),e):(sn(n),null);case 22:case 23:return ma(n),Df(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(sn(n),n.subtreeFlags&6&&(n.flags|=8192)):sn(n),i=n.updateQueue,i!==null&&Sc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&be(go),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Li(Ln),sn(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Xx(e,n){switch(pf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Li(Ln),Oe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return On(n),null;case 31:if(n.memoizedState!==null){if(ma(n),n.alternate===null)throw Error(s(340));fo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ma(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));fo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return be(Cn),null;case 4:return Oe(),null;case 10:return Li(n.type),null;case 22:case 23:return ma(n),Df(),e!==null&&be(go),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Li(Ln),null;case 25:return null;default:return null}}function ty(e,n){switch(pf(n),n.tag){case 3:Li(Ln),Oe();break;case 26:case 27:case 5:On(n);break;case 4:Oe();break;case 31:n.memoizedState!==null&&ma(n);break;case 13:ma(n);break;case 19:be(Cn);break;case 10:Li(n.type);break;case 22:case 23:ma(n),Df(),e!==null&&be(go);break;case 24:Li(Ln)}}function su(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var f=o.next;i=f;do{if((i.tag&e)===e){o=void 0;var m=i.create,w=i.inst;o=m(),w.destroy=o}i=i.next}while(i!==f)}}catch(C){Xt(n,n.return,C)}}function Cs(e,n,i){try{var o=n.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&e)===e){var w=o.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,f=n;var z=i,he=C;try{he()}catch(ve){Xt(f,z,ve)}}}o=o.next}while(o!==m)}}catch(ve){Xt(n,n.return,ve)}}function ny(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Gp(n,i)}catch(o){Xt(e,e.return,o)}}}function ry(e,n,i){i.props=xo(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Xt(e,n,o)}}function ou(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(f){Xt(e,n,f)}}function pi(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(f){Xt(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Xt(e,n,f)}else i.current=null}function ay(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(f){Xt(e,e.return,f)}}function ld(e,n,i){try{var o=e.stateNode;y1(o,e.type,i,n),o[nn]=n}catch(f){Xt(e,e.return,f)}}function iy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ks(e.type)||e.tag===4}function ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ks(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cd(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=pr));else if(o!==4&&(o===27&&ks(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(cd(e,n,i),e=e.sibling;e!==null;)cd(e,n,i),e=e.sibling}function Ac(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&ks(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ac(e,n,i),e=e.sibling;e!==null;)Ac(e,n,i),e=e.sibling}function sy(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);ur(n,o,i),n[Kt]=e,n[nn]=i}catch(m){Xt(e,e.return,m)}}var Fi=!1,Bn=!1,hd=!1,oy=typeof WeakSet=="function"?WeakSet:Set,er=null;function $x(e,n){if(e=e.containerInfo,Id=Qc,e=S(e),R(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var w=0,C=-1,z=-1,he=0,ve=0,we=e,me=null;t:for(;;){for(var ge;we!==i||f!==0&&we.nodeType!==3||(C=w+f),we!==m||o!==0&&we.nodeType!==3||(z=w+o),we.nodeType===3&&(w+=we.nodeValue.length),(ge=we.firstChild)!==null;)me=we,we=ge;for(;;){if(we===e)break t;if(me===i&&++he===f&&(C=w),me===m&&++ve===o&&(z=w),(ge=we.nextSibling)!==null)break;we=me,me=we.parentNode}we=ge}i=C===-1||z===-1?null:{start:C,end:z}}else i=null}i=i||{start:0,end:0}}else i=null;for(Od={focusedElem:e,selectionRange:i},Qc=!1,er=n;er!==null;)if(n=er,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,er=e;else for(;er!==null;){switch(n=er,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)f=e[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,i=n,f=m.memoizedProps,m=m.memoizedState,o=i.stateNode;try{var Qe=xo(i.type,f);e=o.getSnapshotBeforeUpdate(Qe,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(nt){Xt(i,i.return,nt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)kd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,er=e;break}er=n.return}}function ly(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Ki(e,i),o&4&&su(5,i);break;case 1:if(Ki(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(w){Xt(i,i.return,w)}else{var f=xo(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(w){Xt(i,i.return,w)}}o&64&&ny(i),o&512&&ou(i,i.return);break;case 3:if(Ki(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Gp(e,n)}catch(w){Xt(i,i.return,w)}}break;case 27:n===null&&o&4&&sy(i);case 26:case 5:Ki(e,i),n===null&&o&4&&ay(i),o&512&&ou(i,i.return);break;case 12:Ki(e,i);break;case 31:Ki(e,i),o&4&&hy(e,i);break;case 13:Ki(e,i),o&4&&fy(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=i1.bind(null,i),S1(e,i))));break;case 22:if(o=i.memoizedState!==null||Fi,!o){n=n!==null&&n.memoizedState!==null||Bn,f=Fi;var m=Bn;Fi=o,(Bn=n)&&!m?Gi(e,i,(i.subtreeFlags&8772)!==0):Ki(e,i),Fi=f,Bn=m}break;case 30:break;default:Ki(e,i)}}function uy(e){var n=e.alternate;n!==null&&(e.alternate=null,uy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ni(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var cn=null,Fr=!1;function Hi(e,n,i){for(i=i.child;i!==null;)cy(e,n,i),i=i.sibling}function cy(e,n,i){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(fr,i)}catch{}switch(i.tag){case 26:Bn||pi(i,n),Hi(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Bn||pi(i,n);var o=cn,f=Fr;ks(i.type)&&(cn=i.stateNode,Fr=!1),Hi(e,n,i),gu(i.stateNode),cn=o,Fr=f;break;case 5:Bn||pi(i,n);case 6:if(o=cn,f=Fr,cn=null,Hi(e,n,i),cn=o,Fr=f,cn!==null)if(Fr)try{(cn.nodeType===9?cn.body:cn.nodeName==="HTML"?cn.ownerDocument.body:cn).removeChild(i.stateNode)}catch(m){Xt(i,n,m)}else try{cn.removeChild(i.stateNode)}catch(m){Xt(i,n,m)}break;case 18:cn!==null&&(Fr?(e=cn,nv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ml(e)):nv(cn,i.stateNode));break;case 4:o=cn,f=Fr,cn=i.stateNode.containerInfo,Fr=!0,Hi(e,n,i),cn=o,Fr=f;break;case 0:case 11:case 14:case 15:Cs(2,i,n),Bn||Cs(4,i,n),Hi(e,n,i);break;case 1:Bn||(pi(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&ry(i,n,o)),Hi(e,n,i);break;case 21:Hi(e,n,i);break;case 22:Bn=(o=Bn)||i.memoizedState!==null,Hi(e,n,i),Bn=o;break;default:Hi(e,n,i)}}function hy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ml(e)}catch(i){Xt(n,n.return,i)}}}function fy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ml(e)}catch(i){Xt(n,n.return,i)}}function Zx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new oy),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new oy),n;default:throw Error(s(435,e.tag))}}function Nc(e,n){var i=Zx(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var f=s1.bind(null,e,o);o.then(f,f)}})}function Hr(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var f=i[o],m=e,w=n,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(ks(C.type)){cn=C.stateNode,Fr=!1;break e}break;case 5:cn=C.stateNode,Fr=!1;break e;case 3:case 4:cn=C.stateNode.containerInfo,Fr=!0;break e}C=C.return}if(cn===null)throw Error(s(160));cy(m,w,f),cn=null,Fr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)dy(n,e),n=n.sibling}var $a=null;function dy(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hr(n,e),Kr(e),o&4&&(Cs(3,e,e.return),su(3,e),Cs(5,e,e.return));break;case 1:Hr(n,e),Kr(e),o&512&&(Bn||i===null||pi(i,i.return)),o&64&&Fi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var f=$a;if(Hr(n,e),Kr(e),o&512&&(Bn||i===null||pi(i,i.return)),o&4){var m=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[$n]||m[Kt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),ur(m,o,i),m[Kt]=e,mn(m),o=m;break e;case"link":var w=dv("link","href",f).get(o+(i.href||""));if(w){for(var C=0;C<w.length;C++)if(m=w[C],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(C,1);break t}}m=f.createElement(o),ur(m,o,i),f.head.appendChild(m);break;case"meta":if(w=dv("meta","content",f).get(o+(i.content||""))){for(C=0;C<w.length;C++)if(m=w[C],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(C,1);break t}}m=f.createElement(o),ur(m,o,i),f.head.appendChild(m);break;default:throw Error(s(468,o))}m[Kt]=e,mn(m),o=m}e.stateNode=o}else mv(f,e.type,e.stateNode);else e.stateNode=fv(f,o,e.memoizedProps);else m!==o?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,o===null?mv(f,e.type,e.stateNode):fv(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&ld(e,e.memoizedProps,i.memoizedProps)}break;case 27:Hr(n,e),Kr(e),o&512&&(Bn||i===null||pi(i,i.return)),i!==null&&o&4&&ld(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Hr(n,e),Kr(e),o&512&&(Bn||i===null||pi(i,i.return)),e.flags&32){f=e.stateNode;try{ir(f,"")}catch(Qe){Xt(e,e.return,Qe)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,ld(e,f,i!==null?i.memoizedProps:f)),o&1024&&(hd=!0);break;case 6:if(Hr(n,e),Kr(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Qe){Xt(e,e.return,Qe)}}break;case 3:if(Fc=null,f=$a,$a=Bc(n.containerInfo),Hr(n,e),$a=f,Kr(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ml(n.containerInfo)}catch(Qe){Xt(e,e.return,Qe)}hd&&(hd=!1,my(e));break;case 4:o=$a,$a=Bc(e.stateNode.containerInfo),Hr(n,e),Kr(e),$a=o;break;case 12:Hr(n,e),Kr(e);break;case 31:Hr(n,e),Kr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nc(e,o)));break;case 13:Hr(n,e),Kr(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Cc=Xn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nc(e,o)));break;case 22:f=e.memoizedState!==null;var z=i!==null&&i.memoizedState!==null,he=Fi,ve=Bn;if(Fi=he||f,Bn=ve||z,Hr(n,e),Bn=ve,Fi=he,Kr(e),o&8192)e:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(i===null||z||Fi||Bn||Eo(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){z=i=n;try{if(m=z.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=z.stateNode;var we=z.memoizedProps.style,me=we!=null&&we.hasOwnProperty("display")?we.display:null;C.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(Qe){Xt(z,z.return,Qe)}}}else if(n.tag===6){if(i===null){z=n;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(Qe){Xt(z,z.return,Qe)}}}else if(n.tag===18){if(i===null){z=n;try{var ge=z.stateNode;f?rv(ge,!0):rv(z.stateNode,!1)}catch(Qe){Xt(z,z.return,Qe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Nc(e,i))));break;case 19:Hr(n,e),Kr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Nc(e,o)));break;case 30:break;case 21:break;default:Hr(n,e),Kr(e)}}function Kr(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(iy(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,m=ud(e);Ac(e,m,f);break;case 5:var w=i.stateNode;i.flags&32&&(ir(w,""),i.flags&=-33);var C=ud(e);Ac(e,C,w);break;case 3:case 4:var z=i.stateNode.containerInfo,he=ud(e);cd(e,he,z);break;default:throw Error(s(161))}}catch(ve){Xt(e,e.return,ve)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function my(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;my(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ki(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ly(e,n.alternate,n),n=n.sibling}function Eo(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Cs(4,n,n.return),Eo(n);break;case 1:pi(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&ry(n,n.return,i),Eo(n);break;case 27:gu(n.stateNode);case 26:case 5:pi(n,n.return),Eo(n);break;case 22:n.memoizedState===null&&Eo(n);break;case 30:Eo(n);break;default:Eo(n)}e=e.sibling}}function Gi(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,f=e,m=n,w=m.flags;switch(m.tag){case 0:case 11:case 15:Gi(f,m,i),su(4,m);break;case 1:if(Gi(f,m,i),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(he){Xt(o,o.return,he)}if(o=m,f=o.updateQueue,f!==null){var C=o.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)Kp(z[f],C)}catch(he){Xt(o,o.return,he)}}i&&w&64&&ny(m),ou(m,m.return);break;case 27:sy(m);case 26:case 5:Gi(f,m,i),i&&o===null&&w&4&&ay(m),ou(m,m.return);break;case 12:Gi(f,m,i);break;case 31:Gi(f,m,i),i&&w&4&&hy(f,m);break;case 13:Gi(f,m,i),i&&w&4&&fy(f,m);break;case 22:m.memoizedState===null&&Gi(f,m,i),ou(m,m.return);break;case 30:break;default:Gi(f,m,i)}n=n.sibling}}function fd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Ql(i))}function dd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ql(e))}function Za(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)py(e,n,i,o),n=n.sibling}function py(e,n,i,o){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Za(e,n,i,o),f&2048&&su(9,n);break;case 1:Za(e,n,i,o);break;case 3:Za(e,n,i,o),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ql(e)));break;case 12:if(f&2048){Za(e,n,i,o),e=n.stateNode;try{var m=n.memoizedProps,w=m.id,C=m.onPostCommit;typeof C=="function"&&C(w,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Xt(n,n.return,z)}}else Za(e,n,i,o);break;case 31:Za(e,n,i,o);break;case 13:Za(e,n,i,o);break;case 23:break;case 22:m=n.stateNode,w=n.alternate,n.memoizedState!==null?m._visibility&2?Za(e,n,i,o):lu(e,n):m._visibility&2?Za(e,n,i,o):(m._visibility|=2,rl(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),f&2048&&fd(w,n);break;case 24:Za(e,n,i,o),f&2048&&dd(n.alternate,n);break;default:Za(e,n,i,o)}}function rl(e,n,i,o,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,w=n,C=i,z=o,he=w.flags;switch(w.tag){case 0:case 11:case 15:rl(m,w,C,z,f),su(8,w);break;case 23:break;case 22:var ve=w.stateNode;w.memoizedState!==null?ve._visibility&2?rl(m,w,C,z,f):lu(m,w):(ve._visibility|=2,rl(m,w,C,z,f)),f&&he&2048&&fd(w.alternate,w);break;case 24:rl(m,w,C,z,f),f&&he&2048&&dd(w.alternate,w);break;default:rl(m,w,C,z,f)}n=n.sibling}}function lu(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,f=o.flags;switch(o.tag){case 22:lu(i,o),f&2048&&fd(o.alternate,o);break;case 24:lu(i,o),f&2048&&dd(o.alternate,o);break;default:lu(i,o)}n=n.sibling}}var uu=8192;function al(e,n,i){if(e.subtreeFlags&uu)for(e=e.child;e!==null;)gy(e,n,i),e=e.sibling}function gy(e,n,i){switch(e.tag){case 26:al(e,n,i),e.flags&uu&&e.memoizedState!==null&&P1(i,$a,e.memoizedState,e.memoizedProps);break;case 5:al(e,n,i);break;case 3:case 4:var o=$a;$a=Bc(e.stateNode.containerInfo),al(e,n,i),$a=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=uu,uu=16777216,al(e,n,i),uu=o):al(e,n,i));break;default:al(e,n,i)}}function yy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function cu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];er=o,by(o,e)}yy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vy(e),e=e.sibling}function vy(e){switch(e.tag){case 0:case 11:case 15:cu(e),e.flags&2048&&Cs(9,e,e.return);break;case 3:cu(e);break;case 12:cu(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Rc(e)):cu(e);break;default:cu(e)}}function Rc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];er=o,by(o,e)}yy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Cs(8,n,n.return),Rc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Rc(n));break;default:Rc(n)}e=e.sibling}}function by(e,n){for(;er!==null;){var i=er;switch(i.tag){case 0:case 11:case 15:Cs(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ql(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,er=o;else e:for(i=e;er!==null;){o=er;var f=o.sibling,m=o.return;if(uy(o),o===i){er=null;break e}if(f!==null){f.return=m,er=f;break e}er=m}}}var Jx={getCacheForType:function(e){var n=or(Ln),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return or(Ln).controller.signal}},Wx=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Wt=null,xt=null,wt=0,Yt=0,pa=null,Ds=!1,il=!1,md=!1,Qi=0,En=0,js=0,wo=0,pd=0,ga=0,sl=0,hu=null,Gr=null,gd=!1,Cc=0,_y=0,Dc=1/0,jc=null,Is=null,Gn=0,Os=null,ol=null,Yi=0,yd=0,vd=null,xy=null,fu=0,bd=null;function ya(){return(Lt&2)!==0&&wt!==0?wt&-wt:W.T!==null?Sd():Ai()}function Ey(){if(ga===0)if((wt&536870912)===0||Dt){var e=Ba;Ba<<=1,(Ba&3932160)===0&&(Ba=262144),ga=e}else ga=536870912;return e=da.current,e!==null&&(e.flags|=32),ga}function Qr(e,n,i){(e===Wt&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)&&(ll(e,0),Ms(e,wt,ga,!1)),Cr(e,i),((Lt&2)===0||e!==Wt)&&(e===Wt&&((Lt&2)===0&&(wo|=i),En===4&&Ms(e,wt,ga,!1)),gi(e))}function wy(e,n,i){if((Lt&6)!==0)throw Error(s(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||xr(e,n),f=o?n1(e,n):xd(e,n,!0),m=o;do{if(f===0){il&&!o&&Ms(e,n,0,!1);break}else{if(i=e.current.alternate,m&&!e1(i)){f=xd(e,n,!1),m=!1;continue}if(f===2){if(m=n,e.errorRecoveryDisabledLanes&m)var w=0;else w=e.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){n=w;e:{var C=e;f=hu;var z=C.current.memoizedState.isDehydrated;if(z&&(ll(C,w).flags|=256),w=xd(C,w,!1),w!==2){if(md&&!z){C.errorRecoveryDisabledLanes|=m,wo|=m,f=4;break e}m=Gr,Gr=f,m!==null&&(Gr===null?Gr=m:Gr.push.apply(Gr,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){ll(e,0),Ms(e,n,0,!0);break}e:{switch(o=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ms(o,n,ga,!Ds);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=Cc+300-Xn(),10<f)){if(Ms(o,n,ga,!Ds),ea(o,0,!0)!==0)break e;Yi=n,o.timeoutHandle=ev(Ty.bind(null,o,i,Gr,jc,gd,n,ga,wo,sl,Ds,m,"Throttled",-0,0),f);break e}Ty(o,i,Gr,jc,gd,n,ga,wo,sl,Ds,m,null,-0,0)}}break}while(!0);gi(e)}function Ty(e,n,i,o,f,m,w,C,z,he,ve,we,me,ge){if(e.timeoutHandle=-1,we=n.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pr},gy(n,m,we);var Qe=(m&62914560)===m?Cc-Xn():(m&4194048)===m?_y-Xn():0;if(Qe=L1(we,Qe),Qe!==null){Yi=m,e.cancelPendingCommit=Qe(Iy.bind(null,e,n,m,i,o,f,w,C,z,ve,we,null,me,ge)),Ms(e,m,w,!he);return}}Iy(e,n,m,i,o,f,w,C,z)}function e1(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var f=i[o],m=f.getSnapshot;f=f.value;try{if(!gr(m(),f))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ms(e,n,i,o){n&=~pd,n&=~wo,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var f=n;0<f;){var m=31-Ue(f),w=1<<m;o[m]=-1,f&=~w}i!==0&&xa(e,i,n)}function Ic(){return(Lt&6)===0?(du(0),!1):!0}function _d(){if(xt!==null){if(Yt===0)var e=xt.return;else e=xt,Pi=mo=null,kf(e),Jo=null,Xl=0,e=xt;for(;e!==null;)ty(e.alternate,e),e=e.return;xt=null}}function ll(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,_1(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Yi=0,_d(),Wt=e,xt=i=Vi(e.current,null),wt=n,Yt=0,pa=null,Ds=!1,il=xr(e,n),md=!1,sl=ga=pd=wo=js=En=0,Gr=hu=null,gd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var f=31-Ue(o),m=1<<f;n|=e[f],o&=~m}return Qi=n,Wn(),i}function Sy(e,n){mt=null,W.H=ru,n===Zo||n===oc?(n=Bp(),Yt=3):n===Tf?(n=Bp(),Yt=4):Yt=n===Jf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,pa=n,xt===null&&(En=1,xc(e,ja(n,e.current)))}function Ay(){var e=da.current;return e===null?!0:(wt&4194048)===wt?Va===null:(wt&62914560)===wt||(wt&536870912)!==0?e===Va:!1}function Ny(){var e=W.H;return W.H=ru,e===null?ru:e}function Ry(){var e=W.A;return W.A=Jx,e}function Oc(){En=4,Ds||(wt&4194048)!==wt&&da.current!==null||(il=!0),(js&134217727)===0&&(wo&134217727)===0||Wt===null||Ms(Wt,wt,ga,!1)}function xd(e,n,i){var o=Lt;Lt|=2;var f=Ny(),m=Ry();(Wt!==e||wt!==n)&&(jc=null,ll(e,n)),n=!1;var w=En;e:do try{if(Yt!==0&&xt!==null){var C=xt,z=pa;switch(Yt){case 8:_d(),w=6;break e;case 3:case 2:case 9:case 6:da.current===null&&(n=!0);var he=Yt;if(Yt=0,pa=null,ul(e,C,z,he),i&&il){w=0;break e}break;default:he=Yt,Yt=0,pa=null,ul(e,C,z,he)}}t1(),w=En;break}catch(ve){Sy(e,ve)}while(!0);return n&&e.shellSuspendCounter++,Pi=mo=null,Lt=o,W.H=f,W.A=m,xt===null&&(Wt=null,wt=0,Wn()),w}function t1(){for(;xt!==null;)Cy(xt)}function n1(e,n){var i=Lt;Lt|=2;var o=Ny(),f=Ry();Wt!==e||wt!==n?(jc=null,Dc=Xn()+500,ll(e,n)):il=xr(e,n);e:do try{if(Yt!==0&&xt!==null){n=xt;var m=pa;t:switch(Yt){case 1:Yt=0,pa=null,ul(e,n,m,1);break;case 2:case 9:if(zp(m)){Yt=0,pa=null,Dy(n);break}n=function(){Yt!==2&&Yt!==9||Wt!==e||(Yt=7),gi(e)},m.then(n,n);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:zp(m)?(Yt=0,pa=null,Dy(n)):(Yt=0,pa=null,ul(e,n,m,7));break;case 5:var w=null;switch(xt.tag){case 26:w=xt.memoizedState;case 5:case 27:var C=xt;if(w?pv(w):C.stateNode.complete){Yt=0,pa=null;var z=C.sibling;if(z!==null)xt=z;else{var he=C.return;he!==null?(xt=he,Mc(he)):xt=null}break t}}Yt=0,pa=null,ul(e,n,m,5);break;case 6:Yt=0,pa=null,ul(e,n,m,6);break;case 8:_d(),En=6;break e;default:throw Error(s(462))}}r1();break}catch(ve){Sy(e,ve)}while(!0);return Pi=mo=null,W.H=o,W.A=f,Lt=i,xt!==null?0:(Wt=null,wt=0,Wn(),En)}function r1(){for(;xt!==null&&!Lo();)Cy(xt)}function Cy(e){var n=Wg(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,n===null?Mc(e):xt=n}function Dy(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Qg(i,n,n.pendingProps,n.type,void 0,wt);break;case 11:n=Qg(i,n,n.pendingProps,n.type.render,n.ref,wt);break;case 5:kf(n);default:ty(i,n),n=xt=Rp(n,Qi),n=Wg(i,n,Qi)}e.memoizedProps=e.pendingProps,n===null?Mc(e):xt=n}function ul(e,n,i,o){Pi=mo=null,kf(n),Jo=null,Xl=0;var f=n.return;try{if(Kx(e,f,n,i,wt)){En=1,xc(e,ja(i,e.current)),xt=null;return}}catch(m){if(f!==null)throw xt=f,m;En=1,xc(e,ja(i,e.current)),xt=null;return}n.flags&32768?(Dt||o===1?e=!0:il||(wt&536870912)!==0?e=!1:(Ds=e=!0,(o===2||o===9||o===3||o===6)&&(o=da.current,o!==null&&o.tag===13&&(o.flags|=16384))),jy(n,e)):Mc(n)}function Mc(e){var n=e;do{if((n.flags&32768)!==0){jy(n,Ds);return}e=n.return;var i=Yx(n.alternate,n,Qi);if(i!==null){xt=i;return}if(n=n.sibling,n!==null){xt=n;return}xt=n=e}while(n!==null);En===0&&(En=5)}function jy(e,n){do{var i=Xx(e.alternate,e);if(i!==null){i.flags&=32767,xt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){xt=e;return}xt=e=i}while(e!==null);En=6,xt=null}function Iy(e,n,i,o,f,m,w,C,z){e.cancelPendingCommit=null;do Vc();while(Gn!==0);if((Lt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=dt,to(e,i,m,w,C,z),e===Wt&&(xt=Wt=null,wt=0),ol=n,Os=e,Yi=i,yd=m,vd=f,xy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,o1(ba,function(){return Py(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=W.T,W.T=null,f=Ae.p,Ae.p=2,w=Lt,Lt|=4;try{$x(e,n,i)}finally{Lt=w,Ae.p=f,W.T=o}}Gn=1,Oy(),My(),Vy()}}function Oy(){if(Gn===1){Gn=0;var e=Os,n=ol,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=W.T,W.T=null;var o=Ae.p;Ae.p=2;var f=Lt;Lt|=4;try{dy(n,e);var m=Od,w=S(e.containerInfo),C=m.focusedElem,z=m.selectionRange;if(w!==C&&C&&C.ownerDocument&&E(C.ownerDocument.documentElement,C)){if(z!==null&&R(C)){var he=z.start,ve=z.end;if(ve===void 0&&(ve=he),"selectionStart"in C)C.selectionStart=he,C.selectionEnd=Math.min(ve,C.value.length);else{var we=C.ownerDocument||document,me=we&&we.defaultView||window;if(me.getSelection){var ge=me.getSelection(),Qe=C.textContent.length,nt=Math.min(z.start,Qe),Jt=z.end===void 0?nt:Math.min(z.end,Qe);!ge.extend&&nt>Jt&&(w=Jt,Jt=nt,nt=w);var ae=y(C,nt),Y=y(C,Jt);if(ae&&Y&&(ge.rangeCount!==1||ge.anchorNode!==ae.node||ge.anchorOffset!==ae.offset||ge.focusNode!==Y.node||ge.focusOffset!==Y.offset)){var ce=we.createRange();ce.setStart(ae.node,ae.offset),ge.removeAllRanges(),nt>Jt?(ge.addRange(ce),ge.extend(Y.node,Y.offset)):(ce.setEnd(Y.node,Y.offset),ge.addRange(ce))}}}}for(we=[],ge=C;ge=ge.parentNode;)ge.nodeType===1&&we.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<we.length;C++){var _e=we[C];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Qc=!!Id,Od=Id=null}finally{Lt=f,Ae.p=o,W.T=i}}e.current=n,Gn=2}}function My(){if(Gn===2){Gn=0;var e=Os,n=ol,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=W.T,W.T=null;var o=Ae.p;Ae.p=2;var f=Lt;Lt|=4;try{ly(e,n.alternate,n)}finally{Lt=f,Ae.p=o,W.T=i}}Gn=3}}function Vy(){if(Gn===4||Gn===3){Gn=0,ri();var e=Os,n=ol,i=Yi,o=xy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Gn=5:(Gn=0,ol=Os=null,ky(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Is=null),Dr(i),n=n.stateNode,Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(fr,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=W.T,f=Ae.p,Ae.p=2,W.T=null;try{for(var m=e.onRecoverableError,w=0;w<o.length;w++){var C=o[w];m(C.value,{componentStack:C.stack})}}finally{W.T=n,Ae.p=f}}(Yi&3)!==0&&Vc(),gi(e),f=e.pendingLanes,(i&261930)!==0&&(f&42)!==0?e===bd?fu++:(fu=0,bd=e):fu=0,du(0)}}function ky(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ql(n)))}function Vc(){return Oy(),My(),Vy(),Py()}function Py(){if(Gn!==5)return!1;var e=Os,n=yd;yd=0;var i=Dr(Yi),o=W.T,f=Ae.p;try{Ae.p=32>i?32:i,W.T=null,i=vd,vd=null;var m=Os,w=Yi;if(Gn=0,ol=Os=null,Yi=0,(Lt&6)!==0)throw Error(s(331));var C=Lt;if(Lt|=4,vy(m.current),py(m,m.current,w,i),Lt=C,du(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(fr,m)}catch{}return!0}finally{Ae.p=f,W.T=o,ky(e,n)}}function Ly(e,n,i){n=ja(i,n),n=Zf(e.stateNode,n,2),e=As(e,n,2),e!==null&&(Cr(e,2),gi(e))}function Xt(e,n,i){if(e.tag===3)Ly(e,e,i);else for(;n!==null;){if(n.tag===3){Ly(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Is===null||!Is.has(o))){e=ja(i,e),i=zg(2),o=As(n,i,2),o!==null&&(Ug(i,o,n,e),Cr(o,2),gi(o));break}}n=n.return}}function Ed(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Wx;var f=new Set;o.set(n,f)}else f=o.get(n),f===void 0&&(f=new Set,o.set(n,f));f.has(i)||(md=!0,f.add(i),e=a1.bind(null,e,n,i),n.then(e,e))}function a1(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Wt===e&&(wt&i)===i&&(En===4||En===3&&(wt&62914560)===wt&&300>Xn()-Cc?(Lt&2)===0&&ll(e,0):pd|=i,sl===wt&&(sl=0)),gi(e)}function zy(e,n){n===0&&(n=zo()),e=un(e,n),e!==null&&(Cr(e,n),gi(e))}function i1(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),zy(e,i)}function s1(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(i=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),zy(e,i)}function o1(e,n){return Mt(e,n)}var kc=null,cl=null,wd=!1,Pc=!1,Td=!1,Vs=0;function gi(e){e!==cl&&e.next===null&&(cl===null?kc=cl=e:cl=cl.next=e),Pc=!0,wd||(wd=!0,u1())}function du(e,n){if(!Td&&Pc){Td=!0;do for(var i=!1,o=kc;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var w=o.suspendedLanes,C=o.pingedLanes;m=(1<<31-Ue(42|e)+1)-1,m&=f&~(w&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Fy(o,m))}else m=wt,m=ea(o,o===Wt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||xr(o,m)||(i=!0,Fy(o,m));o=o.next}while(i);Td=!1}}function l1(){Uy()}function Uy(){Pc=wd=!1;var e=0;Vs!==0&&b1()&&(e=Vs);for(var n=Xn(),i=null,o=kc;o!==null;){var f=o.next,m=By(o,n);m===0?(o.next=null,i===null?kc=f:i.next=f,f===null&&(cl=i)):(i=o,(e!==0||(m&3)!==0)&&(Pc=!0)),o=f}Gn!==0&&Gn!==5||du(e),Vs!==0&&(Vs=0)}function By(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var w=31-Ue(m),C=1<<w,z=f[w];z===-1?((C&i)===0||(C&o)!==0)&&(f[w]=Ul(C,n)):z<=n&&(e.expiredLanes|=C),m&=~C}if(n=Wt,i=wt,i=ea(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&wn(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||xr(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&wn(o),Dr(i)){case 2:case 8:i=Wr;break;case 32:i=ba;break;case 268435456:i=rs;break;default:i=ba}return o=qy.bind(null,e),i=Mt(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&wn(o),e.callbackPriority=2,e.callbackNode=null,2}function qy(e,n){if(Gn!==0&&Gn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Vc()&&e.callbackNode!==i)return null;var o=wt;return o=ea(e,e===Wt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(wy(e,o,n),By(e,Xn()),e.callbackNode!=null&&e.callbackNode===i?qy.bind(null,e):null)}function Fy(e,n){if(Vc())return null;wy(e,n,!0)}function u1(){x1(function(){(Lt&6)!==0?Mt(Jr,l1):Uy()})}function Sd(){if(Vs===0){var e=Xo;e===0&&(e=ke,ke<<=1,(ke&261888)===0&&(ke=256)),Vs=e}return Vs}function Hy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:la(""+e)}function Ky(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function c1(e,n,i,o,f){if(n==="submit"&&i&&i.stateNode===f){var m=Hy((f[nn]||null).action),w=o.submitter;w&&(n=(n=w[nn]||null)?Hy(n.formAction):w.getAttribute("formAction"),n!==null&&(m=n,w=null));var C=new Sa("action","action",null,o,f);e.push({event:C,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Vs!==0){var z=w?Ky(f,w):new FormData(f);Kf(i,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(C.preventDefault(),z=w?Ky(f,w):new FormData(f),Kf(i,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var Ad=0;Ad<Le.length;Ad++){var Nd=Le[Ad],h1=Nd.toLowerCase(),f1=Nd[0].toUpperCase()+Nd.slice(1);De(h1,"on"+f1)}De(le,"onAnimationEnd"),De(de,"onAnimationIteration"),De(ye,"onAnimationStart"),De("dblclick","onDoubleClick"),De("focusin","onFocus"),De("focusout","onBlur"),De(Ee,"onTransitionRun"),De(je,"onTransitionStart"),De(ze,"onTransitionCancel"),De(Ce,"onTransitionEnd"),Or("onMouseEnter",["mouseout","mouseover"]),Or("onMouseLeave",["mouseout","mouseover"]),Or("onPointerEnter",["pointerout","pointerover"]),Or("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function Gy(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],f=o.event;o=o.listeners;e:{var m=void 0;if(n)for(var w=o.length-1;0<=w;w--){var C=o[w],z=C.instance,he=C.currentTarget;if(C=C.listener,z!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=he;try{m(f)}catch(ve){qe(ve)}f.currentTarget=null,m=z}else for(w=0;w<o.length;w++){if(C=o[w],z=C.instance,he=C.currentTarget,C=C.listener,z!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=he;try{m(f)}catch(ve){qe(ve)}f.currentTarget=null,m=z}}}}function Et(e,n){var i=n[qa];i===void 0&&(i=n[qa]=new Set);var o=e+"__bubble";i.has(o)||(Qy(n,e,2,!1),i.add(o))}function Rd(e,n,i){var o=0;n&&(o|=4),Qy(i,e,o,n)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[Lc]){e[Lc]=!0,Ea.forEach(function(i){i!=="selectionchange"&&(d1.has(i)||Rd(i,!1,e),Rd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Lc]||(n[Lc]=!0,Rd("selectionchange",!1,n))}}function Qy(e,n,i,o){switch(Ev(n)){case 2:var f=B1;break;case 8:f=q1;break;default:f=Hd}i=f.bind(null,n,i,e),f=void 0,!Ci||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(n,i,{capture:!0,passive:f}):e.addEventListener(n,i,!0):f!==void 0?e.addEventListener(n,i,{passive:f}):e.addEventListener(n,i,!1)}function Dd(e,n,i,o,f){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var w=o.tag;if(w===3||w===4){var C=o.stateNode.containerInfo;if(C===f)break;if(w===4)for(w=o.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;C!==null;){if(w=jr(C),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){o=m=w;continue e}C=C.parentNode}}o=o.return}kr(function(){var he=m,ve=Er(i),we=[];e:{var me=Ve.get(e);if(me!==void 0){var ge=Sa,Qe=e;switch(e){case"keypress":if(Ga(i)===0)break e;case"keydown":case"keyup":ge=Ii;break;case"focusin":Qe="focus",ge=Ra;break;case"focusout":Qe="blur",ge=Ra;break;case"beforeblur":case"afterblur":ge=Ra;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=x;break;case le:case de:case ye:ge=so;break;case Ce:ge=D;break;case"scroll":case"scrollend":ge=li;break;case"wheel":ge=pe;break;case"copy":case"cut":case"paste":ge=Xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Ca;break;case"toggle":case"beforetoggle":ge=lt}var nt=(n&4)!==0,Jt=!nt&&(e==="scroll"||e==="scrollend"),ae=nt?me!==null?me+"Capture":null:me;nt=[];for(var Y=he,ce;Y!==null;){var _e=Y;if(ce=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||ce===null||ae===null||(_e=wr(Y,ae),_e!=null&&nt.push(pu(Y,_e,ce))),Jt)break;Y=Y.return}0<nt.length&&(me=new ge(me,Qe,null,i,ve),we.push({event:me,listeners:nt}))}}if((n&7)===0){e:{if(me=e==="mouseover"||e==="pointerover",ge=e==="mouseout"||e==="pointerout",me&&i!==Vr&&(Qe=i.relatedTarget||i.fromElement)&&(jr(Qe)||Qe[Kn]))break e;if((ge||me)&&(me=ve.window===ve?ve:(me=ve.ownerDocument)?me.defaultView||me.parentWindow:window,ge?(Qe=i.relatedTarget||i.toElement,ge=he,Qe=Qe?jr(Qe):null,Qe!==null&&(Jt=u(Qe),nt=Qe.tag,Qe!==Jt||nt!==5&&nt!==27&&nt!==6)&&(Qe=null)):(ge=null,Qe=he),ge!==Qe)){if(nt=Di,_e="onMouseLeave",ae="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(nt=Ca,_e="onPointerLeave",ae="onPointerEnter",Y="pointer"),Jt=ge==null?me:An(ge),ce=Qe==null?me:An(Qe),me=new nt(_e,Y+"leave",ge,i,ve),me.target=Jt,me.relatedTarget=ce,_e=null,jr(ve)===he&&(nt=new nt(ae,Y+"enter",Qe,i,ve),nt.target=ce,nt.relatedTarget=Jt,_e=nt),Jt=_e,ge&&Qe)t:{for(nt=m1,ae=ge,Y=Qe,ce=0,_e=ae;_e;_e=nt(_e))ce++;_e=0;for(var et=Y;et;et=nt(et))_e++;for(;0<ce-_e;)ae=nt(ae),ce--;for(;0<_e-ce;)Y=nt(Y),_e--;for(;ce--;){if(ae===Y||Y!==null&&ae===Y.alternate){nt=ae;break t}ae=nt(ae),Y=nt(Y)}nt=null}else nt=null;ge!==null&&Yy(we,me,ge,nt,!1),Qe!==null&&Jt!==null&&Yy(we,Jt,Qe,nt,!0)}}e:{if(me=he?An(he):window,ge=me.nodeName&&me.nodeName.toLowerCase(),ge==="select"||ge==="input"&&me.type==="file")var kt=uo;else if(qo(me))if(Da)kt=bs;else{kt=Mi;var Xe=tc}else ge=me.nodeName,!ge||ge.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?he&&ls(he.elementType)&&(kt=uo):kt=Fl;if(kt&&(kt=kt(e,he))){ql(we,kt,i,ve);break e}Xe&&Xe(e,me,he),e==="focusout"&&he&&me.type==="number"&&he.memoizedProps.value!=null&&Ri(me,"number",me.value)}switch(Xe=he?An(he):window,e){case"focusin":(qo(Xe)||Xe.contentEditable==="true")&&(P=Xe,K=he,G=null);break;case"focusout":G=K=P=null;break;case"mousedown":te=!0;break;case"contextmenu":case"mouseup":case"dragend":te=!1,U(we,i,ve);break;case"selectionchange":if(j)break;case"keydown":case"keyup":U(we,i,ve)}var gt;if(Ct)e:{switch(e){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else Oi?hi(e,i)&&(Tt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Tt="onCompositionStart");Tt&&(Br&&i.locale!=="ko"&&(Oi||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Oi&&(gt=Ka()):(Pr=ve,us="value"in Pr?Pr.value:Pr.textContent,Oi=!0)),Xe=zc(he,Tt),0<Xe.length&&(Tt=new Lr(Tt,e,null,i,ve),we.push({event:Tt,listeners:Xe}),gt?Tt.data=gt:(gt=gs(i),gt!==null&&(Tt.data=gt)))),(gt=Ur?Ju(e,i):uf(e,i))&&(Tt=zc(he,"onBeforeInput"),0<Tt.length&&(Xe=new Lr("onBeforeInput","beforeinput",null,i,ve),we.push({event:Xe,listeners:Tt}),Xe.data=gt)),c1(we,e,he,i,ve)}Gy(we,n)})}function pu(e,n,i){return{instance:e,listener:n,currentTarget:i}}function zc(e,n){for(var i=n+"Capture",o=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=wr(e,i),f!=null&&o.unshift(pu(e,f,m)),f=wr(e,n),f!=null&&o.push(pu(e,f,m))),e.tag===3)return o;e=e.return}return[]}function m1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Yy(e,n,i,o,f){for(var m=n._reactName,w=[];i!==null&&i!==o;){var C=i,z=C.alternate,he=C.stateNode;if(C=C.tag,z!==null&&z===o)break;C!==5&&C!==26&&C!==27||he===null||(z=he,f?(he=wr(i,m),he!=null&&w.unshift(pu(i,he,z))):f||(he=wr(i,m),he!=null&&w.push(pu(i,he,z)))),i=i.return}w.length!==0&&e.push({event:n,listeners:w})}var p1=/\r\n?/g,g1=/\u0000|\uFFFD/g;function Xy(e){return(typeof e=="string"?e:""+e).replace(p1,`
`).replace(g1,"")}function $y(e,n){return n=Xy(n),Xy(e)===n}function Zt(e,n,i,o,f,m){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ir(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ir(e,""+o);break;case"className":mr(e,"class",o);break;case"tabIndex":mr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(e,i,o);break;case"style":os(e,o,m);break;case"data":if(n!=="object"){mr(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=la(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(n!=="input"&&Zt(e,n,"name",f.name,f,null),Zt(e,n,"formEncType",f.formEncType,f,null),Zt(e,n,"formMethod",f.formMethod,f,null),Zt(e,n,"formTarget",f.formTarget,f,null)):(Zt(e,n,"encType",f.encType,f,null),Zt(e,n,"method",f.method,f,null),Zt(e,n,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=la(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=pr);break;case"onScroll":o!=null&&Et("scroll",e);break;case"onScrollEnd":o!=null&&Et("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=la(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":Et("beforetoggle",e),Et("toggle",e),ft(e,"popover",o);break;case"xlinkActuate":pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":pn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":pn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":pn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":pn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ft(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Bo.get(i)||i,ft(e,i,o))}}function jd(e,n,i,o,f,m){switch(i){case"style":os(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?ir(e,o):(typeof o=="number"||typeof o=="bigint")&&ir(e,""+o);break;case"onScroll":o!=null&&Et("scroll",e);break;case"onScrollEnd":o!=null&&Et("scrollend",e);break;case"onClick":o!=null&&(e.onclick=pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ii.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),n=i.slice(2,f?i.length-7:void 0),m=e[nn]||null,m=m!=null?m[i]:null,typeof m=="function"&&e.removeEventListener(n,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,f);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):ft(e,i,o)}}}function ur(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",e),Et("load",e);var o=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var w=i[m];if(w!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,m,w,i,null)}}f&&Zt(e,n,"srcSet",i.srcSet,i,null),o&&Zt(e,n,"src",i.src,i,null);return;case"input":Et("invalid",e);var C=m=w=f=null,z=null,he=null;for(o in i)if(i.hasOwnProperty(o)){var ve=i[o];if(ve!=null)switch(o){case"name":f=ve;break;case"type":w=ve;break;case"checked":z=ve;break;case"defaultChecked":he=ve;break;case"value":m=ve;break;case"defaultValue":C=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(s(137,n));break;default:Zt(e,n,o,ve,i,null)}}ss(e,m,C,z,he,w,f,!1);return;case"select":Et("invalid",e),o=w=m=null;for(f in i)if(i.hasOwnProperty(f)&&(C=i[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":w=C;break;case"multiple":o=C;default:Zt(e,n,f,C,i,null)}n=m,i=w,e.multiple=!!o,n!=null?sa(e,!!o,n,!1):i!=null&&sa(e,!!o,i,!0);return;case"textarea":Et("invalid",e),m=f=o=null;for(w in i)if(i.hasOwnProperty(w)&&(C=i[w],C!=null))switch(w){case"value":o=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Zt(e,n,w,C,i,null)}oa(e,o,f,m);return;case"option":for(z in i)if(i.hasOwnProperty(z)&&(o=i[z],o!=null))switch(z){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Zt(e,n,z,o,i,null)}return;case"dialog":Et("beforetoggle",e),Et("toggle",e),Et("cancel",e),Et("close",e);break;case"iframe":case"object":Et("load",e);break;case"video":case"audio":for(o=0;o<mu.length;o++)Et(mu[o],e);break;case"image":Et("error",e),Et("load",e);break;case"details":Et("toggle",e);break;case"embed":case"source":case"link":Et("error",e),Et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in i)if(i.hasOwnProperty(he)&&(o=i[he],o!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,he,o,i,null)}return;default:if(ls(n)){for(ve in i)i.hasOwnProperty(ve)&&(o=i[ve],o!==void 0&&jd(e,n,ve,o,i,void 0));return}}for(C in i)i.hasOwnProperty(C)&&(o=i[C],o!=null&&Zt(e,n,C,o,i,null))}function y1(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,C=null,z=null,he=null,ve=null;for(ge in i){var we=i[ge];if(i.hasOwnProperty(ge)&&we!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":z=we;default:o.hasOwnProperty(ge)||Zt(e,n,ge,null,o,we)}}for(var me in o){var ge=o[me];if(we=i[me],o.hasOwnProperty(me)&&(ge!=null||we!=null))switch(me){case"type":m=ge;break;case"name":f=ge;break;case"checked":he=ge;break;case"defaultChecked":ve=ge;break;case"value":w=ge;break;case"defaultValue":C=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,n));break;default:ge!==we&&Zt(e,n,me,ge,o,we)}}ia(e,w,C,z,he,ve,m,f);return;case"select":ge=w=C=me=null;for(m in i)if(z=i[m],i.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":ge=z;default:o.hasOwnProperty(m)||Zt(e,n,m,null,o,z)}for(f in o)if(m=o[f],z=i[f],o.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":me=m;break;case"defaultValue":C=m;break;case"multiple":w=m;default:m!==z&&Zt(e,n,f,m,o,z)}n=C,i=w,o=ge,me!=null?sa(e,!!i,me,!1):!!o!=!!i&&(n!=null?sa(e,!!i,n,!0):sa(e,!!i,i?[]:"",!1));return;case"textarea":ge=me=null;for(C in i)if(f=i[C],i.hasOwnProperty(C)&&f!=null&&!o.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Zt(e,n,C,null,o,f)}for(w in o)if(f=o[w],m=i[w],o.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":me=f;break;case"defaultValue":ge=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Zt(e,n,w,f,o,m)}ao(e,me,ge);return;case"option":for(var Qe in i)if(me=i[Qe],i.hasOwnProperty(Qe)&&me!=null&&!o.hasOwnProperty(Qe))switch(Qe){case"selected":e.selected=!1;break;default:Zt(e,n,Qe,null,o,me)}for(z in o)if(me=o[z],ge=i[z],o.hasOwnProperty(z)&&me!==ge&&(me!=null||ge!=null))switch(z){case"selected":e.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:Zt(e,n,z,me,o,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in i)me=i[nt],i.hasOwnProperty(nt)&&me!=null&&!o.hasOwnProperty(nt)&&Zt(e,n,nt,null,o,me);for(he in o)if(me=o[he],ge=i[he],o.hasOwnProperty(he)&&me!==ge&&(me!=null||ge!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,n));break;default:Zt(e,n,he,me,o,ge)}return;default:if(ls(n)){for(var Jt in i)me=i[Jt],i.hasOwnProperty(Jt)&&me!==void 0&&!o.hasOwnProperty(Jt)&&jd(e,n,Jt,void 0,o,me);for(ve in o)me=o[ve],ge=i[ve],!o.hasOwnProperty(ve)||me===ge||me===void 0&&ge===void 0||jd(e,n,ve,me,o,ge);return}}for(var ae in i)me=i[ae],i.hasOwnProperty(ae)&&me!=null&&!o.hasOwnProperty(ae)&&Zt(e,n,ae,null,o,me);for(we in o)me=o[we],ge=i[we],!o.hasOwnProperty(we)||me===ge||me==null&&ge==null||Zt(e,n,we,me,o,ge)}function Zy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function v1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var f=i[o],m=f.transferSize,w=f.initiatorType,C=f.duration;if(m&&C&&Zy(w)){for(w=0,C=f.responseEnd,o+=1;o<i.length;o++){var z=i[o],he=z.startTime;if(he>C)break;var ve=z.transferSize,we=z.initiatorType;ve&&Zy(we)&&(z=z.responseEnd,w+=ve*(z<C?1:(C-he)/(z-he)))}if(--o,n+=8*(m+w)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Id=null,Od=null;function Uc(e){return e.nodeType===9?e:e.ownerDocument}function Jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Md(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vd=null;function b1(){var e=window.event;return e&&e.type==="popstate"?e===Vd?!1:(Vd=e,!0):(Vd=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,_1=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,x1=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(e){return tv.resolve(null).then(e).catch(E1)}:ev;function E1(e){setTimeout(function(){throw e})}function ks(e){return e==="head"}function nv(e,n){var i=n,o=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(f),ml(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")gu(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,gu(i);for(var m=i.firstChild;m;){var w=m.nextSibling,C=m.nodeName;m[$n]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=w}}else i==="body"&&gu(e.ownerDocument.body);i=f}while(i);ml(n)}function rv(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function kd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":kd(i),Ni(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function w1(e,n,i,o){for(;e.nodeType===1;){var f=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[$n])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=ka(e.nextSibling),e===null)break}return null}function T1(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ka(e.nextSibling),e===null))return null;return e}function av(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ka(e.nextSibling),e===null))return null;return e}function Pd(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function S1(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ka(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var zd=null;function iv(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return ka(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function sv(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function ov(e,n,i){switch(n=Uc(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function gu(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ni(e)}var Pa=new Map,lv=new Set;function Bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xi=Ae.d;Ae.d={f:A1,r:N1,D:R1,C:C1,L:D1,m:j1,X:O1,S:I1,M:M1};function A1(){var e=Xi.f(),n=Ic();return e||n}function N1(e){var n=jt(e);n!==null&&n.tag===5&&n.type==="form"?Sg(n):Xi.r(e)}var hl=typeof document>"u"?null:document;function uv(e,n,i){var o=hl;if(o&&typeof n=="string"&&n){var f=Vn(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),lv.has(f)||(lv.add(f),e={rel:e,crossOrigin:i,href:n},o.querySelector(f)===null&&(n=o.createElement("link"),ur(n,"link",e),mn(n),o.head.appendChild(n)))}}function R1(e){Xi.D(e),uv("dns-prefetch",e,null)}function C1(e,n){Xi.C(e,n),uv("preconnect",e,n)}function D1(e,n,i){Xi.L(e,n,i);var o=hl;if(o&&e&&n){var f='link[rel="preload"][as="'+Vn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Vn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Vn(i.imageSizes)+'"]')):f+='[href="'+Vn(e)+'"]';var m=f;switch(n){case"style":m=fl(e);break;case"script":m=dl(e)}Pa.has(m)||(e=N({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Pa.set(m,e),o.querySelector(f)!==null||n==="style"&&o.querySelector(yu(m))||n==="script"&&o.querySelector(vu(m))||(n=o.createElement("link"),ur(n,"link",e),mn(n),o.head.appendChild(n)))}}function j1(e,n){Xi.m(e,n);var i=hl;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Vn(o)+'"][href="'+Vn(e)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=dl(e)}if(!Pa.has(m)&&(e=N({rel:"modulepreload",href:e},n),Pa.set(m,e),i.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(vu(m)))return}o=i.createElement("link"),ur(o,"link",e),mn(o),i.head.appendChild(o)}}}function I1(e,n,i){Xi.S(e,n,i);var o=hl;if(o&&e){var f=Mn(o).hoistableStyles,m=fl(e);n=n||"default";var w=f.get(m);if(!w){var C={loading:0,preload:null};if(w=o.querySelector(yu(m)))C.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Pa.get(m))&&Ud(e,i);var z=w=o.createElement("link");mn(z),ur(z,"link",e),z._p=new Promise(function(he,ve){z.onload=he,z.onerror=ve}),z.addEventListener("load",function(){C.loading|=1}),z.addEventListener("error",function(){C.loading|=2}),C.loading|=4,qc(w,n,o)}w={type:"stylesheet",instance:w,count:1,state:C},f.set(m,w)}}}function O1(e,n){Xi.X(e,n);var i=hl;if(i&&e){var o=Mn(i).hoistableScripts,f=dl(e),m=o.get(f);m||(m=i.querySelector(vu(f)),m||(e=N({src:e,async:!0},n),(n=Pa.get(f))&&Bd(e,n),m=i.createElement("script"),mn(m),ur(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function M1(e,n){Xi.M(e,n);var i=hl;if(i&&e){var o=Mn(i).hoistableScripts,f=dl(e),m=o.get(f);m||(m=i.querySelector(vu(f)),m||(e=N({src:e,async:!0,type:"module"},n),(n=Pa.get(f))&&Bd(e,n),m=i.createElement("script"),mn(m),ur(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function cv(e,n,i,o){var f=(f=$e.current)?Bc(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=fl(i.href),i=Mn(f).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=fl(i.href);var m=Mn(f).hoistableStyles,w=m.get(e);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,w),(m=f.querySelector(yu(e)))&&!m._p&&(w.instance=m,w.state.loading=5),Pa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Pa.set(e,i),m||V1(f,e,i,w.state))),n&&o===null)throw Error(s(528,""));return w}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=dl(i),i=Mn(f).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function fl(e){return'href="'+Vn(e)+'"'}function yu(e){return'link[rel="stylesheet"]['+e+"]"}function hv(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function V1(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),ur(n,"link",i),mn(n),e.head.appendChild(n))}function dl(e){return'[src="'+Vn(e)+'"]'}function vu(e){return"script[async]"+e}function fv(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Vn(i.href)+'"]');if(o)return n.instance=o,mn(o),o;var f=N({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),mn(o),ur(o,"style",f),qc(o,i.precedence,e),n.instance=o;case"stylesheet":f=fl(i.href);var m=e.querySelector(yu(f));if(m)return n.state.loading|=4,n.instance=m,mn(m),m;o=hv(i),(f=Pa.get(f))&&Ud(o,f),m=(e.ownerDocument||e).createElement("link"),mn(m);var w=m;return w._p=new Promise(function(C,z){w.onload=C,w.onerror=z}),ur(m,"link",o),n.state.loading|=4,qc(m,i.precedence,e),n.instance=m;case"script":return m=dl(i.src),(f=e.querySelector(vu(m)))?(n.instance=f,mn(f),f):(o=i,(f=Pa.get(m))&&(o=N({},i),Bd(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),mn(f),ur(f,"link",o),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,qc(o,i.precedence,e));return n.instance}function qc(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,w=0;w<o.length;w++){var C=o[w];if(C.dataset.precedence===n)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Ud(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Bd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Fc=null;function dv(e,n,i){if(Fc===null){var o=new Map,f=Fc=new Map;f.set(i,o)}else f=Fc,o=f.get(i),o||(o=new Map,f.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),f=0;f<i.length;f++){var m=i[f];if(!(m[$n]||m[Kt]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(n)||"";w=e+w;var C=o.get(w);C?C.push(m):o.set(w,[m])}}return o}function mv(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function k1(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function pv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function P1(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=fl(o.href),m=n.querySelector(yu(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Hc.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=m,mn(m);return}m=n.ownerDocument||n,o=hv(o),(f=Pa.get(f))&&Ud(o,f),m=m.createElement("link"),mn(m);var w=m;w._p=new Promise(function(C,z){w.onload=C,w.onerror=z}),ur(m,"link",o),i.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Hc.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var qd=0;function L1(e,n){return e.stylesheets&&e.count===0&&Gc(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Gc(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&qd===0&&(qd=62500*v1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Gc(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>qd?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Hc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kc=null;function Gc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kc=new Map,n.forEach(z1,e),Kc=null,Hc.call(e))}function z1(e,n){if(!(n.state.loading&4)){var i=Kc.get(e);if(i)var o=i.get(null);else{i=new Map,Kc.set(e,i);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),o=w)}o&&i.set(null,o)}f=n.instance,w=f.getAttribute("data-precedence"),m=i.get(w)||o,m===o&&i.set(null,f),i.set(w,f),this.count++,o=Hc.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var bu={$$typeof:fe,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function U1(e,n,i,o,f,m,w,C,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ar(0),this.hiddenUpdates=ar(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function gv(e,n,i,o,f,m,w,C,z,he,ve,we){return e=new U1(e,n,i,w,z,he,ve,we,C),n=1,m===!0&&(n|=24),m=fa(3,null,null,n),e.current=m,m.stateNode=e,n=xf(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:i,cache:n},Sf(m),e}function yv(e){return e?(e=qr,e):qr}function vv(e,n,i,o,f,m){f=yv(f),o.context===null?o.context=f:o.pendingContext=f,o=Ss(n),o.payload={element:i},m=m===void 0?null:m,m!==null&&(o.callback=m),i=As(e,o,n),i!==null&&(Qr(i,e,n),Zl(i,e,n))}function bv(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Fd(e,n){bv(e,n),(e=e.alternate)&&bv(e,n)}function _v(e){if(e.tag===13||e.tag===31){var n=un(e,67108864);n!==null&&Qr(n,e,67108864),Fd(e,67108864)}}function xv(e){if(e.tag===13||e.tag===31){var n=ya();n=Si(n);var i=un(e,n);i!==null&&Qr(i,e,n),Fd(e,n)}}var Qc=!0;function B1(e,n,i,o){var f=W.T;W.T=null;var m=Ae.p;try{Ae.p=2,Hd(e,n,i,o)}finally{Ae.p=m,W.T=f}}function q1(e,n,i,o){var f=W.T;W.T=null;var m=Ae.p;try{Ae.p=8,Hd(e,n,i,o)}finally{Ae.p=m,W.T=f}}function Hd(e,n,i,o){if(Qc){var f=Kd(o);if(f===null)Dd(e,n,o,Yc,i),wv(e,o);else if(H1(f,e,n,i,o))o.stopPropagation();else if(wv(e,o),n&4&&-1<F1.indexOf(e)){for(;f!==null;){var m=jt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Rr(m.pendingLanes);if(w!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var z=1<<31-Ue(w);C.entanglements[1]|=z,w&=~z}gi(m),(Lt&6)===0&&(Dc=Xn()+500,du(0))}}break;case 31:case 13:C=un(m,2),C!==null&&Qr(C,m,2),Ic(),Fd(m,2)}if(m=Kd(o),m===null&&Dd(e,n,o,Yc,i),m===f)break;f=m}f!==null&&o.stopPropagation()}else Dd(e,n,o,null,i)}}function Kd(e){return e=Er(e),Gd(e)}var Yc=null;function Gd(e){if(Yc=null,e=jr(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=p(n),e!==null)return e;e=null}else if(i===31){if(e=_(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Yc=e,null}function Ev(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case Jr:return 2;case Wr:return 8;case ba:case Ei:return 32;case rs:return 268435456;default:return 32}default:return 32}}var Qd=!1,Ps=null,Ls=null,zs=null,_u=new Map,xu=new Map,Us=[],F1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(e,n){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":_u.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(n.pointerId)}}function Eu(e,n,i,o,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},n!==null&&(n=jt(n),n!==null&&_v(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function H1(e,n,i,o,f){switch(n){case"focusin":return Ps=Eu(Ps,e,n,i,o,f),!0;case"dragenter":return Ls=Eu(Ls,e,n,i,o,f),!0;case"mouseover":return zs=Eu(zs,e,n,i,o,f),!0;case"pointerover":var m=f.pointerId;return _u.set(m,Eu(_u.get(m)||null,e,n,i,o,f)),!0;case"gotpointercapture":return m=f.pointerId,xu.set(m,Eu(xu.get(m)||null,e,n,i,o,f)),!0}return!1}function Tv(e){var n=jr(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=p(i),n!==null){e.blockedOn=n,dr(e.priority,function(){xv(i)});return}}else if(n===31){if(n=_(i),n!==null){e.blockedOn=n,dr(e.priority,function(){xv(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Kd(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Vr=o,i.target.dispatchEvent(o),Vr=null}else return n=jt(i),n!==null&&_v(n),e.blockedOn=i,!1;n.shift()}return!0}function Sv(e,n,i){Xc(e)&&i.delete(n)}function K1(){Qd=!1,Ps!==null&&Xc(Ps)&&(Ps=null),Ls!==null&&Xc(Ls)&&(Ls=null),zs!==null&&Xc(zs)&&(zs=null),_u.forEach(Sv),xu.forEach(Sv)}function $c(e,n){e.blockedOn===n&&(e.blockedOn=null,Qd||(Qd=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,K1)))}var Zc=null;function Av(e){Zc!==e&&(Zc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Zc===e&&(Zc=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],f=e[n+2];if(typeof o!="function"){if(Gd(o||i)===null)continue;break}var m=jt(i);m!==null&&(e.splice(n,3),n-=3,Kf(m,{pending:!0,data:f,method:i.method,action:o},o,f))}}))}function ml(e){function n(z){return $c(z,e)}Ps!==null&&$c(Ps,e),Ls!==null&&$c(Ls,e),zs!==null&&$c(zs,e),_u.forEach(n),xu.forEach(n);for(var i=0;i<Us.length;i++){var o=Us[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Us.length&&(i=Us[0],i.blockedOn===null);)Tv(i),i.blockedOn===null&&Us.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var f=i[o],m=i[o+1],w=f[nn]||null;if(typeof m=="function")w||Av(i);else if(w){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[nn]||null)C=w.formAction;else if(Gd(f)!==null)continue}else C=w.action;typeof C=="function"?i[o+1]=C:(i.splice(o,3),o-=3),Av(i)}}}function Nv(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Yd(e){this._internalRoot=e}Jc.prototype.render=Yd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,o=ya();vv(i,o,e,n,null,null)},Jc.prototype.unmount=Yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;vv(e.current,2,null,e,null,null),Ic(),n[Kn]=null}};function Jc(e){this._internalRoot=e}Jc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ai();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Us.length&&n!==0&&n<Us[i].priority;i++);Us.splice(i,0,e),i===0&&Tv(e)}};var Rv=t.version;if(Rv!=="19.2.0")throw Error(s(527,Rv,"19.2.0"));Ae.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var G1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{fr=Wc.inject(G1),Tn=Wc}catch{}}return Tu.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,o="",f=Vg,m=kg,w=Pg;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError)),n=gv(e,1,!1,null,null,i,o,null,f,m,w,Nv),e[Kn]=n.current,Cd(e),new Yd(n)},Tu.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var o=!1,f="",m=Vg,w=kg,C=Pg,z=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError),i.formState!==void 0&&(z=i.formState)),n=gv(e,1,!0,n,i??null,o,f,z,m,w,C,Nv),n.context=yv(null),i=n.current,o=ya(),o=Si(o),f=Ss(o),f.callback=null,As(i,f,o),i=o,n.current.lanes=i,Cr(n,i),gi(n),e[Kn]=n.current,Cd(e),new Jc(n)},Tu.version="19.2.0",Tu}var Lv;function rE(){if(Lv)return Zd.exports;Lv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Zd.exports=nE(),Zd.exports}var aE=rE();const iE=Pm(aE);var zv="popstate";function sE(a={}){function t(s,l){let{pathname:u,search:p,hash:_}=s.location;return fm("",{pathname:u,search:p,hash:_},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:Vu(l)}return lE(t,r,null,a)}function hn(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function za(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oE(){return Math.random().toString(36).substring(2,10)}function Uv(a,t){return{usr:a.state,key:a.key,idx:t}}function fm(a,t,r=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?Dl(t):t,state:r,key:t&&t.key||s||oE()}}function Vu({pathname:a="/",search:t="",hash:r=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function Dl(a){let t={};if(a){let r=a.indexOf("#");r>=0&&(t.hash=a.substring(r),a=a.substring(0,r));let s=a.indexOf("?");s>=0&&(t.search=a.substring(s),a=a.substring(0,s)),a&&(t.pathname=a)}return t}function lE(a,t,r,s={}){let{window:l=document.defaultView,v5Compat:u=!1}=s,p=l.history,_="POP",v=null,b=A();b==null&&(b=0,p.replaceState({...p.state,idx:b},""));function A(){return(p.state||{idx:null}).idx}function N(){_="POP";let B=A(),L=B==null?null:B-b;b=B,v&&v({action:_,location:oe.location,delta:L})}function I(B,L){_="PUSH";let ee=fm(oe.location,B,L);b=A()+1;let fe=Uv(ee,b),xe=oe.createHref(ee);try{p.pushState(fe,"",xe)}catch(Pe){if(Pe instanceof DOMException&&Pe.name==="DataCloneError")throw Pe;l.location.assign(xe)}u&&v&&v({action:_,location:oe.location,delta:1})}function X(B,L){_="REPLACE";let ee=fm(oe.location,B,L);b=A();let fe=Uv(ee,b),xe=oe.createHref(ee);p.replaceState(fe,"",xe),u&&v&&v({action:_,location:oe.location,delta:0})}function ue(B){return uE(B)}let oe={get action(){return _},get location(){return a(l,p)},listen(B){if(v)throw new Error("A history only accepts one active listener");return l.addEventListener(zv,N),v=B,()=>{l.removeEventListener(zv,N),v=null}},createHref(B){return t(l,B)},createURL:ue,encodeLocation(B){let L=ue(B);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:I,replace:X,go(B){return p.go(B)}};return oe}function uE(a,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),hn(r,"No window.location.(origin|href) available to create URL");let s=typeof a=="string"?a:Vu(a);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function fb(a,t,r="/"){return cE(a,t,r,!1)}function cE(a,t,r,s){let l=typeof t=="string"?Dl(t):t,u=Ji(l.pathname||"/",r);if(u==null)return null;let p=db(a);hE(p);let _=null;for(let v=0;_==null&&v<p.length;++v){let b=EE(u);_=_E(p[v],b,s)}return _}function db(a,t=[],r=[],s="",l=!1){let u=(p,_,v=l,b)=>{let A={relativePath:b===void 0?p.path||"":b,caseSensitive:p.caseSensitive===!0,childrenIndex:_,route:p};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(s)&&v)return;hn(A.relativePath.startsWith(s),`Absolute route path "${A.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(s.length)}let N=$i([s,A.relativePath]),I=r.concat(A);p.children&&p.children.length>0&&(hn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),db(p.children,t,I,N,v)),!(p.path==null&&!p.index)&&t.push({path:N,score:vE(N,p.index),routesMeta:I})};return a.forEach((p,_)=>{if(p.path===""||!p.path?.includes("?"))u(p,_);else for(let v of mb(p.path))u(p,_,!0,v)}),t}function mb(a){let t=a.split("/");if(t.length===0)return[];let[r,...s]=t,l=r.endsWith("?"),u=r.replace(/\?$/,"");if(s.length===0)return l?[u,""]:[u];let p=mb(s.join("/")),_=[];return _.push(...p.map(v=>v===""?u:[u,v].join("/"))),l&&_.push(...p),_.map(v=>a.startsWith("/")&&v===""?"/":v)}function hE(a){a.sort((t,r)=>t.score!==r.score?r.score-t.score:bE(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var fE=/^:[\w-]+$/,dE=3,mE=2,pE=1,gE=10,yE=-2,Bv=a=>a==="*";function vE(a,t){let r=a.split("/"),s=r.length;return r.some(Bv)&&(s+=yE),t&&(s+=mE),r.filter(l=>!Bv(l)).reduce((l,u)=>l+(fE.test(u)?dE:u===""?pE:gE),s)}function bE(a,t){return a.length===t.length&&a.slice(0,-1).every((s,l)=>s===t[l])?a[a.length-1]-t[t.length-1]:0}function _E(a,t,r=!1){let{routesMeta:s}=a,l={},u="/",p=[];for(let _=0;_<s.length;++_){let v=s[_],b=_===s.length-1,A=u==="/"?t:t.slice(u.length)||"/",N=gh({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},A),I=v.route;if(!N&&b&&r&&!s[s.length-1].route.index&&(N=gh({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},A)),!N)return null;Object.assign(l,N.params),p.push({params:l,pathname:$i([u,N.pathname]),pathnameBase:NE($i([u,N.pathnameBase])),route:I}),N.pathnameBase!=="/"&&(u=$i([u,N.pathnameBase]))}return p}function gh(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,s]=xE(a.path,a.caseSensitive,a.end),l=t.match(r);if(!l)return null;let u=l[0],p=u.replace(/(.)\/+$/,"$1"),_=l.slice(1);return{params:s.reduce((b,{paramName:A,isOptional:N},I)=>{if(A==="*"){let ue=_[I]||"";p=u.slice(0,u.length-ue.length).replace(/(.)\/+$/,"$1")}const X=_[I];return N&&!X?b[A]=void 0:b[A]=(X||"").replace(/%2F/g,"/"),b},{}),pathname:u,pathnameBase:p,pattern:a}}function xE(a,t=!1,r=!0){za(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,_,v)=>(s.push({paramName:_,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(s.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function EE(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return za(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function Ji(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=a.charAt(r);return s&&s!=="/"?null:a.slice(r)||"/"}var wE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TE=a=>wE.test(a);function SE(a,t="/"){let{pathname:r,search:s="",hash:l=""}=typeof a=="string"?Dl(a):a,u;if(r)if(TE(r))u=r;else{if(r.includes("//")){let p=r;r=r.replace(/\/\/+/g,"/"),za(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${r}`)}r.startsWith("/")?u=qv(r.substring(1),"/"):u=qv(r,t)}else u=t;return{pathname:u,search:RE(s),hash:CE(l)}}function qv(a,t){let r=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function tm(a,t,r,s){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AE(a){return a.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Lm(a){let t=AE(a);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function zm(a,t,r,s=!1){let l;typeof a=="string"?l=Dl(a):(l={...a},hn(!l.pathname||!l.pathname.includes("?"),tm("?","pathname","search",l)),hn(!l.pathname||!l.pathname.includes("#"),tm("#","pathname","hash",l)),hn(!l.search||!l.search.includes("#"),tm("#","search","hash",l)));let u=a===""||l.pathname==="",p=u?"/":l.pathname,_;if(p==null)_=r;else{let N=t.length-1;if(!s&&p.startsWith("..")){let I=p.split("/");for(;I[0]==="..";)I.shift(),N-=1;l.pathname=I.join("/")}_=N>=0?t[N]:"/"}let v=SE(l,_),b=p&&p!=="/"&&p.endsWith("/"),A=(u||p===".")&&r.endsWith("/");return!v.pathname.endsWith("/")&&(b||A)&&(v.pathname+="/"),v}var $i=a=>a.join("/").replace(/\/\/+/g,"/"),NE=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),RE=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,CE=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function DE(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pb=["POST","PUT","PATCH","DELETE"];new Set(pb);var jE=["GET",...pb];new Set(jE);var jl=ie.createContext(null);jl.displayName="DataRouter";var Lh=ie.createContext(null);Lh.displayName="DataRouterState";ie.createContext(!1);var gb=ie.createContext({isTransitioning:!1});gb.displayName="ViewTransition";var IE=ie.createContext(new Map);IE.displayName="Fetchers";var OE=ie.createContext(null);OE.displayName="Await";var ni=ie.createContext(null);ni.displayName="Navigation";var Fu=ie.createContext(null);Fu.displayName="Location";var Ua=ie.createContext({outlet:null,matches:[],isDataRoute:!1});Ua.displayName="Route";var Um=ie.createContext(null);Um.displayName="RouteError";function ME(a,{relative:t}={}){hn(Il(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=ie.useContext(ni),{hash:l,pathname:u,search:p}=Hu(a,{relative:t}),_=u;return r!=="/"&&(_=u==="/"?r:$i([r,u])),s.createHref({pathname:_,search:p,hash:l})}function Il(){return ie.useContext(Fu)!=null}function ns(){return hn(Il(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(Fu).location}var yb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vb(a){ie.useContext(ni).static||ie.useLayoutEffect(a)}function Ol(){let{isDataRoute:a}=ie.useContext(Ua);return a?$E():VE()}function VE(){hn(Il(),"useNavigate() may be used only in the context of a <Router> component.");let a=ie.useContext(jl),{basename:t,navigator:r}=ie.useContext(ni),{matches:s}=ie.useContext(Ua),{pathname:l}=ns(),u=JSON.stringify(Lm(s)),p=ie.useRef(!1);return vb(()=>{p.current=!0}),ie.useCallback((v,b={})=>{if(za(p.current,yb),!p.current)return;if(typeof v=="number"){r.go(v);return}let A=zm(v,JSON.parse(u),l,b.relative==="path");a==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:$i([t,A.pathname])),(b.replace?r.replace:r.push)(A,b.state,b)},[t,r,u,l,a])}var kE=ie.createContext(null);function PE(a){let t=ie.useContext(Ua).outlet;return ie.useMemo(()=>t&&ie.createElement(kE.Provider,{value:a},t),[t,a])}function LE(){let{matches:a}=ie.useContext(Ua),t=a[a.length-1];return t?t.params:{}}function Hu(a,{relative:t}={}){let{matches:r}=ie.useContext(Ua),{pathname:s}=ns(),l=JSON.stringify(Lm(r));return ie.useMemo(()=>zm(a,JSON.parse(l),s,t==="path"),[a,l,s,t])}function zE(a,t){return bb(a,t)}function bb(a,t,r,s,l){hn(Il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=ie.useContext(ni),{matches:p}=ie.useContext(Ua),_=p[p.length-1],v=_?_.params:{},b=_?_.pathname:"/",A=_?_.pathnameBase:"/",N=_&&_.route;{let ee=N&&N.path||"";_b(b,!N||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let I=ns(),X;if(t){let ee=typeof t=="string"?Dl(t):t;hn(A==="/"||ee.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),X=ee}else X=I;let ue=X.pathname||"/",oe=ue;if(A!=="/"){let ee=A.replace(/^\//,"").split("/");oe="/"+ue.replace(/^\//,"").split("/").slice(ee.length).join("/")}let B=fb(a,{pathname:oe});za(N||B!=null,`No routes matched location "${X.pathname}${X.search}${X.hash}" `),za(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${X.pathname}${X.search}${X.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=HE(B&&B.map(ee=>Object.assign({},ee,{params:Object.assign({},v,ee.params),pathname:$i([A,u.encodeLocation?u.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?A:$i([A,u.encodeLocation?u.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),p,r,s,l);return t&&L?ie.createElement(Fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...X},navigationType:"POP"}},L):L}function UE(){let a=XE(),t=DE(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",a),p=ie.createElement(ie.Fragment,null,ie.createElement("p",null," Hey developer "),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:u},"ErrorBoundary")," or"," ",ie.createElement("code",{style:u},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},t),r?ie.createElement("pre",{style:l},r):null,p)}var BE=ie.createElement(UE,null),qE=class extends ie.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){this.props.onError?this.props.onError(a,t):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?ie.createElement(Ua.Provider,{value:this.props.routeContext},ie.createElement(Um.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FE({routeContext:a,match:t,children:r}){let s=ie.useContext(jl);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),ie.createElement(Ua.Provider,{value:a},r)}function HE(a,t=[],r=null,s=null,l=null){if(a==null){if(!r)return null;if(r.errors)a=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let u=a,p=r?.errors;if(p!=null){let A=u.findIndex(N=>N.route.id&&p?.[N.route.id]!==void 0);hn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),u=u.slice(0,Math.min(u.length,A+1))}let _=!1,v=-1;if(r)for(let A=0;A<u.length;A++){let N=u[A];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(v=A),N.route.id){let{loaderData:I,errors:X}=r,ue=N.route.loader&&!I.hasOwnProperty(N.route.id)&&(!X||X[N.route.id]===void 0);if(N.route.lazy||ue){_=!0,v>=0?u=u.slice(0,v+1):u=[u[0]];break}}}let b=r&&s?(A,N)=>{s(A,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:N})}:void 0;return u.reduceRight((A,N,I)=>{let X,ue=!1,oe=null,B=null;r&&(X=p&&N.route.id?p[N.route.id]:void 0,oe=N.route.errorElement||BE,_&&(v<0&&I===0?(_b("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ue=!0,B=null):v===I&&(ue=!0,B=N.route.hydrateFallbackElement||null)));let L=t.concat(u.slice(0,I+1)),ee=()=>{let fe;return X?fe=oe:ue?fe=B:N.route.Component?fe=ie.createElement(N.route.Component,null):N.route.element?fe=N.route.element:fe=A,ie.createElement(FE,{match:N,routeContext:{outlet:A,matches:L,isDataRoute:r!=null},children:fe})};return r&&(N.route.ErrorBoundary||N.route.errorElement||I===0)?ie.createElement(qE,{location:r.location,revalidation:r.revalidation,component:oe,error:X,children:ee(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:b}):ee()},null)}function Bm(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KE(a){let t=ie.useContext(jl);return hn(t,Bm(a)),t}function GE(a){let t=ie.useContext(Lh);return hn(t,Bm(a)),t}function QE(a){let t=ie.useContext(Ua);return hn(t,Bm(a)),t}function qm(a){let t=QE(a),r=t.matches[t.matches.length-1];return hn(r.route.id,`${a} can only be used on routes that contain a unique "id"`),r.route.id}function YE(){return qm("useRouteId")}function XE(){let a=ie.useContext(Um),t=GE("useRouteError"),r=qm("useRouteError");return a!==void 0?a:t.errors?.[r]}function $E(){let{router:a}=KE("useNavigate"),t=qm("useNavigate"),r=ie.useRef(!1);return vb(()=>{r.current=!0}),ie.useCallback(async(l,u={})=>{za(r.current,yb),r.current&&(typeof l=="number"?a.navigate(l):await a.navigate(l,{fromRouteId:t,...u}))},[a,t])}var Fv={};function _b(a,t,r){!t&&!Fv[a]&&(Fv[a]=!0,za(!1,r))}ie.memo(ZE);function ZE({routes:a,future:t,state:r,unstable_onError:s}){return bb(a,void 0,r,s,t)}function JE({to:a,replace:t,state:r,relative:s}){hn(Il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=ie.useContext(ni);za(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=ie.useContext(Ua),{pathname:p}=ns(),_=Ol(),v=zm(a,Lm(u),p,s==="path"),b=JSON.stringify(v);return ie.useEffect(()=>{_(JSON.parse(b),{replace:t,state:r,relative:s})},[_,b,s,t,r]),null}function xb(a){return PE(a.context)}function Yr(a){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WE({basename:a="/",children:t=null,location:r,navigationType:s="POP",navigator:l,static:u=!1}){hn(!Il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),_=ie.useMemo(()=>({basename:p,navigator:l,static:u,future:{}}),[p,l,u]);typeof r=="string"&&(r=Dl(r));let{pathname:v="/",search:b="",hash:A="",state:N=null,key:I="default"}=r,X=ie.useMemo(()=>{let ue=Ji(v,p);return ue==null?null:{location:{pathname:ue,search:b,hash:A,state:N,key:I},navigationType:s}},[p,v,b,A,N,I,s]);return za(X!=null,`<Router basename="${p}"> is not able to match the URL "${v}${b}${A}" because it does not start with the basename, so the <Router> won't render anything.`),X==null?null:ie.createElement(ni.Provider,{value:_},ie.createElement(Fu.Provider,{children:t,value:X}))}function ew({children:a,location:t}){return zE(dm(a),t)}function dm(a,t=[]){let r=[];return ie.Children.forEach(a,(s,l)=>{if(!ie.isValidElement(s))return;let u=[...t,l];if(s.type===ie.Fragment){r.push.apply(r,dm(s.props.children,u));return}hn(s.type===Yr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=dm(s.props.children,u)),r.push(p)}),r}var sh="get",oh="application/x-www-form-urlencoded";function zh(a){return a!=null&&typeof a.tagName=="string"}function tw(a){return zh(a)&&a.tagName.toLowerCase()==="button"}function nw(a){return zh(a)&&a.tagName.toLowerCase()==="form"}function rw(a){return zh(a)&&a.tagName.toLowerCase()==="input"}function aw(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function iw(a,t){return a.button===0&&(!t||t==="_self")&&!aw(a)}var eh=null;function sw(){if(eh===null)try{new FormData(document.createElement("form"),0),eh=!1}catch{eh=!0}return eh}var ow=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nm(a){return a!=null&&!ow.has(a)?(za(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oh}"`),null):a}function lw(a,t){let r,s,l,u,p;if(nw(a)){let _=a.getAttribute("action");s=_?Ji(_,t):null,r=a.getAttribute("method")||sh,l=nm(a.getAttribute("enctype"))||oh,u=new FormData(a)}else if(tw(a)||rw(a)&&(a.type==="submit"||a.type==="image")){let _=a.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=a.getAttribute("formaction")||_.getAttribute("action");if(s=v?Ji(v,t):null,r=a.getAttribute("formmethod")||_.getAttribute("method")||sh,l=nm(a.getAttribute("formenctype"))||nm(_.getAttribute("enctype"))||oh,u=new FormData(_,a),!sw()){let{name:b,type:A,value:N}=a;if(A==="image"){let I=b?`${b}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else b&&u.append(b,N)}}else{if(zh(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=sh,s=null,l=oh,p=a}return u&&l==="text/plain"&&(p=u,u=void 0),{action:s,method:r.toLowerCase(),encType:l,formData:u,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fm(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function uw(a,t,r){let s=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&Ji(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function cw(a,t){if(a.id in t)return t[a.id];try{let r=await import(a.module);return t[a.id]=r,r}catch(r){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hw(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function fw(a,t,r){let s=await Promise.all(a.map(async l=>{let u=t.routes[l.route.id];if(u){let p=await cw(u,r);return p.links?p.links():[]}return[]}));return gw(s.flat(1).filter(hw).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Hv(a,t,r,s,l,u){let p=(v,b)=>r[b]?v.route.id!==r[b].route.id:!0,_=(v,b)=>r[b].pathname!==v.pathname||r[b].route.path?.endsWith("*")&&r[b].params["*"]!==v.params["*"];return u==="assets"?t.filter((v,b)=>p(v,b)||_(v,b)):u==="data"?t.filter((v,b)=>{let A=s.routes[v.route.id];if(!A||!A.hasLoader)return!1;if(p(v,b)||_(v,b))return!0;if(v.route.shouldRevalidate){let N=v.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function dw(a,t,{includeHydrateFallback:r}={}){return mw(a.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function mw(a){return[...new Set(a)]}function pw(a){let t={},r=Object.keys(a).sort();for(let s of r)t[s]=a[s];return t}function gw(a,t){let r=new Set;return new Set(t),a.reduce((s,l)=>{let u=JSON.stringify(pw(l));return r.has(u)||(r.add(u),s.push({key:u,link:l})),s},[])}function Eb(){let a=ie.useContext(jl);return Fm(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function yw(){let a=ie.useContext(Lh);return Fm(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Hm=ie.createContext(void 0);Hm.displayName="FrameworkContext";function wb(){let a=ie.useContext(Hm);return Fm(a,"You must render this element inside a <HydratedRouter> element"),a}function vw(a,t){let r=ie.useContext(Hm),[s,l]=ie.useState(!1),[u,p]=ie.useState(!1),{onFocus:_,onBlur:v,onMouseEnter:b,onMouseLeave:A,onTouchStart:N}=t,I=ie.useRef(null);ie.useEffect(()=>{if(a==="render"&&p(!0),a==="viewport"){let oe=L=>{L.forEach(ee=>{p(ee.isIntersecting)})},B=new IntersectionObserver(oe,{threshold:.5});return I.current&&B.observe(I.current),()=>{B.disconnect()}}},[a]),ie.useEffect(()=>{if(s){let oe=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(oe)}}},[s]);let X=()=>{l(!0)},ue=()=>{l(!1),p(!1)};return r?a!=="intent"?[u,I,{}]:[u,I,{onFocus:Su(_,X),onBlur:Su(v,ue),onMouseEnter:Su(b,X),onMouseLeave:Su(A,ue),onTouchStart:Su(N,X)}]:[!1,I,{}]}function Su(a,t){return r=>{a&&a(r),r.defaultPrevented||t(r)}}function bw({page:a,...t}){let{router:r}=Eb(),s=ie.useMemo(()=>fb(r.routes,a,r.basename),[r.routes,a,r.basename]);return s?ie.createElement(xw,{page:a,matches:s,...t}):null}function _w(a){let{manifest:t,routeModules:r}=wb(),[s,l]=ie.useState([]);return ie.useEffect(()=>{let u=!1;return fw(a,t,r).then(p=>{u||l(p)}),()=>{u=!0}},[a,t,r]),s}function xw({page:a,matches:t,...r}){let s=ns(),{manifest:l,routeModules:u}=wb(),{basename:p}=Eb(),{loaderData:_,matches:v}=yw(),b=ie.useMemo(()=>Hv(a,t,v,l,s,"data"),[a,t,v,l,s]),A=ie.useMemo(()=>Hv(a,t,v,l,s,"assets"),[a,t,v,l,s]),N=ie.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let ue=new Set,oe=!1;if(t.forEach(L=>{let ee=l.routes[L.route.id];!ee||!ee.hasLoader||(!b.some(fe=>fe.route.id===L.route.id)&&L.route.id in _&&u[L.route.id]?.shouldRevalidate||ee.hasClientLoader?oe=!0:ue.add(L.route.id))}),ue.size===0)return[];let B=uw(a,p,"data");return oe&&ue.size>0&&B.searchParams.set("_routes",t.filter(L=>ue.has(L.route.id)).map(L=>L.route.id).join(",")),[B.pathname+B.search]},[p,_,s,l,b,t,a,u]),I=ie.useMemo(()=>dw(A,l),[A,l]),X=_w(A);return ie.createElement(ie.Fragment,null,N.map(ue=>ie.createElement("link",{key:ue,rel:"prefetch",as:"fetch",href:ue,...r})),I.map(ue=>ie.createElement("link",{key:ue,rel:"modulepreload",href:ue,...r})),X.map(({key:ue,link:oe})=>ie.createElement("link",{key:ue,nonce:r.nonce,...oe})))}function Ew(...a){return t=>{a.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Tb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tb&&(window.__reactRouterVersion="7.9.6")}catch{}function ww({basename:a,children:t,window:r}){let s=ie.useRef();s.current==null&&(s.current=sE({window:r,v5Compat:!0}));let l=s.current,[u,p]=ie.useState({action:l.action,location:l.location}),_=ie.useCallback(v=>{ie.startTransition(()=>p(v))},[p]);return ie.useLayoutEffect(()=>l.listen(_),[l,_]),ie.createElement(WE,{basename:a,children:t,location:u.location,navigationType:u.action,navigator:l})}var Sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uh=ie.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:l,reloadDocument:u,replace:p,state:_,target:v,to:b,preventScrollReset:A,viewTransition:N,...I},X){let{basename:ue}=ie.useContext(ni),oe=typeof b=="string"&&Sb.test(b),B,L=!1;if(typeof b=="string"&&oe&&(B=b,Tb))try{let V=new URL(window.location.href),F=b.startsWith("//")?new URL(V.protocol+b):new URL(b),q=Ji(F.pathname,ue);F.origin===V.origin&&q!=null?b=q+F.search+F.hash:L=!0}catch{za(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=ME(b,{relative:l}),[fe,xe,Pe]=vw(s,I),Ye=Nw(b,{replace:p,state:_,target:v,preventScrollReset:A,relative:l,viewTransition:N});function M(V){t&&t(V),V.defaultPrevented||Ye(V)}let O=ie.createElement("a",{...I,...Pe,href:B||ee,onClick:L||u?t:M,ref:Ew(X,xe),target:v,"data-discover":!oe&&r==="render"?"true":void 0});return fe&&!oe?ie.createElement(ie.Fragment,null,O,ie.createElement(bw,{page:ee})):O});Uh.displayName="Link";var Tw=ie.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:l=!1,style:u,to:p,viewTransition:_,children:v,...b},A){let N=Hu(p,{relative:b.relative}),I=ns(),X=ie.useContext(Lh),{navigator:ue,basename:oe}=ie.useContext(ni),B=X!=null&&Iw(N)&&_===!0,L=ue.encodeLocation?ue.encodeLocation(N).pathname:N.pathname,ee=I.pathname,fe=X&&X.navigation&&X.navigation.location?X.navigation.location.pathname:null;r||(ee=ee.toLowerCase(),fe=fe?fe.toLowerCase():null,L=L.toLowerCase()),fe&&oe&&(fe=Ji(fe,oe)||fe);const xe=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Pe=ee===L||!l&&ee.startsWith(L)&&ee.charAt(xe)==="/",Ye=fe!=null&&(fe===L||!l&&fe.startsWith(L)&&fe.charAt(L.length)==="/"),M={isActive:Pe,isPending:Ye,isTransitioning:B},O=Pe?t:void 0,V;typeof s=="function"?V=s(M):V=[s,Pe?"active":null,Ye?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let F=typeof u=="function"?u(M):u;return ie.createElement(Uh,{...b,"aria-current":O,className:V,ref:A,style:F,to:p,viewTransition:_},typeof v=="function"?v(M):v)});Tw.displayName="NavLink";var Sw=ie.forwardRef(({discover:a="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:l,state:u,method:p=sh,action:_,onSubmit:v,relative:b,preventScrollReset:A,viewTransition:N,...I},X)=>{let ue=Dw(),oe=jw(_,{relative:b}),B=p.toLowerCase()==="get"?"get":"post",L=typeof _=="string"&&Sb.test(_),ee=fe=>{if(v&&v(fe),fe.defaultPrevented)return;fe.preventDefault();let xe=fe.nativeEvent.submitter,Pe=xe?.getAttribute("formmethod")||p;ue(xe||fe.currentTarget,{fetcherKey:t,method:Pe,navigate:r,replace:l,state:u,relative:b,preventScrollReset:A,viewTransition:N})};return ie.createElement("form",{ref:X,method:B,action:oe,onSubmit:s?v:ee,...I,"data-discover":!L&&a==="render"?"true":void 0})});Sw.displayName="Form";function Aw(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ab(a){let t=ie.useContext(jl);return hn(t,Aw(a)),t}function Nw(a,{target:t,replace:r,state:s,preventScrollReset:l,relative:u,viewTransition:p}={}){let _=Ol(),v=ns(),b=Hu(a,{relative:u});return ie.useCallback(A=>{if(iw(A,t)){A.preventDefault();let N=r!==void 0?r:Vu(v)===Vu(b);_(a,{replace:N,state:s,preventScrollReset:l,relative:u,viewTransition:p})}},[v,_,b,r,s,t,a,l,u,p])}var Rw=0,Cw=()=>`__${String(++Rw)}__`;function Dw(){let{router:a}=Ab("useSubmit"),{basename:t}=ie.useContext(ni),r=YE();return ie.useCallback(async(s,l={})=>{let{action:u,method:p,encType:_,formData:v,body:b}=lw(s,t);if(l.navigate===!1){let A=l.fetcherKey||Cw();await a.fetch(A,r,l.action||u,{preventScrollReset:l.preventScrollReset,formData:v,body:b,formMethod:l.method||p,formEncType:l.encType||_,flushSync:l.flushSync})}else await a.navigate(l.action||u,{preventScrollReset:l.preventScrollReset,formData:v,body:b,formMethod:l.method||p,formEncType:l.encType||_,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[a,t,r])}function jw(a,{relative:t}={}){let{basename:r}=ie.useContext(ni),s=ie.useContext(Ua);hn(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),u={...Hu(a||".",{relative:t})},p=ns();if(a==null){u.search=p.search;let _=new URLSearchParams(u.search),v=_.getAll("index");if(v.some(A=>A==="")){_.delete("index"),v.filter(N=>N).forEach(N=>_.append("index",N));let A=_.toString();u.search=A?`?${A}`:""}}return(!a||a===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:$i([r,u.pathname])),Vu(u)}function Iw(a,{relative:t}={}){let r=ie.useContext(gb);hn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ab("useViewTransitionState"),l=Hu(a,{relative:t});if(!r.isTransitioning)return!1;let u=Ji(r.currentLocation.pathname,s)||r.currentLocation.pathname,p=Ji(r.nextLocation.pathname,s)||r.nextLocation.pathname;return gh(l.pathname,p)!=null||gh(l.pathname,u)!=null}const Ow=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mw=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),Kv=a=>{const t=Mw(a);return t.charAt(0).toUpperCase()+t.slice(1)},Nb=(...a)=>a.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),Vw=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var kw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Pw=ie.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:u,iconNode:p,..._},v)=>ie.createElement("svg",{ref:v,...kw,width:t,height:t,stroke:a,strokeWidth:s?Number(r)*24/Number(t):r,className:Nb("lucide",l),...!u&&!Vw(_)&&{"aria-hidden":"true"},..._},[...p.map(([b,A])=>ie.createElement(b,A)),...Array.isArray(u)?u:[u]]));const qt=(a,t)=>{const r=ie.forwardRef(({className:s,...l},u)=>ie.createElement(Pw,{ref:u,iconNode:t,className:Nb(`lucide-${Ow(Kv(a))}`,`lucide-${a}`,s),...l}));return r.displayName=Kv(a),r};const Lw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zw=qt("arrow-left",Lw);const Uw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Bw=qt("arrow-right",Uw);const qw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fw=qt("calendar",qw);const Hw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Kw=qt("circle-plus",Hw);const Gw=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],lh=qt("database",Gw);const Qw=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],yh=qt("dollar-sign",Qw);const Yw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Bh=qt("download",Yw);const Xw=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$w=qt("eye",Xw);const Zw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jw=qt("file-text",Zw);const Ww=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],e2=qt("layout-dashboard",Ww);const t2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Rb=qt("lock",t2);const n2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Cb=qt("mail",n2);const r2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Db=qt("map-pin",r2);const a2=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],i2=qt("maximize",a2);const s2=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],vh=qt("package",s2);const o2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],jb=qt("phone",o2);const l2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ml=qt("plus",l2);const u2=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],c2=qt("printer",u2);const h2=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],f2=qt("receipt",h2);const d2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ib=qt("save",d2);const m2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ku=qt("search",m2);const p2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],g2=qt("settings",p2);const y2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],qh=qt("square-pen",y2);const v2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ys=qt("trash-2",v2);const b2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],bh=qt("trending-up",b2);const _2=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],x2=qt("truck",_2);const E2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Fh=qt("upload",E2);const w2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ob=qt("user",w2);const T2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_h=qt("users",T2);const S2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],A2=qt("x",S2);function Mb(a){var t,r,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var l=a.length;for(t=0;t<l;t++)a[t]&&(r=Mb(a[t]))&&(s&&(s+=" "),s+=r)}else for(r in a)a[r]&&(s&&(s+=" "),s+=r);return s}function N2(){for(var a,t,r=0,s="",l=arguments.length;r<l;r++)(a=arguments[r])&&(t=Mb(a))&&(s&&(s+=" "),s+=t);return s}const R2=()=>{};var Gv={};const Vb=function(a){const t=[];let r=0;for(let s=0;s<a.length;s++){let l=a.charCodeAt(s);l<128?t[r++]=l:l<2048?(t[r++]=l>>6|192,t[r++]=l&63|128):(l&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++s)&1023),t[r++]=l>>18|240,t[r++]=l>>12&63|128,t[r++]=l>>6&63|128,t[r++]=l&63|128):(t[r++]=l>>12|224,t[r++]=l>>6&63|128,t[r++]=l&63|128)}return t},C2=function(a){const t=[];let r=0,s=0;for(;r<a.length;){const l=a[r++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=a[r++];t[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=a[r++],p=a[r++],_=a[r++],v=((l&7)<<18|(u&63)<<12|(p&63)<<6|_&63)-65536;t[s++]=String.fromCharCode(55296+(v>>10)),t[s++]=String.fromCharCode(56320+(v&1023))}else{const u=a[r++],p=a[r++];t[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|p&63)}}return t.join("")},kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<a.length;l+=3){const u=a[l],p=l+1<a.length,_=p?a[l+1]:0,v=l+2<a.length,b=v?a[l+2]:0,A=u>>2,N=(u&3)<<4|_>>4;let I=(_&15)<<2|b>>6,X=b&63;v||(X=64,p||(I=64)),s.push(r[A],r[N],r[I],r[X])}return s.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(Vb(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):C2(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<a.length;){const u=r[a.charAt(l++)],_=l<a.length?r[a.charAt(l)]:0;++l;const b=l<a.length?r[a.charAt(l)]:64;++l;const N=l<a.length?r[a.charAt(l)]:64;if(++l,u==null||_==null||b==null||N==null)throw new D2;const I=u<<2|_>>4;if(s.push(I),b!==64){const X=_<<4&240|b>>2;if(s.push(X),N!==64){const ue=b<<6&192|N;s.push(ue)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class D2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j2=function(a){const t=Vb(a);return kb.encodeByteArray(t,!0)},xh=function(a){return j2(a).replace(/\./g,"")},I2=function(a){try{return kb.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function O2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const M2=()=>O2().__FIREBASE_DEFAULTS__,V2=()=>{if(typeof process>"u"||typeof Gv>"u")return;const a=Gv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},k2=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&I2(a[1]);return t&&JSON.parse(t)},Km=()=>{try{return R2()||M2()||V2()||k2()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},P2=a=>Km()?.emulatorHosts?.[a],L2=a=>{const t=P2(a);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),s]:[t.substring(0,r),s]},Pb=()=>Km()?.config;class z2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,s))}}}function Gm(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U2(a){return(await fetch(a,{credentials:"include"})).ok}function B2(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=t||"demo-project",l=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...a};return[xh(JSON.stringify(r)),xh(JSON.stringify(p)),""].join(".")}const Cu={};function q2(){const a={prod:[],emulator:[]};for(const t of Object.keys(Cu))Cu[t]?a.emulator.push(t):a.prod.push(t);return a}function F2(a){let t=document.getElementById(a),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",a),r=!0),{created:r,element:t}}let Qv=!1;function H2(a,t){if(typeof window>"u"||typeof document>"u"||!Gm(window.location.host)||Cu[a]===t||Cu[a]||Qv)return;Cu[a]=t;function r(I){return`__firebase__banner__${I}`}const s="__firebase__banner",u=q2().prod.length>0;function p(){const I=document.getElementById(s);I&&I.remove()}function _(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function v(I,X){I.setAttribute("width","24"),I.setAttribute("id",X),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function b(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Qv=!0,p()},I}function A(I,X){I.setAttribute("id",X),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function N(){const I=F2(s),X=r("text"),ue=document.getElementById(X)||document.createElement("span"),oe=r("learnmore"),B=document.getElementById(oe)||document.createElement("a"),L=r("preprendIcon"),ee=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const fe=I.element;_(fe),A(B,oe);const xe=b();v(ee,L),fe.append(ee,ue,B,xe),document.body.appendChild(fe)}u?(ue.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ue.innerText="Preview backend running in this workspace."),ue.setAttribute("id",X)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}function K2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G2(){const a=Km()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q2(){return!G2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y2(){try{return typeof indexedDB=="object"}catch{return!1}}function X2(){return new Promise((a,t)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),r||self.indexedDB.deleteDatabase(s),a(!0)},l.onupgradeneeded=()=>{r=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(r){t(r)}})}const $2="FirebaseError";class Vl extends Error{constructor(t,r,s){super(r),this.code=t,this.customData=s,this.name=$2,Object.setPrototypeOf(this,Vl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lb.prototype.create)}}class Lb{constructor(t,r,s){this.service=t,this.serviceName=r,this.errors=s}create(t,...r){const s=r[0]||{},l=`${this.service}/${t}`,u=this.errors[t],p=u?Z2(u,s):"Error",_=`${this.serviceName}: ${p} (${l}).`;return new Vl(l,_,s)}}function Z2(a,t){return a.replace(J2,(r,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const J2=/\{\$([^}]+)}/g;function Eh(a,t){if(a===t)return!0;const r=Object.keys(a),s=Object.keys(t);for(const l of r){if(!s.includes(l))return!1;const u=a[l],p=t[l];if(Yv(u)&&Yv(p)){if(!Eh(u,p))return!1}else if(u!==p)return!1}for(const l of s)if(!r.includes(l))return!1;return!0}function Yv(a){return a!==null&&typeof a=="object"}function Co(a){return a&&a._delegate?a._delegate:a}class ku{constructor(t,r,s){this.name=t,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const To="[DEFAULT]";class W2{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const s=new z2;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:r});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(tT(t))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(t=To){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=To){return this.instances.has(t)}getOptions(t=To){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[u,p]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(u);s===_&&p.resolve(l)}return l}onInit(t,r){const s=this.normalizeInstanceIdentifier(r),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&t(u,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const s=this.onInitCallbacks.get(r);if(s)for(const l of s)try{l(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:eT(t),options:r}),this.instances.set(t,s),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=To){return this.component?this.component.multipleInstances?t:To:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eT(a){return a===To?void 0:a}function tT(a){return a.instantiationMode==="EAGER"}class nT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new W2(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}var Ot;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ot||(Ot={}));const rT={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},aT=Ot.INFO,iT={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},sT=(a,t,...r)=>{if(t<a.logLevel)return;const s=new Date().toISOString(),l=iT[t];if(l)console[l](`[${s}]  ${a.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zb{constructor(t){this.name=t,this._logLevel=aT,this._logHandler=sT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?rT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const oT=(a,t)=>t.some(r=>a instanceof r);let Xv,$v;function lT(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uT(){return $v||($v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ub=new WeakMap,mm=new WeakMap,Bb=new WeakMap,rm=new WeakMap,Qm=new WeakMap;function cT(a){const t=new Promise((r,s)=>{const l=()=>{a.removeEventListener("success",u),a.removeEventListener("error",p)},u=()=>{r(Fs(a.result)),l()},p=()=>{s(a.error),l()};a.addEventListener("success",u),a.addEventListener("error",p)});return t.then(r=>{r instanceof IDBCursor&&Ub.set(r,a)}).catch(()=>{}),Qm.set(t,a),t}function hT(a){if(mm.has(a))return;const t=new Promise((r,s)=>{const l=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",p),a.removeEventListener("abort",p)},u=()=>{r(),l()},p=()=>{s(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",u),a.addEventListener("error",p),a.addEventListener("abort",p)});mm.set(a,t)}let pm={get(a,t,r){if(a instanceof IDBTransaction){if(t==="done")return mm.get(a);if(t==="objectStoreNames")return a.objectStoreNames||Bb.get(a);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Fs(a[t])},set(a,t,r){return a[t]=r,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function fT(a){pm=a(pm)}function dT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const s=a.call(am(this),t,...r);return Bb.set(s,t.sort?t.sort():[t]),Fs(s)}:uT().includes(a)?function(...t){return a.apply(am(this),t),Fs(Ub.get(this))}:function(...t){return Fs(a.apply(am(this),t))}}function mT(a){return typeof a=="function"?dT(a):(a instanceof IDBTransaction&&hT(a),oT(a,lT())?new Proxy(a,pm):a)}function Fs(a){if(a instanceof IDBRequest)return cT(a);if(rm.has(a))return rm.get(a);const t=mT(a);return t!==a&&(rm.set(a,t),Qm.set(t,a)),t}const am=a=>Qm.get(a);function pT(a,t,{blocked:r,upgrade:s,blocking:l,terminated:u}={}){const p=indexedDB.open(a,t),_=Fs(p);return s&&p.addEventListener("upgradeneeded",v=>{s(Fs(p.result),v.oldVersion,v.newVersion,Fs(p.transaction),v)}),r&&p.addEventListener("blocked",v=>r(v.oldVersion,v.newVersion,v)),_.then(v=>{u&&v.addEventListener("close",()=>u()),l&&v.addEventListener("versionchange",b=>l(b.oldVersion,b.newVersion,b))}).catch(()=>{}),_}const gT=["get","getKey","getAll","getAllKeys","count"],yT=["put","add","delete","clear"],im=new Map;function Zv(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(im.get(t))return im.get(t);const r=t.replace(/FromIndex$/,""),s=t!==r,l=yT.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(l||gT.includes(r)))return;const u=async function(p,..._){const v=this.transaction(p,l?"readwrite":"readonly");let b=v.store;return s&&(b=b.index(_.shift())),(await Promise.all([b[r](..._),l&&v.done]))[0]};return im.set(t,u),u}fT(a=>({...a,get:(t,r,s)=>Zv(t,r)||a.get(t,r,s),has:(t,r)=>!!Zv(t,r)||a.has(t,r)}));class vT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(bT(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function bT(a){return a.getComponent()?.type==="VERSION"}const gm="@firebase/app",Jv="0.14.6";const Wi=new zb("@firebase/app"),_T="@firebase/app-compat",xT="@firebase/analytics-compat",ET="@firebase/analytics",wT="@firebase/app-check-compat",TT="@firebase/app-check",ST="@firebase/auth",AT="@firebase/auth-compat",NT="@firebase/database",RT="@firebase/data-connect",CT="@firebase/database-compat",DT="@firebase/functions",jT="@firebase/functions-compat",IT="@firebase/installations",OT="@firebase/installations-compat",MT="@firebase/messaging",VT="@firebase/messaging-compat",kT="@firebase/performance",PT="@firebase/performance-compat",LT="@firebase/remote-config",zT="@firebase/remote-config-compat",UT="@firebase/storage",BT="@firebase/storage-compat",qT="@firebase/firestore",FT="@firebase/ai",HT="@firebase/firestore-compat",KT="firebase",GT="12.6.0";const ym="[DEFAULT]",QT={[gm]:"fire-core",[_T]:"fire-core-compat",[ET]:"fire-analytics",[xT]:"fire-analytics-compat",[TT]:"fire-app-check",[wT]:"fire-app-check-compat",[ST]:"fire-auth",[AT]:"fire-auth-compat",[NT]:"fire-rtdb",[RT]:"fire-data-connect",[CT]:"fire-rtdb-compat",[DT]:"fire-fn",[jT]:"fire-fn-compat",[IT]:"fire-iid",[OT]:"fire-iid-compat",[MT]:"fire-fcm",[VT]:"fire-fcm-compat",[kT]:"fire-perf",[PT]:"fire-perf-compat",[LT]:"fire-rc",[zT]:"fire-rc-compat",[UT]:"fire-gcs",[BT]:"fire-gcs-compat",[qT]:"fire-fst",[HT]:"fire-fst-compat",[FT]:"fire-vertex","fire-js":"fire-js",[KT]:"fire-js-all"};const wh=new Map,YT=new Map,vm=new Map;function Wv(a,t){try{a.container.addComponent(t)}catch(r){Wi.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,r)}}function Th(a){const t=a.name;if(vm.has(t))return Wi.debug(`There were multiple attempts to register component ${t}.`),!1;vm.set(t,a);for(const r of wh.values())Wv(r,a);for(const r of YT.values())Wv(r,a);return!0}function XT(a,t){const r=a.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),a.container.getProvider(t)}function $T(a){return a==null?!1:a.settings!==void 0}const ZT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new Lb("app","Firebase",ZT);class JT{constructor(t,r,s){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ku("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}const WT=GT;function qb(a,t={}){let r=a;typeof t!="object"&&(t={name:t});const s={name:ym,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Hs.create("bad-app-name",{appName:String(l)});if(r||(r=Pb()),!r)throw Hs.create("no-options");const u=wh.get(l);if(u){if(Eh(r,u.options)&&Eh(s,u.config))return u;throw Hs.create("duplicate-app",{appName:l})}const p=new nT(l);for(const v of vm.values())p.addComponent(v);const _=new JT(r,s,p);return wh.set(l,_),_}function eS(a=ym){const t=wh.get(a);if(!t&&a===ym&&Pb())return qb();if(!t)throw Hs.create("no-app",{appName:a});return t}function _l(a,t,r){let s=QT[a]??a;r&&(s+=`-${r}`);const l=s.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const p=[`Unable to register library "${s}" with version "${t}":`];l&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&p.push("and"),u&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Wi.warn(p.join(" "));return}Th(new ku(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const tS="firebase-heartbeat-database",nS=1,Pu="firebase-heartbeat-store";let sm=null;function Fb(){return sm||(sm=pT(tS,nS,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(Pu)}catch(r){console.warn(r)}}}}).catch(a=>{throw Hs.create("idb-open",{originalErrorMessage:a.message})})),sm}async function rS(a){try{const r=(await Fb()).transaction(Pu),s=await r.objectStore(Pu).get(Hb(a));return await r.done,s}catch(t){if(t instanceof Vl)Wi.warn(t.message);else{const r=Hs.create("idb-get",{originalErrorMessage:t?.message});Wi.warn(r.message)}}}async function e0(a,t){try{const s=(await Fb()).transaction(Pu,"readwrite");await s.objectStore(Pu).put(t,Hb(a)),await s.done}catch(r){if(r instanceof Vl)Wi.warn(r.message);else{const s=Hs.create("idb-set",{originalErrorMessage:r?.message});Wi.warn(s.message)}}}function Hb(a){return`${a.name}!${a.options.appId}`}const aS=1024,iS=30;class sS{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new lS(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>iS){const l=uS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Wi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=t0(),{heartbeatsToSend:r,unsentEntries:s}=oS(this._heartbeatsCache.heartbeats),l=xh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Wi.warn(t),""}}}function t0(){return new Date().toISOString().substring(0,10)}function oS(a,t=aS){const r=[];let s=a.slice();for(const l of a){const u=r.find(p=>p.agent===l.agent);if(u){if(u.dates.push(l.date),n0(r)>t){u.dates.pop();break}}else if(r.push({agent:l.agent,dates:[l.date]}),n0(r)>t){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class lS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y2()?X2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await rS(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return e0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return e0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function n0(a){return xh(JSON.stringify({version:2,heartbeats:a})).length}function uS(a){if(a.length===0)return-1;let t=0,r=a[0].date;for(let s=1;s<a.length;s++)a[s].date<r&&(r=a[s].date,t=s);return t}function cS(a){Th(new ku("platform-logger",t=>new vT(t),"PRIVATE")),Th(new ku("heartbeat",t=>new sS(t),"PRIVATE")),_l(gm,Jv,a),_l(gm,Jv,"esm2020"),_l("fire-js","")}cS("");var hS="firebase",fS="12.6.0";_l(hS,fS,"app");var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ks,Kb;(function(){var a;function t(M,O){function V(){}V.prototype=O.prototype,M.F=O.prototype,M.prototype=new V,M.prototype.constructor=M,M.D=function(F,q,J){for(var k=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)k[yt-2]=arguments[yt];return O.prototype[q].apply(F,k)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,r),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,O,V){V||(V=0);const F=Array(16);if(typeof O=="string")for(var q=0;q<16;++q)F[q]=O.charCodeAt(V++)|O.charCodeAt(V++)<<8|O.charCodeAt(V++)<<16|O.charCodeAt(V++)<<24;else for(q=0;q<16;++q)F[q]=O[V++]|O[V++]<<8|O[V++]<<16|O[V++]<<24;O=M.g[0],V=M.g[1],q=M.g[2];let J=M.g[3],k;k=O+(J^V&(q^J))+F[0]+3614090360&4294967295,O=V+(k<<7&4294967295|k>>>25),k=J+(q^O&(V^q))+F[1]+3905402710&4294967295,J=O+(k<<12&4294967295|k>>>20),k=q+(V^J&(O^V))+F[2]+606105819&4294967295,q=J+(k<<17&4294967295|k>>>15),k=V+(O^q&(J^O))+F[3]+3250441966&4294967295,V=q+(k<<22&4294967295|k>>>10),k=O+(J^V&(q^J))+F[4]+4118548399&4294967295,O=V+(k<<7&4294967295|k>>>25),k=J+(q^O&(V^q))+F[5]+1200080426&4294967295,J=O+(k<<12&4294967295|k>>>20),k=q+(V^J&(O^V))+F[6]+2821735955&4294967295,q=J+(k<<17&4294967295|k>>>15),k=V+(O^q&(J^O))+F[7]+4249261313&4294967295,V=q+(k<<22&4294967295|k>>>10),k=O+(J^V&(q^J))+F[8]+1770035416&4294967295,O=V+(k<<7&4294967295|k>>>25),k=J+(q^O&(V^q))+F[9]+2336552879&4294967295,J=O+(k<<12&4294967295|k>>>20),k=q+(V^J&(O^V))+F[10]+4294925233&4294967295,q=J+(k<<17&4294967295|k>>>15),k=V+(O^q&(J^O))+F[11]+2304563134&4294967295,V=q+(k<<22&4294967295|k>>>10),k=O+(J^V&(q^J))+F[12]+1804603682&4294967295,O=V+(k<<7&4294967295|k>>>25),k=J+(q^O&(V^q))+F[13]+4254626195&4294967295,J=O+(k<<12&4294967295|k>>>20),k=q+(V^J&(O^V))+F[14]+2792965006&4294967295,q=J+(k<<17&4294967295|k>>>15),k=V+(O^q&(J^O))+F[15]+1236535329&4294967295,V=q+(k<<22&4294967295|k>>>10),k=O+(q^J&(V^q))+F[1]+4129170786&4294967295,O=V+(k<<5&4294967295|k>>>27),k=J+(V^q&(O^V))+F[6]+3225465664&4294967295,J=O+(k<<9&4294967295|k>>>23),k=q+(O^V&(J^O))+F[11]+643717713&4294967295,q=J+(k<<14&4294967295|k>>>18),k=V+(J^O&(q^J))+F[0]+3921069994&4294967295,V=q+(k<<20&4294967295|k>>>12),k=O+(q^J&(V^q))+F[5]+3593408605&4294967295,O=V+(k<<5&4294967295|k>>>27),k=J+(V^q&(O^V))+F[10]+38016083&4294967295,J=O+(k<<9&4294967295|k>>>23),k=q+(O^V&(J^O))+F[15]+3634488961&4294967295,q=J+(k<<14&4294967295|k>>>18),k=V+(J^O&(q^J))+F[4]+3889429448&4294967295,V=q+(k<<20&4294967295|k>>>12),k=O+(q^J&(V^q))+F[9]+568446438&4294967295,O=V+(k<<5&4294967295|k>>>27),k=J+(V^q&(O^V))+F[14]+3275163606&4294967295,J=O+(k<<9&4294967295|k>>>23),k=q+(O^V&(J^O))+F[3]+4107603335&4294967295,q=J+(k<<14&4294967295|k>>>18),k=V+(J^O&(q^J))+F[8]+1163531501&4294967295,V=q+(k<<20&4294967295|k>>>12),k=O+(q^J&(V^q))+F[13]+2850285829&4294967295,O=V+(k<<5&4294967295|k>>>27),k=J+(V^q&(O^V))+F[2]+4243563512&4294967295,J=O+(k<<9&4294967295|k>>>23),k=q+(O^V&(J^O))+F[7]+1735328473&4294967295,q=J+(k<<14&4294967295|k>>>18),k=V+(J^O&(q^J))+F[12]+2368359562&4294967295,V=q+(k<<20&4294967295|k>>>12),k=O+(V^q^J)+F[5]+4294588738&4294967295,O=V+(k<<4&4294967295|k>>>28),k=J+(O^V^q)+F[8]+2272392833&4294967295,J=O+(k<<11&4294967295|k>>>21),k=q+(J^O^V)+F[11]+1839030562&4294967295,q=J+(k<<16&4294967295|k>>>16),k=V+(q^J^O)+F[14]+4259657740&4294967295,V=q+(k<<23&4294967295|k>>>9),k=O+(V^q^J)+F[1]+2763975236&4294967295,O=V+(k<<4&4294967295|k>>>28),k=J+(O^V^q)+F[4]+1272893353&4294967295,J=O+(k<<11&4294967295|k>>>21),k=q+(J^O^V)+F[7]+4139469664&4294967295,q=J+(k<<16&4294967295|k>>>16),k=V+(q^J^O)+F[10]+3200236656&4294967295,V=q+(k<<23&4294967295|k>>>9),k=O+(V^q^J)+F[13]+681279174&4294967295,O=V+(k<<4&4294967295|k>>>28),k=J+(O^V^q)+F[0]+3936430074&4294967295,J=O+(k<<11&4294967295|k>>>21),k=q+(J^O^V)+F[3]+3572445317&4294967295,q=J+(k<<16&4294967295|k>>>16),k=V+(q^J^O)+F[6]+76029189&4294967295,V=q+(k<<23&4294967295|k>>>9),k=O+(V^q^J)+F[9]+3654602809&4294967295,O=V+(k<<4&4294967295|k>>>28),k=J+(O^V^q)+F[12]+3873151461&4294967295,J=O+(k<<11&4294967295|k>>>21),k=q+(J^O^V)+F[15]+530742520&4294967295,q=J+(k<<16&4294967295|k>>>16),k=V+(q^J^O)+F[2]+3299628645&4294967295,V=q+(k<<23&4294967295|k>>>9),k=O+(q^(V|~J))+F[0]+4096336452&4294967295,O=V+(k<<6&4294967295|k>>>26),k=J+(V^(O|~q))+F[7]+1126891415&4294967295,J=O+(k<<10&4294967295|k>>>22),k=q+(O^(J|~V))+F[14]+2878612391&4294967295,q=J+(k<<15&4294967295|k>>>17),k=V+(J^(q|~O))+F[5]+4237533241&4294967295,V=q+(k<<21&4294967295|k>>>11),k=O+(q^(V|~J))+F[12]+1700485571&4294967295,O=V+(k<<6&4294967295|k>>>26),k=J+(V^(O|~q))+F[3]+2399980690&4294967295,J=O+(k<<10&4294967295|k>>>22),k=q+(O^(J|~V))+F[10]+4293915773&4294967295,q=J+(k<<15&4294967295|k>>>17),k=V+(J^(q|~O))+F[1]+2240044497&4294967295,V=q+(k<<21&4294967295|k>>>11),k=O+(q^(V|~J))+F[8]+1873313359&4294967295,O=V+(k<<6&4294967295|k>>>26),k=J+(V^(O|~q))+F[15]+4264355552&4294967295,J=O+(k<<10&4294967295|k>>>22),k=q+(O^(J|~V))+F[6]+2734768916&4294967295,q=J+(k<<15&4294967295|k>>>17),k=V+(J^(q|~O))+F[13]+1309151649&4294967295,V=q+(k<<21&4294967295|k>>>11),k=O+(q^(V|~J))+F[4]+4149444226&4294967295,O=V+(k<<6&4294967295|k>>>26),k=J+(V^(O|~q))+F[11]+3174756917&4294967295,J=O+(k<<10&4294967295|k>>>22),k=q+(O^(J|~V))+F[2]+718787259&4294967295,q=J+(k<<15&4294967295|k>>>17),k=V+(J^(q|~O))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+O&4294967295,M.g[1]=M.g[1]+(q+(k<<21&4294967295|k>>>11))&4294967295,M.g[2]=M.g[2]+q&4294967295,M.g[3]=M.g[3]+J&4294967295}s.prototype.v=function(M,O){O===void 0&&(O=M.length);const V=O-this.blockSize,F=this.C;let q=this.h,J=0;for(;J<O;){if(q==0)for(;J<=V;)l(this,M,J),J+=this.blockSize;if(typeof M=="string"){for(;J<O;)if(F[q++]=M.charCodeAt(J++),q==this.blockSize){l(this,F),q=0;break}}else for(;J<O;)if(F[q++]=M[J++],q==this.blockSize){l(this,F),q=0;break}}this.h=q,this.o+=O},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var O=1;O<M.length-8;++O)M[O]=0;O=this.o*8;for(var V=M.length-8;V<M.length;++V)M[V]=O&255,O/=256;for(this.v(M),M=Array(16),O=0,V=0;V<4;++V)for(let F=0;F<32;F+=8)M[O++]=this.g[V]>>>F&255;return M};function u(M,O){var V=_;return Object.prototype.hasOwnProperty.call(V,M)?V[M]:V[M]=O(M)}function p(M,O){this.h=O;const V=[];let F=!0;for(let q=M.length-1;q>=0;q--){const J=M[q]|0;F&&J==O||(V[q]=J,F=!1)}this.g=V}var _={};function v(M){return-128<=M&&M<128?u(M,function(O){return new p([O|0],O<0?-1:0)}):new p([M|0],M<0?-1:0)}function b(M){if(isNaN(M)||!isFinite(M))return N;if(M<0)return B(b(-M));const O=[];let V=1;for(let F=0;M>=V;F++)O[F]=M/V|0,V*=4294967296;return new p(O,0)}function A(M,O){if(M.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(M.charAt(0)=="-")return B(A(M.substring(1),O));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=b(Math.pow(O,8));let F=N;for(let J=0;J<M.length;J+=8){var q=Math.min(8,M.length-J);const k=parseInt(M.substring(J,J+q),O);q<8?(q=b(Math.pow(O,q)),F=F.j(q).add(b(k))):(F=F.j(V),F=F.add(b(k)))}return F}var N=v(0),I=v(1),X=v(16777216);a=p.prototype,a.m=function(){if(oe(this))return-B(this).m();let M=0,O=1;for(let V=0;V<this.g.length;V++){const F=this.i(V);M+=(F>=0?F:4294967296+F)*O,O*=4294967296}return M},a.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(ue(this))return"0";if(oe(this))return"-"+B(this).toString(M);const O=b(Math.pow(M,6));var V=this;let F="";for(;;){const q=xe(V,O).g;V=L(V,q.j(O));let J=((V.g.length>0?V.g[0]:V.h)>>>0).toString(M);if(V=q,ue(V))return J+F;for(;J.length<6;)J="0"+J;F=J+F}},a.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function ue(M){if(M.h!=0)return!1;for(let O=0;O<M.g.length;O++)if(M.g[O]!=0)return!1;return!0}function oe(M){return M.h==-1}a.l=function(M){return M=L(this,M),oe(M)?-1:ue(M)?0:1};function B(M){const O=M.g.length,V=[];for(let F=0;F<O;F++)V[F]=~M.g[F];return new p(V,~M.h).add(I)}a.abs=function(){return oe(this)?B(this):this},a.add=function(M){const O=Math.max(this.g.length,M.g.length),V=[];let F=0;for(let q=0;q<=O;q++){let J=F+(this.i(q)&65535)+(M.i(q)&65535),k=(J>>>16)+(this.i(q)>>>16)+(M.i(q)>>>16);F=k>>>16,J&=65535,k&=65535,V[q]=k<<16|J}return new p(V,V[V.length-1]&-2147483648?-1:0)};function L(M,O){return M.add(B(O))}a.j=function(M){if(ue(this)||ue(M))return N;if(oe(this))return oe(M)?B(this).j(B(M)):B(B(this).j(M));if(oe(M))return B(this.j(B(M)));if(this.l(X)<0&&M.l(X)<0)return b(this.m()*M.m());const O=this.g.length+M.g.length,V=[];for(var F=0;F<2*O;F++)V[F]=0;for(F=0;F<this.g.length;F++)for(let q=0;q<M.g.length;q++){const J=this.i(F)>>>16,k=this.i(F)&65535,yt=M.i(q)>>>16,Nt=M.i(q)&65535;V[2*F+2*q]+=k*Nt,ee(V,2*F+2*q),V[2*F+2*q+1]+=J*Nt,ee(V,2*F+2*q+1),V[2*F+2*q+1]+=k*yt,ee(V,2*F+2*q+1),V[2*F+2*q+2]+=J*yt,ee(V,2*F+2*q+2)}for(M=0;M<O;M++)V[M]=V[2*M+1]<<16|V[2*M];for(M=O;M<2*O;M++)V[M]=0;return new p(V,0)};function ee(M,O){for(;(M[O]&65535)!=M[O];)M[O+1]+=M[O]>>>16,M[O]&=65535,O++}function fe(M,O){this.g=M,this.h=O}function xe(M,O){if(ue(O))throw Error("division by zero");if(ue(M))return new fe(N,N);if(oe(M))return O=xe(B(M),O),new fe(B(O.g),B(O.h));if(oe(O))return O=xe(M,B(O)),new fe(B(O.g),O.h);if(M.g.length>30){if(oe(M)||oe(O))throw Error("slowDivide_ only works with positive integers.");for(var V=I,F=O;F.l(M)<=0;)V=Pe(V),F=Pe(F);var q=Ye(V,1),J=Ye(F,1);for(F=Ye(F,2),V=Ye(V,2);!ue(F);){var k=J.add(F);k.l(M)<=0&&(q=q.add(V),J=k),F=Ye(F,1),V=Ye(V,1)}return O=L(M,q.j(O)),new fe(q,O)}for(q=N;M.l(O)>=0;){for(V=Math.max(1,Math.floor(M.m()/O.m())),F=Math.ceil(Math.log(V)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),J=b(V),k=J.j(O);oe(k)||k.l(M)>0;)V-=F,J=b(V),k=J.j(O);ue(J)&&(J=I),q=q.add(J),M=L(M,k)}return new fe(q,M)}a.B=function(M){return xe(this,M).h},a.and=function(M){const O=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<O;F++)V[F]=this.i(F)&M.i(F);return new p(V,this.h&M.h)},a.or=function(M){const O=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<O;F++)V[F]=this.i(F)|M.i(F);return new p(V,this.h|M.h)},a.xor=function(M){const O=Math.max(this.g.length,M.g.length),V=[];for(let F=0;F<O;F++)V[F]=this.i(F)^M.i(F);return new p(V,this.h^M.h)};function Pe(M){const O=M.g.length+1,V=[];for(let F=0;F<O;F++)V[F]=M.i(F)<<1|M.i(F-1)>>>31;return new p(V,M.h)}function Ye(M,O){const V=O>>5;O%=32;const F=M.g.length-V,q=[];for(let J=0;J<F;J++)q[J]=O>0?M.i(J+V)>>>O|M.i(J+V+1)<<32-O:M.i(J+V);return new p(q,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Kb=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=b,p.fromString=A,Ks=p}).apply(typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gb,Au,Qb,uh,bm,Yb,Xb,$b;(function(){var a,t=Object.defineProperty;function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var x=0;x<c.length;++x){var T=c[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=r(this);function l(c,x){if(x)e:{var T=s;c=c.split(".");for(var D=0;D<c.length-1;D++){var se=c[D];if(!(se in T))break e;T=T[se]}c=c[c.length-1],D=T[c],x=x(D),x!=D&&x!=null&&t(T,c,{configurable:!0,writable:!0,value:x})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(x){var T=[],D;for(D in x)Object.prototype.hasOwnProperty.call(x,D)&&T.push([D,x[D]]);return T}});var u=u||{},p=this||self;function _(c){var x=typeof c;return x=="object"&&c!=null||x=="function"}function v(c,x,T){return c.call.apply(c.bind,arguments)}function b(c,x,T){return b=v,b.apply(null,arguments)}function A(c,x){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),c.apply(this,D)}}function N(c,x){function T(){}T.prototype=x.prototype,c.Z=x.prototype,c.prototype=new T,c.prototype.constructor=c,c.Ob=function(D,se,pe){for(var Me=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)Me[lt-2]=arguments[lt];return x.prototype[se].apply(D,Me)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function X(c){const x=c.length;if(x>0){const T=Array(x);for(let D=0;D<x;D++)T[D]=c[D];return T}return[]}function ue(c,x){for(let D=1;D<arguments.length;D++){const se=arguments[D];var T=typeof se;if(T=T!="object"?T:se?Array.isArray(se)?"array":T:"null",T=="array"||T=="object"&&typeof se.length=="number"){T=c.length||0;const pe=se.length||0;c.length=T+pe;for(let Me=0;Me<pe;Me++)c[T+Me]=se[Me]}else c.push(se)}}class oe{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function B(c){p.setTimeout(()=>{throw c},0)}function L(){var c=M;let x=null;return c.g&&(x=c.g,c.g=c.g.next,c.g||(c.h=null),x.next=null),x}class ee{constructor(){this.h=this.g=null}add(x,T){const D=fe.get();D.set(x,T),this.h?this.h.next=D:this.g=D,this.h=D}}var fe=new oe(()=>new xe,c=>c.reset());class xe{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,Ye=!1,M=new ee,O=()=>{const c=Promise.resolve(void 0);Pe=()=>{c.then(V)}};function V(){for(var c;c=L();){try{c.h.call(c.g)}catch(T){B(T)}var x=fe;x.j(c),x.h<100&&(x.h++,c.next=x.g,x.g=c)}Ye=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(c,x){this.type=c,this.g=this.target=x,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,x=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};p.addEventListener("test",T,x),p.removeEventListener("test",T,x)}catch{}return c})();function k(c){return/^[\s\xa0]*$/.test(c)}function yt(c,x){q.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,x)}N(yt,q),yt.prototype.init=function(c,x){const T=this.type=c.type,D=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=x,x=c.relatedTarget,x||(T=="mouseover"?x=c.fromElement:T=="mouseout"&&(x=c.toElement)),this.relatedTarget=x,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&yt.Z.h.call(this)},yt.prototype.h=function(){yt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Nt="closure_listenable_"+(Math.random()*1e6|0),W=0;function Ae(c,x,T,D,se){this.listener=c,this.proxy=null,this.src=x,this.type=T,this.capture=!!D,this.ha=se,this.key=++W,this.da=this.fa=!1}function Ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function at(c,x,T){for(const D in c)x.call(T,c[D],D,c)}function tt(c,x){for(const T in c)x.call(void 0,c[T],T,c)}function H(c){const x={};for(const T in c)x[T]=c[T];return x}const be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(c,x){let T,D;for(let se=1;se<arguments.length;se++){D=arguments[se];for(T in D)c[T]=D[T];for(let pe=0;pe<be.length;pe++)T=be[pe],Object.prototype.hasOwnProperty.call(D,T)&&(c[T]=D[T])}}function Re(c){this.src=c,this.g={},this.h=0}Re.prototype.add=function(c,x,T,D,se){const pe=c.toString();c=this.g[pe],c||(c=this.g[pe]=[],this.h++);const Me=$e(c,x,D,se);return Me>-1?(x=c[Me],T||(x.fa=!1)):(x=new Ae(x,this.src,pe,!!D,se),x.fa=T,c.push(x)),x};function Fe(c,x){const T=x.type;if(T in c.g){var D=c.g[T],se=Array.prototype.indexOf.call(D,x,void 0),pe;(pe=se>=0)&&Array.prototype.splice.call(D,se,1),pe&&(Ne(x),c.g[T].length==0&&(delete c.g[T],c.h--))}}function $e(c,x,T,D){for(let se=0;se<c.length;++se){const pe=c[se];if(!pe.da&&pe.listener==x&&pe.capture==!!T&&pe.ha==D)return se}return-1}var rt="closure_lm_"+(Math.random()*1e6|0),Ft={};function Oe(c,x,T,D,se){if(Array.isArray(x)){for(let pe=0;pe<x.length;pe++)Oe(c,x[pe],T,D,se);return null}return T=Yn(T),c&&c[Nt]?c.J(x,T,_(D)?!!D.capture:!1,se):fn(c,x,T,!1,D,se)}function fn(c,x,T,D,se,pe){if(!x)throw Error("Invalid event type");const Me=_(se)?!!se.capture:!!se;let lt=zt(c);if(lt||(c[rt]=lt=new Re(c)),T=lt.add(x,T,D,Me,pe),T.proxy)return T;if(D=On(),T.proxy=D,D.src=c,D.listener=T,c.addEventListener)J||(se=Me),se===void 0&&(se=!1),c.addEventListener(x.toString(),D,se);else if(c.attachEvent)c.attachEvent(Ht(x.toString()),D);else if(c.addListener&&c.removeListener)c.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function On(){function c(T){return x.call(c.src,c.listener,T)}const x=pt;return c}function Ge(c,x,T,D,se){if(Array.isArray(x))for(var pe=0;pe<x.length;pe++)Ge(c,x[pe],T,D,se);else D=_(D)?!!D.capture:!!D,T=Yn(T),c&&c[Nt]?(c=c.i,pe=String(x).toString(),pe in c.g&&(x=c.g[pe],T=$e(x,T,D,se),T>-1&&(Ne(x[T]),Array.prototype.splice.call(x,T,1),x.length==0&&(delete c.g[pe],c.h--)))):c&&(c=zt(c))&&(x=c.g[x.toString()],c=-1,x&&(c=$e(x,T,D,se)),(T=c>-1?x[c]:null)&&Je(T))}function Je(c){if(typeof c!="number"&&c&&!c.da){var x=c.src;if(x&&x[Nt])Fe(x.i,c);else{var T=c.type,D=c.proxy;x.removeEventListener?x.removeEventListener(T,D,c.capture):x.detachEvent?x.detachEvent(Ht(T),D):x.addListener&&x.removeListener&&x.removeListener(D),(T=zt(x))?(Fe(T,c),T.h==0&&(T.src=null,x[rt]=null)):Ne(c)}}}function Ht(c){return c in Ft?Ft[c]:Ft[c]="on"+c}function pt(c,x){if(c.da)c=!0;else{x=new yt(x,this);const T=c.listener,D=c.ha||c.src;c.fa&&Je(c),c=T.call(D,x)}return c}function zt(c){return c=c[rt],c instanceof Re?c:null}var on="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yn(c){return typeof c=="function"?c:(c[on]||(c[on]=function(x){return c.handleEvent(x)}),c[on])}function Rt(){F.call(this),this.i=new Re(this),this.M=this,this.G=null}N(Rt,F),Rt.prototype[Nt]=!0,Rt.prototype.removeEventListener=function(c,x,T,D){Ge(this,c,x,T,D)};function Mt(c,x){var T,D=c.G;if(D)for(T=[];D;D=D.G)T.push(D);if(c=c.M,D=x.type||x,typeof x=="string")x=new q(x,c);else if(x instanceof q)x.target=x.target||c;else{var se=x;x=new q(D,c),Ie(x,se)}se=!0;let pe,Me;if(T)for(Me=T.length-1;Me>=0;Me--)pe=x.g=T[Me],se=wn(pe,D,!0,x)&&se;if(pe=x.g=c,se=wn(pe,D,!0,x)&&se,se=wn(pe,D,!1,x)&&se,T)for(Me=0;Me<T.length;Me++)pe=x.g=T[Me],se=wn(pe,D,!1,x)&&se}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var c=this.i;for(const x in c.g){const T=c.g[x];for(let D=0;D<T.length;D++)Ne(T[D]);delete c.g[x],c.h--}}this.G=null},Rt.prototype.J=function(c,x,T,D){return this.i.add(String(c),x,!1,T,D)},Rt.prototype.K=function(c,x,T,D){return this.i.add(String(c),x,!0,T,D)};function wn(c,x,T,D){if(x=c.i.g[String(x)],!x)return!0;x=x.concat();let se=!0;for(let pe=0;pe<x.length;++pe){const Me=x[pe];if(Me&&!Me.da&&Me.capture==T){const lt=Me.listener,vn=Me.ha||Me.src;Me.fa&&Fe(c.i,Me),se=lt.call(vn,D)!==!1&&se}}return se&&!D.defaultPrevented}function Lo(c,x){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:p.setTimeout(c,x||0)}function ri(c){c.g=Lo(()=>{c.g=null,c.i&&(c.i=!1,ri(c))},c.l);const x=c.h;c.h=null,c.m.apply(null,x)}class Xn extends F{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ri(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(c){F.call(this),this.h=c,this.g={}}N(Zr,F);var Jr=[];function Wr(c){at(c.g,function(x,T){this.g.hasOwnProperty(T)&&Je(x)},c),c.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),Wr(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ba=p.JSON.stringify,Ei=p.JSON.parse,rs=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function wi(){}function _a(){}var fr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tn(){q.call(this,"d")}N(Tn,q);function Sn(){q.call(this,"c")}N(Sn,q);var Ue={},ai=null;function Nr(){return ai=ai||new Rt}Ue.Ia="serverreachability";function Ti(c){q.call(this,Ue.Ia,c)}N(Ti,q);function ke(c){const x=Nr();Mt(x,new Ti(x))}Ue.STAT_EVENT="statevent";function Ba(c,x){q.call(this,Ue.STAT_EVENT,c),this.stat=x}N(Ba,q);function dn(c){const x=Nr();Mt(x,new Ba(x,c))}Ue.Ja="timingevent";function Rr(c,x){q.call(this,Ue.Ja,c),this.size=x}N(Rr,q);function ea(c,x){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},x)}function xr(){this.g=!0}xr.prototype.ua=function(){this.g=!1};function Ul(c,x,T,D,se,pe){c.info(function(){if(c.g)if(pe){var Me="",lt=pe.split("&");for(let Ct=0;Ct<lt.length;Ct++){var vn=lt[Ct].split("=");if(vn.length>1){const Qt=vn[0];vn=vn[1];const Ur=Qt.split("_");Me=Ur.length>=2&&Ur[1]=="type"?Me+(Qt+"="+vn+"&"):Me+(Qt+"=redacted&")}}}else Me=null;else Me=pe;return"XMLHTTP REQ ("+D+") [attempt "+se+"]: "+x+`
`+T+`
`+Me})}function zo(c,x,T,D,se,pe,Me){c.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+se+"]: "+x+`
`+T+`
`+pe+" "+Me})}function ar(c,x,T,D){c.info(function(){return"XMLHTTP TEXT ("+x+"): "+to(c,T)+(D?" "+D:"")})}function Cr(c,x){c.info(function(){return"TIMEOUT: "+x})}xr.prototype.info=function(){};function to(c,x){if(!c.g)return x;if(!x)return null;try{const pe=JSON.parse(x);if(pe){for(c=0;c<pe.length;c++)if(Array.isArray(pe[c])){var T=pe[c];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var se=D[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Me=1;Me<D.length;Me++)D[Me]=""}}}}return ba(pe)}catch{return x}}var xa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ut={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ln;function Si(){}N(Si,wi),Si.prototype.g=function(){return new XMLHttpRequest},ln=new Si;function Dr(c){return encodeURIComponent(String(c))}function Ai(c){var x=1;c=c.split(":");const T=[];for(;x>0&&c.length;)T.push(c.shift()),x--;return c.length&&T.push(c.join(":")),T}function dr(c,x,T,D){this.j=c,this.i=x,this.l=T,this.S=D||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ta}function ta(){this.i=null,this.g="",this.h=!1}var Kt={},nn={};function Kn(c,x,T){c.M=1,c.A=oi(pn(x)),c.u=T,c.R=!0,qa(c,null)}function qa(c,x){c.F=Date.now(),$n(c),c.B=pn(c.A);var T=c.B,D=c.S;Array.isArray(D)||(D=[String(D)]),ls(T.i,"t",D),c.C=0,T=c.j.L,c.h=new ta,c.g=Rn(c.j,T?x:null,!c.u),c.P>0&&(c.O=new Xn(b(c.Y,c,c.g),c.P)),x=c.V,T=c.g,D=c.ba;var se="readystatechange";Array.isArray(se)||(se&&(Jr[0]=se.toString()),se=Jr);for(let pe=0;pe<se.length;pe++){const Me=Oe(T,se[pe],D||x.handleEvent,!1,x.h||x);if(!Me)break;x.g[Me.key]=Me}x=c.J?H(c.J):{},c.u?(c.v||(c.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,x)):(c.v="GET",c.g.ea(c.B,c.v,null,x)),ke(),Ul(c.i,c.v,c.B,c.l,c.S,c.u)}dr.prototype.ba=function(c){c=c.target;const x=this.O;x&&ua(c)==3?x.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{const lt=ua(this.g),vn=this.g.ya(),Ct=this.g.ca();if(!(lt<3)&&(lt!=3||this.g&&(this.h.h||this.g.la()||yn(this.g)))){this.K||lt!=4||vn==7||(vn==8||Ct<=0?ke(3):ke(2)),jr(this);var x=this.g.ca();this.X=x;var T=Bl(this);if(this.o=x==200,zo(this.i,this.v,this.B,this.l,this.S,lt,x),this.o){if(this.U&&!this.L){t:{if(this.g){var D,se=this.g;if((D=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(D)){var pe=D;break t}}pe=null}if(c=pe)ar(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mn(this,c);else{this.o=!1,this.m=3,dn(12),An(this),jt(this);break e}}if(this.R){c=!0;let Qt;for(;!this.K&&this.C<T.length;)if(Qt=no(this,T),Qt==nn){lt==4&&(this.m=4,dn(14),c=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Kt){this.m=4,dn(15),ar(this.i,this.l,T,"[Invalid Chunk]"),c=!1;break}else ar(this.i,this.l,Qt,null),Mn(this,Qt);if(na(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||T.length!=0||this.h.h||(this.m=1,dn(16),c=!1),this.o=this.o&&c,!c)ar(this.i,this.l,T,"[Invalid Chunked Response]"),An(this),jt(this);else if(T.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),ui(Me),Me.P=!0,dn(11))}}else ar(this.i,this.l,T,null),Mn(this,T);lt==4&&An(this),this.o&&!this.K&&(lt==4?Xa(this.j,this):(this.o=!1,$n(this)))}else Qa(this.g),x==400&&T.indexOf("Unknown SID")>0?(this.m=3,dn(12)):(this.m=0,dn(13)),An(this),jt(this)}}}catch{}finally{}};function Bl(c){if(!na(c))return c.g.la();const x=yn(c.g);if(x==="")return"";let T="";const D=x.length,se=ua(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return An(c),jt(c),"";c.h.i=new p.TextDecoder}for(let pe=0;pe<D;pe++)c.h.h=!0,T+=c.h.i.decode(x[pe],{stream:!(se&&pe==D-1)});return x.length=0,c.h.g+=T,c.C=0,c.h.g}function na(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function no(c,x){var T=c.C,D=x.indexOf(`
`,T);return D==-1?nn:(T=Number(x.substring(T,D)),isNaN(T)?Kt:(D+=1,D+T>x.length?nn:(x=x.slice(D,D+T),c.C=D+T,x)))}dr.prototype.cancel=function(){this.K=!0,An(this)};function $n(c){c.T=Date.now()+c.H,Ni(c,c.H)}function Ni(c,x){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ea(b(c.aa,c),x)}function jr(c){c.D&&(p.clearTimeout(c.D),c.D=null)}dr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Cr(this.i,this.B),this.M!=2&&(ke(),dn(17)),An(this),this.m=2,jt(this)):Ni(this,this.T-c)};function jt(c){c.j.I==0||c.K||Xa(c.j,c)}function An(c){jr(c);var x=c.O;x&&typeof x.dispose=="function"&&x.dispose(),c.O=null,Wr(c.V),c.g&&(x=c.g,c.g=null,x.abort(),x.dispose())}function Mn(c,x){try{var T=c.j;if(T.I!=0&&(T.g==c||Or(T.h,c))){if(!c.L&&Or(T.h,c)&&T.I==3){try{var D=T.Ba.g.parse(x)}catch{D=null}if(Array.isArray(D)&&D.length==3){var se=D;if(se[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<c.F)fs(T),Aa(T);else break e;Ra(T),dn(18)}}else T.xa=se[1],0<T.xa-T.K&&se[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ea(b(T.Va,T),6e3));Ir(T.h)<=1&&T.ta&&(T.ta=void 0)}else Lr(T,11)}else if((c.L||T.g==c)&&fs(T),!k(x))for(se=T.Ba.g.parse(x),x=0;x<se.length;x++){let Ct=se[x];const Qt=Ct[0];if(!(Qt<=T.K))if(T.K=Qt,Ct=Ct[1],T.I==2)if(Ct[0]=="c"){T.M=Ct[1],T.ba=Ct[2];const Ur=Ct[3];Ur!=null&&(T.ka=Ur,T.j.info("VER="+T.ka));const Br=Ct[4];Br!=null&&(T.za=Br,T.j.info("SVER="+T.za));const Tr=Ct[5];Tr!=null&&typeof Tr=="number"&&Tr>0&&(D=1.5*Tr,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ha=c.g;if(ha){const hi=ha.g?ha.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var pe=D.h;pe.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(ra(pe,pe.h),pe.h=null))}if(D.G){const gs=ha.g?ha.g.getResponseHeader("X-HTTP-Session-Id"):null;gs&&(D.wa=gs,Vt(D.J,D.G,gs))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-c.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var Me=c;if(D.na=ps(D,D.L?D.ba:null,D.W),Me.L){as(D.h,Me);var lt=Me,vn=D.O;vn&&(lt.H=vn),lt.D&&(jr(lt),$n(lt)),D.g=Me}else ji(D);T.i.length>0&&Na(T)}else Ct[0]!="stop"&&Ct[0]!="close"||Lr(T,7);else T.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?Lr(T,7):li(T):Ct[0]!="noop"&&T.l&&T.l.qa(Ct),T.A=0)}}ke(4)}catch{}}var mn=class{constructor(c,x){this.g=c,this.map=x}};function Ea(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ii(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ir(c){return c.h?1:c.g?c.g.size:0}function Or(c,x){return c.h?c.h==x:c.g?c.g.has(x):!1}function ra(c,x){c.g?c.g.add(x):c.h=x}function as(c,x){c.h&&c.h==x?c.h=null:c.g&&c.g.has(x)&&c.g.delete(x)}Ea.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function si(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let x=c.i;for(const T of c.g.values())x=x.concat(T.G);return x}return X(c.i)}var ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(c,x){if(c){c=c.split("&");for(let T=0;T<c.length;T++){const D=c[T].indexOf("=");let se,pe=null;D>=0?(se=c[T].substring(0,D),pe=c[T].substring(D+1)):se=c[T],x(se,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function mr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;c instanceof mr?(this.l=c.l,gn(this,c.j),this.o=c.o,this.g=c.g,Mr(this,c.u),this.h=c.h,is(this,Bo(c.i)),this.m=c.m):c&&(x=String(c).match(ro))?(this.l=!1,gn(this,x[1]||"",!0),this.o=_t(x[2]||""),this.g=_t(x[3]||"",!0),Mr(this,x[4]),this.h=_t(x[5]||"",!0),is(this,x[6]||"",!0),this.m=_t(x[7]||"")):(this.l=!1,this.i=new oa(null,this.l))}mr.prototype.toString=function(){const c=[];var x=this.j;x&&c.push(aa(x,ia,!0),":");var T=this.g;return(T||x=="file")&&(c.push("//"),(x=this.o)&&c.push(aa(x,ia,!0),"@"),c.push(Dr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&c.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(aa(T,T.charAt(0)=="/"?Ri:ss,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",aa(T,ao)),c.join("")},mr.prototype.resolve=function(c){const x=pn(this);let T=!!c.j;T?gn(x,c.j):T=!!c.o,T?x.o=c.o:T=!!c.g,T?x.g=c.g:T=c.u!=null;var D=c.h;if(T)Mr(x,c.u);else if(T=!!c.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var se=x.h.lastIndexOf("/");se!=-1&&(D=x.h.slice(0,se+1)+D)}if(se=D,se==".."||se==".")D="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){D=se.lastIndexOf("/",0)==0,se=se.split("/");const pe=[];for(let Me=0;Me<se.length;){const lt=se[Me++];lt=="."?D&&Me==se.length&&pe.push(""):lt==".."?((pe.length>1||pe.length==1&&pe[0]!="")&&pe.pop(),D&&Me==se.length&&pe.push("")):(pe.push(lt),D=!0)}D=pe.join("/")}else D=se}return T?x.h=D:T=c.i.toString()!=="",T?is(x,Bo(c.i)):T=!!c.m,T&&(x.m=c.m),x};function pn(c){return new mr(c)}function gn(c,x,T){c.j=T?_t(x,!0):x,c.j&&(c.j=c.j.replace(/:$/,""))}function Mr(c,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);c.u=x}else c.u=null}function is(c,x,T){x instanceof oa?(c.i=x,la(c.i,c.l)):(T||(x=aa(x,sa)),c.i=new oa(x,c.l))}function Vt(c,x,T){c.i.set(x,T)}function oi(c){return Vt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function _t(c,x){return c?x?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function aa(c,x,T){return typeof c=="string"?(c=encodeURI(c).replace(x,Vn),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Vn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ia=/[#\/\?@]/g,ss=/[#\?:]/g,Ri=/[#\?]/g,sa=/[#\?@]/g,ao=/#/g;function oa(c,x){this.h=this.g=null,this.i=c||null,this.j=!!x}function ir(c){c.g||(c.g=new Map,c.h=0,c.i&&ft(c.i,function(x,T){c.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}a=oa.prototype,a.add=function(c,x){ir(this),this.i=null,c=_n(this,c);let T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(x),this.h+=1,this};function Uo(c,x){ir(c),x=_n(c,x),c.g.has(x)&&(c.i=null,c.h-=c.g.get(x).length,c.g.delete(x))}function bt(c,x){return ir(c),x=_n(c,x),c.g.has(x)}a.forEach=function(c,x){ir(this),this.g.forEach(function(T,D){T.forEach(function(se){c.call(x,se,D,this)},this)},this)};function os(c,x){ir(c);let T=[];if(typeof x=="string")bt(c,x)&&(T=T.concat(c.g.get(_n(c,x))));else for(c=Array.from(c.g.values()),x=0;x<c.length;x++)T=T.concat(c[x]);return T}a.set=function(c,x){return ir(this),this.i=null,c=_n(this,c),bt(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[x]),this.h+=1,this},a.get=function(c,x){return c?(c=os(this,c),c.length>0?String(c[0]):x):x};function ls(c,x,T){Uo(c,x),T.length>0&&(c.i=null,c.g.set(_n(c,x),X(T)),c.h+=T.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],x=Array.from(this.g.keys());for(let D=0;D<x.length;D++){var T=x[D];const se=Dr(T);T=os(this,T);for(let pe=0;pe<T.length;pe++){let Me=se;T[pe]!==""&&(Me+="="+Dr(T[pe])),c.push(Me)}}return this.i=c.join("&")};function Bo(c){const x=new oa;return x.i=c.i,c.g&&(x.g=new Map(c.g),x.h=c.h),x}function _n(c,x){return x=String(x),c.j&&(x=x.toLowerCase()),x}function la(c,x){x&&!c.j&&(ir(c),c.i=null,c.g.forEach(function(T,D){const se=D.toLowerCase();D!=se&&(Uo(this,D),ls(this,se,T))},c)),c.j=x}function pr(c,x){const T=new xr;if(p.Image){const D=new Image;D.onload=A(Er,T,"TestLoadImage: loaded",!0,x,D),D.onerror=A(Er,T,"TestLoadImage: error",!1,x,D),D.onabort=A(Er,T,"TestLoadImage: abort",!1,x,D),D.ontimeout=A(Er,T,"TestLoadImage: timeout",!1,x,D),p.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=c}else x(!1)}function Vr(c,x){const T=new xr,D=new AbortController,se=setTimeout(()=>{D.abort(),Er(T,"TestPingServer: timeout",!1,x)},1e4);fetch(c,{signal:D.signal}).then(pe=>{clearTimeout(se),pe.ok?Er(T,"TestPingServer: ok",!0,x):Er(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(se),Er(T,"TestPingServer: error",!1,x)})}function Er(c,x,T,D,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),D(T)}catch{}}function Fa(){this.g=new rs}function Gt(c){this.i=c.Sb||null,this.h=c.ab||!1}N(Gt,wi),Gt.prototype.g=function(){return new Zn(this.i,this.h)};function Zn(c,x){Rt.call(this),this.H=c,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}N(Zn,Rt),a=Zn.prototype,a.open=function(c,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=x,this.readyState=1,wr(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(x.body=c),(this.H||p).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function wa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var x=c.value?c.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!c.done}))&&(this.response=this.responseText+=x)}c.done?kr(this):wr(this),this.readyState==3&&wa(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,kr(this))},a.Na=function(c){this.g&&(this.response=c,kr(this))},a.ga=function(){this.g&&kr(this)};function kr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,wr(c)}a.setRequestHeader=function(c,x){this.A.append(c,x)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=x.next();return c.join(`\r
`)};function wr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nn(c){let x="";return at(c,function(T,D){x+=D,x+=":",x+=T,x+=`\r
`}),x}function Ci(c,x,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Nn(T),typeof c=="string"?T!=null&&Dr(T):Vt(c,x,T))}function vt(c){Rt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}N(vt,Rt);var Pr=/^https?$/i,us=["POST","PUT"];a=vt.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,x,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);x=x?x.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ln.g(),this.g.onreadystatechange=I(b(this.Ca,this));try{this.B=!0,this.g.open(x,String(c),!0),this.B=!1}catch(pe){Ha(this,pe);return}if(c=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var se in D)T.set(se,D[se]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const pe of D.keys())T.set(pe,D.get(pe));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(pe=>pe.toLowerCase()=="content-type"),se=p.FormData&&c instanceof p.FormData,!(Array.prototype.indexOf.call(us,x,void 0)>=0)||D||se||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,Me]of T)this.g.setRequestHeader(pe,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(pe){Ha(this,pe)}};function Ha(c,x){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=x,c.o=5,Ka(c),Ta(c)}function Ka(c){c.A||(c.A=!0,Mt(c,"complete"),Mt(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Mt(this,"complete"),Mt(this,"abort"),Ta(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),vt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Ga(this):this.Xa())},a.Xa=function(){Ga(this)};function Ga(c){if(c.h&&typeof u<"u"){if(c.v&&ua(c)==4)setTimeout(c.Ca.bind(c),0);else if(Mt(c,"readystatechange"),ua(c)==4){c.h=!1;try{const pe=c.ca();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var D;if(D=pe===0){let Me=String(c.D).match(ro)[1]||null;!Me&&p.self&&p.self.location&&(Me=p.self.location.protocol.slice(0,-1)),D=!Pr.test(Me?Me.toLowerCase():"")}T=D}if(T)Mt(c,"complete"),Mt(c,"success");else{c.o=6;try{var se=ua(c)>2?c.g.statusText:""}catch{se=""}c.l=se+" ["+c.ca()+"]",Ka(c)}}finally{Ta(c)}}}}function Ta(c,x){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const T=c.g;c.g=null,x||Mt(c,"ready");try{T.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function ua(c){return c.g?c.g.readyState:0}a.ca=function(){try{return ua(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var x=this.g.responseText;return c&&x.indexOf(c)==0&&(x=x.substring(c.length)),Ei(x)}};function yn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qa(c){const x={};c=(c.g&&ua(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<c.length;D++){if(k(c[D]))continue;var T=Ai(c[D]);const se=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const pe=x[se]||[];x[se]=pe,pe.push(T)}tt(x,function(D){return D.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(c,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||x}function ca(c){this.za=0,this.i=[],this.j=new xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sa("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sa("baseRetryDelayMs",5e3,c),this.Za=Sa("retryDelaySeedMs",1e4,c),this.Ta=Sa("forwardChannelMaxRetries",2,c),this.va=Sa("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ea(c&&c.concurrentRequestLimit),this.Ba=new Fa,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ca.prototype,a.ka=8,a.I=1,a.connect=function(c,x,T,D){dn(0),this.W=c,this.H=x||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=ps(this,null,this.W),Na(this)};function li(c){if(cs(c),c.I==3){var x=c.V++,T=pn(c.J);if(Vt(T,"SID",c.M),Vt(T,"RID",x),Vt(T,"TYPE","terminate"),Ya(c,T),x=new dr(c,c.j,x),x.M=2,x.A=oi(pn(T)),T=!1,p.navigator&&p.navigator.sendBeacon)try{T=p.navigator.sendBeacon(x.A.toString(),"")}catch{}!T&&p.Image&&(new Image().src=x.A,T=!0),T||(x.g=Rn(x.j,null),x.g.ea(x.A)),x.F=Date.now(),$n(x)}ms(c)}function Aa(c){c.g&&(ui(c),c.g.cancel(),c.g=null)}function cs(c){Aa(c),c.v&&(p.clearTimeout(c.v),c.v=null),fs(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&p.clearTimeout(c.m),c.m=null)}function Na(c){if(!ii(c.h)&&!c.m){c.m=!0;var x=c.Ea;Pe||O(),Ye||(Pe(),Ye=!0),M.add(x,c),c.D=0}}function hs(c,x){return Ir(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=x.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ea(b(c.Ea,c,x),ds(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const se=new dr(this,this.j,c);let pe=this.o;if(this.U&&(pe?(pe=H(pe),Ie(pe,this.U)):pe=this.U),this.u!==null||this.R||(se.J=pe,pe=null),this.S)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(x+=D,x>4096){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=io(this,se,x),T=pn(this.J),Vt(T,"RID",c),Vt(T,"CVER",22),this.G&&Vt(T,"X-HTTP-Session-Id",this.G),Ya(this,T),pe&&(this.R?x="headers="+Dr(Nn(pe))+"&"+x:this.u&&Ci(T,this.u,pe)),ra(this.h,se),this.Ra&&Vt(T,"TYPE","init"),this.S?(Vt(T,"$req",x),Vt(T,"SID","null"),se.U=!0,Kn(se,T,null)):Kn(se,T,x),this.I=2}}else this.I==3&&(c?Di(this,c):this.i.length==0||ii(this.h)||Di(this))};function Di(c,x){var T;x?T=x.l:T=c.V++;const D=pn(c.J);Vt(D,"SID",c.M),Vt(D,"RID",T),Vt(D,"AID",c.K),Ya(c,D),c.u&&c.o&&Ci(D,c.u,c.o),T=new dr(c,c.j,T,c.D+1),c.u===null&&(T.J=c.o),x&&(c.i=x.G.concat(c.i)),x=io(c,T,1e3),T.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ra(c.h,T),Kn(T,D,x)}function Ya(c,x){c.H&&at(c.H,function(T,D){Vt(x,D,T)}),c.l&&at({},function(T,D){Vt(x,D,T)})}function io(c,x,T){T=Math.min(c.i.length,T);const D=c.l?b(c.l.Ka,c.l,c):null;e:{var se=c.i;let lt=-1;for(;;){const vn=["count="+T];lt==-1?T>0?(lt=se[0].g,vn.push("ofs="+lt)):lt=0:vn.push("ofs="+lt);let Ct=!0;for(let Qt=0;Qt<T;Qt++){var pe=se[Qt].g;const Ur=se[Qt].map;if(pe-=lt,pe<0)lt=Math.max(0,se[Qt].g-100),Ct=!1;else try{pe="req"+pe+"_"||"";try{var Me=Ur instanceof Map?Ur:Object.entries(Ur);for(const[Br,Tr]of Me){let ha=Tr;_(Tr)&&(ha=ba(Tr)),vn.push(pe+Br+"="+encodeURIComponent(ha))}}catch(Br){throw vn.push(pe+"type="+encodeURIComponent("_badmap")),Br}}catch{D&&D(Ur)}}if(Ct){Me=vn.join("&");break e}}Me=void 0}return c=c.i.splice(0,T),x.G=c,Me}function ji(c){if(!c.g&&!c.v){c.Y=1;var x=c.Da;Pe||O(),Ye||(Pe(),Ye=!0),M.add(x,c),c.A=0}}function Ra(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ea(b(c.Da,c),ds(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,so(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ea(b(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dn(10),Aa(this),so(this))};function ui(c){c.B!=null&&(p.clearTimeout(c.B),c.B=null)}function so(c){c.g=new dr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var x=pn(c.na);Vt(x,"RID","rpc"),Vt(x,"SID",c.M),Vt(x,"AID",c.K),Vt(x,"CI",c.F?"0":"1"),!c.F&&c.ia&&Vt(x,"TO",c.ia),Vt(x,"TYPE","xmlhttp"),Ya(c,x),c.u&&c.o&&Ci(x,c.u,c.o),c.O&&(c.g.H=c.O);var T=c.g;c=c.ba,T.M=1,T.A=oi(pn(x)),T.u=null,T.R=!0,qa(T,c)}a.Va=function(){this.C!=null&&(this.C=null,Aa(this),Ra(this),dn(19))};function fs(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function Xa(c,x){var T=null;if(c.g==x){fs(c),ui(c),c.g=null;var D=2}else if(Or(c.h,x))T=x.G,as(c.h,x),D=1;else return;if(c.I!=0){if(x.o)if(D==1){T=x.u?x.u.length:0,x=Date.now()-x.F;var se=c.D;D=Nr(),Mt(D,new Rr(D,T)),Na(c)}else ji(c);else if(se=x.m,se==3||se==0&&x.X>0||!(D==1&&hs(c,x)||D==2&&Ra(c)))switch(T&&T.length>0&&(x=c.h,x.i=x.i.concat(T)),se){case 1:Lr(c,5);break;case 4:Lr(c,10);break;case 3:Lr(c,6);break;default:Lr(c,2)}}}function ds(c,x){let T=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(T*=2),T*x}function Lr(c,x){if(c.j.info("Error code "+x),x==2){var T=b(c.bb,c),D=c.Ua;const se=!D;D=new mr(D||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||gn(D,"https"),oi(D),se?pr(D.toString(),T):Vr(D.toString(),T)}else dn(2);c.I=0,c.l&&c.l.pa(x),ms(c),cs(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function ms(c){if(c.I=0,c.ja=[],c.l){const x=si(c.h);(x.length!=0||c.i.length!=0)&&(ue(c.ja,x),ue(c.ja,c.i),c.h.i.length=0,X(c.i),c.i.length=0),c.l.oa()}}function ps(c,x,T){var D=T instanceof mr?pn(T):new mr(T);if(D.g!="")x&&(D.g=x+"."+D.g),Mr(D,D.u);else{var se=p.location;D=se.protocol,x=x?x+"."+se.hostname:se.hostname,se=+se.port;const pe=new mr(null);D&&gn(pe,D),x&&(pe.g=x),se&&Mr(pe,se),T&&(pe.h=T),D=pe}return T=c.G,x=c.wa,T&&x&&Vt(D,T,x),Vt(D,"VER",c.ka),Ya(c,D),D}function Rn(c,x,T){if(x&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=c.Aa&&!c.ma?new vt(new Gt({ab:T})):new vt(c.ma),x.Fa(c.L),x}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function ci(){}a=ci.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function zr(){}zr.prototype.g=function(c,x){return new Jn(c,x)};function Jn(c,x){Rt.call(this),this.g=new ca(x),this.l=c,this.h=x&&x.messageUrlParams||null,c=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(c?c["X-WebChannel-Content-Type"]=x.messageContentType:c={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(c?c["X-WebChannel-Client-Profile"]=x.sa:c={"X-WebChannel-Client-Profile":x.sa}),this.g.U=c,(c=x&&x.Qb)&&!k(c)&&(this.g.u=c),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!k(x)&&(this.g.G=x,c=this.h,c!==null&&x in c&&(c=this.h,x in c&&delete c[x])),this.j=new Ca(this)}N(Jn,Rt),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){li(this.g)},Jn.prototype.o=function(c){var x=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.v&&(T={},T.__data__=ba(c),c=T);x.i.push(new mn(x.Ya++,c)),x.I==3&&Na(x)},Jn.prototype.N=function(){this.g.l=null,delete this.j,li(this.g),delete this.g,Jn.Z.N.call(this)};function Ii(c){Tn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var x=c.__sm__;if(x){e:{for(const T in x){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,x=x!==null&&c in x?x[c]:void 0),this.data=x}else this.data=c}N(Ii,Tn);function oo(){Sn.call(this),this.status=1}N(oo,Sn);function Ca(c){this.g=c}N(Ca,ci),Ca.prototype.ra=function(){Mt(this.g,"a")},Ca.prototype.qa=function(c){Mt(this.g,new Ii(c))},Ca.prototype.pa=function(c){Mt(this.g,new oo)},Ca.prototype.oa=function(){Mt(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,$b=function(){return new zr},Xb=function(){return Nr()},Yb=Ue,bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,uh=xa,Ut.COMPLETE="complete",Qb=Ut,_a.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Au=_a,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,Gb=vt}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const a0="@firebase/firestore",i0="4.9.2";class br{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");let kl="12.3.0";const Do=new zb("@firebase/firestore");function pl(){return Do.logLevel}function He(a,...t){if(Do.logLevel<=Ot.DEBUG){const r=t.map(Ym);Do.debug(`Firestore (${kl}): ${a}`,...r)}}function es(a,...t){if(Do.logLevel<=Ot.ERROR){const r=t.map(Ym);Do.error(`Firestore (${kl}): ${a}`,...r)}}function jo(a,...t){if(Do.logLevel<=Ot.WARN){const r=t.map(Ym);Do.warn(`Firestore (${kl}): ${a}`,...r)}}function Ym(a){if(typeof a=="string")return a;try{return(function(r){return JSON.stringify(r)})(a)}catch{return a}}function it(a,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,Zb(a,s,r)}function Zb(a,t,r){let s=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${a.toString(16)})`;if(r!==void 0)try{s+=" CONTEXT: "+JSON.stringify(r)}catch{s+=" CONTEXT: "+r}throw es(s),new Error(s)}function Bt(a,t,r,s){let l="Unexpected state";typeof r=="string"?l=r:s=r,a||Zb(t,l,s)}function ht(a,t){return a}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Vl{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class No{constructor(){this.promise=new Promise(((t,r)=>{this.resolve=t,this.reject=r}))}}class Jb{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Wb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable((()=>r(br.UNAUTHENTICATED)))}shutdown(){}}class dS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class mS{constructor(t){this.t=t,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){Bt(this.o===void 0,42304);let s=this.i;const l=v=>this.i!==s?(s=this.i,r(v)):Promise.resolve();let u=new No;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new No,t.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const v=u;t.enqueueRetryable((async()=>{await v.promise,await l(this.currentUser)}))},_=v=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((v=>_(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?_(v):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new No)}}),0),p()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((s=>this.i!==t?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Bt(typeof s.accessToken=="string",31837,{l:s}),new Jb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Bt(t===null||typeof t=="string",2055,{h:t}),new br(t)}}class pS{constructor(t,r,s){this.P=t,this.T=r,this.I=s,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gS{constructor(t,r,s){this.P=t,this.T=r,this.I=s}getToken(){return Promise.resolve(new pS(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable((()=>r(br.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class s0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yS{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$T(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){Bt(this.o===void 0,3512);const s=u=>{u.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const p=u.token!==this.m;return this.m=u.token,He("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?r(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const l=u=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new s0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((r=>r?(Bt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new s0(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vS(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class Hh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=vS(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<r&&(s+=t.charAt(l[u]%62))}return s}}function St(a,t){return a<t?-1:a>t?1:0}function _m(a,t){const r=Math.min(a.length,t.length);for(let s=0;s<r;s++){const l=a.charAt(s),u=t.charAt(s);if(l!==u)return om(l)===om(u)?St(l,u):om(l)?1:-1}return St(a.length,t.length)}const bS=55296,_S=57343;function om(a){const t=a.charCodeAt(0);return t>=bS&&t<=_S}function El(a,t,r){return a.length===t.length&&a.every(((s,l)=>r(s,t[l])))}const o0="__name__";class yi{constructor(t,r,s){r===void 0?r=0:r>t.length&&it(637,{offset:r,range:t.length}),s===void 0?s=t.length-r:s>t.length-r&&it(1746,{length:s,range:t.length-r}),this.segments=t,this.offset=r,this.len=s}get length(){return this.len}isEqual(t){return yi.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof yi?t.forEach((s=>{r.push(s)})):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,s=this.limit();r<s;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const s=Math.min(t.length,r.length);for(let l=0;l<s;l++){const u=yi.compareSegments(t.get(l),r.get(l));if(u!==0)return u}return St(t.length,r.length)}static compareSegments(t,r){const s=yi.isNumericId(t),l=yi.isNumericId(r);return s&&!l?-1:!s&&l?1:s&&l?yi.extractNumericId(t).compare(yi.extractNumericId(r)):_m(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ks.fromString(t.substring(4,t.length-2))}}class en extends yi{construct(t,r,s){return new en(t,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const s of t){if(s.indexOf("//")>=0)throw new Ke(Te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter((l=>l.length>0)))}return new en(r)}static emptyPath(){return new en([])}}const xS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends yi{construct(t,r,s){return new nr(t,r,s)}static isValidIdentifier(t){return xS.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o0}static keyField(){return new nr([o0])}static fromServerFormat(t){const r=[];let s="",l=0;const u=()=>{if(s.length===0)throw new Ke(Te.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let p=!1;for(;l<t.length;){const _=t[l];if(_==="\\"){if(l+1===t.length)throw new Ke(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ke(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=v,l+=2}else _==="`"?(p=!p,l++):_!=="."||p?(s+=_,l++):(u(),l++)}if(u(),p)throw new Ke(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nr(r)}static emptyPath(){return new nr([])}}class Ze{constructor(t){this.path=t}static fromPath(t){return new Ze(en.fromString(t))}static fromName(t){return new Ze(en.fromString(t).popFirst(5))}static empty(){return new Ze(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&en.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return en.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ze(new en(t.slice()))}}function e_(a,t,r){if(!r)throw new Ke(Te.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function t_(a,t,r,s){if(t===!0&&s===!0)throw new Ke(Te.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function l0(a){if(!Ze.isDocumentKey(a))throw new Ke(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function u0(a){if(Ze.isDocumentKey(a))throw new Ke(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function n_(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Kh(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":it(12329,{type:typeof a})}function Gs(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Ke(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Kh(a);throw new Ke(Te.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function Hn(a,t){const r={typeString:a};return t&&(r.value=t),r}function Gu(a,t){if(!n_(a))throw new Ke(Te.INVALID_ARGUMENT,"JSON must be an object");let r;for(const s in t)if(t[s]){const l=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in a)){r=`JSON missing required field: '${s}'`;break}const p=a[s];if(l&&typeof p!==l){r=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&p!==u.value){r=`Expected '${s}' field to equal '${u.value}'`;break}}if(r)throw new Ke(Te.INVALID_ARGUMENT,r);return!0}const c0=-62135596800,h0=1e6;class tn{static now(){return tn.fromMillis(Date.now())}static fromDate(t){return tn.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),s=Math.floor((t-1e3*r)*h0);return new tn(r,s)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ke(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ke(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<c0)throw new Ke(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ke(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h0}_compareTo(t){return this.seconds===t.seconds?St(this.nanoseconds,t.nanoseconds):St(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Gu(t,tn._jsonSchema))return new tn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-c0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tn._jsonSchemaVersion="firestore/timestamp/1.0",tn._jsonSchema={type:Hn("string",tn._jsonSchemaVersion),seconds:Hn("number"),nanoseconds:Hn("number")};class ut{static fromTimestamp(t){return new ut(t)}static min(){return new ut(new tn(0,0))}static max(){return new ut(new tn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Lu=-1;function ES(a,t){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,l=ut.fromTimestamp(s===1e9?new tn(r+1,0):new tn(r,s));return new Xs(l,Ze.empty(),t)}function wS(a){return new Xs(a.readTime,a.key,Lu)}class Xs{constructor(t,r,s){this.readTime=t,this.documentKey=r,this.largestBatchId=s}static min(){return new Xs(ut.min(),Ze.empty(),Lu)}static max(){return new Xs(ut.max(),Ze.empty(),Lu)}}function TS(a,t){let r=a.readTime.compareTo(t.readTime);return r!==0?r:(r=Ze.comparator(a.documentKey,t.documentKey),r!==0?r:St(a.largestBatchId,t.largestBatchId))}const SS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Pl(a){if(a.code!==Te.FAILED_PRECONDITION||a.message!==SS)throw a;He("LocalStore","Unexpectedly lost primary lease")}class Se{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&it(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Se(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(r,u).next(s,l)}}))}toPromise(){return new Promise(((t,r)=>{this.next(t,r)}))}wrapUserFunction(t){try{const r=t();return r instanceof Se?r:Se.resolve(r)}catch(r){return Se.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction((()=>t(r))):Se.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction((()=>t(r))):Se.reject(r)}static resolve(t){return new Se(((r,s)=>{r(t)}))}static reject(t){return new Se(((r,s)=>{s(t)}))}static waitFor(t){return new Se(((r,s)=>{let l=0,u=0,p=!1;t.forEach((_=>{++l,_.next((()=>{++u,p&&u===l&&r()}),(v=>s(v)))})),p=!0,u===l&&r()}))}static or(t){let r=Se.resolve(!1);for(const s of t)r=r.next((l=>l?Se.resolve(l):s()));return r}static forEach(t,r){const s=[];return t.forEach(((l,u)=>{s.push(r.call(this,l,u))})),this.waitFor(s)}static mapArray(t,r){return new Se(((s,l)=>{const u=t.length,p=new Array(u);let _=0;for(let v=0;v<u;v++){const b=v;r(t[b]).next((A=>{p[b]=A,++_,_===u&&s(p)}),(A=>l(A)))}}))}static doWhile(t,r){return new Se(((s,l)=>{const u=()=>{t()===!0?r().next((()=>{u()}),l):s()};u()}))}}function NS(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ll(a){return a.name==="IndexedDbTransactionError"}class Gh{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>r.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Gh.ce=-1;const Xm=-1;function Qh(a){return a==null}function Sh(a){return a===0&&1/a==-1/0}function RS(a){return typeof a=="number"&&Number.isInteger(a)&&!Sh(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const r_="";function CS(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=f0(t)),t=DS(a.get(r),t);return f0(t)}function DS(a,t){let r=t;const s=a.length;for(let l=0;l<s;l++){const u=a.charAt(l);switch(u){case"\0":r+="";break;case r_:r+="";break;default:r+=u}}return r}function f0(a){return a+r_+""}function d0(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function Oo(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function a_(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class bn{constructor(t,r){this.comparator=t,this.root=r||cr.EMPTY}insert(t,r){return new bn(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(t){return new bn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cr.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(t){let r=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return r+s.left.size;l<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((r,s)=>(t(r,s),!1)))}toString(){const t=[];return this.inorderTraversal(((r,s)=>(t.push(`${r}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nh(this.root,t,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nh(this.root,t,this.comparator,!0)}}class nh{constructor(t,r,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=r?s(t.key,r):1,r&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class cr{constructor(t,r,s,l,u){this.key=t,this.value=r,this.color=s??cr.RED,this.left=l??cr.EMPTY,this.right=u??cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,s,l,u){return new cr(t??this.key,r??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let l=this;const u=s(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,r,s),null):u===0?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let s,l=this;if(r(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),r(t,l.key)===0){if(l.right.isEmpty())return cr.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw it(43730,{key:this.key,value:this.value});if(this.right.isRed())throw it(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw it(27949);return t+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw it(57766)}get value(){throw it(16141)}get color(){throw it(16727)}get left(){throw it(29726)}get right(){throw it(36894)}copy(t,r,s,l,u){return this}insert(t,r,s){return new cr(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(t){this.comparator=t,this.data=new bn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((r,s)=>(t(r),!1)))}forEachInRange(t,r){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;r(l.key)}}forEachWhile(t,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new m0(this.data.getIterator())}getIteratorFrom(t){return new m0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach((s=>{r=r.add(s)})),r}isEqual(t){if(!(t instanceof Qn)||this.size!==t.size)return!1;const r=this.data.getIterator(),s=t.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((r=>{t.push(r)})),t}toString(){const t=[];return this.forEach((r=>t.push(r))),"SortedSet("+t.toString()+")"}copy(t){const r=new Qn(this.comparator);return r.data=t,r}}class m0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ja{constructor(t){this.fields=t,t.sort(nr.comparator)}static empty(){return new Ja([])}unionWith(t){let r=new Qn(nr.comparator);for(const s of this.fields)r=r.add(s);for(const s of t)r=r.add(s);return new Ja(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return El(this.fields,t.fields,((r,s)=>r.isEqual(s)))}}class i_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rr{constructor(t){this.binaryString=t}static fromBase64String(t){const r=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new i_("Invalid base64 string: "+u):u}})(t);return new rr(r)}static fromUint8Array(t){const r=(function(l){let u="";for(let p=0;p<l.length;++p)u+=String.fromCharCode(l[p]);return u})(t);return new rr(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const s=new Uint8Array(r.length);for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return St(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const jS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(a){if(Bt(!!a,39018),typeof a=="string"){let t=0;const r=jS.exec(a);if(Bt(!!r,46558,{timestamp:a}),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:jn(a.seconds),nanos:jn(a.nanos)}}function jn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Zs(a){return typeof a=="string"?rr.fromBase64String(a):rr.fromUint8Array(a)}const s_="server_timestamp",o_="__type__",l_="__previous_value__",u_="__local_write_time__";function $m(a){return(a?.mapValue?.fields||{})[o_]?.stringValue===s_}function Yh(a){const t=a.mapValue.fields[l_];return $m(t)?Yh(t):t}function zu(a){const t=$s(a.mapValue.fields[u_].timestampValue);return new tn(t.seconds,t.nanos)}class IS{constructor(t,r,s,l,u,p,_,v,b,A){this.databaseId=t,this.appId=r,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.longPollingOptions=v,this.useFetchStreams=b,this.isUsingEmulator=A}}const Ah="(default)";class wl{constructor(t,r){this.projectId=t,this.database=r||Ah}static empty(){return new wl("","")}get isDefaultDatabase(){return this.database===Ah}isEqual(t){return t instanceof wl&&t.projectId===this.projectId&&t.database===this.database}}const c_="__type__",OS="__max__",rh={mapValue:{}},h_="__vector__",Nh="value";function Js(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?$m(a)?4:VS(a)?9007199254740991:MS(a)?10:11:it(28295,{value:a})}function xi(a,t){if(a===t)return!0;const r=Js(a);if(r!==Js(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return zu(a).isEqual(zu(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const p=$s(l.timestampValue),_=$s(u.timestampValue);return p.seconds===_.seconds&&p.nanos===_.nanos})(a,t);case 5:return a.stringValue===t.stringValue;case 6:return(function(l,u){return Zs(l.bytesValue).isEqual(Zs(u.bytesValue))})(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return(function(l,u){return jn(l.geoPointValue.latitude)===jn(u.geoPointValue.latitude)&&jn(l.geoPointValue.longitude)===jn(u.geoPointValue.longitude)})(a,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return jn(l.integerValue)===jn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const p=jn(l.doubleValue),_=jn(u.doubleValue);return p===_?Sh(p)===Sh(_):isNaN(p)&&isNaN(_)}return!1})(a,t);case 9:return El(a.arrayValue.values||[],t.arrayValue.values||[],xi);case 10:case 11:return(function(l,u){const p=l.mapValue.fields||{},_=u.mapValue.fields||{};if(d0(p)!==d0(_))return!1;for(const v in p)if(p.hasOwnProperty(v)&&(_[v]===void 0||!xi(p[v],_[v])))return!1;return!0})(a,t);default:return it(52216,{left:a})}}function Uu(a,t){return(a.values||[]).find((r=>xi(r,t)))!==void 0}function Tl(a,t){if(a===t)return 0;const r=Js(a),s=Js(t);if(r!==s)return St(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return St(a.booleanValue,t.booleanValue);case 2:return(function(u,p){const _=jn(u.integerValue||u.doubleValue),v=jn(p.integerValue||p.doubleValue);return _<v?-1:_>v?1:_===v?0:isNaN(_)?isNaN(v)?0:-1:1})(a,t);case 3:return p0(a.timestampValue,t.timestampValue);case 4:return p0(zu(a),zu(t));case 5:return _m(a.stringValue,t.stringValue);case 6:return(function(u,p){const _=Zs(u),v=Zs(p);return _.compareTo(v)})(a.bytesValue,t.bytesValue);case 7:return(function(u,p){const _=u.split("/"),v=p.split("/");for(let b=0;b<_.length&&b<v.length;b++){const A=St(_[b],v[b]);if(A!==0)return A}return St(_.length,v.length)})(a.referenceValue,t.referenceValue);case 8:return(function(u,p){const _=St(jn(u.latitude),jn(p.latitude));return _!==0?_:St(jn(u.longitude),jn(p.longitude))})(a.geoPointValue,t.geoPointValue);case 9:return g0(a.arrayValue,t.arrayValue);case 10:return(function(u,p){const _=u.fields||{},v=p.fields||{},b=_[Nh]?.arrayValue,A=v[Nh]?.arrayValue,N=St(b?.values?.length||0,A?.values?.length||0);return N!==0?N:g0(b,A)})(a.mapValue,t.mapValue);case 11:return(function(u,p){if(u===rh.mapValue&&p===rh.mapValue)return 0;if(u===rh.mapValue)return 1;if(p===rh.mapValue)return-1;const _=u.fields||{},v=Object.keys(_),b=p.fields||{},A=Object.keys(b);v.sort(),A.sort();for(let N=0;N<v.length&&N<A.length;++N){const I=_m(v[N],A[N]);if(I!==0)return I;const X=Tl(_[v[N]],b[A[N]]);if(X!==0)return X}return St(v.length,A.length)})(a.mapValue,t.mapValue);default:throw it(23264,{he:r})}}function p0(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return St(a,t);const r=$s(a),s=$s(t),l=St(r.seconds,s.seconds);return l!==0?l:St(r.nanos,s.nanos)}function g0(a,t){const r=a.values||[],s=t.values||[];for(let l=0;l<r.length&&l<s.length;++l){const u=Tl(r[l],s[l]);if(u)return u}return St(r.length,s.length)}function Sl(a){return xm(a)}function xm(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(r){const s=$s(r);return`time(${s.seconds},${s.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(r){return Zs(r).toBase64()})(a.bytesValue):"referenceValue"in a?(function(r){return Ze.fromName(r).toString()})(a.referenceValue):"geoPointValue"in a?(function(r){return`geo(${r.latitude},${r.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(r){let s="[",l=!0;for(const u of r.values||[])l?l=!1:s+=",",s+=xm(u);return s+"]"})(a.arrayValue):"mapValue"in a?(function(r){const s=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const p of s)u?u=!1:l+=",",l+=`${p}:${xm(r.fields[p])}`;return l+"}"})(a.mapValue):it(61005,{value:a})}function ch(a){switch(Js(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Yh(a);return t?16+ch(t):16;case 5:return 2*a.stringValue.length;case 6:return Zs(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+ch(u)),0)})(a.arrayValue);case 10:case 11:return(function(s){let l=0;return Oo(s.fields,((u,p)=>{l+=u.length+ch(p)})),l})(a.mapValue);default:throw it(13486,{value:a})}}function y0(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function Em(a){return!!a&&"integerValue"in a}function Zm(a){return!!a&&"arrayValue"in a}function v0(a){return!!a&&"nullValue"in a}function b0(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function hh(a){return!!a&&"mapValue"in a}function MS(a){return(a?.mapValue?.fields||{})[c_]?.stringValue===h_}function Du(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const t={mapValue:{fields:{}}};return Oo(a.mapValue.fields,((r,s)=>t.mapValue.fields[r]=Du(s))),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Du(a.arrayValue.values[r]);return t}return{...a}}function VS(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===OS}class La{constructor(t){this.value=t}static empty(){return new La({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let s=0;s<t.length-1;++s)if(r=(r.mapValue.fields||{})[t.get(s)],!hh(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Du(r)}setAll(t){let r=nr.emptyPath(),s={},l=[];t.forEach(((p,_)=>{if(!r.isImmediateParentOf(_)){const v=this.getFieldsMap(r);this.applyChanges(v,s,l),s={},l=[],r=_.popLast()}p?s[_.lastSegment()]=Du(p):l.push(_.lastSegment())}));const u=this.getFieldsMap(r);this.applyChanges(u,s,l)}delete(t){const r=this.field(t.popLast());hh(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return xi(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=r.mapValue.fields[t.get(s)];hh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[t.get(s)]=l),r=l}return r.mapValue.fields}applyChanges(t,r,s){Oo(r,((l,u)=>t[l]=u));for(const l of s)delete t[l]}clone(){return new La(Du(this.value))}}function f_(a){const t=[];return Oo(a.fields,((r,s)=>{const l=new nr([r]);if(hh(s)){const u=f_(s.mapValue).fields;if(u.length===0)t.push(l);else for(const p of u)t.push(l.child(p))}else t.push(l)})),new Ja(t)}class _r{constructor(t,r,s,l,u,p,_){this.key=t,this.documentType=r,this.version=s,this.readTime=l,this.createTime=u,this.data=p,this.documentState=_}static newInvalidDocument(t){return new _r(t,0,ut.min(),ut.min(),ut.min(),La.empty(),0)}static newFoundDocument(t,r,s,l){return new _r(t,1,r,ut.min(),s,l,0)}static newNoDocument(t,r){return new _r(t,2,r,ut.min(),ut.min(),La.empty(),0)}static newUnknownDocument(t,r){return new _r(t,3,r,ut.min(),ut.min(),La.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=La.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=La.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof _r&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rh{constructor(t,r){this.position=t,this.inclusive=r}}function _0(a,t,r){let s=0;for(let l=0;l<a.position.length;l++){const u=t[l],p=a.position[l];if(u.field.isKeyField()?s=Ze.comparator(Ze.fromName(p.referenceValue),r.key):s=Tl(p,r.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function x0(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!xi(a.position[r],t.position[r]))return!1;return!0}class Ch{constructor(t,r="asc"){this.field=t,this.dir=r}}function kS(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class d_{}class Fn extends d_{constructor(t,r,s){super(),this.field=t,this.op=r,this.value=s}static create(t,r,s){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,s):new LS(t,r,s):r==="array-contains"?new BS(t,s):r==="in"?new qS(t,s):r==="not-in"?new FS(t,s):r==="array-contains-any"?new HS(t,s):new Fn(t,r,s)}static createKeyFieldInFilter(t,r,s){return r==="in"?new zS(t,s):new US(t,s)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Tl(r,this.value)):r!==null&&Js(this.value)===Js(r)&&this.matchesComparison(Tl(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return it(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends d_{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new ti(t,r)}matches(t){return m_(this)?this.filters.find((r=>!r.matches(t)))===void 0:this.filters.find((r=>r.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,r)=>t.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function m_(a){return a.op==="and"}function p_(a){return PS(a)&&m_(a)}function PS(a){for(const t of a.filters)if(t instanceof ti)return!1;return!0}function wm(a){if(a instanceof Fn)return a.field.canonicalString()+a.op.toString()+Sl(a.value);if(p_(a))return a.filters.map((t=>wm(t))).join(",");{const t=a.filters.map((r=>wm(r))).join(",");return`${a.op}(${t})`}}function g_(a,t){return a instanceof Fn?(function(s,l){return l instanceof Fn&&s.op===l.op&&s.field.isEqual(l.field)&&xi(s.value,l.value)})(a,t):a instanceof ti?(function(s,l){return l instanceof ti&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,p,_)=>u&&g_(p,l.filters[_])),!0):!1})(a,t):void it(19439)}function y_(a){return a instanceof Fn?(function(r){return`${r.field.canonicalString()} ${r.op} ${Sl(r.value)}`})(a):a instanceof ti?(function(r){return r.op.toString()+" {"+r.getFilters().map(y_).join(" ,")+"}"})(a):"Filter"}class LS extends Fn{constructor(t,r,s){super(t,r,s),this.key=Ze.fromName(s.referenceValue)}matches(t){const r=Ze.comparator(t.key,this.key);return this.matchesComparison(r)}}class zS extends Fn{constructor(t,r){super(t,"in",r),this.keys=v_("in",r)}matches(t){return this.keys.some((r=>r.isEqual(t.key)))}}class US extends Fn{constructor(t,r){super(t,"not-in",r),this.keys=v_("not-in",r)}matches(t){return!this.keys.some((r=>r.isEqual(t.key)))}}function v_(a,t){return(t.arrayValue?.values||[]).map((r=>Ze.fromName(r.referenceValue)))}class BS extends Fn{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Zm(r)&&Uu(r.arrayValue,this.value)}}class qS extends Fn{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Uu(this.value.arrayValue,r)}}class FS extends Fn{constructor(t,r){super(t,"not-in",r)}matches(t){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Uu(this.value.arrayValue,r)}}class HS extends Fn{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Zm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((s=>Uu(this.value.arrayValue,s)))}}class KS{constructor(t,r=null,s=[],l=[],u=null,p=null,_=null){this.path=t,this.collectionGroup=r,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=p,this.endAt=_,this.Te=null}}function E0(a,t=null,r=[],s=[],l=null,u=null,p=null){return new KS(a,t,r,s,l,u,p)}function Jm(a){const t=ht(a);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map((s=>wm(s))).join(","),r+="|ob:",r+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Qh(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Sl(s))).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Sl(s))).join(",")),t.Te=r}return t.Te}function Wm(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!kS(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!g_(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!x0(a.startAt,t.startAt)&&x0(a.endAt,t.endAt)}function Tm(a){return Ze.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class Qu{constructor(t,r=null,s=[],l=[],u=null,p="F",_=null,v=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=p,this.startAt=_,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GS(a,t,r,s,l,u,p,_){return new Qu(a,t,r,s,l,u,p,_)}function ep(a){return new Qu(a)}function w0(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function b_(a){return a.collectionGroup!==null}function ju(a){const t=ht(a);if(t.Ie===null){t.Ie=[];const r=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),r.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(p){let _=new Qn(nr.comparator);return p.filters.forEach((v=>{v.getFlattenedFilters().forEach((b=>{b.isInequality()&&(_=_.add(b.field))}))})),_})(t).forEach((u=>{r.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Ch(u,s))})),r.has(nr.keyField().canonicalString())||t.Ie.push(new Ch(nr.keyField(),s))}return t.Ie}function vi(a){const t=ht(a);return t.Ee||(t.Ee=QS(t,ju(a))),t.Ee}function QS(a,t){if(a.limitType==="F")return E0(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Ch(l.field,u)}));const r=a.endAt?new Rh(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Rh(a.startAt.position,a.startAt.inclusive):null;return E0(a.path,a.collectionGroup,t,a.filters,a.limit,r,s)}}function Sm(a,t){const r=a.filters.concat([t]);return new Qu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Am(a,t,r){return new Qu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function Xh(a,t){return Wm(vi(a),vi(t))&&a.limitType===t.limitType}function __(a){return`${Jm(vi(a))}|lt:${a.limitType}`}function gl(a){return`Query(target=${(function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map((l=>y_(l))).join(", ")}]`),Qh(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map((l=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(l))).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map((l=>Sl(l))).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map((l=>Sl(l))).join(",")),`Target(${s})`})(vi(a))}; limitType=${a.limitType})`}function $h(a,t){return t.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Ze.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(a,t)&&(function(s,l){for(const u of ju(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(a,t)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(a,t)&&(function(s,l){return!(s.startAt&&!(function(p,_,v){const b=_0(p,_,v);return p.inclusive?b<=0:b<0})(s.startAt,ju(s),l)||s.endAt&&!(function(p,_,v){const b=_0(p,_,v);return p.inclusive?b>=0:b>0})(s.endAt,ju(s),l))})(a,t)}function YS(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function x_(a){return(t,r)=>{let s=!1;for(const l of ju(a)){const u=XS(l,t,r);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function XS(a,t,r){const s=a.field.isKeyField()?Ze.comparator(t.key,r.key):(function(u,p,_){const v=p.data.field(u),b=_.data.field(u);return v!==null&&b!==null?Tl(v,b):it(42886)})(a.field,t,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return it(19790,{direction:a.dir})}}class Mo{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,r){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,r]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,r]);l.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[r]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Oo(this.inner,((r,s)=>{for(const[l,u]of s)t(l,u)}))}isEmpty(){return a_(this.inner)}size(){return this.innerSize}}const $S=new bn(Ze.comparator);function ts(){return $S}const E_=new bn(Ze.comparator);function Nu(...a){let t=E_;for(const r of a)t=t.insert(r.key,r);return t}function w_(a){let t=E_;return a.forEach(((r,s)=>t=t.insert(r,s.overlayedDocument))),t}function Ao(){return Iu()}function T_(){return Iu()}function Iu(){return new Mo((a=>a.toString()),((a,t)=>a.isEqual(t)))}const ZS=new bn(Ze.comparator),JS=new Qn(Ze.comparator);function At(...a){let t=JS;for(const r of a)t=t.add(r);return t}const WS=new Qn(St);function eA(){return WS}function tp(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(t)?"-0":t}}function S_(a){return{integerValue:""+a}}function tA(a,t){return RS(t)?S_(t):tp(a,t)}class Zh{constructor(){this._=void 0}}function nA(a,t,r){return a instanceof Dh?(function(l,u){const p={fields:{[o_]:{stringValue:s_},[u_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&$m(u)&&(u=Yh(u)),u&&(p.fields[l_]=u),{mapValue:p}})(r,t):a instanceof Bu?N_(a,t):a instanceof qu?R_(a,t):(function(l,u){const p=A_(l,u),_=T0(p)+T0(l.Ae);return Em(p)&&Em(l.Ae)?S_(_):tp(l.serializer,_)})(a,t)}function rA(a,t,r){return a instanceof Bu?N_(a,t):a instanceof qu?R_(a,t):r}function A_(a,t){return a instanceof jh?(function(s){return Em(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class Dh extends Zh{}class Bu extends Zh{constructor(t){super(),this.elements=t}}function N_(a,t){const r=C_(t);for(const s of a.elements)r.some((l=>xi(l,s)))||r.push(s);return{arrayValue:{values:r}}}class qu extends Zh{constructor(t){super(),this.elements=t}}function R_(a,t){let r=C_(t);for(const s of a.elements)r=r.filter((l=>!xi(l,s)));return{arrayValue:{values:r}}}class jh extends Zh{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function T0(a){return jn(a.integerValue||a.doubleValue)}function C_(a){return Zm(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function aA(a,t){return a.field.isEqual(t.field)&&(function(s,l){return s instanceof Bu&&l instanceof Bu||s instanceof qu&&l instanceof qu?El(s.elements,l.elements,xi):s instanceof jh&&l instanceof jh?xi(s.Ae,l.Ae):s instanceof Dh&&l instanceof Dh})(a.transform,t.transform)}class iA{constructor(t,r){this.version=t,this.transformResults=r}}class bi{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new bi}static exists(t){return new bi(void 0,t)}static updateTime(t){return new bi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fh(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class Jh{}function D_(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new np(a.key,bi.none()):new Yu(a.key,a.data,bi.none());{const r=a.data,s=La.empty();let l=new Qn(nr.comparator);for(let u of t.fields)if(!l.has(u)){let p=r.field(u);p===null&&u.length>1&&(u=u.popLast(),p=r.field(u)),p===null?s.delete(u):s.set(u,p),l=l.add(u)}return new Vo(a.key,s,new Ja(l.toArray()),bi.none())}}function sA(a,t,r){a instanceof Yu?(function(l,u,p){const _=l.value.clone(),v=A0(l.fieldTransforms,u,p.transformResults);_.setAll(v),u.convertToFoundDocument(p.version,_).setHasCommittedMutations()})(a,t,r):a instanceof Vo?(function(l,u,p){if(!fh(l.precondition,u))return void u.convertToUnknownDocument(p.version);const _=A0(l.fieldTransforms,u,p.transformResults),v=u.data;v.setAll(j_(l)),v.setAll(_),u.convertToFoundDocument(p.version,v).setHasCommittedMutations()})(a,t,r):(function(l,u,p){u.convertToNoDocument(p.version).setHasCommittedMutations()})(0,t,r)}function Ou(a,t,r,s){return a instanceof Yu?(function(u,p,_,v){if(!fh(u.precondition,p))return _;const b=u.value.clone(),A=N0(u.fieldTransforms,v,p);return b.setAll(A),p.convertToFoundDocument(p.version,b).setHasLocalMutations(),null})(a,t,r,s):a instanceof Vo?(function(u,p,_,v){if(!fh(u.precondition,p))return _;const b=N0(u.fieldTransforms,v,p),A=p.data;return A.setAll(j_(u)),A.setAll(b),p.convertToFoundDocument(p.version,A).setHasLocalMutations(),_===null?null:_.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((N=>N.field)))})(a,t,r,s):(function(u,p,_){return fh(u.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):_})(a,t,r)}function oA(a,t){let r=null;for(const s of a.fieldTransforms){const l=t.data.field(s.field),u=A_(s.transform,l||null);u!=null&&(r===null&&(r=La.empty()),r.set(s.field,u))}return r||null}function S0(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&El(s,l,((u,p)=>aA(u,p)))})(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class Yu extends Jh{constructor(t,r,s,l=[]){super(),this.key=t,this.value=r,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Vo extends Jh{constructor(t,r,s,l,u=[]){super(),this.key=t,this.data=r,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function j_(a){const t=new Map;return a.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const s=a.data.field(r);t.set(r,s)}})),t}function A0(a,t,r){const s=new Map;Bt(a.length===r.length,32656,{Re:r.length,Ve:a.length});for(let l=0;l<r.length;l++){const u=a[l],p=u.transform,_=t.data.field(u.field);s.set(u.field,rA(p,_,r[l]))}return s}function N0(a,t,r){const s=new Map;for(const l of a){const u=l.transform,p=r.data.field(l.field);s.set(l.field,nA(u,p,t))}return s}class np extends Jh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lA extends Jh{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uA{constructor(t,r,s,l){this.batchId=t,this.localWriteTime=r,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,r){const s=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&sA(u,t,s[l])}}applyToLocalView(t,r){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(r=Ou(s,t,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(r=Ou(s,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const s=T_();return this.mutations.forEach((l=>{const u=t.get(l.key),p=u.overlayedDocument;let _=this.applyToLocalView(p,u.mutatedFields);_=r.has(l.key)?null:_;const v=D_(p,_);v!==null&&s.set(l.key,v),p.isValidDocument()||p.convertToNoDocument(ut.min())})),s}keys(){return this.mutations.reduce(((t,r)=>t.add(r.key)),At())}isEqual(t){return this.batchId===t.batchId&&El(this.mutations,t.mutations,((r,s)=>S0(r,s)))&&El(this.baseMutations,t.baseMutations,((r,s)=>S0(r,s)))}}class rp{constructor(t,r,s,l){this.batch=t,this.commitVersion=r,this.mutationResults=s,this.docVersions=l}static from(t,r,s){Bt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return ZS})();const u=t.mutations;for(let p=0;p<u.length;p++)l=l.insert(u[p].key,s[p].version);return new rp(t,r,s,l)}}class cA{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hA{constructor(t,r){this.count=t,this.unchangedNames=r}}var qn,It;function fA(a){switch(a){case Te.OK:return it(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return it(15467,{code:a})}}function I_(a){if(a===void 0)return es("GRPC error has no .code"),Te.UNKNOWN;switch(a){case qn.OK:return Te.OK;case qn.CANCELLED:return Te.CANCELLED;case qn.UNKNOWN:return Te.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Te.INTERNAL;case qn.UNAVAILABLE:return Te.UNAVAILABLE;case qn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case qn.NOT_FOUND:return Te.NOT_FOUND;case qn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case qn.ABORTED:return Te.ABORTED;case qn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case qn.DATA_LOSS:return Te.DATA_LOSS;default:return it(39323,{code:a})}}(It=qn||(qn={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function dA(){return new TextEncoder}const mA=new Ks([4294967295,4294967295],0);function R0(a){const t=dA().encode(a),r=new Kb;return r.update(t),new Uint8Array(r.digest())}function C0(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Ks([r,s],0),new Ks([l,u],0)]}class ap{constructor(t,r,s){if(this.bitmap=t,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Ru(`Invalid padding: ${r}`);if(s<0)throw new Ru(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${s}`);if(t.length===0&&r!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=Ks.fromNumber(this.ge)}ye(t,r,s){let l=t.add(r.multiply(Ks.fromNumber(s)));return l.compare(mA)===1&&(l=new Ks([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=R0(t),[s,l]=C0(r);for(let u=0;u<this.hashCount;u++){const p=this.ye(s,l,u);if(!this.we(p))return!1}return!0}static create(t,r,s){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),p=new ap(u,l,r);return s.forEach((_=>p.insert(_))),p}insert(t){if(this.ge===0)return;const r=R0(t),[s,l]=C0(r);for(let u=0;u<this.hashCount;u++){const p=this.ye(s,l,u);this.Se(p)}}Se(t){const r=Math.floor(t/8),s=t%8;this.bitmap[r]|=1<<s}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wh{constructor(t,r,s,l,u){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,r,s){const l=new Map;return l.set(t,Xu.createSynthesizedTargetChangeForCurrentChange(t,r,s)),new Wh(ut.min(),l,new bn(St),ts(),At())}}class Xu{constructor(t,r,s,l,u){this.resumeToken=t,this.current=r,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,r,s){return new Xu(s,r,At(),At(),At())}}class dh{constructor(t,r,s,l){this.be=t,this.removedTargetIds=r,this.key=s,this.De=l}}class O_{constructor(t,r){this.targetId=t,this.Ce=r}}class M_{constructor(t,r,s=rr.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=r,this.resumeToken=s,this.cause=l}}class D0{constructor(){this.ve=0,this.Fe=j0(),this.Me=rr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=At(),r=At(),s=At();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:r=r.add(l);break;case 1:s=s.add(l);break;default:it(38017,{changeType:u})}})),new Xu(this.Me,this.xe,t,r,s)}qe(){this.Oe=!1,this.Fe=j0()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pA{constructor(t){this.Ge=t,this.ze=new Map,this.je=ts(),this.Je=ah(),this.He=ah(),this.Ye=new bn(St)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,(r=>{const s=this.nt(r);switch(t.state){case 0:this.rt(r)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),s.Le(t.resumeToken));break;default:it(56790,{state:t.state})}}))}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach(((s,l)=>{this.rt(l)&&r(l)}))}st(t){const r=t.targetId,s=t.Ce.count,l=this.ot(r);if(l){const u=l.target;if(Tm(u))if(s===0){const p=new Ze(u.path);this.et(r,p,_r.newNoDocument(p,ut.min()))}else Bt(s===1,20013,{expectedCount:s});else{const p=this._t(r);if(p!==s){const _=this.ut(t),v=_?this.ct(_,t,p):1;if(v!==0){this.it(r);const b=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,b)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=r;let p,_;try{p=Zs(s).toUint8Array()}catch(v){if(v instanceof i_)return jo("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{_=new ap(p,l,u)}catch(v){return jo(v instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return _.ge===0?null:_}ct(t,r,s){return r.Ce.count===s-this.Pt(t,r.targetId)?0:2}Pt(t,r){const s=this.Ge.getRemoteKeysForTarget(r);let l=0;return s.forEach((u=>{const p=this.Ge.ht(),_=`projects/${p.projectId}/databases/${p.database}/documents/${u.path.canonicalString()}`;t.mightContain(_)||(this.et(r,u,null),l++)})),l}Tt(t){const r=new Map;this.ze.forEach(((u,p)=>{const _=this.ot(p);if(_){if(u.current&&Tm(_.target)){const v=new Ze(_.target.path);this.It(v).has(p)||this.Et(p,v)||this.et(p,v,_r.newNoDocument(v,t))}u.Be&&(r.set(p,u.ke()),u.qe())}}));let s=At();this.He.forEach(((u,p)=>{let _=!0;p.forEachWhile((v=>{const b=this.ot(v);return!b||b.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)})),_&&(s=s.add(u))})),this.je.forEach(((u,p)=>p.setReadTime(t)));const l=new Wh(t,r,this.Ye,this.je,s);return this.je=ts(),this.Je=ah(),this.He=ah(),this.Ye=new bn(St),l}Xe(t,r){if(!this.rt(t))return;const s=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,s),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,r)?l.Qe(r,1):l.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),s&&(this.je=this.je.insert(r,s))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new D0,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Qn(St),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Qn(St),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||He("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new D0),this.Ge.getRemoteKeysForTarget(t).forEach((r=>{this.et(t,r,null)}))}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function ah(){return new bn(Ze.comparator)}function j0(){return new bn(Ze.comparator)}const gA={asc:"ASCENDING",desc:"DESCENDING"},yA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vA={and:"AND",or:"OR"};class bA{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Nm(a,t){return a.useProto3Json||Qh(t)?t:{value:t}}function Ih(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function V_(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function _A(a,t){return Ih(a,t.toTimestamp())}function _i(a){return Bt(!!a,49232),ut.fromTimestamp((function(r){const s=$s(r);return new tn(s.seconds,s.nanos)})(a))}function ip(a,t){return Rm(a,t).canonicalString()}function Rm(a,t){const r=(function(l){return new en(["projects",l.projectId,"databases",l.database])})(a).child("documents");return t===void 0?r:r.child(t)}function k_(a){const t=en.fromString(a);return Bt(B_(t),10190,{key:t.toString()}),t}function Cm(a,t){return ip(a.databaseId,t.path)}function lm(a,t){const r=k_(t);if(r.get(1)!==a.databaseId.projectId)throw new Ke(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Ke(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new Ze(L_(r))}function P_(a,t){return ip(a.databaseId,t)}function xA(a){const t=k_(a);return t.length===4?en.emptyPath():L_(t)}function Dm(a){return new en(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function L_(a){return Bt(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function I0(a,t,r){return{name:Cm(a,t),fields:r.value.mapValue.fields}}function EA(a,t){let r;if("targetChange"in t){t.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:it(39313,{state:b})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(b,A){return b.useProto3Json?(Bt(A===void 0||typeof A=="string",58123),rr.fromBase64String(A||"")):(Bt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),rr.fromUint8Array(A||new Uint8Array))})(a,t.targetChange.resumeToken),p=t.targetChange.cause,_=p&&(function(b){const A=b.code===void 0?Te.UNKNOWN:I_(b.code);return new Ke(A,b.message||"")})(p);r=new M_(s,l,u,_||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=lm(a,s.document.name),u=_i(s.document.updateTime),p=s.document.createTime?_i(s.document.createTime):ut.min(),_=new La({mapValue:{fields:s.document.fields}}),v=_r.newFoundDocument(l,u,p,_),b=s.targetIds||[],A=s.removedTargetIds||[];r=new dh(b,A,v.key,v)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=lm(a,s.document),u=s.readTime?_i(s.readTime):ut.min(),p=_r.newNoDocument(l,u),_=s.removedTargetIds||[];r=new dh([],_,p.key,p)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=lm(a,s.document),u=s.removedTargetIds||[];r=new dh([],u,l,null)}else{if(!("filter"in t))return it(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,p=new hA(l,u),_=s.targetId;r=new O_(_,p)}}return r}function wA(a,t){let r;if(t instanceof Yu)r={update:I0(a,t.key,t.value)};else if(t instanceof np)r={delete:Cm(a,t.key)};else if(t instanceof Vo)r={update:I0(a,t.key,t.data),updateMask:IA(t.fieldMask)};else{if(!(t instanceof lA))return it(16599,{Vt:t.type});r={verify:Cm(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map((s=>(function(u,p){const _=p.transform;if(_ instanceof Dh)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Bu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof qu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof jh)return{fieldPath:p.field.canonicalString(),increment:_.Ae};throw it(20930,{transform:p.transform})})(0,s)))),t.precondition.isNone||(r.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:_A(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:it(27497)})(a,t.precondition)),r}function TA(a,t){return a&&a.length>0?(Bt(t!==void 0,14353),a.map((r=>(function(l,u){let p=l.updateTime?_i(l.updateTime):_i(u);return p.isEqual(ut.min())&&(p=_i(u)),new iA(p,l.transformResults||[])})(r,t)))):[]}function SA(a,t){return{documents:[P_(a,t.path)]}}function AA(a,t){const r={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=P_(a,l);const u=(function(b){if(b.length!==0)return U_(ti.create(b,"and"))})(t.filters);u&&(r.structuredQuery.where=u);const p=(function(b){if(b.length!==0)return b.map((A=>(function(I){return{field:yl(I.field),direction:CA(I.dir)}})(A)))})(t.orderBy);p&&(r.structuredQuery.orderBy=p);const _=Nm(a,t.limit);return _!==null&&(r.structuredQuery.limit=_),t.startAt&&(r.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(t.startAt)),t.endAt&&(r.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(t.endAt)),{ft:r,parent:l}}function NA(a){let t=xA(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let l=null;if(s>0){Bt(s===1,65062);const A=r.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let u=[];r.where&&(u=(function(N){const I=z_(N);return I instanceof ti&&p_(I)?I.getFilters():[I]})(r.where));let p=[];r.orderBy&&(p=(function(N){return N.map((I=>(function(ue){return new Ch(vl(ue.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ue.direction))})(I)))})(r.orderBy));let _=null;r.limit&&(_=(function(N){let I;return I=typeof N=="object"?N.value:N,Qh(I)?null:I})(r.limit));let v=null;r.startAt&&(v=(function(N){const I=!!N.before,X=N.values||[];return new Rh(X,I)})(r.startAt));let b=null;return r.endAt&&(b=(function(N){const I=!N.before,X=N.values||[];return new Rh(X,I)})(r.endAt)),GS(t,l,p,u,_,"F",v,b)}function RA(a,t){const r=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it(28987,{purpose:l})}})(t.purpose);return r==null?null:{"goog-listen-tags":r}}function z_(a){return a.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=vl(r.unaryFilter.field);return Fn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=vl(r.unaryFilter.field);return Fn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vl(r.unaryFilter.field);return Fn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=vl(r.unaryFilter.field);return Fn.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return it(61313);default:return it(60726)}})(a):a.fieldFilter!==void 0?(function(r){return Fn.create(vl(r.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return it(58110);default:return it(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(r){return ti.create(r.compositeFilter.filters.map((s=>z_(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return it(1026)}})(r.compositeFilter.op))})(a):it(30097,{filter:a})}function CA(a){return gA[a]}function DA(a){return yA[a]}function jA(a){return vA[a]}function yl(a){return{fieldPath:a.canonicalString()}}function vl(a){return nr.fromServerFormat(a.fieldPath)}function U_(a){return a instanceof Fn?(function(r){if(r.op==="=="){if(b0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NAN"}};if(v0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(b0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NOT_NAN"}};if(v0(r.value))return{unaryFilter:{field:yl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(r.field),op:DA(r.op),value:r.value}}})(a):a instanceof ti?(function(r){const s=r.getFilters().map((l=>U_(l)));return s.length===1?s[0]:{compositeFilter:{op:jA(r.op),filters:s}}})(a):it(54877,{filter:a})}function IA(a){const t=[];return a.fields.forEach((r=>t.push(r.canonicalString()))),{fieldPaths:t}}function B_(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class qs{constructor(t,r,s,l,u=ut.min(),p=ut.min(),_=rr.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=r,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_,this.expectedCount=v}withSequenceNumber(t){return new qs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class OA{constructor(t){this.yt=t}}function MA(a){const t=NA({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Am(t,t.limit,"L"):t}class VA{constructor(){this.Cn=new kA}addToCollectionParentIndex(t,r){return this.Cn.add(r),Se.resolve()}getCollectionParents(t,r){return Se.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Se.resolve()}deleteFieldIndex(t,r){return Se.resolve()}deleteAllFieldIndexes(t){return Se.resolve()}createTargetIndexes(t,r){return Se.resolve()}getDocumentsMatchingTarget(t,r){return Se.resolve(null)}getIndexType(t,r){return Se.resolve(0)}getFieldIndexes(t,r){return Se.resolve([])}getNextCollectionGroupToUpdate(t){return Se.resolve(null)}getMinOffset(t,r){return Se.resolve(Xs.min())}getMinOffsetFromCollectionGroup(t,r){return Se.resolve(Xs.min())}updateCollectionGroup(t,r,s){return Se.resolve()}updateIndexEntries(t,r){return Se.resolve()}}class kA{constructor(){this.index={}}add(t){const r=t.lastSegment(),s=t.popLast(),l=this.index[r]||new Qn(en.comparator),u=!l.has(s);return this.index[r]=l.add(s),u}has(t){const r=t.lastSegment(),s=t.popLast(),l=this.index[r];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Qn(en.comparator)).toArray()}}const O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class Xr{static withCacheSize(t){return new Xr(t,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}}Xr.DEFAULT_COLLECTION_PERCENTILE=10,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xr.DEFAULT=new Xr(q_,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xr.DISABLED=new Xr(-1,0,0);class Al{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}const M0="LruGarbageCollector",PA=1048576;function V0([a,t],[r,s]){const l=St(a,r);return l===0?St(t,s):l}class LA{constructor(t){this.Ir=t,this.buffer=new Qn(V0),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();V0(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class zA{constructor(t,r,s){this.garbageCollector=t,this.asyncQueue=r,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){He(M0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ll(r)?He(M0,"Ignoring IndexedDB error during garbage collection: ",r):await Pl(r)}await this.Vr(3e5)}))}}class UA{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next((s=>Math.floor(r/100*s)))}nthSequenceNumber(t,r){if(r===0)return Se.resolve(Gh.ce);const s=new LA(r);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,r,s){return this.mr.removeTargets(t,r,s)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(O0)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.yr(t,r)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let s,l,u,p,_,v,b;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((N=>(N>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),l=this.params.maximumSequenceNumbersToCollect):l=N,p=Date.now(),this.nthSequenceNumber(t,l)))).next((N=>(s=N,_=Date.now(),this.removeTargets(t,s,r)))).next((N=>(u=N,v=Date.now(),this.removeOrphanedDocuments(t,s)))).next((N=>(b=Date.now(),pl()<=Ot.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-A}ms
	Determined least recently used ${l} in `+(_-p)+`ms
	Removed ${u} targets in `+(v-_)+`ms
	Removed ${N} documents in `+(b-v)+`ms
Total Duration: ${b-A}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:N}))))}}function BA(a,t){return new UA(a,t)}class qA{constructor(){this.changes=new Mo((t=>t.toString()),((t,r)=>t.isEqual(r))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,_r.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?Se.resolve(s):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class FA{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class HA{constructor(t,r,s,l){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,r){let s=null;return this.documentOverlayCache.getOverlay(t,r).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,r)))).next((l=>(s!==null&&Ou(s.mutation,l,Ja.empty(),tn.now()),l)))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next((s=>this.getLocalViewOfDocuments(t,s,At()).next((()=>s))))}getLocalViewOfDocuments(t,r,s=At()){const l=Ao();return this.populateOverlays(t,l,r).next((()=>this.computeViews(t,r,l,s).next((u=>{let p=Nu();return u.forEach(((_,v)=>{p=p.insert(_,v.overlayedDocument)})),p}))))}getOverlayedDocuments(t,r){const s=Ao();return this.populateOverlays(t,s,r).next((()=>this.computeViews(t,r,s,At())))}populateOverlays(t,r,s){const l=[];return s.forEach((u=>{r.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((p,_)=>{r.set(p,_)}))}))}computeViews(t,r,s,l){let u=ts();const p=Iu(),_=(function(){return Iu()})();return r.forEach(((v,b)=>{const A=s.get(b.key);l.has(b.key)&&(A===void 0||A.mutation instanceof Vo)?u=u.insert(b.key,b):A!==void 0?(p.set(b.key,A.mutation.getFieldMask()),Ou(A.mutation,b,A.mutation.getFieldMask(),tn.now())):p.set(b.key,Ja.empty())})),this.recalculateAndSaveOverlays(t,u).next((v=>(v.forEach(((b,A)=>p.set(b,A))),r.forEach(((b,A)=>_.set(b,new FA(A,p.get(b)??null)))),_)))}recalculateAndSaveOverlays(t,r){const s=Iu();let l=new bn(((p,_)=>p-_)),u=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next((p=>{for(const _ of p)_.keys().forEach((v=>{const b=r.get(v);if(b===null)return;let A=s.get(v)||Ja.empty();A=_.applyToLocalView(b,A),s.set(v,A);const N=(l.get(_.batchId)||At()).add(v);l=l.insert(_.batchId,N)}))})).next((()=>{const p=[],_=l.getReverseIterator();for(;_.hasNext();){const v=_.getNext(),b=v.key,A=v.value,N=T_();A.forEach((I=>{if(!u.has(I)){const X=D_(r.get(I),s.get(I));X!==null&&N.set(I,X),u=u.add(I)}})),p.push(this.documentOverlayCache.saveOverlays(t,b,N))}return Se.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,r,s,l){return(function(p){return Ze.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):b_(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,s,l):this.getDocumentsMatchingCollectionQuery(t,r,s,l)}getNextDocuments(t,r,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,s,l).next((u=>{const p=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,s.largestBatchId,l-u.size):Se.resolve(Ao());let _=Lu,v=u;return p.next((b=>Se.forEach(b,((A,N)=>(_<N.largestBatchId&&(_=N.largestBatchId),u.get(A)?Se.resolve():this.remoteDocumentCache.getEntry(t,A).next((I=>{v=v.insert(A,I)}))))).next((()=>this.populateOverlays(t,b,u))).next((()=>this.computeViews(t,v,b,At()))).next((A=>({batchId:_,changes:w_(A)})))))}))}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ze(r)).next((s=>{let l=Nu();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,r,s,l){const u=r.collectionGroup;let p=Nu();return this.indexManager.getCollectionParents(t,u).next((_=>Se.forEach(_,(v=>{const b=(function(N,I){return new Qu(I,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)})(r,v.child(u));return this.getDocumentsMatchingCollectionQuery(t,b,s,l).next((A=>{A.forEach(((N,I)=>{p=p.insert(N,I)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(t,r,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,s.largestBatchId).next((p=>(u=p,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,s,u,l)))).next((p=>{u.forEach(((v,b)=>{const A=b.getKey();p.get(A)===null&&(p=p.insert(A,_r.newInvalidDocument(A)))}));let _=Nu();return p.forEach(((v,b)=>{const A=u.get(v);A!==void 0&&Ou(A.mutation,b,Ja.empty(),tn.now()),$h(r,b)&&(_=_.insert(v,b))})),_}))}}class KA{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Se.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,(function(l){return{id:l.id,version:l.version,createTime:_i(l.createTime)}})(r)),Se.resolve()}getNamedQuery(t,r){return Se.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,(function(l){return{name:l.name,query:MA(l.bundledQuery),readTime:_i(l.readTime)}})(r)),Se.resolve()}}class GA{constructor(){this.overlays=new bn(Ze.comparator),this.qr=new Map}getOverlay(t,r){return Se.resolve(this.overlays.get(r))}getOverlays(t,r){const s=Ao();return Se.forEach(r,(l=>this.getOverlay(t,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(t,r,s){return s.forEach(((l,u)=>{this.St(t,r,u)})),Se.resolve()}removeOverlaysForBatchId(t,r,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),Se.resolve()}getOverlaysForCollection(t,r,s){const l=Ao(),u=r.length+1,p=new Ze(r.child("")),_=this.overlays.getIteratorFrom(p);for(;_.hasNext();){const v=_.getNext().value,b=v.getKey();if(!r.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>s&&l.set(v.getKey(),v)}return Se.resolve(l)}getOverlaysForCollectionGroup(t,r,s,l){let u=new bn(((b,A)=>b-A));const p=this.overlays.getIterator();for(;p.hasNext();){const b=p.getNext().value;if(b.getKey().getCollectionGroup()===r&&b.largestBatchId>s){let A=u.get(b.largestBatchId);A===null&&(A=Ao(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const _=Ao(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((b,A)=>_.set(b,A))),!(_.size()>=l)););return Se.resolve(_)}St(t,r,s){const l=this.overlays.get(s.key);if(l!==null){const p=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new cA(r,s));let u=this.qr.get(r);u===void 0&&(u=At(),this.qr.set(r,u)),this.qr.set(r,u.add(s.key))}}class QA{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(t){return Se.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Se.resolve()}}class sp{constructor(){this.Qr=new Qn(tr.$r),this.Ur=new Qn(tr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const s=new tr(t,r);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,r){t.forEach((s=>this.addReference(s,r)))}removeReference(t,r){this.Gr(new tr(t,r))}zr(t,r){t.forEach((s=>this.removeReference(s,r)))}jr(t){const r=new Ze(new en([])),s=new tr(r,t),l=new tr(r,t+1),u=[];return this.Ur.forEachInRange([s,l],(p=>{this.Gr(p),u.push(p.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new Ze(new en([])),s=new tr(r,t),l=new tr(r,t+1);let u=At();return this.Ur.forEachInRange([s,l],(p=>{u=u.add(p.key)})),u}containsKey(t){const r=new tr(t,0),s=this.Qr.firstAfterOrEqual(r);return s!==null&&t.isEqual(s.key)}}class tr{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return Ze.comparator(t.key,r.key)||St(t.Yr,r.Yr)}static Kr(t,r){return St(t.Yr,r.Yr)||Ze.comparator(t.key,r.key)}}class YA{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Qn(tr.$r)}checkEmpty(t){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,s,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new uA(u,r,s,l);this.mutationQueue.push(p);for(const _ of l)this.Zr=this.Zr.add(new tr(_.key,u)),this.indexManager.addToCollectionParentIndex(t,_.key.path.popLast());return Se.resolve(p)}lookupMutationBatch(t,r){return Se.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const s=r+1,l=this.ei(s),u=l<0?0:l;return Se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?Xm:this.tr-1)}getAllMutationBatches(t){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const s=new tr(r,0),l=new tr(r,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,l],(p=>{const _=this.Xr(p.Yr);u.push(_)})),Se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,r){let s=new Qn(St);return r.forEach((l=>{const u=new tr(l,0),p=new tr(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,p],(_=>{s=s.add(_.Yr)}))})),Se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,r){const s=r.path,l=s.length+1;let u=s;Ze.isDocumentKey(u)||(u=u.child(""));const p=new tr(new Ze(u),0);let _=new Qn(St);return this.Zr.forEachWhile((v=>{const b=v.key.path;return!!s.isPrefixOf(b)&&(b.length===l&&(_=_.add(v.Yr)),!0)}),p),Se.resolve(this.ti(_))}ti(t){const r=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&r.push(l)})),r}removeMutationBatch(t,r){Bt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Se.forEach(r.mutations,(l=>{const u=new tr(l.key,r.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,r){const s=new tr(r,0),l=this.Zr.firstAfterOrEqual(s);return Se.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Se.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class XA{constructor(t){this.ri=t,this.docs=(function(){return new bn(Ze.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const s=r.key,l=this.docs.get(s),u=l?l.size:0,p=this.ri(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:p}),this.size+=p-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const s=this.docs.get(r);return Se.resolve(s?s.document.mutableCopy():_r.newInvalidDocument(r))}getEntries(t,r){let s=ts();return r.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():_r.newInvalidDocument(l))})),Se.resolve(s)}getDocumentsMatchingQuery(t,r,s,l){let u=ts();const p=r.path,_=new Ze(p.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(_);for(;v.hasNext();){const{key:b,value:{document:A}}=v.getNext();if(!p.isPrefixOf(b.path))break;b.path.length>p.length+1||TS(wS(A),s)<=0||(l.has(A.key)||$h(r,A))&&(u=u.insert(A.key,A.mutableCopy()))}return Se.resolve(u)}getAllFromCollectionGroup(t,r,s,l){it(9500)}ii(t,r){return Se.forEach(this.docs,(s=>r(s)))}newChangeBuffer(t){return new $A(this)}getSize(t){return Se.resolve(this.size)}}class $A extends qA{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?r.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),Se.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}class ZA{constructor(t){this.persistence=t,this.si=new Mo((r=>Jm(r)),Wm),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.oi=0,this._i=new sp,this.targetCount=0,this.ai=Al.ur()}forEachTarget(t,r){return this.si.forEach(((s,l)=>r(l))),Se.resolve()}getLastRemoteSnapshotVersion(t){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Se.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(t,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.oi&&(this.oi=r),Se.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Al(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Se.resolve()}updateTargetData(t,r){return this.Pr(r),Se.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Se.resolve()}removeTargets(t,r,s){let l=0;const u=[];return this.si.forEach(((p,_)=>{_.sequenceNumber<=r&&s.get(_.targetId)===null&&(this.si.delete(p),u.push(this.removeMatchingKeysForTargetId(t,_.targetId)),l++)})),Se.waitFor(u).next((()=>l))}getTargetCount(t){return Se.resolve(this.targetCount)}getTargetData(t,r){const s=this.si.get(r)||null;return Se.resolve(s)}addMatchingKeys(t,r,s){return this._i.Wr(r,s),Se.resolve()}removeMatchingKeys(t,r,s){this._i.zr(r,s);const l=this.persistence.referenceDelegate,u=[];return l&&r.forEach((p=>{u.push(l.markPotentiallyOrphaned(t,p))})),Se.waitFor(u)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Se.resolve()}getMatchingKeysForTargetId(t,r){const s=this._i.Hr(r);return Se.resolve(s)}containsKey(t,r){return Se.resolve(this._i.containsKey(r))}}class F_{constructor(t,r){this.ui={},this.overlays={},this.ci=new Gh(0),this.li=!1,this.li=!0,this.hi=new QA,this.referenceDelegate=t(this),this.Pi=new ZA(this),this.indexManager=new VA,this.remoteDocumentCache=(function(l){return new XA(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new OA(r),this.Ii=new KA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new GA,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let s=this.ui[t.toKey()];return s||(s=new YA(r,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,s){He("MemoryPersistence","Starting transaction:",t);const l=new JA(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,r){return Se.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,r))))}}class JA extends AS{constructor(t){super(),this.currentSequenceNumber=t}}class op{constructor(t){this.persistence=t,this.Ri=new sp,this.Vi=null}static mi(t){return new op(t)}get fi(){if(this.Vi)return this.Vi;throw it(60996)}addReference(t,r,s){return this.Ri.addReference(s,r),this.fi.delete(s.toString()),Se.resolve()}removeReference(t,r,s){return this.Ri.removeReference(s,r),this.fi.add(s.toString()),Se.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Se.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,r.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,r)))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.fi,(s=>{const l=Ze.fromPath(s);return this.gi(t,l).next((u=>{u||r.removeEntry(l,ut.min())}))})).next((()=>(this.Vi=null,r.apply(t))))}updateLimboDocument(t,r){return this.gi(t,r).next((s=>{s?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(t){return 0}gi(t,r){return Se.or([()=>Se.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class Oh{constructor(t,r){this.persistence=t,this.pi=new Mo((s=>CS(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=BA(this,r)}static mi(t,r){return new Oh(t,r)}Ei(){}di(t){return Se.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>r.next((l=>s+l))))}wr(t){let r=0;return this.pr(t,(s=>{r++})).next((()=>r))}pr(t,r){return Se.forEach(this.pi,((s,l)=>this.br(t,s,l).next((u=>u?Se.resolve():r(l)))))}removeTargets(t,r,s){return this.persistence.getTargetCache().removeTargets(t,r,s)}removeOrphanedDocuments(t,r){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(p=>this.br(t,p,r).next((_=>{_||(s++,u.removeEntry(p,ut.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Se.resolve()}removeTarget(t,r){const s=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,r,s){return this.pi.set(s,t.currentSequenceNumber),Se.resolve()}removeReference(t,r,s){return this.pi.set(s,t.currentSequenceNumber),Se.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Se.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=ch(t.data.value)),r}br(t,r,s){return Se.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const l=this.pi.get(r);return Se.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class lp{constructor(t,r,s,l){this.targetId=t,this.fromCache=r,this.Es=s,this.ds=l}static As(t,r){let s=At(),l=At();for(const u of r.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new lp(t,r.fromCache,s,l)}}class WA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class eN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Q2()?8:NS(K2())>0?6:4})()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,s,l){const u={result:null};return this.ys(t,r).next((p=>{u.result=p})).next((()=>{if(!u.result)return this.ws(t,r,l,s).next((p=>{u.result=p}))})).next((()=>{if(u.result)return;const p=new WA;return this.Ss(t,r,p).next((_=>{if(u.result=_,this.Vs)return this.bs(t,r,p,_.size)}))})).next((()=>u.result))}bs(t,r,s,l){return s.documentReadCount<this.fs?(pl()<=Ot.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",gl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Se.resolve()):(pl()<=Ot.DEBUG&&He("QueryEngine","Query:",gl(r),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(pl()<=Ot.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",gl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,vi(r))):Se.resolve())}ys(t,r){if(w0(r))return Se.resolve(null);let s=vi(r);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(r.limit!==null&&l===1&&(r=Am(r,null,"F"),s=vi(r)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const p=At(...u);return this.ps.getDocuments(t,p).next((_=>this.indexManager.getMinOffset(t,s).next((v=>{const b=this.Ds(r,_);return this.Cs(r,b,p,v.readTime)?this.ys(t,Am(r,null,"F")):this.vs(t,b,r,v)}))))})))))}ws(t,r,s,l){return w0(r)||l.isEqual(ut.min())?Se.resolve(null):this.ps.getDocuments(t,s).next((u=>{const p=this.Ds(r,u);return this.Cs(r,p,s,l)?Se.resolve(null):(pl()<=Ot.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),gl(r)),this.vs(t,p,r,ES(l,Lu)).next((_=>_)))}))}Ds(t,r){let s=new Qn(x_(t));return r.forEach(((l,u)=>{$h(t,u)&&(s=s.add(u))})),s}Cs(t,r,s,l){if(t.limit===null)return!1;if(s.size!==r.size)return!0;const u=t.limitType==="F"?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,r,s){return pl()<=Ot.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",gl(r)),this.ps.getDocumentsMatchingQuery(t,r,Xs.min(),s)}vs(t,r,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((u=>(r.forEach((p=>{u=u.insert(p.key,p)})),u)))}}const up="LocalStore",tN=3e8;class nN{constructor(t,r,s,l){this.persistence=t,this.Fs=r,this.serializer=l,this.Ms=new bn(St),this.xs=new Mo((u=>Jm(u)),Wm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new HA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>t.collect(r,this.Ms)))}}function rN(a,t,r,s){return new nN(a,t,r,s)}async function H_(a,t){const r=ht(a);return await r.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return r.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,r.Bs(t),r.mutationQueue.getAllMutationBatches(s)))).next((u=>{const p=[],_=[];let v=At();for(const b of l){p.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}for(const b of u){_.push(b.batchId);for(const A of b.mutations)v=v.add(A.key)}return r.localDocuments.getDocuments(s,v).next((b=>({Ls:b,removedBatchIds:p,addedBatchIds:_})))}))}))}function aN(a,t){const r=ht(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),u=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(_,v,b,A){const N=b.batch,I=N.keys();let X=Se.resolve();return I.forEach((ue=>{X=X.next((()=>A.getEntry(v,ue))).next((oe=>{const B=b.docVersions.get(ue);Bt(B!==null,48541),oe.version.compareTo(B)<0&&(N.applyToRemoteDocument(oe,b),oe.isValidDocument()&&(oe.setReadTime(b.commitVersion),A.addEntry(oe)))}))})),X.next((()=>_.mutationQueue.removeMutationBatch(v,N)))})(r,s,t,u).next((()=>u.apply(s))).next((()=>r.mutationQueue.performConsistencyCheck(s))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(_){let v=At();for(let b=0;b<_.mutationResults.length;++b)_.mutationResults[b].transformResults.length>0&&(v=v.add(_.batch.mutations[b].key));return v})(t)))).next((()=>r.localDocuments.getDocuments(s,l)))}))}function K_(a){const t=ht(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>t.Pi.getLastRemoteSnapshotVersion(r)))}function iN(a,t){const r=ht(a),s=t.snapshotVersion;let l=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const p=r.Ns.newChangeBuffer({trackRemovals:!0});l=r.Ms;const _=[];t.targetChanges.forEach(((A,N)=>{const I=l.get(N);if(!I)return;_.push(r.Pi.removeMatchingKeys(u,A.removedDocuments,N).next((()=>r.Pi.addMatchingKeys(u,A.addedDocuments,N))));let X=I.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(N)!==null?X=X.withResumeToken(rr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):A.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(A.resumeToken,s)),l=l.insert(N,X),(function(oe,B,L){return oe.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=tN?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(I,X,A)&&_.push(r.Pi.updateTargetData(u,X))}));let v=ts(),b=At();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&_.push(r.persistence.referenceDelegate.updateLimboDocument(u,A))})),_.push(sN(u,p,t.documentUpdates).next((A=>{v=A.ks,b=A.qs}))),!s.isEqual(ut.min())){const A=r.Pi.getLastRemoteSnapshotVersion(u).next((N=>r.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));_.push(A)}return Se.waitFor(_).next((()=>p.apply(u))).next((()=>r.localDocuments.getLocalViewOfDocuments(u,v,b))).next((()=>v))})).then((u=>(r.Ms=l,u)))}function sN(a,t,r){let s=At(),l=At();return r.forEach((u=>s=s.add(u))),t.getEntries(a,s).next((u=>{let p=ts();return r.forEach(((_,v)=>{const b=u.get(_);v.isFoundDocument()!==b.isFoundDocument()&&(l=l.add(_)),v.isNoDocument()&&v.version.isEqual(ut.min())?(t.removeEntry(_,v.readTime),p=p.insert(_,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||v.version.compareTo(b.version)===0&&b.hasPendingWrites?(t.addEntry(v),p=p.insert(_,v)):He(up,"Ignoring outdated watch update for ",_,". Current version:",b.version," Watch version:",v.version)})),{ks:p,qs:l}}))}function oN(a,t){const r=ht(a);return r.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Xm),r.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function lN(a,t){const r=ht(a);return r.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return r.Pi.getTargetData(s,t).next((u=>u?(l=u,Se.resolve(l)):r.Pi.allocateTargetId(s).next((p=>(l=new qs(t,p,"TargetPurposeListen",s.currentSequenceNumber),r.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=r.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(s.targetId,s),r.xs.set(t,s.targetId)),s}))}async function jm(a,t,r){const s=ht(a),l=s.Ms.get(t),u=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",u,(p=>s.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!Ll(p))throw p;He(up,`Failed to update sequence numbers for target ${t}: ${p}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function k0(a,t,r){const s=ht(a);let l=ut.min(),u=At();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(v,b,A){const N=ht(v),I=N.xs.get(A);return I!==void 0?Se.resolve(N.Ms.get(I)):N.Pi.getTargetData(b,A)})(s,p,vi(t)).next((_=>{if(_)return l=_.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(p,_.targetId).next((v=>{u=v}))})).next((()=>s.Fs.getDocumentsMatchingQuery(p,t,r?l:ut.min(),r?u:At()))).next((_=>(uN(s,YS(t),_),{documents:_,Qs:u})))))}function uN(a,t,r){let s=a.Os.get(t)||ut.min();r.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),a.Os.set(t,s)}class P0{constructor(){this.activeTargetIds=eA()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class cN{constructor(){this.Mo=new P0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,s){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,s){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new P0,Promise.resolve()}handleUserChange(t,r,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class hN{Oo(t){}shutdown(){}}const L0="ConnectivityMonitor";class z0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(L0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){He(L0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ih=null;function Im(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}const um="RestConnection",fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Ah?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,r,s,l,u){const p=Im(),_=this.zo(t,r.toUriEncodedString());He(um,`Sending RPC '${t}' ${p}:`,_,s);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,l,u);const{host:b}=new URL(_),A=Gm(b);return this.Jo(t,_,v,s,A).then((N=>(He(um,`Received RPC '${t}' ${p}: `,N),N)),(N=>{throw jo(um,`RPC '${t}' ${p} failed with error: `,N,"url: ",_,"request:",s),N}))}Ho(t,r,s,l,u,p){return this.Go(t,r,s,l,u)}jo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((l,u)=>t[u]=l)),s&&s.headers.forEach(((l,u)=>t[u]=l))}zo(t,r){const s=fN[t];return`${this.Uo}/v1/${r}:${s}`}terminate(){}}class mN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const vr="WebChannelConnection";class pN extends dN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,s,l,u){const p=Im();return new Promise(((_,v)=>{const b=new Gb;b.setWithCredentials(!0),b.listenOnce(Qb.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case uh.NO_ERROR:const N=b.getResponseJson();He(vr,`XHR for RPC '${t}' ${p} received:`,JSON.stringify(N)),_(N);break;case uh.TIMEOUT:He(vr,`RPC '${t}' ${p} timed out`),v(new Ke(Te.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const I=b.getStatus();if(He(vr,`RPC '${t}' ${p} failed with status:`,I,"response text:",b.getResponseText()),I>0){let X=b.getResponseJson();Array.isArray(X)&&(X=X[0]);const ue=X?.error;if(ue&&ue.status&&ue.message){const oe=(function(L){const ee=L.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(ee)>=0?ee:Te.UNKNOWN})(ue.status);v(new Ke(oe,ue.message))}else v(new Ke(Te.UNKNOWN,"Server responded with status "+b.getStatus()))}else v(new Ke(Te.UNAVAILABLE,"Connection failed."));break;default:it(9055,{l_:t,streamId:p,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{He(vr,`RPC '${t}' ${p} completed.`)}}));const A=JSON.stringify(l);He(vr,`RPC '${t}' ${p} sending request:`,l),b.send(r,"POST",A,s,15)}))}T_(t,r,s){const l=Im(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],p=$b(),_=Xb(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(v.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,r,s),v.encodeInitMessageHeaders=!0;const A=u.join("");He(vr,`Creating RPC '${t}' stream ${l}: ${A}`,v);const N=p.createWebChannel(A,v);this.I_(N);let I=!1,X=!1;const ue=new mN({Yo:B=>{X?He(vr,`Not sending because RPC '${t}' stream ${l} is closed:`,B):(I||(He(vr,`Opening RPC '${t}' stream ${l} transport.`),N.open(),I=!0),He(vr,`RPC '${t}' stream ${l} sending:`,B),N.send(B))},Zo:()=>N.close()}),oe=(B,L,ee)=>{B.listen(L,(fe=>{try{ee(fe)}catch(xe){setTimeout((()=>{throw xe}),0)}}))};return oe(N,Au.EventType.OPEN,(()=>{X||(He(vr,`RPC '${t}' stream ${l} transport opened.`),ue.o_())})),oe(N,Au.EventType.CLOSE,(()=>{X||(X=!0,He(vr,`RPC '${t}' stream ${l} transport closed`),ue.a_(),this.E_(N))})),oe(N,Au.EventType.ERROR,(B=>{X||(X=!0,jo(vr,`RPC '${t}' stream ${l} transport errored. Name:`,B.name,"Message:",B.message),ue.a_(new Ke(Te.UNAVAILABLE,"The operation could not be completed")))})),oe(N,Au.EventType.MESSAGE,(B=>{if(!X){const L=B.data[0];Bt(!!L,16349);const ee=L,fe=ee?.error||ee[0]?.error;if(fe){He(vr,`RPC '${t}' stream ${l} received error:`,fe);const xe=fe.status;let Pe=(function(O){const V=qn[O];if(V!==void 0)return I_(V)})(xe),Ye=fe.message;Pe===void 0&&(Pe=Te.INTERNAL,Ye="Unknown error status: "+xe+" with message "+fe.message),X=!0,ue.a_(new Ke(Pe,Ye)),N.close()}else He(vr,`RPC '${t}' stream ${l} received:`,L),ue.u_(L)}})),oe(_,Yb.STAT_EVENT,(B=>{B.stat===bm.PROXY?He(vr,`RPC '${t}' stream ${l} detected buffering proxy`):B.stat===bm.NOPROXY&&He(vr,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{ue.__()}),0),ue}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((r=>r===t))}}function cm(){return typeof document<"u"?document:null}function ef(a){return new bA(a,!0)}class G_{constructor(t,r,s=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=r,this.d_=s,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,r-s);l>0&&He("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const U0="PersistentStream";class Q_{constructor(t,r,s,l,u,p,_,v){this.Mi=t,this.S_=s,this.b_=l,this.connection=u,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G_(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Te.RESOURCE_EXHAUSTED?(es(r.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===r&&this.G_(s,l)}),(s=>{t((()=>{const l=new Ke(Te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,r){const s=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return He(U0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget((()=>this.D_===t?r():(He(U0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gN extends Q_{constructor(t,r,s,l,u,p){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,l,p),this.serializer=u}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=EA(this.serializer,t),s=(function(u){if(!("targetChange"in u))return ut.min();const p=u.targetChange;return p.targetIds&&p.targetIds.length?ut.min():p.readTime?_i(p.readTime):ut.min()})(t);return this.listener.H_(r,s)}Y_(t){const r={};r.database=Dm(this.serializer),r.addTarget=(function(u,p){let _;const v=p.target;if(_=Tm(v)?{documents:SA(u,v)}:{query:AA(u,v).ft},_.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){_.resumeToken=V_(u,p.resumeToken);const b=Nm(u,p.expectedCount);b!==null&&(_.expectedCount=b)}else if(p.snapshotVersion.compareTo(ut.min())>0){_.readTime=Ih(u,p.snapshotVersion.toTimestamp());const b=Nm(u,p.expectedCount);b!==null&&(_.expectedCount=b)}return _})(this.serializer,t);const s=RA(this.serializer,t);s&&(r.labels=s),this.q_(r)}Z_(t){const r={};r.database=Dm(this.serializer),r.removeTarget=t,this.q_(r)}}class yN extends Q_{constructor(t,r,s,l,u,p){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,l,p),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return Bt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Bt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Bt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=TA(t.writeResults,t.commitTime),s=_i(t.commitTime);return this.listener.na(s,r)}ra(){const t={};t.database=Dm(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map((s=>wA(this.serializer,s)))};this.q_(r)}}class vN{}class bN extends vN{constructor(t,r,s,l){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ke(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Go(t,Rm(r,s),l,u,p))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ke(Te.UNKNOWN,u.toString())}))}Ho(t,r,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,_])=>this.connection.Ho(t,Rm(r,s),l,p,_,u))).catch((p=>{throw p.name==="FirebaseError"?(p.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Ke(Te.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class _N{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(r),this.aa=!1):He("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Io="RemoteStore";class xN{constructor(t,r,s,l,u){this.localStore=t,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((p=>{s.enqueueAndForget((async()=>{ko(this)&&(He(Io,"Restarting streams for network reachability change."),await(async function(v){const b=ht(v);b.Ea.add(4),await $u(b),b.Ra.set("Unknown"),b.Ea.delete(4),await tf(b)})(this))}))})),this.Ra=new _N(s,l)}}async function tf(a){if(ko(a))for(const t of a.da)await t(!0)}async function $u(a){for(const t of a.da)await t(!1)}function Y_(a,t){const r=ht(a);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),dp(r)?fp(r):zl(r).O_()&&hp(r,t))}function cp(a,t){const r=ht(a),s=zl(r);r.Ia.delete(t),s.O_()&&X_(r,t),r.Ia.size===0&&(s.O_()?s.L_():ko(r)&&r.Ra.set("Unknown"))}function hp(a,t){if(a.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ut.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}zl(a).Y_(t)}function X_(a,t){a.Va.Ue(t),zl(a).Z_(t)}function fp(a){a.Va=new pA({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),At:t=>a.Ia.get(t)||null,ht:()=>a.datastore.serializer.databaseId}),zl(a).start(),a.Ra.ua()}function dp(a){return ko(a)&&!zl(a).x_()&&a.Ia.size>0}function ko(a){return ht(a).Ea.size===0}function $_(a){a.Va=void 0}async function EN(a){a.Ra.set("Online")}async function wN(a){a.Ia.forEach(((t,r)=>{hp(a,t)}))}async function TN(a,t){$_(a),dp(a)?(a.Ra.ha(t),fp(a)):a.Ra.set("Unknown")}async function SN(a,t,r){if(a.Ra.set("Online"),t instanceof M_&&t.state===2&&t.cause)try{await(async function(l,u){const p=u.cause;for(const _ of u.targetIds)l.Ia.has(_)&&(await l.remoteSyncer.rejectListen(_,p),l.Ia.delete(_),l.Va.removeTarget(_))})(a,t)}catch(s){He(Io,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Mh(a,s)}else if(t instanceof dh?a.Va.Ze(t):t instanceof O_?a.Va.st(t):a.Va.tt(t),!r.isEqual(ut.min()))try{const s=await K_(a.localStore);r.compareTo(s)>=0&&await(function(u,p){const _=u.Va.Tt(p);return _.targetChanges.forEach(((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const A=u.Ia.get(b);A&&u.Ia.set(b,A.withResumeToken(v.resumeToken,p))}})),_.targetMismatches.forEach(((v,b)=>{const A=u.Ia.get(v);if(!A)return;u.Ia.set(v,A.withResumeToken(rr.EMPTY_BYTE_STRING,A.snapshotVersion)),X_(u,v);const N=new qs(A.target,v,b,A.sequenceNumber);hp(u,N)})),u.remoteSyncer.applyRemoteEvent(_)})(a,r)}catch(s){He(Io,"Failed to raise snapshot:",s),await Mh(a,s)}}async function Mh(a,t,r){if(!Ll(t))throw t;a.Ea.add(1),await $u(a),a.Ra.set("Offline"),r||(r=()=>K_(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{He(Io,"Retrying IndexedDB access"),await r(),a.Ea.delete(1),await tf(a)}))}function Z_(a,t){return t().catch((r=>Mh(a,r,t)))}async function nf(a){const t=ht(a),r=Ws(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Xm;for(;AN(t);)try{const l=await oN(t.localStore,s);if(l===null){t.Ta.length===0&&r.L_();break}s=l.batchId,NN(t,l)}catch(l){await Mh(t,l)}J_(t)&&W_(t)}function AN(a){return ko(a)&&a.Ta.length<10}function NN(a,t){a.Ta.push(t);const r=Ws(a);r.O_()&&r.X_&&r.ea(t.mutations)}function J_(a){return ko(a)&&!Ws(a).x_()&&a.Ta.length>0}function W_(a){Ws(a).start()}async function RN(a){Ws(a).ra()}async function CN(a){const t=Ws(a);for(const r of a.Ta)t.ea(r.mutations)}async function DN(a,t,r){const s=a.Ta.shift(),l=rp.from(s,t,r);await Z_(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await nf(a)}async function jN(a,t){t&&Ws(a).X_&&await(async function(s,l){if((function(p){return fA(p)&&p!==Te.ABORTED})(l.code)){const u=s.Ta.shift();Ws(s).B_(),await Z_(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await nf(s)}})(a,t),J_(a)&&W_(a)}async function B0(a,t){const r=ht(a);r.asyncQueue.verifyOperationInProgress(),He(Io,"RemoteStore received new credentials");const s=ko(r);r.Ea.add(3),await $u(r),s&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await tf(r)}async function IN(a,t){const r=ht(a);t?(r.Ea.delete(2),await tf(r)):t||(r.Ea.add(2),await $u(r),r.Ra.set("Unknown"))}function zl(a){return a.ma||(a.ma=(function(r,s,l){const u=ht(r);return u.sa(),new gN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:EN.bind(null,a),t_:wN.bind(null,a),r_:TN.bind(null,a),H_:SN.bind(null,a)}),a.da.push((async t=>{t?(a.ma.B_(),dp(a)?fp(a):a.Ra.set("Unknown")):(await a.ma.stop(),$_(a))}))),a.ma}function Ws(a){return a.fa||(a.fa=(function(r,s,l){const u=ht(r);return u.sa(),new yN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:RN.bind(null,a),r_:jN.bind(null,a),ta:CN.bind(null,a),na:DN.bind(null,a)}),a.da.push((async t=>{t?(a.fa.B_(),await nf(a)):(await a.fa.stop(),a.Ta.length>0&&(He(Io,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class mp{constructor(t,r,s,l,u){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new No,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,r,s,l,u){const p=Date.now()+s,_=new mp(t,r,p,l,u);return _.start(s),_}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ke(Te.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(a,t){if(es("AsyncQueue",`${t}: ${a}`),Ll(a))return new Ke(Te.UNAVAILABLE,`${t}: ${a}`);throw a}class xl{static emptySet(t){return new xl(t.comparator)}constructor(t){this.comparator=t?(r,s)=>t(r,s)||Ze.comparator(r.key,s.key):(r,s)=>Ze.comparator(r.key,s.key),this.keyedMap=Nu(),this.sortedSet=new bn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((r,s)=>(t(r),!1)))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof xl)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((r=>{t.push(r.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const s=new xl;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=r,s}}class q0{constructor(){this.ga=new bn(Ze.comparator)}track(t){const r=t.doc.key,s=this.ga.get(r);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(r,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(r,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(r):t.type===1&&s.type===2?this.ga=this.ga.insert(r,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):it(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal(((r,s)=>{t.push(s)})),t}}class Nl{constructor(t,r,s,l,u,p,_,v,b){this.query=t,this.docs=r,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(t,r,s,l,u){const p=[];return r.forEach((_=>{p.push({type:0,doc:_})})),new Nl(t,r,xl.emptySet(r),p,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,s=t.docChanges;if(r.length!==s.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==s[l].type||!r[l].doc.isEqual(s[l].doc))return!1;return!0}}class ON{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class MN{constructor(){this.queries=F0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,s){const l=ht(r),u=l.queries;l.queries=F0(),u.forEach(((p,_)=>{for(const v of _.Sa)v.onError(s)}))})(this,new Ke(Te.ABORTED,"Firestore shutting down"))}}function F0(){return new Mo((a=>__(a)),Xh)}async function VN(a,t){const r=ht(a);let s=3;const l=t.query;let u=r.queries.get(l);u?!u.ba()&&t.Da()&&(s=2):(u=new ON,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await r.onListen(l,!0);break;case 1:u.wa=await r.onListen(l,!1);break;case 2:await r.onFirstRemoteStoreListen(l)}}catch(p){const _=pp(p,`Initialization of query '${gl(t.query)}' failed`);return void t.onError(_)}r.queries.set(l,u),u.Sa.push(t),t.va(r.onlineState),u.wa&&t.Fa(u.wa)&&gp(r)}async function kN(a,t){const r=ht(a),s=t.query;let l=3;const u=r.queries.get(s);if(u){const p=u.Sa.indexOf(t);p>=0&&(u.Sa.splice(p,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function PN(a,t){const r=ht(a);let s=!1;for(const l of t){const u=l.query,p=r.queries.get(u);if(p){for(const _ of p.Sa)_.Fa(l)&&(s=!0);p.wa=l}}s&&gp(r)}function LN(a,t,r){const s=ht(a),l=s.queries.get(t);if(l)for(const u of l.Sa)u.onError(r);s.queries.delete(t)}function gp(a){a.Ca.forEach((t=>{t.next()}))}var Om,H0;(H0=Om||(Om={})).Ma="default",H0.Cache="cache";class zN{constructor(t,r,s){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Nl(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const s=r!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Nl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Om.Cache}}class ex{constructor(t){this.key=t}}class tx{constructor(t){this.key=t}}class UN{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=At(),this.mutatedKeys=At(),this.eu=x_(t),this.tu=new xl(this.eu)}get nu(){return this.Ya}ru(t,r){const s=r?r.iu:new q0,l=r?r.tu:this.tu;let u=r?r.mutatedKeys:this.mutatedKeys,p=l,_=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,b=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,N)=>{const I=l.get(A),X=$h(this.query,N)?N:null,ue=!!I&&this.mutatedKeys.has(I.key),oe=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let B=!1;I&&X?I.data.isEqual(X.data)?ue!==oe&&(s.track({type:3,doc:X}),B=!0):this.su(I,X)||(s.track({type:2,doc:X}),B=!0,(v&&this.eu(X,v)>0||b&&this.eu(X,b)<0)&&(_=!0)):!I&&X?(s.track({type:0,doc:X}),B=!0):I&&!X&&(s.track({type:1,doc:I}),B=!0,(v||b)&&(_=!0)),B&&(X?(p=p.add(X),u=oe?u.add(A):u.delete(A)):(p=p.delete(A),u=u.delete(A)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const A=this.query.limitType==="F"?p.last():p.first();p=p.delete(A.key),u=u.delete(A.key),s.track({type:1,doc:A})}return{tu:p,iu:s,Cs:_,mutatedKeys:u}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,s,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const p=t.iu.ya();p.sort(((A,N)=>(function(X,ue){const oe=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it(20277,{Rt:B})}};return oe(X)-oe(ue)})(A.type,N.type)||this.eu(A.doc,N.doc))),this.ou(s),l=l??!1;const _=r&&!l?this._u():[],v=this.Xa.size===0&&this.current&&!l?1:0,b=v!==this.Za;return this.Za=v,p.length!==0||b?{snapshot:new Nl(this.query,t.tu,u,p,t.mutatedKeys,v===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:_}:{au:_}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new q0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),t.modifiedDocuments.forEach((r=>{})),t.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=At(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const r=[];return t.forEach((s=>{this.Xa.has(s)||r.push(new tx(s))})),this.Xa.forEach((s=>{t.has(s)||r.push(new ex(s))})),r}cu(t){this.Ya=t.Qs,this.Xa=At();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yp="SyncEngine";class BN{constructor(t,r,s){this.query=t,this.targetId=r,this.view=s}}class qN{constructor(t){this.key=t,this.hu=!1}}class FN{constructor(t,r,s,l,u,p){this.localStore=t,this.remoteStore=r,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Mo((_=>__(_)),Xh),this.Iu=new Map,this.Eu=new Set,this.du=new bn(Ze.comparator),this.Au=new Map,this.Ru=new sp,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HN(a,t,r=!0){const s=ox(a);let l;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await nx(s,t,r,!0),l}async function KN(a,t){const r=ox(a);await nx(r,t,!0,!1)}async function nx(a,t,r,s){const l=await lN(a.localStore,vi(t)),u=l.targetId,p=a.sharedClientState.addLocalQueryTarget(u,r);let _;return s&&(_=await GN(a,t,u,p==="current",l.resumeToken)),a.isPrimaryClient&&r&&Y_(a.remoteStore,l),_}async function GN(a,t,r,s,l){a.pu=(N,I,X)=>(async function(oe,B,L,ee){let fe=B.view.ru(L);fe.Cs&&(fe=await k0(oe.localStore,B.query,!1).then((({documents:M})=>B.view.ru(M,fe))));const xe=ee&&ee.targetChanges.get(B.targetId),Pe=ee&&ee.targetMismatches.get(B.targetId)!=null,Ye=B.view.applyChanges(fe,oe.isPrimaryClient,xe,Pe);return G0(oe,B.targetId,Ye.au),Ye.snapshot})(a,N,I,X);const u=await k0(a.localStore,t,!0),p=new UN(t,u.Qs),_=p.ru(u.documents),v=Xu.createSynthesizedTargetChangeForCurrentChange(r,s&&a.onlineState!=="Offline",l),b=p.applyChanges(_,a.isPrimaryClient,v);G0(a,r,b.au);const A=new BN(t,r,p);return a.Tu.set(t,A),a.Iu.has(r)?a.Iu.get(r).push(t):a.Iu.set(r,[t]),b.snapshot}async function QN(a,t,r){const s=ht(a),l=s.Tu.get(t),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((p=>!Xh(p,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await jm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),r&&cp(s.remoteStore,l.targetId),Mm(s,l.targetId)})).catch(Pl)):(Mm(s,l.targetId),await jm(s.localStore,l.targetId,!0))}async function YN(a,t){const r=ht(a),s=r.Tu.get(t),l=r.Iu.get(s.targetId);r.isPrimaryClient&&l.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),cp(r.remoteStore,s.targetId))}async function XN(a,t,r){const s=nR(a);try{const l=await(function(p,_){const v=ht(p),b=tn.now(),A=_.reduce(((X,ue)=>X.add(ue.key)),At());let N,I;return v.persistence.runTransaction("Locally write mutations","readwrite",(X=>{let ue=ts(),oe=At();return v.Ns.getEntries(X,A).next((B=>{ue=B,ue.forEach(((L,ee)=>{ee.isValidDocument()||(oe=oe.add(L))}))})).next((()=>v.localDocuments.getOverlayedDocuments(X,ue))).next((B=>{N=B;const L=[];for(const ee of _){const fe=oA(ee,N.get(ee.key).overlayedDocument);fe!=null&&L.push(new Vo(ee.key,fe,f_(fe.value.mapValue),bi.exists(!0)))}return v.mutationQueue.addMutationBatch(X,b,L,_)})).next((B=>{I=B;const L=B.applyToLocalDocumentSet(N,oe);return v.documentOverlayCache.saveOverlays(X,B.batchId,L)}))})).then((()=>({batchId:I.batchId,changes:w_(N)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(p,_,v){let b=p.Vu[p.currentUser.toKey()];b||(b=new bn(St)),b=b.insert(_,v),p.Vu[p.currentUser.toKey()]=b})(s,l.batchId,r),await Zu(s,l.changes),await nf(s.remoteStore)}catch(l){const u=pp(l,"Failed to persist write");r.reject(u)}}async function rx(a,t){const r=ht(a);try{const s=await iN(r.localStore,t);t.targetChanges.forEach(((l,u)=>{const p=r.Au.get(u);p&&(Bt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?Bt(p.hu,14607):l.removedDocuments.size>0&&(Bt(p.hu,42227),p.hu=!1))})),await Zu(r,s,t)}catch(s){await Pl(s)}}function K0(a,t,r){const s=ht(a);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const l=[];s.Tu.forEach(((u,p)=>{const _=p.view.va(t);_.snapshot&&l.push(_.snapshot)})),(function(p,_){const v=ht(p);v.onlineState=_;let b=!1;v.queries.forEach(((A,N)=>{for(const I of N.Sa)I.va(_)&&(b=!0)})),b&&gp(v)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function $N(a,t,r){const s=ht(a);s.sharedClientState.updateQueryState(t,"rejected",r);const l=s.Au.get(t),u=l&&l.key;if(u){let p=new bn(Ze.comparator);p=p.insert(u,_r.newNoDocument(u,ut.min()));const _=At().add(u),v=new Wh(ut.min(),new Map,new bn(St),p,_);await rx(s,v),s.du=s.du.remove(u),s.Au.delete(t),vp(s)}else await jm(s.localStore,t,!1).then((()=>Mm(s,t,r))).catch(Pl)}async function ZN(a,t){const r=ht(a),s=t.batch.batchId;try{const l=await aN(r.localStore,t);ix(r,s,null),ax(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await Zu(r,l)}catch(l){await Pl(l)}}async function JN(a,t,r){const s=ht(a);try{const l=await(function(p,_){const v=ht(p);return v.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let A;return v.mutationQueue.lookupMutationBatch(b,_).next((N=>(Bt(N!==null,37113),A=N.keys(),v.mutationQueue.removeMutationBatch(b,N)))).next((()=>v.mutationQueue.performConsistencyCheck(b))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(b,A,_))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,A))).next((()=>v.localDocuments.getDocuments(b,A)))}))})(s.localStore,t);ix(s,t,r),ax(s,t),s.sharedClientState.updateMutationState(t,"rejected",r),await Zu(s,l)}catch(l){await Pl(l)}}function ax(a,t){(a.mu.get(t)||[]).forEach((r=>{r.resolve()})),a.mu.delete(t)}function ix(a,t,r){const s=ht(a);let l=s.Vu[s.currentUser.toKey()];if(l){const u=l.get(t);u&&(r?u.reject(r):u.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Mm(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const s of a.Iu.get(t))a.Tu.delete(s),r&&a.Pu.yu(s,r);a.Iu.delete(t),a.isPrimaryClient&&a.Ru.jr(t).forEach((s=>{a.Ru.containsKey(s)||sx(a,s)}))}function sx(a,t){a.Eu.delete(t.path.canonicalString());const r=a.du.get(t);r!==null&&(cp(a.remoteStore,r),a.du=a.du.remove(t),a.Au.delete(r),vp(a))}function G0(a,t,r){for(const s of r)s instanceof ex?(a.Ru.addReference(s.key,t),WN(a,s)):s instanceof tx?(He(yp,"Document no longer in limbo: "+s.key),a.Ru.removeReference(s.key,t),a.Ru.containsKey(s.key)||sx(a,s.key)):it(19791,{wu:s})}function WN(a,t){const r=t.key,s=r.path.canonicalString();a.du.get(r)||a.Eu.has(s)||(He(yp,"New document in limbo: "+r),a.Eu.add(s),vp(a))}function vp(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const t=a.Eu.values().next().value;a.Eu.delete(t);const r=new Ze(en.fromString(t)),s=a.fu.next();a.Au.set(s,new qN(r)),a.du=a.du.insert(r,s),Y_(a.remoteStore,new qs(vi(ep(r.path)),s,"TargetPurposeLimboResolution",Gh.ce))}}async function Zu(a,t,r){const s=ht(a),l=[],u=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((_,v)=>{p.push(s.pu(v,t,r).then((b=>{if((b||r)&&s.isPrimaryClient){const A=b?!b.fromCache:r?.targetChanges.get(v.targetId)?.current;s.sharedClientState.updateQueryState(v.targetId,A?"current":"not-current")}if(b){l.push(b);const A=lp.As(v.targetId,b);u.push(A)}})))})),await Promise.all(p),s.Pu.H_(l),await(async function(v,b){const A=ht(v);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(N=>Se.forEach(b,(I=>Se.forEach(I.Es,(X=>A.persistence.referenceDelegate.addReference(N,I.targetId,X))).next((()=>Se.forEach(I.ds,(X=>A.persistence.referenceDelegate.removeReference(N,I.targetId,X)))))))))}catch(N){if(!Ll(N))throw N;He(up,"Failed to update sequence numbers: "+N)}for(const N of b){const I=N.targetId;if(!N.fromCache){const X=A.Ms.get(I),ue=X.snapshotVersion,oe=X.withLastLimboFreeSnapshotVersion(ue);A.Ms=A.Ms.insert(I,oe)}}})(s.localStore,u))}async function eR(a,t){const r=ht(a);if(!r.currentUser.isEqual(t)){He(yp,"User change. New user:",t.toKey());const s=await H_(r.localStore,t);r.currentUser=t,(function(u,p){u.mu.forEach((_=>{_.forEach((v=>{v.reject(new Ke(Te.CANCELLED,p))}))})),u.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Zu(r,s.Ls)}}function tR(a,t){const r=ht(a),s=r.Au.get(t);if(s&&s.hu)return At().add(s.key);{let l=At();const u=r.Iu.get(t);if(!u)return l;for(const p of u){const _=r.Tu.get(p);l=l.unionWith(_.view.nu)}return l}}function ox(a){const t=ht(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=rx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$N.bind(null,t),t.Pu.H_=PN.bind(null,t.eventManager),t.Pu.yu=LN.bind(null,t.eventManager),t}function nR(a){const t=ht(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=JN.bind(null,t),t}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ef(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return rN(this.persistence,new eN,t.initialUser,this.serializer)}Cu(t){return new F_(op.mi,this.serializer)}Du(t){return new cN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class rR extends Vh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){Bt(this.persistence.referenceDelegate instanceof Oh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new zA(s,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Xr.withCacheSize(this.cacheSizeBytes):Xr.DEFAULT;return new F_((s=>Oh.mi(s,r)),this.serializer)}}class Vm{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>K0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=eR.bind(null,this.syncEngine),await IN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new MN})()}createDatastore(t){const r=ef(t.databaseInfo.databaseId),s=(function(u){return new pN(u)})(t.databaseInfo);return(function(u,p,_,v){return new bN(u,p,_,v)})(t.authCredentials,t.appCheckCredentials,s,r)}createRemoteStore(t){return(function(s,l,u,p,_){return new xN(s,l,u,p,_)})(this.localStore,this.datastore,t.asyncQueue,(r=>K0(this.syncEngine,r,0)),(function(){return z0.v()?new z0:new hN})())}createSyncEngine(t,r){return(function(l,u,p,_,v,b,A){const N=new FN(l,u,p,_,v,b);return A&&(N.gu=!0),N})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const s=ht(r);He(Io,"RemoteStore shutting down."),s.Ea.add(5),await $u(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vm.provider={build:()=>new Vm};class aR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):es("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout((()=>{this.muted||t(r)}),0)}}const eo="FirestoreClient";class iR{constructor(t,r,s,l,u){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=l,this.user=br.UNAUTHENTICATED,this.clientId=Hh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async p=>{He(eo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(He(eo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new No;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=pp(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function hm(a,t){a.asyncQueue.verifyOperationInProgress(),He(eo,"Initializing OfflineComponentProvider");const r=a.configuration;await t.initialize(r);let s=r.initialUser;a.setCredentialChangeListener((async l=>{s.isEqual(l)||(await H_(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=t}async function Q0(a,t){a.asyncQueue.verifyOperationInProgress();const r=await sR(a);He(eo,"Initializing OnlineComponentProvider"),await t.initialize(r,a.configuration),a.setCredentialChangeListener((s=>B0(t.remoteStore,s))),a.setAppCheckTokenChangeListener(((s,l)=>B0(t.remoteStore,l))),a._onlineComponents=t}async function sR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){He(eo,"Using user provided OfflineComponentProvider");try{await hm(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Te.FAILED_PRECONDITION||l.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(r))throw r;jo("Error using user provided cache. Falling back to memory cache: "+r),await hm(a,new Vh)}}else He(eo,"Using default OfflineComponentProvider"),await hm(a,new rR(void 0));return a._offlineComponents}async function lx(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(He(eo,"Using user provided OnlineComponentProvider"),await Q0(a,a._uninitializedComponentsProvider._online)):(He(eo,"Using default OnlineComponentProvider"),await Q0(a,new Vm))),a._onlineComponents}function oR(a){return lx(a).then((t=>t.syncEngine))}async function Y0(a){const t=await lx(a),r=t.eventManager;return r.onListen=HN.bind(null,t.syncEngine),r.onUnlisten=QN.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=KN.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=YN.bind(null,t.syncEngine),r}function ux(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}const X0=new Map;const cx="firestore.googleapis.com",$0=!0;class Z0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Ke(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cx,this.ssl=$0}else this.host=t.host,this.ssl=t.ssl??$0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<PA)throw new Ke(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}t_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ux(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ke(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ke(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ke(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rf{constructor(t,r,s,l){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ke(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ke(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Wb;switch(s.type){case"firstParty":return new gS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ke(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const s=X0.get(r);s&&(He("ComponentProvider","Removing Datastore"),X0.delete(r),s.terminate())})(this),Promise.resolve()}}function hx(a,t,r,s={}){a=Gs(a,rf);const l=Gm(t),u=a._getSettings(),p={...u,emulatorOptions:a._getEmulatorOptions()},_=`${t}:${r}`;l&&(U2(`https://${_}`),H2("Firestore",!0)),u.host!==cx&&u.host!==_&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...u,host:_,ssl:l,emulatorOptions:s};if(!Eh(v,p)&&(a._setSettings(v),s.mockUserToken)){let b,A;if(typeof s.mockUserToken=="string")b=s.mockUserToken,A=br.MOCK_USER;else{b=B2(s.mockUserToken,a._app?.options.projectId);const N=s.mockUserToken.sub||s.mockUserToken.user_id;if(!N)throw new Ke(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new br(N)}a._authCredentials=new dS(new Jb(b,A))}}class Po{constructor(t,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Po(this.firestore,t,this._query)}}class In{constructor(t,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new In(this.firestore,t,this._key)}toJSON(){return{type:In._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,s){if(Gu(r,In._jsonSchema))return new In(t,s||null,new Ze(en.fromString(r.referencePath)))}}In._jsonSchemaVersion="firestore/documentReference/1.0",In._jsonSchema={type:Hn("string",In._jsonSchemaVersion),referencePath:Hn("string")};class Zi extends Po{constructor(t,r,s){super(t,r,ep(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new In(this.firestore,null,new Ze(t))}withConverter(t){return new Zi(this.firestore,t,this._path)}}function fx(a,t,...r){if(a=Co(a),e_("collection","path",t),a instanceof rf){const s=en.fromString(t,...r);return u0(s),new Zi(a,null,s)}{if(!(a instanceof In||a instanceof Zi))throw new Ke(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(en.fromString(t,...r));return u0(s),new Zi(a.firestore,null,s)}}function bp(a,t,...r){if(a=Co(a),arguments.length===1&&(t=Hh.newId()),e_("doc","path",t),a instanceof rf){const s=en.fromString(t,...r);return l0(s),new In(a,null,new Ze(s))}{if(!(a instanceof In||a instanceof Zi))throw new Ke(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(en.fromString(t,...r));return l0(s),new In(a.firestore,a instanceof Zi?a.converter:null,new Ze(s))}}const J0="AsyncQueue";class W0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G_(this,"async_queue_retry"),this._c=()=>{const s=cm();s&&He(J0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const r=cm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=cm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new No;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Ll(t))throw t;He(J0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const r=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",eb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=r,r}enqueueAfterDelay(t,r,s){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const l=mp.createAndSchedule(this,t,r,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&it(47125,{Pc:eb(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((r,s)=>r.targetTimeMs-s.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function eb(a){let t=a.message||"";return a.stack&&(t=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),t}function tb(a){return(function(r,s){if(typeof r!="object"||r===null)return!1;const l=r;for(const u of s)if(u in l&&typeof l[u]=="function")return!0;return!1})(a,["next","error","complete"])}class Rl extends rf{constructor(t,r,s,l){super(t,r,s,l),this.type="firestore",this._queue=new W0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new W0(t),this._firestoreClient=void 0,await t}}}function dx(a,t){const r=typeof a=="object"?a:eS(),s=typeof a=="string"?a:Ah,l=XT(r,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=L2("firestore");u&&hx(l,...u)}return l}function _p(a){if(a._terminated)throw new Ke(Te.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||lR(a),a._firestoreClient}function lR(a){const t=a._freezeSettings(),r=(function(l,u,p,_){return new IS(l,u,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,ux(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,t);a._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),a._firestoreClient=new iR(a._authCredentials,a._appCheckCredentials,a._queue,r,a._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(a._componentsProvider))}class va{constructor(t){this._byteString=t}static fromBase64String(t){try{return new va(rr.fromBase64String(t))}catch(r){throw new Ke(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new va(rr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:va._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Gu(t,va._jsonSchema))return va.fromBase64String(t.bytes)}}va._jsonSchemaVersion="firestore/bytes/1.0",va._jsonSchema={type:Hn("string",va._jsonSchemaVersion),bytes:Hn("string")};class af{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ke(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xp{constructor(t){this._methodName=t}}class Wa{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ke(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ke(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return St(this._lat,t._lat)||St(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wa._jsonSchemaVersion}}static fromJSON(t){if(Gu(t,Wa._jsonSchema))return new Wa(t.latitude,t.longitude)}}Wa._jsonSchemaVersion="firestore/geoPoint/1.0",Wa._jsonSchema={type:Hn("string",Wa._jsonSchemaVersion),latitude:Hn("number"),longitude:Hn("number")};class ei{constructor(t){this._values=(t||[]).map((r=>r))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Gu(t,ei._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((r=>typeof r=="number")))return new ei(t.vectorValues);throw new Ke(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Hn("string",ei._jsonSchemaVersion),vectorValues:Hn("object")};const uR=/^__.*__$/;class cR{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return this.fieldMask!==null?new Vo(t,this.data,this.fieldMask,r,this.fieldTransforms):new Yu(t,this.data,r,this.fieldTransforms)}}function mx(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it(40011,{Ac:a})}}class Ep{constructor(t,r,s,l,u,p){this.settings=t,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ep({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const r=this.path?.child(t),s=this.Vc({path:r,fc:!1});return s.gc(t),s}yc(t){const r=this.path?.child(t),s=this.Vc({path:r,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return kh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((r=>t.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>t.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(mx(this.Ac)&&uR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class hR{constructor(t,r,s){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=s||ef(t)}Cc(t,r,s,l=!1){return new Ep({Ac:t,methodName:r,Dc:s,path:nr.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function px(a){const t=a._freezeSettings(),r=ef(a._databaseId);return new hR(a._databaseId,!!t.ignoreUndefinedProperties,r)}function fR(a,t,r,s,l,u={}){const p=a.Cc(u.merge||u.mergeFields?2:0,t,r,l);vx("Data must be an object, but it was:",p,s);const _=gx(s,p);let v,b;if(u.merge)v=new Ja(p.fieldMask),b=p.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const I=mR(t,N,r);if(!p.contains(I))throw new Ke(Te.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);gR(A,I)||A.push(I)}v=new Ja(A),b=p.fieldTransforms.filter((N=>v.covers(N.field)))}else v=null,b=p.fieldTransforms;return new cR(new La(_),v,b)}function dR(a,t,r,s=!1){return wp(r,a.Cc(s?4:3,t))}function wp(a,t){if(yx(a=Co(a)))return vx("Unsupported field value:",t,a),gx(a,t);if(a instanceof xp)return(function(s,l){if(!mx(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const u=[];let p=0;for(const _ of s){let v=wp(_,l.wc(p));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),p++}return{arrayValue:{values:u}}})(a,t)}return(function(s,l){if((s=Co(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return tA(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=tn.fromDate(s);return{timestampValue:Ih(l.serializer,u)}}if(s instanceof tn){const u=new tn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ih(l.serializer,u)}}if(s instanceof Wa)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof va)return{bytesValue:V_(l.serializer,s._byteString)};if(s instanceof In){const u=l.databaseId,p=s.firestore._databaseId;if(!p.isEqual(u))throw l.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ip(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof ei)return(function(p,_){return{mapValue:{fields:{[c_]:{stringValue:h_},[Nh]:{arrayValue:{values:p.toArray().map((b=>{if(typeof b!="number")throw _.Sc("VectorValues must only contain numeric values.");return tp(_.serializer,b)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Kh(s)}`)})(a,t)}function gx(a,t){const r={};return a_(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Oo(a,((s,l)=>{const u=wp(l,t.mc(s));u!=null&&(r[s]=u)})),{mapValue:{fields:r}}}function yx(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof tn||a instanceof Wa||a instanceof va||a instanceof In||a instanceof xp||a instanceof ei)}function vx(a,t,r){if(!yx(r)||!n_(r)){const s=Kh(r);throw s==="an object"?t.Sc(a+" a custom object"):t.Sc(a+" "+s)}}function mR(a,t,r){if((t=Co(t))instanceof af)return t._internalPath;if(typeof t=="string")return bx(a,t);throw kh("Field path arguments must be of type string or ",a,!1,void 0,r)}const pR=new RegExp("[~\\*/\\[\\]]");function bx(a,t,r){if(t.search(pR)>=0)throw kh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new af(...t.split("."))._internalPath}catch{throw kh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function kh(a,t,r,s,l){const u=s&&!s.isEmpty(),p=l!==void 0;let _=`Function ${t}() called with invalid data`;r&&(_+=" (via `toFirestore()`)"),_+=". ";let v="";return(u||p)&&(v+=" (found",u&&(v+=` in field ${s}`),p&&(v+=` in document ${l}`),v+=")"),new Ke(Te.INVALID_ARGUMENT,_+a+v)}function gR(a,t){return a.some((r=>r.isEqual(t)))}class _x{constructor(t,r,s,l,u){this._firestore=t,this._userDataWriter=r,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(xx("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class yR extends _x{data(){return super.data()}}function xx(a,t){return typeof t=="string"?bx(a,t):t instanceof af?t._internalPath:t._delegate._internalPath}function vR(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ke(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tp{}class Ex extends Tp{}function wx(a,t,...r){let s=[];t instanceof Tp&&s.push(t),s=s.concat(r),(function(u){const p=u.filter((v=>v instanceof of)).length,_=u.filter((v=>v instanceof sf)).length;if(p>1||p>0&&_>0)throw new Ke(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)a=l._apply(a);return a}class sf extends Ex{constructor(t,r,s){super(),this._field=t,this._op=r,this._value=s,this.type="where"}static _create(t,r,s){return new sf(t,r,s)}_apply(t){const r=this._parse(t);return Tx(t._query,r),new Po(t.firestore,t.converter,Sm(t._query,r))}_parse(t){const r=px(t.firestore);return(function(u,p,_,v,b,A,N){let I;if(b.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new Ke(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){rb(N,A);const ue=[];for(const oe of N)ue.push(nb(v,u,oe));I={arrayValue:{values:ue}}}else I=nb(v,u,N)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||rb(N,A),I=dR(_,p,N,A==="in"||A==="not-in");return Fn.create(b,A,I)})(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}class of extends Tp{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new of(t,r)}_parse(t){const r=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return r.length===1?r[0]:ti.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:((function(l,u){let p=l;const _=u.getFlattenedFilters();for(const v of _)Tx(p,v),p=Sm(p,v)})(t._query,r),new Po(t.firestore,t.converter,Sm(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nb(a,t,r){if(typeof(r=Co(r))=="string"){if(r==="")throw new Ke(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b_(t)&&r.indexOf("/")!==-1)throw new Ke(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=t.path.child(en.fromString(r));if(!Ze.isDocumentKey(s))throw new Ke(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return y0(a,new Ze(s))}if(r instanceof In)return y0(a,r._key);throw new Ke(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(r)}.`)}function rb(a,t){if(!Array.isArray(a)||a.length===0)throw new Ke(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Tx(a,t){const r=(function(l,u){for(const p of l)for(const _ of p.getFlattenedFilters())if(u.indexOf(_.op)>=0)return _.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(r!==null)throw r===t.op?new Ke(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ke(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Sx{convertValue(t,r="none"){switch(Js(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Zs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw it(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const s={};return Oo(t,((l,u)=>{s[l]=this.convertValue(u,r)})),s}convertVectorValue(t){const r=t.fields?.[Nh].arrayValue?.values?.map((s=>jn(s.doubleValue)));return new ei(r)}convertGeoPoint(t){return new Wa(jn(t.latitude),jn(t.longitude))}convertArray(t,r){return(t.values||[]).map((s=>this.convertValue(s,r)))}convertServerTimestamp(t,r){switch(r){case"previous":const s=Yh(t);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(zu(t));default:return null}}convertTimestamp(t){const r=$s(t);return new tn(r.seconds,r.nanos)}convertDocumentKey(t,r){const s=en.fromString(t);Bt(B_(s),9688,{name:t});const l=new wl(s.get(1),s.get(3)),u=new Ze(s.popFirst(5));return l.isEqual(r)||es(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),u}}function bR(a,t,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,s}class bl{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qs extends _x{constructor(t,r,s,l,u,p){super(t,r,s,l,p),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Mu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const s=this._document.data.field(xx("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Qs._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:Hn("string",Qs._jsonSchemaVersion),bundleSource:Hn("string","DocumentSnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Mu extends Qs{data(t={}){return super.data(t)}}class Ro{constructor(t,r,s,l){this._firestore=t,this._userDataWriter=r,this._snapshot=l,this.metadata=new bl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((r=>t.push(r))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach((s=>{t.call(r,new Mu(this._firestore,this._userDataWriter,s.key,s,new bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ke(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map((_=>{const v=new Mu(l._firestore,l._userDataWriter,_.doc.key,_.doc,new bl(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);return _.doc,{type:"added",doc:v,oldIndex:-1,newIndex:p++}}))}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((_=>u||_.type!==3)).map((_=>{const v=new Mu(l._firestore,l._userDataWriter,_.doc.key,_.doc,new bl(l._snapshot.mutatedKeys.has(_.doc.key),l._snapshot.fromCache),l.query.converter);let b=-1,A=-1;return _.type!==0&&(b=p.indexOf(_.doc.key),p=p.delete(_.doc.key)),_.type!==1&&(p=p.add(_.doc),A=p.indexOf(_.doc.key)),{type:_R(_.type),doc:v,oldIndex:b,newIndex:A}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ke(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ro._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Hh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(r.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function _R(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it(61501,{type:a})}}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:Hn("string",Ro._jsonSchemaVersion),bundleSource:Hn("string","QuerySnapshot"),bundleName:Hn("string"),bundle:Hn("string")};class Ax extends Sx{constructor(t){super(),this.firestore=t}convertBytes(t){return new va(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new In(this.firestore,null,r)}}function Nx(a,t,r){a=Gs(a,In);const s=Gs(a.firestore,Rl),l=bR(a.converter,t,r);return Sp(s,[fR(px(s),"setDoc",a._key,l,a.converter!==null,r).toMutation(a._key,bi.none())])}function Rx(a){return Sp(Gs(a.firestore,Rl),[new np(a._key,bi.none())])}function Cx(a,...t){a=Co(a);let r={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||tb(t[s])||(r=t[s++]);const l={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(tb(t[s])){const v=t[s];t[s]=v.next?.bind(v),t[s+1]=v.error?.bind(v),t[s+2]=v.complete?.bind(v)}let u,p,_;if(a instanceof In)p=Gs(a.firestore,Rl),_=ep(a._key.path),u={next:v=>{t[s]&&t[s](xR(p,a,v))},error:t[s+1],complete:t[s+2]};else{const v=Gs(a,Po);p=Gs(v.firestore,Rl),_=v._query;const b=new Ax(p);u={next:A=>{t[s]&&t[s](new Ro(p,b,v,A))},error:t[s+1],complete:t[s+2]},vR(a._query)}return(function(b,A,N,I){const X=new aR(I),ue=new zN(A,X,N);return b.asyncQueue.enqueueAndForget((async()=>VN(await Y0(b),ue))),()=>{X.Nu(),b.asyncQueue.enqueueAndForget((async()=>kN(await Y0(b),ue)))}})(_p(p),_,l,u)}function Sp(a,t){return(function(s,l){const u=new No;return s.asyncQueue.enqueueAndForget((async()=>XN(await oR(s),l,u))),u.promise})(_p(a),t)}function xR(a,t,r){const s=r.docs.get(t._key),l=new Ax(a);return new Qs(a,l,t._key,s,new bl(r.hasPendingWrites,r.fromCache),t.converter)}(function(t,r=!0){(function(l){kl=l})(WT),Th(new ku("firestore",((s,{instanceIdentifier:l,options:u})=>{const p=s.getProvider("app").getImmediate(),_=new Rl(new mS(s.getProvider("auth-internal")),new yS(p,s.getProvider("app-check-internal")),(function(b,A){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Ke(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wl(b.options.projectId,A)})(p,l),p);return u={useFetchStreams:r,...u},_._setSettings(u),_}),"PUBLIC").setMultipleInstances(!0)),_l(a0,i0,t),_l(a0,i0,"esm2020")})();const ER=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Sx,Bytes:va,CollectionReference:Zi,DocumentReference:In,DocumentSnapshot:Qs,FieldPath:af,FieldValue:xp,Firestore:Rl,FirestoreError:Ke,GeoPoint:Wa,Query:Po,QueryCompositeFilterConstraint:of,QueryConstraint:Ex,QueryDocumentSnapshot:Mu,QueryFieldFilterConstraint:sf,QuerySnapshot:Ro,SnapshotMetadata:bl,Timestamp:tn,VectorValue:ei,_AutoId:Hh,_ByteString:rr,_DatabaseId:wl,_DocumentKey:Ze,_EmptyAuthCredentialsProvider:Wb,_FieldPath:nr,_cast:Gs,_logWarn:jo,_validateIsNotUsedTogether:t_,collection:fx,connectFirestoreEmulator:hx,deleteDoc:Rx,doc:bp,ensureFirestoreConfigured:_p,executeWrite:Sp,getFirestore:dx,onSnapshot:Cx,query:wx,setDoc:Nx},Symbol.toStringTag,{value:"Module"})),wR={apiKey:"AIzaSyDUMSroR4ttcdohVK2Y8qq7yWIBrkAWKWQ",authDomain:"studio-7145332012-9a179.firebaseapp.com",projectId:"studio-7145332012-9a179",storageBucket:"studio-7145332012-9a179.firebasestorage.app",messagingSenderId:"832894479416",appId:"1:832894479416:web:2163932c408afeabdb8acd"},TR=qb(wR),lf=dx(TR),SR=Object.freeze(Object.defineProperty({__proto__:null,db:lf},Symbol.toStringTag,{value:"Module"}));var mh={exports:{}},AR=mh.exports,ab;function NR(){return ab||(ab=1,(function(a,t){(function(r,s){a.exports=s()})(AR,function(){var r=function(h,d){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&(y[S]=E[S])})(h,d)},s=function(){return(s=Object.assign||function(h){for(var d,y=1,E=arguments.length;y<E;y++)for(var S in d=arguments[y])Object.prototype.hasOwnProperty.call(d,S)&&(h[S]=d[S]);return h}).apply(this,arguments)};function l(h,d,y){for(var E,S=0,R=d.length;S<R;S++)!E&&S in d||((E=E||Array.prototype.slice.call(d,0,S))[S]=d[S]);return h.concat(E||Array.prototype.slice.call(d))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Y1,p=Object.keys,_=Array.isArray;function v(h,d){return typeof d!="object"||p(d).forEach(function(y){h[y]=d[y]}),h}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var b=Object.getPrototypeOf,A={}.hasOwnProperty;function N(h,d){return A.call(h,d)}function I(h,d){typeof d=="function"&&(d=d(b(h))),(typeof Reflect>"u"?p:Reflect.ownKeys)(d).forEach(function(y){ue(h,y,d[y])})}var X=Object.defineProperty;function ue(h,d,y,E){X(h,d,v(y&&N(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},E))}function oe(h){return{from:function(d){return h.prototype=Object.create(d.prototype),ue(h.prototype,"constructor",h),{extend:I.bind(null,h.prototype)}}}}var B=Object.getOwnPropertyDescriptor,L=[].slice;function ee(h,d,y){return L.call(h,d,y)}function fe(h,d){return d(h)}function xe(h){if(!h)throw new Error("Assertion Failed")}function Pe(h){u.setImmediate?setImmediate(h):setTimeout(h,0)}function Ye(h,d){if(typeof d=="string"&&N(h,d))return h[d];if(!d)return h;if(typeof d!="string"){for(var y=[],E=0,S=d.length;E<S;++E){var R=Ye(h,d[E]);y.push(R)}return y}var j=d.indexOf(".");if(j!==-1){var P=h[d.substr(0,j)];return P==null?void 0:Ye(P,d.substr(j+1))}}function M(h,d,y){if(h&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof d!="string"&&"length"in d){xe(typeof y!="string"&&"length"in y);for(var E=0,S=d.length;E<S;++E)M(h,d[E],y[E])}else{var R,j,P=d.indexOf(".");P!==-1?(R=d.substr(0,P),(j=d.substr(P+1))===""?y===void 0?_(h)&&!isNaN(parseInt(R))?h.splice(R,1):delete h[R]:h[R]=y:M(P=!(P=h[R])||!N(h,R)?h[R]={}:P,j,y)):y===void 0?_(h)&&!isNaN(parseInt(d))?h.splice(d,1):delete h[d]:h[d]=y}}function O(h){var d,y={};for(d in h)N(h,d)&&(y[d]=h[d]);return y}var V=[].concat;function F(h){return V.apply([],h)}var Jr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(F([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(d){return d+h+"Array"})}))).filter(function(h){return u[h]}),q=new Set(Jr.map(function(h){return u[h]})),J=null;function k(h){return J=new WeakMap,h=(function d(y){if(!y||typeof y!="object")return y;var E=J.get(y);if(E)return E;if(_(y)){E=[],J.set(y,E);for(var S=0,R=y.length;S<R;++S)E.push(d(y[S]))}else if(q.has(y.constructor))E=y;else{var j,P=b(y);for(j in E=P===Object.prototype?{}:Object.create(P),J.set(y,E),y)N(y,j)&&(E[j]=d(y[j]))}return E})(h),J=null,h}var yt={}.toString;function Nt(h){return yt.call(h).slice(8,-1)}var W=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ae=typeof W=="symbol"?function(h){var d;return h!=null&&(d=h[W])&&d.apply(h)}:function(){return null};function Ne(h,d){return d=h.indexOf(d),0<=d&&h.splice(d,1),0<=d}var at={};function tt(h){var d,y,E,S;if(arguments.length===1){if(_(h))return h.slice();if(this===at&&typeof h=="string")return[h];if(S=Ae(h)){for(y=[];!(E=S.next()).done;)y.push(E.value);return y}if(h==null)return[h];if(typeof(d=h.length)!="number")return[h];for(y=new Array(d);d--;)y[d]=h[d];return y}for(d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];return y}var H=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Sr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zr),be={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(h,d){this.name=h,this.message=d}function Re(h,d){return h+". Errors: "+Object.keys(d).map(function(y){return d[y].toString()}).filter(function(y,E,S){return S.indexOf(y)===E}).join(`
`)}function Fe(h,d,y,E){this.failures=d,this.failedKeys=E,this.successCount=y,this.message=Re(h,d)}function $e(h,d){this.name="BulkError",this.failures=Object.keys(d).map(function(y){return d[y]}),this.failuresByPos=d,this.message=Re(h,this.failures)}oe(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),oe(Fe).from(Ie),oe($e).from(Ie);var rt=Sr.reduce(function(h,d){return h[d]=d+"Error",h},{}),Ft=Ie,Oe=Sr.reduce(function(h,d){var y=d+"Error";function E(S,R){this.name=y,S?typeof S=="string"?(this.message="".concat(S).concat(R?`
 `+R:""),this.inner=R||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=be[d]||y,this.inner=null)}return oe(E).from(Ft),h[d]=E,h},{});Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError;var fn=Zr.reduce(function(h,d){return h[d+"Error"]=Oe[d],h},{}),On=Sr.reduce(function(h,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(h[d+"Error"]=Oe[d]),h},{});function Ge(){}function Je(h){return h}function Ht(h,d){return h==null||h===Je?d:function(y){return d(h(y))}}function pt(h,d){return function(){h.apply(this,arguments),d.apply(this,arguments)}}function zt(h,d){return h===Ge?d:function(){var y=h.apply(this,arguments);y!==void 0&&(arguments[0]=y);var E=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var R=d.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?pt(E,this.onsuccess):E),S&&(this.onerror=this.onerror?pt(S,this.onerror):S),R!==void 0?R:y}}function on(h,d){return h===Ge?d:function(){h.apply(this,arguments);var y=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?pt(y,this.onsuccess):y),E&&(this.onerror=this.onerror?pt(E,this.onerror):E)}}function Yn(h,d){return h===Ge?d:function(y){var E=h.apply(this,arguments);v(y,E);var S=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,y=d.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?pt(S,this.onsuccess):S),R&&(this.onerror=this.onerror?pt(R,this.onerror):R),E===void 0?y===void 0?void 0:y:v(E,y)}}function Rt(h,d){return h===Ge?d:function(){return d.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function Mt(h,d){return h===Ge?d:function(){var y=h.apply(this,arguments);if(y&&typeof y.then=="function"){for(var E=this,S=arguments.length,R=new Array(S);S--;)R[S]=arguments[S];return y.then(function(){return d.apply(E,R)})}return d.apply(this,arguments)}}On.ModifyError=Fe,On.DexieError=Ie,On.BulkError=$e;var wn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Lo(h){wn=h}var ri={},Xn=100,Jr=typeof Promise>"u"?[]:(function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,b(h),h];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,b(d),h]})(),Zr=Jr[0],Sr=Jr[1],Jr=Jr[2],Sr=Sr&&Sr.then,Wr=Zr&&Zr.constructor,ba=!!Jr,Ei=function(h,d){ai.push([h,d]),wi&&(queueMicrotask(zo),wi=!1)},rs=!0,wi=!0,_a=[],fr=[],Tn=Je,Sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ge,pgp:!1,env:{},finalize:Ge},Ue=Sn,ai=[],Nr=0,Ti=[];function ke(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=Ue;if(typeof h!="function"){if(h!==ri)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Rr(this,this._value))}this._state=null,this._value=null,++d.ref,(function y(E,S){try{S(function(R){if(E._state===null){if(R===E)throw new TypeError("A promise cannot be resolved with itself.");var j=E._lib&&ar();R&&typeof R.then=="function"?y(E,function(P,K){R instanceof ke?R._then(P,K):R.then(P,K)}):(E._state=!0,E._value=R,ea(E)),j&&Cr()}},Rr.bind(null,E))}catch(R){Rr(E,R)}})(this,h)}var Ba={get:function(){var h=Ue,d=dr;function y(E,S){var R=this,j=!h.global&&(h!==Ue||d!==dr),P=j&&!Kn(),K=new ke(function(G,te){xr(R,new dn(Ni(E,h,j,P),Ni(S,h,j,P),G,te,h))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return y.prototype=ri,y},set:function(h){ue(this,"then",h&&h.prototype===ri?Ba:{get:function(){return h},set:Ba.set})}};function dn(h,d,y,E,S){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof d=="function"?d:null,this.resolve=y,this.reject=E,this.psd=S}function Rr(h,d){var y,E;fr.push(d),h._state===null&&(y=h._lib&&ar(),d=Tn(d),h._state=!1,h._value=d,E=h,_a.some(function(S){return S._value===E._value})||_a.push(E),ea(h),y&&Cr())}function ea(h){var d=h._listeners;h._listeners=[];for(var y=0,E=d.length;y<E;++y)xr(h,d[y]);var S=h._PSD;--S.ref||S.finalize(),Nr===0&&(++Nr,Ei(function(){--Nr==0&&to()},[]))}function xr(h,d){if(h._state!==null){var y=h._state?d.onFulfilled:d.onRejected;if(y===null)return(h._state?d.resolve:d.reject)(h._value);++d.psd.ref,++Nr,Ei(Ul,[y,h,d])}else h._listeners.push(d)}function Ul(h,d,y){try{var E,S=d._value;!d._state&&fr.length&&(fr=[]),E=wn&&d._consoleTask?d._consoleTask.run(function(){return h(S)}):h(S),d._state||fr.indexOf(S)!==-1||(function(R){for(var j=_a.length;j;)if(_a[--j]._value===R._value)return _a.splice(j,1)})(d),y.resolve(E)}catch(R){y.reject(R)}finally{--Nr==0&&to(),--y.psd.ref||y.psd.finalize()}}function zo(){$n(Sn,function(){ar()&&Cr()})}function ar(){var h=rs;return wi=rs=!1,h}function Cr(){var h,d,y;do for(;0<ai.length;)for(h=ai,ai=[],y=h.length,d=0;d<y;++d){var E=h[d];E[0].apply(null,E[1])}while(0<ai.length);wi=rs=!0}function to(){var h=_a;_a=[],h.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var d=Ti.slice(0),y=d.length;y;)d[--y]()}function xa(h){return new ke(ri,!1,h)}function Ut(h,d){var y=Ue;return function(){var E=ar(),S=Ue;try{return na(y,!0),h.apply(this,arguments)}catch(R){d&&d(R)}finally{na(S,!1),E&&Cr()}}}I(ke.prototype,{then:Ba,_then:function(h,d){xr(this,new dn(null,null,h,d,Ue))},catch:function(h){if(arguments.length===1)return this.then(null,h);var d=h,y=arguments[1];return typeof d=="function"?this.then(null,function(E){return(E instanceof d?y:xa)(E)}):this.then(null,function(E){return(E&&E.name===d?y:xa)(E)})},finally:function(h){return this.then(function(d){return ke.resolve(h()).then(function(){return d})},function(d){return ke.resolve(h()).then(function(){return xa(d)})})},timeout:function(h,d){var y=this;return h<1/0?new ke(function(E,S){var R=setTimeout(function(){return S(new Oe.Timeout(d))},h);y.then(E,S).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ue(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),Sn.env=no(),I(ke,{all:function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d,y){h.length===0&&d([]);var E=h.length;h.forEach(function(S,R){return ke.resolve(S).then(function(j){h[R]=j,--E||d(h)},y)})})},resolve:function(h){return h instanceof ke?h:h&&typeof h.then=="function"?new ke(function(d,y){h.then(d,y)}):new ke(ri,!0,h)},reject:xa,race:function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d,y){h.map(function(E){return ke.resolve(E).then(d,y)})})},PSD:{get:function(){return Ue},set:function(h){return Ue=h}},totalEchoes:{get:function(){return dr}},newPSD:Kt,usePSD:$n,scheduler:{get:function(){return Ei},set:function(h){Ei=h}},rejectionMapper:{get:function(){return Tn},set:function(h){Tn=h}},follow:function(h,d){return new ke(function(y,E){return Kt(function(S,R){var j=Ue;j.unhandleds=[],j.onunhandled=R,j.finalize=pt(function(){var P,K=this;P=function(){K.unhandleds.length===0?S():R(K.unhandleds[0])},Ti.push(function G(){P(),Ti.splice(Ti.indexOf(G),1)}),++Nr,Ei(function(){--Nr==0&&to()},[])},j.finalize),h()},d,y,E)})}}),Wr&&(Wr.allSettled&&ue(ke,"allSettled",function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d){h.length===0&&d([]);var y=h.length,E=new Array(y);h.forEach(function(S,R){return ke.resolve(S).then(function(j){return E[R]={status:"fulfilled",value:j}},function(j){return E[R]={status:"rejected",reason:j}}).then(function(){return--y||d(E)})})})}),Wr.any&&typeof AggregateError<"u"&&ue(ke,"any",function(){var h=tt.apply(null,arguments).map(qa);return new ke(function(d,y){h.length===0&&y(new AggregateError([]));var E=h.length,S=new Array(E);h.forEach(function(R,j){return ke.resolve(R).then(function(P){return d(P)},function(P){S[j]=P,--E||y(new AggregateError(S))})})})}),Wr.withResolvers&&(ke.withResolvers=Wr.withResolvers));var ln={awaits:0,echoes:0,id:0},Si=0,Dr=[],Ai=0,dr=0,ta=0;function Kt(h,d,y,E){var S=Ue,R=Object.create(S);return R.parent=S,R.ref=0,R.global=!1,R.id=++ta,Sn.env,R.env=ba?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},d&&v(R,d),++S.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},E=$n(R,h,y,E),R.ref===0&&R.finalize(),E}function nn(){return ln.id||(ln.id=++Si),++ln.awaits,ln.echoes+=Xn,ln.id}function Kn(){return!!ln.awaits&&(--ln.awaits==0&&(ln.id=0),ln.echoes=ln.awaits*Xn,!0)}function qa(h){return ln.echoes&&h&&h.constructor===Wr?(nn(),h.then(function(d){return Kn(),d},function(d){return Kn(),jt(d)})):h}function Bl(){var h=Dr[Dr.length-1];Dr.pop(),na(h,!1)}function na(h,d){var y,E=Ue;(d?!ln.echoes||Ai++&&h===Ue:!Ai||--Ai&&h===Ue)||queueMicrotask(d?(function(S){++dr,ln.echoes&&--ln.echoes!=0||(ln.echoes=ln.awaits=ln.id=0),Dr.push(Ue),na(S,!0)}).bind(null,h):Bl),h!==Ue&&(Ue=h,E===Sn&&(Sn.env=no()),ba&&(y=Sn.env.Promise,d=h.env,(E.global||h.global)&&(Object.defineProperty(u,"Promise",d.PromiseProp),y.all=d.all,y.race=d.race,y.resolve=d.resolve,y.reject=d.reject,d.allSettled&&(y.allSettled=d.allSettled),d.any&&(y.any=d.any))))}function no(){var h=u.Promise;return ba?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function $n(h,d,y,E,S){var R=Ue;try{return na(h,!0),d(y,E,S)}finally{na(R,!1)}}function Ni(h,d,y,E){return typeof h!="function"?h:function(){var S=Ue;y&&nn(),na(d,!0);try{return h.apply(this,arguments)}finally{na(S,!1),E&&queueMicrotask(Kn)}}}function jr(h){Promise===Wr&&ln.echoes===0?Ai===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+Sr).indexOf("[native code]")===-1&&(nn=Kn=Ge);var jt=ke.reject,An="",Mn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mn="String expected.",Ea=[],ii="__dbnames",Ir="readonly",Or="readwrite";function ra(h,d){return h?d?function(){return h.apply(this,arguments)&&d.apply(this,arguments)}:h:d}var as={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function si(h){return typeof h!="string"||/\./.test(h)?function(d){return d}:function(d){return d[h]===void 0&&h in d&&delete(d=k(d))[h],d}}function ro(){throw Oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ft(h,d){try{var y=mr(h),E=mr(d);if(y!==E)return y==="Array"?1:E==="Array"?-1:y==="binary"?1:E==="binary"?-1:y==="string"?1:E==="string"?-1:y==="Date"?1:E!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return d<h?1:h<d?-1:0;case"binary":return(function(S,R){for(var j=S.length,P=R.length,K=j<P?j:P,G=0;G<K;++G)if(S[G]!==R[G])return S[G]<R[G]?-1:1;return j===P?0:j<P?-1:1})(pn(h),pn(d));case"Array":return(function(S,R){for(var j=S.length,P=R.length,K=j<P?j:P,G=0;G<K;++G){var te=ft(S[G],R[G]);if(te!==0)return te}return j===P?0:j<P?-1:1})(h,d)}}catch{}return NaN}function mr(h){var d=typeof h;return d!="object"?d:ArrayBuffer.isView(h)?"binary":(h=Nt(h),h==="ArrayBuffer"?"binary":h)}function pn(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function gn(h,d,y){var E=h.schema.yProps;return E?(d&&0<y.numFailures&&(d=d.filter(function(S,R){return!y.failures[R]})),Promise.all(E.map(function(S){return S=S.updatesTable,d?h.db.table(S).where("k").anyOf(d).delete():h.db.table(S).clear()})).then(function(){return y})):y}var Mr=(is.prototype.execute=function(h){var d=this["@@propmod"];if(d.add!==void 0){var y=d.add;if(_(y))return l(l([],_(h)?h:[],!0),y).sort();if(typeof y=="number")return(Number(h)||0)+y;if(typeof y=="bigint")try{return BigInt(h)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(d.remove!==void 0){var E=d.remove;if(_(E))return _(h)?h.filter(function(S){return!E.includes(S)}).sort():[];if(typeof E=="number")return Number(h)-E;if(typeof E=="bigint")try{return BigInt(h)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return y=(y=d.replacePrefix)===null||y===void 0?void 0:y[0],y&&typeof h=="string"&&h.startsWith(y)?d.replacePrefix[1]+h.substring(y.length):h},is);function is(h){this["@@propmod"]=h}function Vt(h,d){for(var y=p(d),E=y.length,S=!1,R=0;R<E;++R){var j=y[R],P=d[j],K=Ye(h,j);P instanceof Mr?(M(h,j,P.execute(K)),S=!0):K!==P&&(M(h,j,P),S=!0)}return S}var oi=(_t.prototype._trans=function(h,d,y){var E=this._tx||Ue.trans,S=this.name,R=wn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function j(G,te,U){if(!U.schema[S])throw new Oe.NotFound("Table "+S+" not part of transaction");return d(U.idbtrans,U)}var P=ar();try{var K=E&&E.db._novip===this.db._novip?E===Ue.trans?E._promise(h,j,y):Kt(function(){return E._promise(h,j,y)},{trans:E,transless:Ue.transless||Ue}):(function G(te,U,re,Q){if(te.idbdb&&(te._state.openComplete||Ue.letThrough||te._vip)){var $=te._createTransaction(U,re,te._dbSchema);try{$.create(),te._state.PR1398_maxLoop=3}catch(Z){return Z.name===rt.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return G(te,U,re,Q)})):jt(Z)}return $._promise(U,function(Z,ne){return Kt(function(){return Ue.trans=$,Q(Z,ne,$)})}).then(function(Z){if(U==="readwrite")try{$.idbtrans.commit()}catch{}return U==="readonly"?Z:$._completion.then(function(){return Z})})}if(te._state.openComplete)return jt(new Oe.DatabaseClosed(te._state.dbOpenError));if(!te._state.isBeingOpened){if(!te._state.autoOpen)return jt(new Oe.DatabaseClosed);te.open().catch(Ge)}return te._state.dbReadyPromise.then(function(){return G(te,U,re,Q)})})(this.db,h,[this.name],j);return R&&(K._consoleTask=R,K=K.catch(function(G){return console.trace(G),jt(G)})),K}finally{P&&Cr()}},_t.prototype.get=function(h,d){var y=this;return h&&h.constructor===Object?this.where(h).first(d):h==null?jt(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return y.core.get({trans:E,key:h}).then(function(S){return y.hook.reading.fire(S)})}).then(d)},_t.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(_(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var d=p(h);if(d.length===1)return this.where(d[0]).equals(h[d[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(P){if(P.compound&&d.every(function(G){return 0<=P.keyPath.indexOf(G)})){for(var K=0;K<d.length;++K)if(d.indexOf(P.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(P,K){return P.keyPath.length-K.keyPath.length})[0];if(y&&this.db._maxKey!==An){var R=y.keyPath.slice(0,d.length);return this.where(R).equals(R.map(function(K){return h[K]}))}!y&&wn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var E=this.schema.idxByName;function S(P,K){return ft(P,K)===0}var j=d.reduce(function(U,K){var G=U[0],te=U[1],U=E[K],re=h[K];return[G||U,G||!U?ra(te,U&&U.multi?function(Q){return Q=Ye(Q,K),_(Q)&&Q.some(function($){return S(re,$)})}:function(Q){return S(re,Ye(Q,K))}):te]},[null,null]),R=j[0],j=j[1];return R?this.where(R.name).equals(h[R.keyPath]).filter(j):y?this.filter(j):this.where(d).equals("")},_t.prototype.filter=function(h){return this.toCollection().and(h)},_t.prototype.count=function(h){return this.toCollection().count(h)},_t.prototype.offset=function(h){return this.toCollection().offset(h)},_t.prototype.limit=function(h){return this.toCollection().limit(h)},_t.prototype.each=function(h){return this.toCollection().each(h)},_t.prototype.toArray=function(h){return this.toCollection().toArray(h)},_t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_t.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,_(h)?"[".concat(h.join("+"),"]"):h))},_t.prototype.reverse=function(){return this.toCollection().reverse()},_t.prototype.mapToClass=function(h){var d,y=this.db,E=this.name;function S(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof ro&&((function(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function te(){this.constructor=K}r(K,G),K.prototype=G===null?Object.create(G):(te.prototype=G.prototype,new te)})(S,d=h),Object.defineProperty(S.prototype,"db",{get:function(){return y},enumerable:!1,configurable:!0}),S.prototype.table=function(){return E},h=S);for(var R=new Set,j=h.prototype;j;j=b(j))Object.getOwnPropertyNames(j).forEach(function(K){return R.add(K)});function P(K){if(!K)return K;var G,te=Object.create(h.prototype);for(G in K)if(!R.has(G))try{te[G]=K[G]}catch{}return te}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),h},_t.prototype.defineClass=function(){return this.mapToClass(function(h){v(this,h)})},_t.prototype.add=function(h,d){var y=this,E=this.schema.primKey,S=E.auto,R=E.keyPath,j=h;return R&&S&&(j=si(R)(h)),this._trans("readwrite",function(P){return y.core.mutate({trans:P,type:"add",keys:d!=null?[d]:null,values:[j]})}).then(function(P){return P.numFailures?ke.reject(P.failures[0]):P.lastResult}).then(function(P){if(R)try{M(h,R,P)}catch{}return P})},_t.prototype.upsert=function(h,d){var y=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(S){return y.core.get({trans:S,key:h}).then(function(R){var j=R??{};return Vt(j,d),E&&M(j,E,h),y.core.mutate({trans:S,type:"put",values:[j],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[d]}}).then(function(P){return P.numFailures?ke.reject(P.failures[0]):!!R})})})},_t.prototype.update=function(h,d){return typeof h!="object"||_(h)?this.where(":id").equals(h).modify(d):(h=Ye(h,this.schema.primKey.keyPath),h===void 0?jt(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(d))},_t.prototype.put=function(h,d){var y=this,E=this.schema.primKey,S=E.auto,R=E.keyPath,j=h;return R&&S&&(j=si(R)(h)),this._trans("readwrite",function(P){return y.core.mutate({trans:P,type:"put",values:[j],keys:d!=null?[d]:null})}).then(function(P){return P.numFailures?ke.reject(P.failures[0]):P.lastResult}).then(function(P){if(R)try{M(h,R,P)}catch{}return P})},_t.prototype.delete=function(h){var d=this;return this._trans("readwrite",function(y){return d.core.mutate({trans:y,type:"delete",keys:[h]}).then(function(E){return gn(d,[h],E)}).then(function(E){return E.numFailures?ke.reject(E.failures[0]):void 0})})},_t.prototype.clear=function(){var h=this;return this._trans("readwrite",function(d){return h.core.mutate({trans:d,type:"deleteRange",range:as}).then(function(y){return gn(h,null,y)})}).then(function(d){return d.numFailures?ke.reject(d.failures[0]):void 0})},_t.prototype.bulkGet=function(h){var d=this;return this._trans("readonly",function(y){return d.core.getMany({keys:h,trans:y}).then(function(E){return E.map(function(S){return d.hook.reading.fire(S)})})})},_t.prototype.bulkAdd=function(h,d,y){var E=this,S=Array.isArray(d)?d:void 0,R=(y=y||(S?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(j){var G=E.schema.primKey,P=G.auto,G=G.keyPath;if(G&&S)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var K=h.length,G=G&&P?h.map(si(G)):h;return E.core.mutate({trans:j,type:"add",keys:S,values:G,wantResults:R}).then(function($){var U=$.numFailures,re=$.results,Q=$.lastResult,$=$.failures;if(U===0)return R?re:Q;throw new $e("".concat(E.name,".bulkAdd(): ").concat(U," of ").concat(K," operations failed"),$)})})},_t.prototype.bulkPut=function(h,d,y){var E=this,S=Array.isArray(d)?d:void 0,R=(y=y||(S?void 0:d))?y.allKeys:void 0;return this._trans("readwrite",function(j){var G=E.schema.primKey,P=G.auto,G=G.keyPath;if(G&&S)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==h.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var K=h.length,G=G&&P?h.map(si(G)):h;return E.core.mutate({trans:j,type:"put",keys:S,values:G,wantResults:R}).then(function($){var U=$.numFailures,re=$.results,Q=$.lastResult,$=$.failures;if(U===0)return R?re:Q;throw new $e("".concat(E.name,".bulkPut(): ").concat(U," of ").concat(K," operations failed"),$)})})},_t.prototype.bulkUpdate=function(h){var d=this,y=this.core,E=h.map(function(j){return j.key}),S=h.map(function(j){return j.changes}),R=[];return this._trans("readwrite",function(j){return y.getMany({trans:j,keys:E,cache:"clone"}).then(function(P){var K=[],G=[];h.forEach(function(U,re){var Q=U.key,$=U.changes,Z=P[re];if(Z){for(var ne=0,le=Object.keys($);ne<le.length;ne++){var de=le[ne],ye=$[de];if(de===d.schema.primKey.keyPath){if(ft(ye,Q)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else M(Z,de,ye)}R.push(re),K.push(Q),G.push(Z)}});var te=K.length;return y.mutate({trans:j,type:"put",keys:K,values:G,updates:{keys:E,changeSpecs:S}}).then(function(U){var re=U.numFailures,Q=U.failures;if(re===0)return te;for(var $=0,Z=Object.keys(Q);$<Z.length;$++){var ne,le=Z[$],de=R[Number(le)];de!=null&&(ne=Q[le],delete Q[le],Q[de]=ne)}throw new $e("".concat(d.name,".bulkUpdate(): ").concat(re," of ").concat(te," operations failed"),Q)})})})},_t.prototype.bulkDelete=function(h){var d=this,y=h.length;return this._trans("readwrite",function(E){return d.core.mutate({trans:E,type:"delete",keys:h}).then(function(S){return gn(d,h,S)})}).then(function(j){var S=j.numFailures,R=j.lastResult,j=j.failures;if(S===0)return R;throw new $e("".concat(d.name,".bulkDelete(): ").concat(S," of ").concat(y," operations failed"),j)})},_t);function _t(){}function aa(h){function d(j,P){if(P){for(var K=arguments.length,G=new Array(K-1);--K;)G[K-1]=arguments[K];return y[j].subscribe.apply(null,G),h}if(typeof j=="string")return y[j]}var y={};d.addEventType=R;for(var E=1,S=arguments.length;E<S;++E)R(arguments[E]);return d;function R(j,P,K){if(typeof j!="object"){var G;P=P||Rt;var te={subscribers:[],fire:K=K||Ge,subscribe:function(U){te.subscribers.indexOf(U)===-1&&(te.subscribers.push(U),te.fire=P(te.fire,U))},unsubscribe:function(U){te.subscribers=te.subscribers.filter(function(re){return re!==U}),te.fire=te.subscribers.reduce(P,K)}};return y[j]=d[j]=te}p(G=j).forEach(function(U){var re=G[U];if(_(re))R(U,G[U][0],G[U][1]);else{if(re!=="asap")throw new Oe.InvalidArgument("Invalid event config");var Q=R(U,Je,function(){for(var $=arguments.length,Z=new Array($);$--;)Z[$]=arguments[$];Q.subscribers.forEach(function(ne){Pe(function(){ne.apply(null,Z)})})})}})}}function Vn(h,d){return oe(d).from({prototype:h}),d}function ia(h,d){return!(h.filter||h.algorithm||h.or)&&(d?h.justLimit:!h.replayFilter)}function ss(h,d){h.filter=ra(h.filter,d)}function Ri(h,d,y){var E=h.replayFilter;h.replayFilter=E?function(){return ra(E(),d())}:d,h.justLimit=y&&!E}function sa(h,d){if(h.isPrimKey)return d.primaryKey;var y=d.getIndexByKeyPath(h.index);if(!y)throw new Oe.Schema("KeyPath "+h.index+" on object store "+d.name+" is not indexed");return y}function ao(h,d,y){var E=sa(h,d.schema);return d.openCursor({trans:y,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:E,range:h.range}})}function oa(h,d,y,E){var S=h.replayFilter?ra(h.filter,h.replayFilter()):h.filter;if(h.or){var R={},j=function(P,K,G){var te,U;S&&!S(K,G,function(re){return K.stop(re)},function(re){return K.fail(re)})||((U=""+(te=K.primaryKey))=="[object ArrayBuffer]"&&(U=""+new Uint8Array(te)),N(R,U)||(R[U]=!0,d(P,K,G)))};return Promise.all([h.or._iterate(j,y),ir(ao(h,E,y),h.algorithm,j,!h.keysOnly&&h.valueMapper)])}return ir(ao(h,E,y),ra(h.algorithm,S),d,!h.keysOnly&&h.valueMapper)}function ir(h,d,y,E){var S=Ut(E?function(R,j,P){return y(E(R),j,P)}:y);return h.then(function(R){if(R)return R.start(function(){var j=function(){return R.continue()};d&&!d(R,function(P){return j=P},function(P){R.stop(P),j=Ge},function(P){R.fail(P),j=Ge})||S(R.value,R,function(P){return j=P}),j()})})}var Uo=(bt.prototype._read=function(h,d){var y=this._ctx;return y.error?y.table._trans(null,jt.bind(null,y.error)):y.table._trans("readonly",h).then(d)},bt.prototype._write=function(h){var d=this._ctx;return d.error?d.table._trans(null,jt.bind(null,d.error)):d.table._trans("readwrite",h,"locked")},bt.prototype._addAlgorithm=function(h){var d=this._ctx;d.algorithm=ra(d.algorithm,h)},bt.prototype._iterate=function(h,d){return oa(this._ctx,h,d,this._ctx.table.core)},bt.prototype.clone=function(h){var d=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return h&&v(y,h),d._ctx=y,d},bt.prototype.raw=function(){return this._ctx.valueMapper=null,this},bt.prototype.each=function(h){var d=this._ctx;return this._read(function(y){return oa(d,h,y,d.table.core)})},bt.prototype.count=function(h){var d=this;return this._read(function(y){var E=d._ctx,S=E.table.core;if(ia(E,!0))return S.count({trans:y,query:{index:sa(E,S.schema),range:E.range}}).then(function(j){return Math.min(j,E.limit)});var R=0;return oa(E,function(){return++R,!1},y,S).then(function(){return R})}).then(h)},bt.prototype.sortBy=function(h,d){var y=h.split(".").reverse(),E=y[0],S=y.length-1;function R(K,G){return G?R(K[y[G]],G-1):K[E]}var j=this._ctx.dir==="next"?1:-1;function P(K,G){return ft(R(K,S),R(G,S))*j}return this.toArray(function(K){return K.sort(P)}).then(d)},bt.prototype.toArray=function(h){var d=this;return this._read(function(y){var E=d._ctx;if(E.dir==="next"&&ia(E,!0)&&0<E.limit){var S=E.valueMapper,R=sa(E,E.table.core.schema);return E.table.core.query({trans:y,limit:E.limit,values:!0,query:{index:R,range:E.range}}).then(function(P){return P=P.result,S?P.map(S):P})}var j=[];return oa(E,function(P){return j.push(P)},y,E.table.core).then(function(){return j})},h)},bt.prototype.offset=function(h){var d=this._ctx;return h<=0||(d.offset+=h,ia(d)?Ri(d,function(){var y=h;return function(E,S){return y===0||(y===1?--y:S(function(){E.advance(y),y=0}),!1)}}):Ri(d,function(){var y=h;return function(){return--y<0}})),this},bt.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),Ri(this._ctx,function(){var d=h;return function(y,E,S){return--d<=0&&E(S),0<=d}},!0),this},bt.prototype.until=function(h,d){return ss(this._ctx,function(y,E,S){return!h(y.value)||(E(S),d)}),this},bt.prototype.first=function(h){return this.limit(1).toArray(function(d){return d[0]}).then(h)},bt.prototype.last=function(h){return this.reverse().first(h)},bt.prototype.filter=function(h){var d;return ss(this._ctx,function(y){return h(y.value)}),(d=this._ctx).isMatch=ra(d.isMatch,h),this},bt.prototype.and=function(h){return this.filter(h)},bt.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},bt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bt.prototype.desc=function(){return this.reverse()},bt.prototype.eachKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,E){h(E.key,E)})},bt.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},bt.prototype.eachPrimaryKey=function(h){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(y,E){h(E.primaryKey,E)})},bt.prototype.keys=function(h){var d=this._ctx;d.keysOnly=!d.isMatch;var y=[];return this.each(function(E,S){y.push(S.key)}).then(function(){return y}).then(h)},bt.prototype.primaryKeys=function(h){var d=this._ctx;if(d.dir==="next"&&ia(d,!0)&&0<d.limit)return this._read(function(E){var S=sa(d,d.table.core.schema);return d.table.core.query({trans:E,values:!1,limit:d.limit,query:{index:S,range:d.range}})}).then(function(E){return E.result}).then(h);d.keysOnly=!d.isMatch;var y=[];return this.each(function(E,S){y.push(S.primaryKey)}).then(function(){return y}).then(h)},bt.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},bt.prototype.firstKey=function(h){return this.limit(1).keys(function(d){return d[0]}).then(h)},bt.prototype.lastKey=function(h){return this.reverse().firstKey(h)},bt.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var d={};return ss(this._ctx,function(S){var E=S.primaryKey.toString(),S=N(d,E);return d[E]=!0,!S}),this},bt.prototype.modify=function(h){var d=this,y=this._ctx;return this._write(function(E){var S=typeof h=="function"?h:function(Z){return Vt(Z,h)},R=y.table.core,G=R.schema.primaryKey,j=G.outbound,P=G.extractKey,K=200,G=d.db._options.modifyChunkSize;G&&(K=typeof G=="object"?G[R.name]||G["*"]||200:G);function te(Z,de){var le=de.failures,de=de.numFailures;re+=Z-de;for(var ye=0,Ee=p(le);ye<Ee.length;ye++){var je=Ee[ye];U.push(le[je])}}var U=[],re=0,Q=[],$=h===os;return d.clone().primaryKeys().then(function(Z){function ne(de){var ye=Math.min(K,Z.length-de),Ee=Z.slice(de,de+ye);return($?Promise.resolve([]):R.getMany({trans:E,keys:Ee,cache:"immutable"})).then(function(je){var ze=[],Ce=[],Ve=j?[]:null,Le=$?Ee:[];if(!$)for(var De=0;De<ye;++De){var qe=je[De],We={value:k(qe),primKey:Z[de+De]};S.call(We,We.value,We)!==!1&&(We.value==null?Le.push(Z[de+De]):j||ft(P(qe),P(We.value))===0?(Ce.push(We.value),j&&Ve.push(Z[de+De])):(Le.push(Z[de+De]),ze.push(We.value)))}return Promise.resolve(0<ze.length&&R.mutate({trans:E,type:"add",values:ze}).then(function(ot){for(var dt in ot.failures)Le.splice(parseInt(dt),1);te(ze.length,ot)})).then(function(){return(0<Ce.length||le&&typeof h=="object")&&R.mutate({trans:E,type:"put",keys:Ve,values:Ce,criteria:le,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<de}).then(function(ot){return te(Ce.length,ot)})}).then(function(){return(0<Le.length||le&&$)&&R.mutate({trans:E,type:"delete",keys:Le,criteria:le,isAdditionalChunk:0<de}).then(function(ot){return gn(y.table,Le,ot)}).then(function(ot){return te(Le.length,ot)})}).then(function(){return Z.length>de+ye&&ne(de+K)})})}var le=ia(y)&&y.limit===1/0&&(typeof h!="function"||$)&&{index:y.index,range:y.range};return ne(0).then(function(){if(0<U.length)throw new Fe("Error modifying one or more objects",U,re,Q);return Z.length})})})},bt.prototype.delete=function(){var h=this._ctx,d=h.range;return!ia(h)||h.table.schema.yProps||!h.isPrimKey&&d.type!==3?this.modify(os):this._write(function(y){var E=h.table.core.schema.primaryKey,S=d;return h.table.core.count({trans:y,query:{index:E,range:S}}).then(function(R){return h.table.core.mutate({trans:y,type:"deleteRange",range:S}).then(function(K){var P=K.failures,K=K.numFailures;if(K)throw new Fe("Could not delete some values",Object.keys(P).map(function(G){return P[G]}),R-K);return R-K})})})},bt);function bt(){}var os=function(h,d){return d.value=null};function ls(h,d){return h<d?-1:h===d?0:1}function Bo(h,d){return d<h?-1:h===d?0:1}function _n(h,d,y){return h=h instanceof Fa?new h.Collection(h):h,h._ctx.error=new(y||TypeError)(d),h}function la(h){return new h.Collection(h,function(){return Er("")}).limit(0)}function pr(h,d,y,E){var S,R,j,P,K,G,te,U=y.length;if(!y.every(function($){return typeof $=="string"}))return _n(h,mn);function re($){S=$==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},R=$==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},j=$==="next"?ls:Bo;var Z=y.map(function(ne){return{lower:R(ne),upper:S(ne)}}).sort(function(ne,le){return j(ne.lower,le.lower)});P=Z.map(function(ne){return ne.upper}),K=Z.map(function(ne){return ne.lower}),te=(G=$)==="next"?"":E}re("next"),h=new h.Collection(h,function(){return Vr(P[0],K[U-1]+E)}),h._ondirectionchange=function($){re($)};var Q=0;return h._addAlgorithm(function($,Z,ne){var le=$.key;if(typeof le!="string")return!1;var de=R(le);if(d(de,K,Q))return!0;for(var ye=null,Ee=Q;Ee<U;++Ee){var je=(function(ze,Ce,Ve,Le,De,qe){for(var We=Math.min(ze.length,Le.length),ot=-1,dt=0;dt<We;++dt){var Wn=Ce[dt];if(Wn!==Le[dt])return De(ze[dt],Ve[dt])<0?ze.substr(0,dt)+Ve[dt]+Ve.substr(dt+1):De(ze[dt],Le[dt])<0?ze.substr(0,dt)+Le[dt]+Ve.substr(dt+1):0<=ot?ze.substr(0,ot)+Ce[ot]+Ve.substr(ot+1):null;De(ze[dt],Wn)<0&&(ot=dt)}return We<Le.length&&qe==="next"?ze+Ve.substr(ze.length):We<ze.length&&qe==="prev"?ze.substr(0,Ve.length):ot<0?null:ze.substr(0,ot)+Le[ot]+Ve.substr(ot+1)})(le,de,P[Ee],K[Ee],j,G);je===null&&ye===null?Q=Ee+1:(ye===null||0<j(ye,je))&&(ye=je)}return Z(ye!==null?function(){$.continue(ye+te)}:ne),!1}),h}function Vr(h,d,y,E){return{type:2,lower:h,upper:d,lowerOpen:y,upperOpen:E}}function Er(h){return{type:1,lower:h,upper:h}}var Fa=(Object.defineProperty(Gt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Gt.prototype.between=function(h,d,y,E){y=y!==!1,E=E===!0;try{return 0<this._cmp(h,d)||this._cmp(h,d)===0&&(y||E)&&(!y||!E)?la(this):new this.Collection(this,function(){return Vr(h,d,!y,!E)})}catch{return _n(this,Mn)}},Gt.prototype.equals=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return Er(h)})},Gt.prototype.above=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return Vr(h,void 0,!0)})},Gt.prototype.aboveOrEqual=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return Vr(h,void 0,!1)})},Gt.prototype.below=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return Vr(void 0,h,!1,!0)})},Gt.prototype.belowOrEqual=function(h){return h==null?_n(this,Mn):new this.Collection(this,function(){return Vr(void 0,h)})},Gt.prototype.startsWith=function(h){return typeof h!="string"?_n(this,mn):this.between(h,h+An,!0,!0)},Gt.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):pr(this,function(d,y){return d.indexOf(y[0])===0},[h],An)},Gt.prototype.equalsIgnoreCase=function(h){return pr(this,function(d,y){return d===y[0]},[h],"")},Gt.prototype.anyOfIgnoreCase=function(){var h=tt.apply(at,arguments);return h.length===0?la(this):pr(this,function(d,y){return y.indexOf(d)!==-1},h,"")},Gt.prototype.startsWithAnyOfIgnoreCase=function(){var h=tt.apply(at,arguments);return h.length===0?la(this):pr(this,function(d,y){return y.some(function(E){return d.indexOf(E)===0})},h,An)},Gt.prototype.anyOf=function(){var h=this,d=tt.apply(at,arguments),y=this._cmp;try{d.sort(y)}catch{return _n(this,Mn)}if(d.length===0)return la(this);var E=new this.Collection(this,function(){return Vr(d[0],d[d.length-1])});E._ondirectionchange=function(R){y=R==="next"?h._ascending:h._descending,d.sort(y)};var S=0;return E._addAlgorithm(function(R,j,P){for(var K=R.key;0<y(K,d[S]);)if(++S===d.length)return j(P),!1;return y(K,d[S])===0||(j(function(){R.continue(d[S])}),!1)}),E},Gt.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Gt.prototype.noneOf=function(){var h=tt.apply(at,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return _n(this,Mn)}var d=h.reduce(function(y,E){return y?y.concat([[y[y.length-1][1],E]]):[[-1/0,E]]},null);return d.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},Gt.prototype.inAnyRange=function(le,d){var y=this,E=this._cmp,S=this._ascending,R=this._descending,j=this._min,P=this._max;if(le.length===0)return la(this);if(!le.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&S(de[0],de[1])<=0}))return _n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var K=!d||d.includeLowers!==!1,G=d&&d.includeUppers===!0,te,U=S;function re(de,ye){return U(de[0],ye[0])}try{(te=le.reduce(function(de,ye){for(var Ee=0,je=de.length;Ee<je;++Ee){var ze=de[Ee];if(E(ye[0],ze[1])<0&&0<E(ye[1],ze[0])){ze[0]=j(ze[0],ye[0]),ze[1]=P(ze[1],ye[1]);break}}return Ee===je&&de.push(ye),de},[])).sort(re)}catch{return _n(this,Mn)}var Q=0,$=G?function(de){return 0<S(de,te[Q][1])}:function(de){return 0<=S(de,te[Q][1])},Z=K?function(de){return 0<R(de,te[Q][0])}:function(de){return 0<=R(de,te[Q][0])},ne=$,le=new this.Collection(this,function(){return Vr(te[0][0],te[te.length-1][1],!K,!G)});return le._ondirectionchange=function(de){U=de==="next"?(ne=$,S):(ne=Z,R),te.sort(re)},le._addAlgorithm(function(de,ye,Ee){for(var je,ze=de.key;ne(ze);)if(++Q===te.length)return ye(Ee),!1;return!$(je=ze)&&!Z(je)||(y._cmp(ze,te[Q][1])===0||y._cmp(ze,te[Q][0])===0||ye(function(){U===S?de.continue(te[Q][0]):de.continue(te[Q][1])}),!1)}),le},Gt.prototype.startsWithAnyOf=function(){var h=tt.apply(at,arguments);return h.every(function(d){return typeof d=="string"})?h.length===0?la(this):this.inAnyRange(h.map(function(d){return[d,d+An]})):_n(this,"startsWithAnyOf() only works with strings")},Gt);function Gt(){}function Zn(h){return Ut(function(d){return wa(d),h(d.target.error),!1})}function wa(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var kr="storagemutated",wr="x-storagemutated-1",Nn=aa(null,kr),Ci=(vt.prototype._lock=function(){return xe(!Ue.global),++this._reculock,this._reculock!==1||Ue.global||(Ue.lockOwnerFor=this),this},vt.prototype._unlock=function(){if(xe(!Ue.global),--this._reculock==0)for(Ue.global||(Ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{$n(h[1],h[0])}catch{}}return this},vt.prototype._locked=function(){return this._reculock&&Ue.lockOwnerFor!==this},vt.prototype.create=function(h){var d=this;if(!this.mode)return this;var y=this.db.idbdb,E=this.db._state.dbOpenError;if(xe(!this.idbtrans),!h&&!y)switch(E&&E.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(E);case"MissingAPIError":throw new Oe.MissingAPI(E.message,E);default:throw new Oe.OpenFailed(E)}if(!this.active)throw new Oe.TransactionInactive;return xe(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ut(function(S){wa(S),d._reject(h.error)}),h.onabort=Ut(function(S){wa(S),d.active&&d._reject(new Oe.Abort(h.error)),d.active=!1,d.on("abort").fire(S)}),h.oncomplete=Ut(function(){d.active=!1,d._resolve(),"mutatedParts"in h&&Nn.storagemutated.fire(h.mutatedParts)}),this},vt.prototype._promise=function(h,d,y){var E=this;if(h==="readwrite"&&this.mode!=="readwrite")return jt(new Oe.ReadOnly("Transaction is readonly"));if(!this.active)return jt(new Oe.TransactionInactive);if(this._locked())return new ke(function(R,j){E._blockedFuncs.push([function(){E._promise(h,d,y).then(R,j)},Ue])});if(y)return Kt(function(){var R=new ke(function(j,P){E._lock();var K=d(j,P,E);K&&K.then&&K.then(j,P)});return R.finally(function(){return E._unlock()}),R._lib=!0,R});var S=new ke(function(R,j){var P=d(R,j,E);P&&P.then&&P.then(R,j)});return S._lib=!0,S},vt.prototype._root=function(){return this.parent?this.parent._root():this},vt.prototype.waitFor=function(h){var d,y=this._root(),E=ke.resolve(h);y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return E}):(y._waitingFor=E,y._waitingQueue=[],d=y.idbtrans.objectStore(y.storeNames[0]),(function R(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(d.get(-1/0).onsuccess=R)})());var S=y._waitingFor;return new ke(function(R,j){E.then(function(P){return y._waitingQueue.push(Ut(R.bind(null,P)))},function(P){return y._waitingQueue.push(Ut(j.bind(null,P)))}).finally(function(){y._waitingFor===S&&(y._waitingFor=null)})})},vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},vt.prototype.table=function(h){var d=this._memoizedTables||(this._memoizedTables={});if(N(d,h))return d[h];var y=this.schema[h];if(!y)throw new Oe.NotFound("Table "+h+" not part of transaction");return y=new this.db.Table(h,y,this),y.core=this.db.core.table(h),d[h]=y},vt);function vt(){}function Pr(h,d,y,E,S,R,j,P){return{name:h,keyPath:d,unique:y,multi:E,auto:S,compound:R,src:(y&&!j?"&":"")+(E?"*":"")+(S?"++":"")+us(d),type:P}}function us(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function Ha(h,d,y){return{name:h,primKey:d,indexes:y,mappedClass:null,idxByName:(E=function(S){return[S.name,S]},y.reduce(function(S,R,j){return j=E(R,j),j&&(S[j[0]]=j[1]),S},{}))};var E}var Ka=function(h){try{return h.only([[]]),Ka=function(){return[[]]},[[]]}catch{return Ka=function(){return An},An}};function Ga(h){return h==null?function(){}:typeof h=="string"?(d=h).split(".").length===1?function(y){return y[d]}:function(y){return Ye(y,d)}:function(y){return Ye(y,h)};var d}function Ta(h){return[].slice.call(h)}var ua=0;function yn(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function Qa(h,d,K){function E(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=ne.lower,$=ne.upper,Z=ne.lowerOpen,ne=ne.upperOpen;return Q===void 0?$===void 0?null:d.upperBound($,!!ne):$===void 0?d.lowerBound(Q,!!Z):d.bound(Q,$,!!Z,!!ne)}function S(re){var Q,$=re.name;return{name:$,schema:re,mutate:function(Z){var ne=Z.trans,le=Z.type,de=Z.keys,ye=Z.values,Ee=Z.range;return new Promise(function(je,ze){je=Ut(je);var Ce=ne.objectStore($),Ve=Ce.keyPath==null,Le=le==="put"||le==="add";if(!Le&&le!=="delete"&&le!=="deleteRange")throw new Error("Invalid operation type: "+le);var De,qe=(de||ye||{length:1}).length;if(de&&ye&&de.length!==ye.length)throw new Error("Given keys array must have same length as given values array.");if(qe===0)return je({numFailures:0,failures:{},results:[],lastResult:void 0});function We(Pn){++Wn,wa(Pn)}var ot=[],dt=[],Wn=0;if(le==="deleteRange"){if(Ee.type===4)return je({numFailures:Wn,failures:dt,results:[],lastResult:void 0});Ee.type===3?ot.push(De=Ce.clear()):ot.push(De=Ce.delete(E(Ee)))}else{var Ve=Le?Ve?[ye,de]:[ye,null]:[de,null],st=Ve[0],kn=Ve[1];if(Le)for(var un=0;un<qe;++un)ot.push(De=kn&&kn[un]!==void 0?Ce[le](st[un],kn[un]):Ce[le](st[un])),De.onerror=We;else for(un=0;un<qe;++un)ot.push(De=Ce[le](st[un])),De.onerror=We}function co(Pn){Pn=Pn.target.result,ot.forEach(function(qr,Hl){return qr.error!=null&&(dt[Hl]=qr.error)}),je({numFailures:Wn,failures:dt,results:le==="delete"?de:ot.map(function(qr){return qr.result}),lastResult:Pn})}De.onerror=function(Pn){We(Pn),co(Pn)},De.onsuccess=co})},getMany:function(Z){var ne=Z.trans,le=Z.keys;return new Promise(function(de,ye){de=Ut(de);for(var Ee,je=ne.objectStore($),ze=le.length,Ce=new Array(ze),Ve=0,Le=0,De=function(ot){ot=ot.target,Ce[ot._pos]=ot.result,++Le===Ve&&de(Ce)},qe=Zn(ye),We=0;We<ze;++We)le[We]!=null&&((Ee=je.get(le[We]))._pos=We,Ee.onsuccess=De,Ee.onerror=qe,++Ve);Ve===0&&de(Ce)})},get:function(Z){var ne=Z.trans,le=Z.key;return new Promise(function(de,ye){de=Ut(de);var Ee=ne.objectStore($).get(le);Ee.onsuccess=function(je){return de(je.target.result)},Ee.onerror=Zn(ye)})},query:(Q=G,function(Z){return new Promise(function(ne,le){ne=Ut(ne);var de,ye,Ee,Ve=Z.trans,je=Z.values,ze=Z.limit,De=Z.query,Ce=ze===1/0?void 0:ze,Le=De.index,De=De.range,Ve=Ve.objectStore($),Le=Le.isPrimaryKey?Ve:Ve.index(Le.name),De=E(De);if(ze===0)return ne({result:[]});Q?((Ce=je?Le.getAll(De,Ce):Le.getAllKeys(De,Ce)).onsuccess=function(qe){return ne({result:qe.target.result})},Ce.onerror=Zn(le)):(de=0,ye=!je&&"openKeyCursor"in Le?Le.openKeyCursor(De):Le.openCursor(De),Ee=[],ye.onsuccess=function(qe){var We=ye.result;return We?(Ee.push(je?We.value:We.primaryKey),++de===ze?ne({result:Ee}):void We.continue()):ne({result:Ee})},ye.onerror=Zn(le))})}),openCursor:function(Z){var ne=Z.trans,le=Z.values,de=Z.query,ye=Z.reverse,Ee=Z.unique;return new Promise(function(je,ze){je=Ut(je);var Le=de.index,Ce=de.range,Ve=ne.objectStore($),Ve=Le.isPrimaryKey?Ve:Ve.index(Le.name),Le=ye?Ee?"prevunique":"prev":Ee?"nextunique":"next",De=!le&&"openKeyCursor"in Ve?Ve.openKeyCursor(E(Ce),Le):Ve.openCursor(E(Ce),Le);De.onerror=Zn(ze),De.onsuccess=Ut(function(qe){var We,ot,dt,Wn,st=De.result;st?(st.___id=++ua,st.done=!1,We=st.continue.bind(st),ot=(ot=st.continuePrimaryKey)&&ot.bind(st),dt=st.advance.bind(st),Wn=function(){throw new Error("Cursor not stopped")},st.trans=ne,st.stop=st.continue=st.continuePrimaryKey=st.advance=function(){throw new Error("Cursor not started")},st.fail=Ut(ze),st.next=function(){var kn=this,un=1;return this.start(function(){return un--?kn.continue():kn.stop()}).then(function(){return kn})},st.start=function(kn){function un(){if(De.result)try{kn()}catch(Pn){st.fail(Pn)}else st.done=!0,st.start=function(){throw new Error("Cursor behind last entry")},st.stop()}var co=new Promise(function(Pn,qr){Pn=Ut(Pn),De.onerror=Zn(qr),st.fail=qr,st.stop=function(Hl){st.stop=st.continue=st.continuePrimaryKey=st.advance=Wn,Pn(Hl)}});return De.onsuccess=Ut(function(Pn){De.onsuccess=un,un()}),st.continue=We,st.continuePrimaryKey=ot,st.advance=dt,un(),co},je(st)):je(null)},ze)})},count:function(Z){var ne=Z.query,le=Z.trans,de=ne.index,ye=ne.range;return new Promise(function(Ee,je){var ze=le.objectStore($),Ce=de.isPrimaryKey?ze:ze.index(de.name),ze=E(ye),Ce=ze?Ce.count(ze):Ce.count();Ce.onsuccess=Ut(function(Ve){return Ee(Ve.target.result)}),Ce.onerror=Zn(je)})}}}var R,j,P,te=(j=K,P=Ta((R=h).objectStoreNames),{schema:{name:R.name,tables:P.map(function(re){return j.objectStore(re)}).map(function(re){var Q=re.keyPath,ne=re.autoIncrement,$=_(Q),Z={},ne={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:$,keyPath:Q,autoIncrement:ne,unique:!0,extractKey:Ga(Q)},indexes:Ta(re.indexNames).map(function(le){return re.index(le)}).map(function(Ee){var de=Ee.name,ye=Ee.unique,je=Ee.multiEntry,Ee=Ee.keyPath,je={name:de,compound:_(Ee),keyPath:Ee,unique:ye,multiEntry:je,extractKey:Ga(Ee)};return Z[yn(Ee)]=je}),getIndexByKeyPath:function(le){return Z[yn(le)]}};return Z[":id"]=ne.primaryKey,Q!=null&&(Z[yn(Q)]=ne.primaryKey),ne})},hasGetAll:0<P.length&&"getAll"in j.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=te.schema,G=te.hasGetAll,te=K.tables.map(S),U={};return te.forEach(function(re){return U[re.name]=re}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(re){if(!U[re])throw new Error("Table '".concat(re,"' not found"));return U[re]},MIN_KEY:-1/0,MAX_KEY:Ka(d),schema:K}}function Sa(h,d,y,E){var S=y.IDBKeyRange;return y.indexedDB,{dbcore:(E=Qa(d,S,E),h.dbcore.reduce(function(R,j){return j=j.create,s(s({},R),j(R))},E))}}function ca(h,E){var y=E.db,E=Sa(h._middlewares,y,h._deps,E);h.core=E.dbcore,h.tables.forEach(function(S){var R=S.name;h.core.schema.tables.some(function(j){return j.name===R})&&(S.core=h.core.table(R),h[R]instanceof h.Table&&(h[R].core=S.core))})}function li(h,d,y,E){y.forEach(function(S){var R=E[S];d.forEach(function(j){var P=(function K(G,te){return B(G,te)||(G=b(G))&&K(G,te)})(j,S);(!P||"value"in P&&P.value===void 0)&&(j===h.Transaction.prototype||j instanceof h.Transaction?ue(j,S,{get:function(){return this.table(S)},set:function(K){X(this,S,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):j[S]=new h.Table(S,R))})})}function Aa(h,d){d.forEach(function(y){for(var E in y)y[E]instanceof h.Table&&delete y[E]})}function cs(h,d){return h._cfg.version-d._cfg.version}function Na(h,d,y,E){var S=h._dbSchema;y.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=Ha("$meta",so("")[0],[]),h._storeNames.push("$meta"));var R=h._createTransaction("readwrite",h._storeNames,S);R.create(y),R._completion.catch(E);var j=R._reject.bind(R),P=Ue.transless||Ue;Kt(function(){return Ue.trans=R,Ue.transless=P,d!==0?(ca(h,y),G=d,((K=R).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(te){return te??G}):ke.resolve(G)).then(function(te){return re=te,Q=R,$=y,Z=[],te=(U=h)._versions,ne=U._dbSchema=Ra(0,U.idbdb,$),(te=te.filter(function(le){return le._cfg.version>=re})).length!==0?(te.forEach(function(le){Z.push(function(){var de=ne,ye=le._cfg.dbschema;ui(U,de,$),ui(U,ye,$),ne=U._dbSchema=ye;var Ee=Di(de,ye);Ee.add.forEach(function(Le){Ya($,Le[0],Le[1].primKey,Le[1].indexes)}),Ee.change.forEach(function(Le){if(Le.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var De=$.objectStore(Le.name);Le.add.forEach(function(qe){return ji(De,qe)}),Le.change.forEach(function(qe){De.deleteIndex(qe.name),ji(De,qe)}),Le.del.forEach(function(qe){return De.deleteIndex(qe)})});var je=le._cfg.contentUpgrade;if(je&&le._cfg.version>re){ca(U,$),Q._memoizedTables={};var ze=O(ye);Ee.del.forEach(function(Le){ze[Le]=de[Le]}),Aa(U,[U.Transaction.prototype]),li(U,[U.Transaction.prototype],p(ze),ze),Q.schema=ze;var Ce,Ve=H(je);return Ve&&nn(),Ee=ke.follow(function(){var Le;(Ce=je(Q))&&Ve&&(Le=Kn.bind(null,null),Ce.then(Le,Le))}),Ce&&typeof Ce.then=="function"?ke.resolve(Ce):Ee.then(function(){return Ce})}}),Z.push(function(de){var ye,Ee,je=le._cfg.dbschema;ye=je,Ee=de,[].slice.call(Ee.db.objectStoreNames).forEach(function(ze){return ye[ze]==null&&Ee.db.deleteObjectStore(ze)}),Aa(U,[U.Transaction.prototype]),li(U,[U.Transaction.prototype],U._storeNames,U._dbSchema),Q.schema=U._dbSchema}),Z.push(function(de){U.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(U.idbdb.version/10)===le._cfg.version?(U.idbdb.deleteObjectStore("$meta"),delete U._dbSchema.$meta,U._storeNames=U._storeNames.filter(function(ye){return ye!=="$meta"})):de.objectStore("$meta").put(le._cfg.version,"version"))})}),(function le(){return Z.length?ke.resolve(Z.shift()(Q.idbtrans)).then(le):ke.resolve()})().then(function(){io(ne,$)})):ke.resolve();var U,re,Q,$,Z,ne}).catch(j)):(p(S).forEach(function(te){Ya(y,te,S[te].primKey,S[te].indexes)}),ca(h,y),void ke.follow(function(){return h.on.populate.fire(R)}).catch(j));var K,G})}function hs(h,d){io(h._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var y=Ra(0,h.idbdb,d);ui(h,h._dbSchema,d);for(var E=0,S=Di(y,h._dbSchema).change;E<S.length;E++){var R=(function(j){if(j.change.length||j.recreate)return console.warn("Unable to patch indexes of table ".concat(j.name," because it has changes on the type of index or primary key.")),{value:void 0};var P=d.objectStore(j.name);j.add.forEach(function(K){wn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(j.name,".").concat(K.src)),ji(P,K)})})(S[E]);if(typeof R=="object")return R.value}}function Di(h,d){var y,E={del:[],add:[],change:[]};for(y in h)d[y]||E.del.push(y);for(y in d){var S=h[y],R=d[y];if(S){var j={name:y,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||S.primKey.auto!==R.primKey.auto)j.recreate=!0,E.change.push(j);else{var P=S.idxByName,K=R.idxByName,G=void 0;for(G in P)K[G]||j.del.push(G);for(G in K){var te=P[G],U=K[G];te?te.src!==U.src&&j.change.push(U):j.add.push(U)}(0<j.del.length||0<j.add.length||0<j.change.length)&&E.change.push(j)}}else E.add.push([y,R])}return E}function Ya(h,d,y,E){var S=h.db.createObjectStore(d,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});return E.forEach(function(R){return ji(S,R)}),S}function io(h,d){p(h).forEach(function(y){d.db.objectStoreNames.contains(y)||(wn&&console.debug("Dexie: Creating missing table",y),Ya(d,y,h[y].primKey,h[y].indexes))})}function ji(h,d){h.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function Ra(h,d,y){var E={};return ee(d.objectStoreNames,0).forEach(function(S){for(var R=y.objectStore(S),j=Pr(us(G=R.keyPath),G||"",!0,!1,!!R.autoIncrement,G&&typeof G!="string",!0),P=[],K=0;K<R.indexNames.length;++K){var te=R.index(R.indexNames[K]),G=te.keyPath,te=Pr(te.name,G,!!te.unique,!!te.multiEntry,!1,G&&typeof G!="string",!1);P.push(te)}E[S]=Ha(S,j,P)}),E}function ui(h,d,y){for(var E=y.db.objectStoreNames,S=0;S<E.length;++S){var R=E[S],j=y.objectStore(R);h._hasGetAll="getAll"in j;for(var P=0;P<j.indexNames.length;++P){var K=j.indexNames[P],G=j.index(K).keyPath,te=typeof G=="string"?G:"["+ee(G).join("+")+"]";!d[R]||(G=d[R].idxByName[te])&&(G.name=K,delete d[R].idxByName[te],d[R].idxByName[K]=G)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function so(h){return h.split(",").map(function(d,y){var R=d.split(":"),E=(S=R[1])===null||S===void 0?void 0:S.trim(),S=(d=R[0].trim()).replace(/([&*]|\+\+)/g,""),R=/^\[/.test(S)?S.match(/^\[(.*)\]$/)[1].split("+"):S;return Pr(S,R||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),_(R),y===0,E)})}var fs=(Xa.prototype._createTableSchema=Ha,Xa.prototype._parseIndexSyntax=so,Xa.prototype._parseStoresSpec=function(h,d){var y=this;p(h).forEach(function(E){if(h[E]!==null){var S=y._parseIndexSyntax(h[E]),R=S.shift();if(!R)throw new Oe.Schema("Invalid schema for table "+E+": "+h[E]);if(R.unique=!0,R.multi)throw new Oe.Schema("Primary key cannot be multiEntry*");S.forEach(function(j){if(j.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!j.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),S=y._createTableSchema(E,R,S),d[E]=S}})},Xa.prototype.stores=function(y){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,y):y;var y=d._versions,E={},S={};return y.forEach(function(R){v(E,R._cfg.storesSource),S=R._cfg.dbschema={},R._parseStoresSpec(E,S)}),d._dbSchema=S,Aa(d,[d._allTables,d,d.Transaction.prototype]),li(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],p(S),S),d._storeNames=p(S),this},Xa.prototype.upgrade=function(h){return this._cfg.contentUpgrade=Mt(this._cfg.contentUpgrade||Ge,h),this},Xa);function Xa(){}function ds(h,d){var y=h._dbNamesDB;return y||(y=h._dbNamesDB=new Da(ii,{addons:[],indexedDB:h,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function Lr(h){return h&&typeof h.databases=="function"}function ms(h){return Kt(function(){return Ue.letThrough=!0,h()})}function ps(h){return!("from"in h)}var Rn=function(h,d){if(!this){var y=new Rn;return h&&"d"in h&&v(y,h),y}v(this,arguments.length?{d:1,from:h,to:1<arguments.length?d:h}:{d:0})};function ci(h,d,y){var E=ft(d,y);if(!isNaN(E)){if(0<E)throw RangeError();if(ps(h))return v(h,{from:d,to:y,d:1});var S=h.l,E=h.r;if(ft(y,h.from)<0)return S?ci(S,d,y):h.l={from:d,to:y,d:1,l:null,r:null},oo(h);if(0<ft(d,h.to))return E?ci(E,d,y):h.r={from:d,to:y,d:1,l:null,r:null},oo(h);ft(d,h.from)<0&&(h.from=d,h.l=null,h.d=E?E.d+1:1),0<ft(y,h.to)&&(h.to=y,h.r=null,h.d=h.l?h.l.d+1:1),y=!h.r,S&&!h.l&&zr(h,S),E&&y&&zr(h,E)}}function zr(h,d){ps(d)||(function y(E,K){var R=K.from,j=K.to,P=K.l,K=K.r;ci(E,R,j),P&&y(E,P),K&&y(E,K)})(h,d)}function Jn(h,d){var y=Ii(d),E=y.next();if(E.done)return!1;for(var S=E.value,R=Ii(h),j=R.next(S.from),P=j.value;!E.done&&!j.done;){if(ft(P.from,S.to)<=0&&0<=ft(P.to,S.from))return!0;ft(S.from,P.from)<0?S=(E=y.next(P.from)).value:P=(j=R.next(S.from)).value}return!1}function Ii(h){var d=ps(h)?null:{s:0,n:h};return{next:function(y){for(var E=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,E)for(;d.n.l&&ft(y,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!E||ft(y,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function oo(h){var d,y,E=(((d=h.r)===null||d===void 0?void 0:d.d)||0)-(((y=h.l)===null||y===void 0?void 0:y.d)||0),S=1<E?"r":E<-1?"l":"";S&&(d=S=="r"?"l":"r",y=s({},h),E=h[S],h.from=E.from,h.to=E.to,h[S]=E[S],y[S]=E[d],(h[d]=y).d=Ca(y)),h.d=Ca(h)}function Ca(y){var d=y.r,y=y.l;return(d?y?Math.max(d.d,y.d):d.d:y?y.d:0)+1}function c(h,d){return p(d).forEach(function(y){h[y]?zr(h[y],d[y]):h[y]=(function E(S){var R,j,P={};for(R in S)N(S,R)&&(j=S[R],P[R]=!j||typeof j!="object"||q.has(j.constructor)?j:E(j));return P})(d[y])}),h}function x(h,d){return h.all||d.all||Object.keys(h).some(function(y){return d[y]&&Jn(d[y],h[y])})}I(Rn.prototype,((Sr={add:function(h){return zr(this,h),this},addKey:function(h){return ci(this,h,h),this},addKeys:function(h){var d=this;return h.forEach(function(y){return ci(d,y,y)}),this},hasKey:function(h){var d=Ii(this).next(h).value;return d&&ft(d.from,h)<=0&&0<=ft(d.to,h)}})[W]=function(){return Ii(this)},Sr));var T={},D={},se=!1;function pe(h){c(D,h),se||(se=!0,setTimeout(function(){se=!1,Me(D,!(D={}))},0))}function Me(h,d){d===void 0&&(d=!1);var y=new Set;if(h.all)for(var E=0,S=Object.values(T);E<S.length;E++)lt(j=S[E],h,y,d);else for(var R in h){var j,P=/^idb\:\/\/(.*)\/(.*)\//.exec(R);P&&(R=P[1],P=P[2],(j=T["idb://".concat(R,"/").concat(P)])&&lt(j,h,y,d))}y.forEach(function(K){return K()})}function lt(h,d,y,E){for(var S=[],R=0,j=Object.entries(h.queries.query);R<j.length;R++){for(var P=j[R],K=P[0],G=[],te=0,U=P[1];te<U.length;te++){var re=U[te];x(d,re.obsSet)?re.subscribers.forEach(function(ne){return y.add(ne)}):E&&G.push(re)}E&&S.push([K,G])}if(E)for(var Q=0,$=S;Q<$.length;Q++){var Z=$[Q],K=Z[0],G=Z[1];h.queries.query[K]=G}}function vn(h){var d=h._state,y=h._deps.indexedDB;if(d.isBeingOpened||h.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?jt(d.dbOpenError):h});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var E=d.openCanceller,S=Math.round(10*h.verno),R=!1;function j(){if(d.openCanceller!==E)throw new Oe.DatabaseClosed("db.open() was cancelled")}function P(){return new ke(function(re,Q){if(j(),!y)throw new Oe.MissingAPI;var $=h.name,Z=d.autoSchema||!S?y.open($):y.open($,S);if(!Z)throw new Oe.MissingAPI;Z.onerror=Zn(Q),Z.onblocked=Ut(h._fireOnBlocked),Z.onupgradeneeded=Ut(function(ne){var le;te=Z.transaction,d.autoSchema&&!h._options.allowEmptyDB?(Z.onerror=wa,te.abort(),Z.result.close(),(le=y.deleteDatabase($)).onsuccess=le.onerror=Ut(function(){Q(new Oe.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(te.onerror=Zn(Q),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,U=ne<1,h.idbdb=Z.result,R&&hs(h,te),Na(h,ne/10,te,Q))},Q),Z.onsuccess=Ut(function(){te=null;var ne,le,de,ye,Ee,je=h.idbdb=Z.result,ze=ee(je.objectStoreNames);if(0<ze.length)try{var Ce=je.transaction((ye=ze).length===1?ye[0]:ye,"readonly");if(d.autoSchema)le=je,de=Ce,(ne=h).verno=le.version/10,de=ne._dbSchema=Ra(0,le,de),ne._storeNames=ee(le.objectStoreNames,0),li(ne,[ne._allTables],p(de),de);else if(ui(h,h._dbSchema,Ce),((Ee=Di(Ra(0,(Ee=h).idbdb,Ce),Ee._dbSchema)).add.length||Ee.change.some(function(Ve){return Ve.add.length||Ve.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),je.close(),S=je.version+1,R=!0,re(P());ca(h,Ce)}catch{}Ea.push(h),je.onversionchange=Ut(function(Ve){d.vcFired=!0,h.on("versionchange").fire(Ve)}),je.onclose=Ut(function(){h.close({disableAutoOpen:!1})}),U&&(Ee=h._deps,Ce=$,je=Ee.indexedDB,Ee=Ee.IDBKeyRange,Lr(je)||Ce===ii||ds(je,Ee).put({name:Ce}).catch(Ge)),re()},Q)}).catch(function(re){switch(re?.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),P();break;case"VersionError":if(0<S)return S=0,P()}return ke.reject(re)})}var K,G=d.dbReadyResolve,te=null,U=!1;return ke.race([E,(typeof navigator>"u"?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function Q(){return indexedDB.databases().finally(re)}K=setInterval(Q,100),Q()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(P)]).then(function(){return j(),d.onReadyBeingFired=[],ke.resolve(ms(function(){return h.on.ready.fire(h.vip)})).then(function re(){if(0<d.onReadyBeingFired.length){var Q=d.onReadyBeingFired.reduce(Mt,Ge);return d.onReadyBeingFired=[],ke.resolve(ms(function(){return Q(h.vip)})).then(re)}})}).finally(function(){d.openCanceller===E&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(re){d.dbOpenError=re;try{te&&te.abort()}catch{}return E===d.openCanceller&&h._close(),jt(re)}).finally(function(){d.openComplete=!0,G()}).then(function(){var re;return U&&(re={},h.tables.forEach(function(Q){Q.schema.indexes.forEach(function($){$.name&&(re["idb://".concat(h.name,"/").concat(Q.name,"/").concat($.name)]=new Rn(-1/0,[[[]]]))}),re["idb://".concat(h.name,"/").concat(Q.name,"/")]=re["idb://".concat(h.name,"/").concat(Q.name,"/:dels")]=new Rn(-1/0,[[[]]])}),Nn(kr).fire(re),Me(re,!0)),h})}function Ct(h){function d(R){return h.next(R)}var y=S(d),E=S(function(R){return h.throw(R)});function S(R){return function(K){var P=R(K),K=P.value;return P.done?K:K&&typeof K.then=="function"?K.then(y,E):_(K)?Promise.all(K).then(y,E):y(K)}}return S(d)()}function Qt(h,d,y){for(var E=_(h)?h.slice():[h],S=0;S<y;++S)E.push(d);return E}var Ur={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return s(s({},h),{table:function(d){var y=h.table(d),E=y.schema,S={},R=[];function j(U,re,Q){var $=yn(U),Z=S[$]=S[$]||[],ne=U==null?0:typeof U=="string"?1:U.length,le=0<re,le=s(s({},Q),{name:le?"".concat($,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:le,keyTail:re,keyLength:ne,extractKey:Ga(U),unique:!le&&Q.unique});return Z.push(le),le.isPrimaryKey||R.push(le),1<ne&&j(ne===2?U[0]:U.slice(0,ne-1),re+1,Q),Z.sort(function(de,ye){return de.keyTail-ye.keyTail}),le}d=j(E.primaryKey.keyPath,0,E.primaryKey),S[":id"]=[d];for(var P=0,K=E.indexes;P<K.length;P++){var G=K[P];j(G.keyPath,0,G)}function te(U){var re,Q=U.query.index;return Q.isVirtual?s(s({},U),{query:{index:Q.lowLevelIndex,range:(re=U.query.range,Q=Q.keyTail,{type:re.type===1?2:re.type,lower:Qt(re.lower,re.lowerOpen?h.MAX_KEY:h.MIN_KEY,Q),lowerOpen:!0,upper:Qt(re.upper,re.upperOpen?h.MIN_KEY:h.MAX_KEY,Q),upperOpen:!0})}}):U}return s(s({},y),{schema:s(s({},E),{primaryKey:d,indexes:R,getIndexByKeyPath:function(U){return(U=S[yn(U)])&&U[0]}}),count:function(U){return y.count(te(U))},query:function(U){return y.query(te(U))},openCursor:function(U){var re=U.query.index,Q=re.keyTail,$=re.isVirtual,Z=re.keyLength;return $?y.openCursor(te(U)).then(function(le){return le&&ne(le)}):y.openCursor(U);function ne(le){return Object.create(le,{continue:{value:function(de){de!=null?le.continue(Qt(de,U.reverse?h.MAX_KEY:h.MIN_KEY,Q)):U.unique?le.continue(le.key.slice(0,Z).concat(U.reverse?h.MIN_KEY:h.MAX_KEY,Q)):le.continue()}},continuePrimaryKey:{value:function(de,ye){le.continuePrimaryKey(Qt(de,h.MAX_KEY,Q),ye)}},primaryKey:{get:function(){return le.primaryKey}},key:{get:function(){var de=le.key;return Z===1?de[0]:de.slice(0,Z)}},value:{get:function(){return le.value}}})}}})}})}};function Br(h,d,y,E){return y=y||{},E=E||"",p(h).forEach(function(S){var R,j,P;N(d,S)?(R=h[S],j=d[S],typeof R=="object"&&typeof j=="object"&&R&&j?(P=Nt(R))!==Nt(j)?y[E+S]=d[S]:P==="Object"?Br(R,j,y,E+S+"."):R!==j&&(y[E+S]=d[S]):R!==j&&(y[E+S]=d[S])):y[E+S]=void 0}),p(d).forEach(function(S){N(h,S)||(y[E+S]=d[S])}),y}function Tr(h,d){return d.type==="delete"?d.keys:d.keys||d.values.map(h.extractKey)}var ha={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return s(s({},h),{table:function(d){var y=h.table(d),E=y.schema.primaryKey;return s(s({},y),{mutate:function(S){var R=Ue.trans,j=R.table(d).hook,P=j.deleting,K=j.creating,G=j.updating;switch(S.type){case"add":if(K.fire===Ge)break;return R._promise("readwrite",function(){return te(S)},!0);case"put":if(K.fire===Ge&&G.fire===Ge)break;return R._promise("readwrite",function(){return te(S)},!0);case"delete":if(P.fire===Ge)break;return R._promise("readwrite",function(){return te(S)},!0);case"deleteRange":if(P.fire===Ge)break;return R._promise("readwrite",function(){return(function U(re,Q,$){return y.query({trans:re,values:!1,query:{index:E,range:Q},limit:$}).then(function(Z){var ne=Z.result;return te({type:"delete",keys:ne,trans:re}).then(function(le){return 0<le.numFailures?Promise.reject(le.failures[0]):ne.length<$?{failures:[],numFailures:0,lastResult:void 0}:U(re,s(s({},Q),{lower:ne[ne.length-1],lowerOpen:!0}),$)})})})(S.trans,S.range,1e4)},!0)}return y.mutate(S);function te(U){var re,Q,$,Z=Ue.trans,ne=U.keys||Tr(E,U);if(!ne)throw new Error("Keys missing");return(U=U.type==="add"||U.type==="put"?s(s({},U),{keys:ne}):s({},U)).type!=="delete"&&(U.values=l([],U.values)),U.keys&&(U.keys=l([],U.keys)),re=y,$=ne,((Q=U).type==="add"?Promise.resolve([]):re.getMany({trans:Q.trans,keys:$,cache:"immutable"})).then(function(le){var de=ne.map(function(ye,Ee){var je,ze,Ce,Ve=le[Ee],Le={onerror:null,onsuccess:null};return U.type==="delete"?P.fire.call(Le,ye,Ve,Z):U.type==="add"||Ve===void 0?(je=K.fire.call(Le,ye,U.values[Ee],Z),ye==null&&je!=null&&(U.keys[Ee]=ye=je,E.outbound||M(U.values[Ee],E.keyPath,ye))):(je=Br(Ve,U.values[Ee]),(ze=G.fire.call(Le,je,ye,Ve,Z))&&(Ce=U.values[Ee],Object.keys(ze).forEach(function(De){N(Ce,De)?Ce[De]=ze[De]:M(Ce,De,ze[De])}))),Le});return y.mutate(U).then(function(ye){for(var Ee=ye.failures,je=ye.results,ze=ye.numFailures,ye=ye.lastResult,Ce=0;Ce<ne.length;++Ce){var Ve=(je||ne)[Ce],Le=de[Ce];Ve==null?Le.onerror&&Le.onerror(Ee[Ce]):Le.onsuccess&&Le.onsuccess(U.type==="put"&&le[Ce]?U.values[Ce]:Ve)}return{failures:Ee,results:je,numFailures:ze,lastResult:ye}}).catch(function(ye){return de.forEach(function(Ee){return Ee.onerror&&Ee.onerror(ye)}),Promise.reject(ye)})})}}})}})}};function hi(h,d,y){try{if(!d||d.keys.length<h.length)return null;for(var E=[],S=0,R=0;S<d.keys.length&&R<h.length;++S)ft(d.keys[S],h[R])===0&&(E.push(y?k(d.values[S]):d.values[S]),++R);return E.length===h.length?E:null}catch{return null}}var gs={stack:"dbcore",level:-1,create:function(h){return{table:function(d){var y=h.table(d);return s(s({},y),{getMany:function(E){if(!E.cache)return y.getMany(E);var S=hi(E.keys,E.trans._cache,E.cache==="clone");return S?ke.resolve(S):y.getMany(E).then(function(R){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?k(R):R},R})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),y.mutate(E)}})}}}};function Oi(h,d){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function Ju(h,d){switch(h){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var uf={stack:"dbcore",level:0,name:"Observability",create:function(h){var d=h.schema.name,y=new Rn(h.MIN_KEY,h.MAX_KEY);return s(s({},h),{transaction:function(E,S,R){if(Ue.subscr&&S!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ue.querier));return h.transaction(E,S,R)},table:function(E){var S=h.table(E),R=S.schema,j=R.primaryKey,U=R.indexes,P=j.extractKey,K=j.outbound,G=j.autoIncrement&&U.filter(function(Q){return Q.compound&&Q.keyPath.includes(j.keyPath)}),te=s(s({},S),{mutate:function(Q){function $(De){return De="idb://".concat(d,"/").concat(E,"/").concat(De),ye[De]||(ye[De]=new Rn)}var Z,ne,le,de=Q.trans,ye=Q.mutatedParts||(Q.mutatedParts={}),Ee=$(""),je=$(":dels"),ze=Q.type,Le=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[Tr(j,Q).filter(function(De){return De}),Q.values]:[],Ce=Le[0],Ve=Le[1],Le=Q.trans._cache;return _(Ce)?(Ee.addKeys(Ce),(Le=ze==="delete"||Ce.length===Ve.length?hi(Ce,Le):null)||je.addKeys(Ce),(Le||Ve)&&(Z=$,ne=Le,le=Ve,R.indexes.forEach(function(De){var qe=Z(De.name||"");function We(dt){return dt!=null?De.extractKey(dt):null}function ot(dt){return De.multiEntry&&_(dt)?dt.forEach(function(Wn){return qe.addKey(Wn)}):qe.addKey(dt)}(ne||le).forEach(function(dt,kn){var st=ne&&We(ne[kn]),kn=le&&We(le[kn]);ft(st,kn)!==0&&(st!=null&&ot(st),kn!=null&&ot(kn))})}))):Ce?(Ve={from:(Ve=Ce.lower)!==null&&Ve!==void 0?Ve:h.MIN_KEY,to:(Ve=Ce.upper)!==null&&Ve!==void 0?Ve:h.MAX_KEY},je.add(Ve),Ee.add(Ve)):(Ee.add(y),je.add(y),R.indexes.forEach(function(De){return $(De.name).add(y)})),S.mutate(Q).then(function(De){return!Ce||Q.type!=="add"&&Q.type!=="put"||(Ee.addKeys(De.results),G&&G.forEach(function(qe){for(var We=Q.values.map(function(st){return qe.extractKey(st)}),ot=qe.keyPath.findIndex(function(st){return st===j.keyPath}),dt=0,Wn=De.results.length;dt<Wn;++dt)We[dt][ot]=De.results[dt];$(qe.name).addKeys(We)})),de.mutatedParts=c(de.mutatedParts||{},ye),De})}}),U=function($){var Z=$.query,$=Z.index,Z=Z.range;return[$,new Rn(($=Z.lower)!==null&&$!==void 0?$:h.MIN_KEY,(Z=Z.upper)!==null&&Z!==void 0?Z:h.MAX_KEY)]},re={get:function(Q){return[j,new Rn(Q.key)]},getMany:function(Q){return[j,new Rn().addKeys(Q.keys)]},count:U,query:U,openCursor:U};return p(re).forEach(function(Q){te[Q]=function($){var Z=Ue.subscr,ne=!!Z,le=Oi(Ue,S)&&Ju(Q,$)?$.obsSet={}:Z;if(ne){var de=function(Ve){return Ve="idb://".concat(d,"/").concat(E,"/").concat(Ve),le[Ve]||(le[Ve]=new Rn)},ye=de(""),Ee=de(":dels"),Z=re[Q]($),ne=Z[0],Z=Z[1];if((Q==="query"&&ne.isPrimaryKey&&!$.values?Ee:de(ne.name||"")).add(Z),!ne.isPrimaryKey){if(Q!=="count"){var je=Q==="query"&&K&&$.values&&S.query(s(s({},$),{values:!1}));return S[Q].apply(this,arguments).then(function(Ve){if(Q==="query"){if(K&&$.values)return je.then(function(We){return We=We.result,ye.addKeys(We),Ve});var Le=$.values?Ve.result.map(P):Ve.result;($.values?ye:Ee).addKeys(Le)}else if(Q==="openCursor"){var De=Ve,qe=$.values;return De&&Object.create(De,{key:{get:function(){return Ee.addKey(De.primaryKey),De.key}},primaryKey:{get:function(){var We=De.primaryKey;return Ee.addKey(We),We}},value:{get:function(){return qe&&ye.addKey(De.primaryKey),De.value}}})}return Ve})}Ee.add(y)}}return S[Q].apply(this,arguments)}}),te}})}};function Wu(h,d,y){if(y.numFailures===0)return d;if(d.type==="deleteRange")return null;var E=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return y.numFailures===E?null:(d=s({},d),_(d.keys)&&(d.keys=d.keys.filter(function(S,R){return!(R in y.failures)})),"values"in d&&_(d.values)&&(d.values=d.values.filter(function(S,R){return!(R in y.failures)})),d)}function qo(h,d){return y=h,((E=d).lower===void 0||(E.lowerOpen?0<ft(y,E.lower):0<=ft(y,E.lower)))&&(h=h,(d=d).upper===void 0||(d.upperOpen?ft(h,d.upper)<0:ft(h,d.upper)<=0));var y,E}function ql(h,d,re,E,S,R){if(!re||re.length===0)return h;var j=d.query.index,P=j.multiEntry,K=d.query.range,G=E.schema.primaryKey.extractKey,te=j.extractKey,U=(j.lowLevelIndex||j).extractKey,re=re.reduce(function(Q,$){var Z=Q,ne=[];if($.type==="add"||$.type==="put")for(var le=new Rn,de=$.values.length-1;0<=de;--de){var ye,Ee=$.values[de],je=G(Ee);le.hasKey(je)||(ye=te(Ee),(P&&_(ye)?ye.some(function(De){return qo(De,K)}):qo(ye,K))&&(le.addKey(je),ne.push(Ee)))}switch($.type){case"add":var ze=new Rn().addKeys(d.values?Q.map(function(qe){return G(qe)}):Q),Z=Q.concat(d.values?ne.filter(function(qe){return qe=G(qe),!ze.hasKey(qe)&&(ze.addKey(qe),!0)}):ne.map(function(qe){return G(qe)}).filter(function(qe){return!ze.hasKey(qe)&&(ze.addKey(qe),!0)}));break;case"put":var Ce=new Rn().addKeys($.values.map(function(qe){return G(qe)}));Z=Q.filter(function(qe){return!Ce.hasKey(d.values?G(qe):qe)}).concat(d.values?ne:ne.map(function(qe){return G(qe)}));break;case"delete":var Ve=new Rn().addKeys($.keys);Z=Q.filter(function(qe){return!Ve.hasKey(d.values?G(qe):qe)});break;case"deleteRange":var Le=$.range;Z=Q.filter(function(qe){return!qo(G(qe),Le)})}return Z},h);return re===h?h:(re.sort(function(Q,$){return ft(U(Q),U($))||ft(G(Q),G($))}),d.limit&&d.limit<1/0&&(re.length>d.limit?re.length=d.limit:h.length===d.limit&&re.length<d.limit&&(S.dirty=!0)),R?Object.freeze(re):re)}function ys(h,d){return ft(h.lower,d.lower)===0&&ft(h.upper,d.upper)===0&&!!h.lowerOpen==!!d.lowerOpen&&!!h.upperOpen==!!d.upperOpen}function lo(h,d){return(function(y,E,S,R){if(y===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=ft(y,E))===0){if(S&&R)return 0;if(S)return 1;if(R)return-1}return E})(h.lower,d.lower,h.lowerOpen,d.lowerOpen)<=0&&0<=(function(y,E,S,R){if(y===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=ft(y,E))===0){if(S&&R)return 0;if(S)return-1;if(R)return 1}return E})(h.upper,d.upper,h.upperOpen,d.upperOpen)}function cf(h,d,y,E){h.subscribers.add(y),E.addEventListener("abort",function(){var S,R;h.subscribers.delete(y),h.subscribers.size===0&&(S=h,R=d,setTimeout(function(){S.subscribers.size===0&&Ne(R,S)},3e3))})}var Fo={stack:"dbcore",level:0,name:"Cache",create:function(h){var d=h.schema.name;return s(s({},h),{transaction:function(y,E,S){var R,j,P=h.transaction(y,E,S);return E==="readwrite"&&(j=(R=new AbortController).signal,S=function(K){return function(){if(R.abort(),E==="readwrite"){for(var G=new Set,te=0,U=y;te<U.length;te++){var re=U[te],Q=T["idb://".concat(d,"/").concat(re)];if(Q){var $=h.table(re),Z=Q.optimisticOps.filter(function(qe){return qe.trans===P});if(P._explicit&&K&&P.mutatedParts)for(var ne=0,le=Object.values(Q.queries.query);ne<le.length;ne++)for(var de=0,ye=(ze=le[ne]).slice();de<ye.length;de++)x((Ce=ye[de]).obsSet,P.mutatedParts)&&(Ne(ze,Ce),Ce.subscribers.forEach(function(qe){return G.add(qe)}));else if(0<Z.length){Q.optimisticOps=Q.optimisticOps.filter(function(qe){return qe.trans!==P});for(var Ee=0,je=Object.values(Q.queries.query);Ee<je.length;Ee++)for(var ze,Ce,Ve,Le=0,De=(ze=je[Ee]).slice();Le<De.length;Le++)(Ce=De[Le]).res!=null&&P.mutatedParts&&(K&&!Ce.dirty?(Ve=Object.isFrozen(Ce.res),Ve=ql(Ce.res,Ce.req,Z,$,Ce,Ve),Ce.dirty?(Ne(ze,Ce),Ce.subscribers.forEach(function(qe){return G.add(qe)})):Ve!==Ce.res&&(Ce.res=Ve,Ce.promise=ke.resolve({result:Ve}))):(Ce.dirty&&Ne(ze,Ce),Ce.subscribers.forEach(function(qe){return G.add(qe)})))}}}G.forEach(function(qe){return qe()})}}},P.addEventListener("abort",S(!1),{signal:j}),P.addEventListener("error",S(!1),{signal:j}),P.addEventListener("complete",S(!0),{signal:j})),P},table:function(y){var E=h.table(y),S=E.schema.primaryKey;return s(s({},E),{mutate:function(R){var j=Ue.trans;if(S.outbound||j.db._options.cache==="disabled"||j.explicit||j.idbtrans.mode!=="readwrite")return E.mutate(R);var P=T["idb://".concat(d,"/").concat(y)];return P?(j=E.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||Tr(S,R).some(function(K){return K==null}))?(P.optimisticOps.push(R),R.mutatedParts&&pe(R.mutatedParts),j.then(function(K){0<K.numFailures&&(Ne(P.optimisticOps,R),(K=Wu(0,R,K))&&P.optimisticOps.push(K),R.mutatedParts&&pe(R.mutatedParts))}),j.catch(function(){Ne(P.optimisticOps,R),R.mutatedParts&&pe(R.mutatedParts)})):j.then(function(K){var G=Wu(0,s(s({},R),{values:R.values.map(function(te,U){var re;return K.failures[U]?te:(te=(re=S.keyPath)!==null&&re!==void 0&&re.includes(".")?k(te):s({},te),M(te,S.keyPath,K.results[U]),te)})}),K);P.optimisticOps.push(G),queueMicrotask(function(){return R.mutatedParts&&pe(R.mutatedParts)})}),j):E.mutate(R)},query:function(R){if(!Oi(Ue,E)||!Ju("query",R))return E.query(R);var j=((G=Ue.trans)===null||G===void 0?void 0:G.db._options.cache)==="immutable",U=Ue,P=U.requery,K=U.signal,G=(function($,Z,ne,le){var de=T["idb://".concat($,"/").concat(Z)];if(!de)return[];if(!(Z=de.queries[ne]))return[null,!1,de,null];var ye=Z[(le.query?le.query.index.name:null)||""];if(!ye)return[null,!1,de,null];switch(ne){case"query":var Ee=ye.find(function(je){return je.req.limit===le.limit&&je.req.values===le.values&&ys(je.req.query.range,le.query.range)});return Ee?[Ee,!0,de,ye]:[ye.find(function(je){return("limit"in je.req?je.req.limit:1/0)>=le.limit&&(!le.values||je.req.values)&&lo(je.req.query.range,le.query.range)}),!1,de,ye];case"count":return Ee=ye.find(function(je){return ys(je.req.query.range,le.query.range)}),[Ee,!!Ee,de,ye]}})(d,y,"query",R),te=G[0],U=G[1],re=G[2],Q=G[3];return te&&U?te.obsSet=R.obsSet:(U=E.query(R).then(function($){var Z=$.result;if(te&&(te.res=Z),j){for(var ne=0,le=Z.length;ne<le;++ne)Object.freeze(Z[ne]);Object.freeze(Z)}else $.result=k(Z);return $}).catch(function($){return Q&&te&&Ne(Q,te),Promise.reject($)}),te={obsSet:R.obsSet,promise:U,subscribers:new Set,type:"query",req:R,dirty:!1},Q?Q.push(te):(Q=[te],(re=re||(T["idb://".concat(d,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=Q)),cf(te,Q,P,K),te.promise.then(function($){return{result:ql($.result,R,re?.optimisticOps,E,te,j)}})}})}})}};function uo(h,d){return new Proxy(h,{get:function(y,E,S){return E==="db"?d:Reflect.get(y,E,S)}})}var Da=(rn.prototype.version=function(h){if(isNaN(h)||h<.1)throw new Oe.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var d=this._versions,y=d.filter(function(E){return E._cfg.version===h})[0];return y||(y=new this.Version(h),d.push(y),d.sort(cs),y.stores({}),this._state.autoSchema=!1,y)},rn.prototype._whenReady=function(h){var d=this;return this.idbdb&&(this._state.openComplete||Ue.letThrough||this._vip)?h():new ke(function(y,E){if(d._state.openComplete)return E(new Oe.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void E(new Oe.DatabaseClosed);d.open().catch(Ge)}d._state.dbReadyPromise.then(y,E)}).then(h)},rn.prototype.use=function(h){var d=h.stack,y=h.create,E=h.level,S=h.name;return S&&this.unuse({stack:d,name:S}),h=this._middlewares[d]||(this._middlewares[d]=[]),h.push({stack:d,create:y,level:E??10,name:S}),h.sort(function(R,j){return R.level-j.level}),this},rn.prototype.unuse=function(h){var d=h.stack,y=h.name,E=h.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(S){return E?S.create!==E:!!y&&S.name!==y})),this},rn.prototype.open=function(){var h=this;return $n(Sn,function(){return vn(h)})},rn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,d=Ea.indexOf(this);if(0<=d&&Ea.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new ke(function(y){h.dbReadyResolve=y}),h.openCanceller=new ke(function(y,E){h.cancelOpen=E}))},rn.prototype.close=function(y){var d=(y===void 0?{disableAutoOpen:!0}:y).disableAutoOpen,y=this._state;d?(y.isBeingOpened&&y.cancelOpen(new Oe.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new Oe.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},rn.prototype.delete=function(h){var d=this;h===void 0&&(h={disableAutoOpen:!0});var y=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new ke(function(S,R){function j(){d.close(h);var P=d._deps.indexedDB.deleteDatabase(d.name);P.onsuccess=Ut(function(){var K,G,te;K=d._deps,G=d.name,te=K.indexedDB,K=K.IDBKeyRange,Lr(te)||G===ii||ds(te,K).delete(G).catch(Ge),S()}),P.onerror=Zn(R),P.onblocked=d._fireOnBlocked}if(y)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(j):j()})},rn.prototype.backendDB=function(){return this.idbdb},rn.prototype.isOpen=function(){return this.idbdb!==null},rn.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},rn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},rn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rn.prototype,"tables",{get:function(){var h=this;return p(this._allTables).map(function(d){return h._allTables[d]})},enumerable:!1,configurable:!0}),rn.prototype.transaction=function(){var h=(function(d,y,E){var S=arguments.length;if(S<2)throw new Oe.InvalidArgument("Too few arguments");for(var R=new Array(S-1);--S;)R[S-1]=arguments[S];return E=R.pop(),[d,F(R),E]}).apply(this,arguments);return this._transaction.apply(this,h)},rn.prototype._transaction=function(h,d,y){var E=this,S=Ue.trans;S&&S.db===this&&h.indexOf("!")===-1||(S=null);var R,j,P=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(j=d.map(function(G){if(G=G instanceof E.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),h=="r"||h===Ir)R=Ir;else{if(h!="rw"&&h!=Or)throw new Oe.InvalidArgument("Invalid transaction mode: "+h);R=Or}if(S){if(S.mode===Ir&&R===Or){if(!P)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&j.forEach(function(G){if(S&&S.storeNames.indexOf(G)===-1){if(!P)throw new Oe.SubTransaction("Table "+G+" not included in parent transaction.");S=null}}),P&&S&&!S.active&&(S=null)}}catch(G){return S?S._promise(null,function(te,U){U(G)}):jt(G)}var K=(function G(te,U,re,Q,$){return ke.resolve().then(function(){var Z=Ue.transless||Ue,ne=te._createTransaction(U,re,te._dbSchema,Q);if(ne.explicit=!0,Z={trans:ne,transless:Z},Q)ne.idbtrans=Q.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,te._state.PR1398_maxLoop=3}catch(ye){return ye.name===rt.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return G(te,U,re,null,$)})):jt(ye)}var le,de=H($);return de&&nn(),Z=ke.follow(function(){var ye;(le=$.call(ne,ne))&&(de?(ye=Kn.bind(null,null),le.then(ye,ye)):typeof le.next=="function"&&typeof le.throw=="function"&&(le=Ct(le)))},Z),(le&&typeof le.then=="function"?ke.resolve(le).then(function(ye){return ne.active?ye:jt(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Z.then(function(){return le})).then(function(ye){return Q&&ne._resolve(),ne._completion.then(function(){return ye})}).catch(function(ye){return ne._reject(ye),jt(ye)})})}).bind(null,this,R,j,S,y);return S?S._promise(R,K,"lock"):Ue.trans?$n(Ue.transless,function(){return E._whenReady(K)}):this._whenReady(K)},rn.prototype.table=function(h){if(!N(this._allTables,h))throw new Oe.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},rn);function rn(h,d){var y=this;this._middlewares={},this.verno=0;var E=rn.dependencies;this._options=d=s({addons:rn.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},E=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,R,j,P,K,G={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ge,dbReadyPromise:null,cancelOpen:Ge,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};G.dbReadyPromise=new ke(function(U){G.dbReadyResolve=U}),G.openCanceller=new ke(function(U,re){G.cancelOpen=re}),this._state=G,this.name=h,this.on=aa(this,"populate","blocked","versionchange","close",{ready:[Mt,Ge]}),this.once=function(U,re){var Q=function(){for(var $=[],Z=0;Z<arguments.length;Z++)$[Z]=arguments[Z];y.on(U).unsubscribe(Q),re.apply(y,$)};return y.on(U,Q)},this.on.ready.subscribe=fe(this.on.ready.subscribe,function(U){return function(re,Q){rn.vip(function(){var $,Z=y._state;Z.openComplete?(Z.dbOpenError||ke.resolve().then(re),Q&&U(re)):Z.onReadyBeingFired?(Z.onReadyBeingFired.push(re),Q&&U(re)):(U(re),$=y,Q||U(function ne(){$.on.ready.unsubscribe(re),$.on.ready.unsubscribe(ne)}))})}}),this.Collection=(S=this,Vn(Uo.prototype,function(le,ne){this.db=S;var Q=as,$=null;if(ne)try{Q=ne()}catch(de){$=de}var Z=le._ctx,ne=Z.table,le=ne.hook.reading.fire;this._ctx={table:ne,index:Z.index,isPrimKey:!Z.index||ne.schema.primKey.keyPath&&Z.index===ne.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:Z.or,valueMapper:le!==Je?le:null}})),this.Table=(R=this,Vn(oi.prototype,function(U,re,Q){this.db=R,this._tx=Q,this.name=U,this.schema=re,this.hook=R._allTables[U]?R._allTables[U].hook:aa(null,{creating:[zt,Ge],reading:[Ht,Je],updating:[Yn,Ge],deleting:[on,Ge]})})),this.Transaction=(j=this,Vn(Ci.prototype,function(U,re,Q,$,Z){var ne=this;U!=="readonly"&&re.forEach(function(le){le=(le=Q[le])===null||le===void 0?void 0:le.yProps,le&&(re=re.concat(le.map(function(de){return de.updatesTable})))}),this.db=j,this.mode=U,this.storeNames=re,this.schema=Q,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=aa(this,"complete","error","abort"),this.parent=Z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(le,de){ne._resolve=le,ne._reject=de}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(le){var de=ne.active;return ne.active=!1,ne.on.error.fire(le),ne.parent?ne.parent._reject(le):de&&ne.idbtrans&&ne.idbtrans.abort(),jt(le)})})),this.Version=(P=this,Vn(fs.prototype,function(U){this.db=P,this._cfg={version:U,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,Vn(Fa.prototype,function(U,re,Q){if(this.db=K,this._ctx={table:U,index:re===":id"?null:re,or:Q},this._cmp=this._ascending=ft,this._descending=function($,Z){return ft(Z,$)},this._max=function($,Z){return 0<ft($,Z)?$:Z},this._min=function($,Z){return ft($,Z)<0?$:Z},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(U){0<U.newVersion?console.warn("Another connection wants to upgrade database '".concat(y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(y.name,"'. Closing db now to resume the delete request.")),y.close({disableAutoOpen:!1})}),this.on("blocked",function(U){!U.newVersion||U.newVersion<U.oldVersion?console.warn("Dexie.delete('".concat(y.name,"') was blocked")):console.warn("Upgrade '".concat(y.name,"' blocked by other connection holding version ").concat(U.oldVersion/10))}),this._maxKey=Ka(d.IDBKeyRange),this._createTransaction=function(U,re,Q,$){return new y.Transaction(U,re,Q,y._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(U){y.on("blocked").fire(U),Ea.filter(function(re){return re.name===y.name&&re!==y&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(U)})},this.use(gs),this.use(Fo),this.use(uf),this.use(Ur),this.use(ha);var te=new Proxy(this,{get:function(U,re,Q){if(re==="_vip")return!0;if(re==="table")return function(Z){return uo(y.table(Z),te)};var $=Reflect.get(U,re,Q);return $ instanceof oi?uo($,te):re==="tables"?$.map(function(Z){return uo(Z,te)}):re==="_createTransaction"?function(){return uo($.apply(this,arguments),te)}:$}});this.vip=te,E.forEach(function(U){return U(y)})}var vs,Sr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ec=(Ho.prototype.subscribe=function(h,d,y){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:d,complete:y})},Ho.prototype[Sr]=function(){return this},Ho);function Ho(h){this._subscribe=h}try{vs={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{vs={indexedDB:null,IDBKeyRange:null}}function tc(h){var d,y=!1,E=new ec(function(S){var R=H(h),j,P=!1,K={},G={},te={get closed(){return P},unsubscribe:function(){P||(P=!0,j&&j.abort(),U&&Nn.storagemutated.unsubscribe(Q))}};S.start&&S.start(te);var U=!1,re=function(){return jr($)},Q=function(Z){c(K,Z),x(G,K)&&re()},$=function(){var Z,ne,le;!P&&vs.indexedDB&&(K={},Z={},j&&j.abort(),j=new AbortController,le=(function(de){var ye=ar();try{R&&nn();var Ee=Kt(h,de);return Ee=R?Ee.finally(Kn):Ee}finally{ye&&Cr()}})(ne={subscr:Z,signal:j.signal,requery:re,querier:h,trans:null}),Promise.resolve(le).then(function(de){y=!0,d=de,P||ne.signal.aborted||(K={},(function(ye){for(var Ee in ye)if(N(ye,Ee))return;return 1})(G=Z)||U||(Nn(kr,Q),U=!0),jr(function(){return!P&&S.next&&S.next(de)}))},function(de){y=!1,["DatabaseClosedError","AbortError"].includes(de?.name)||P||jr(function(){P||S.error&&S.error(de)})}))};return setTimeout(re,0),te});return E.hasValue=function(){return y},E.getValue=function(){return d},E}var Mi=Da;function Fl(h){var d=fi;try{fi=!0,Nn.storagemutated.fire(h),Me(h,!0)}finally{fi=d}}I(Mi,s(s({},On),{delete:function(h){return new Mi(h,{addons:[]}).delete()},exists:function(h){return new Mi(h,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return d=Mi.dependencies,y=d.indexedDB,d=d.IDBKeyRange,(Lr(y)?Promise.resolve(y.databases()).then(function(E){return E.map(function(S){return S.name}).filter(function(S){return S!==ii})}):ds(y,d).toCollection().primaryKeys()).then(h)}catch{return jt(new Oe.MissingAPI)}var d,y},defineClass:function(){return function(h){v(this,h)}},ignoreTransaction:function(h){return Ue.trans?$n(Ue.transless,h):h()},vip:ms,async:function(h){return function(){try{var d=Ct(h.apply(this,arguments));return d&&typeof d.then=="function"?d:ke.resolve(d)}catch(y){return jt(y)}}},spawn:function(h,d,y){try{var E=Ct(h.apply(y,d||[]));return E&&typeof E.then=="function"?E:ke.resolve(E)}catch(S){return jt(S)}},currentTransaction:{get:function(){return Ue.trans||null}},waitFor:function(h,d){return d=ke.resolve(typeof h=="function"?Mi.ignoreTransaction(h):h).timeout(d||6e4),Ue.trans?Ue.trans.waitFor(d):d},Promise:ke,debug:{get:function(){return wn},set:function(h){Lo(h)}},derive:oe,extend:v,props:I,override:fe,Events:aa,on:Nn,liveQuery:tc,extendObservabilitySet:c,getByKeyPath:Ye,setByKeyPath:M,delByKeyPath:function(h,d){typeof d=="string"?M(h,d,void 0):"length"in d&&[].map.call(d,function(y){M(h,y,void 0)})},shallowClone:O,deepClone:k,getObjectDiff:Br,cmp:ft,asap:Pe,minKey:-1/0,addons:[],connections:Ea,errnames:rt,dependencies:vs,cache:T,semVer:"4.2.1",version:"4.2.1".split(".").map(function(h){return parseInt(h)}).reduce(function(h,d,y){return h+d/Math.pow(10,2*y)})})),Mi.maxKey=Ka(Mi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Nn(kr,function(h){fi||(h=new CustomEvent(wr,{detail:h}),fi=!0,dispatchEvent(h),fi=!1)}),addEventListener(wr,function(h){h=h.detail,fi||Fl(h)}));var bs,fi=!1,gr=function(){};return typeof BroadcastChannel<"u"&&((gr=function(){(bs=new BroadcastChannel(wr)).onmessage=function(h){return h.data&&Fl(h.data)}})(),typeof bs.unref=="function"&&bs.unref(),Nn(kr,function(h){fi||bs.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!Da.disableBfCache&&h.persisted){wn&&console.debug("Dexie: handling persisted pagehide"),bs?.close();for(var d=0,y=Ea;d<y.length;d++)y[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!Da.disableBfCache&&h.persisted&&(wn&&console.debug("Dexie: handling persisted pageshow"),gr(),Fl({all:new Rn(-1/0,[[]])}))})),ke.rejectionMapper=function(h,d){return!h||h instanceof Ie||h instanceof TypeError||h instanceof SyntaxError||!h.name||!fn[h.name]?h:(d=new fn[h.name](d||h.message,h),"stack"in h&&ue(d,"stack",{get:function(){return this.inner.stack}}),d)},Lo(wn),s(Da,Object.freeze({__proto__:null,Dexie:Da,liveQuery:tc,Entity:ro,cmp:ft,PropModification:Mr,replacePrefix:function(h,d){return new Mr({replacePrefix:[h,d]})},add:function(h){return new Mr({add:h})},remove:function(h){return new Mr({remove:h})},default:Da,RangeSet:Rn,mergeRanges:zr,rangesOverlap:Jn}),{default:Da}),Da})})(mh)),mh.exports}var RR=NR();const km=Pm(RR),ib=Symbol.for("Dexie"),Cl=globalThis[ib]||(globalThis[ib]=km);if(km.semVer!==Cl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${km.semVer} and ${Cl.semVer}`);const{liveQuery:hC,mergeRanges:fC,rangesOverlap:dC,RangeSet:mC,cmp:pC,Entity:gC,PropModification:yC,replacePrefix:vC,add:bC,remove:_C,DexieYProvider:xC}=Cl;function CR(a,t,r){var s,l;typeof a=="function"?(s=t||[],l=r):(s=[],l=t);var u=So.useRef({hasResult:!1,result:l,error:null}),p=So.useReducer(function(b){return b+1},0);p[0];var _=p[1],v=So.useMemo(function(){var b=typeof a=="function"?a():a;if(!b||typeof b.subscribe!="function")throw a===b?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!u.current.hasResult&&typeof window<"u"&&(typeof b.hasValue!="function"||b.hasValue()))if(typeof b.getValue=="function")u.current.result=b.getValue(),u.current.hasResult=!0;else{var A=b.subscribe(function(N){u.current.result=N,u.current.hasResult=!0});typeof A=="function"?A():A.unsubscribe()}return b},s);if(So.useDebugValue(u.current.result),So.useEffect(function(){var b=v.subscribe(function(A){var N=u.current;(N.error!==null||N.result!==A)&&(N.error=null,N.result=A,N.hasResult=!0,_())},function(A){var N=u.current;N.error!==A&&(N.error=A,_())});return typeof b=="function"?b:b.unsubscribe.bind(b)},s),u.current.error)throw u.current.error;return u.current.result}function hr(a,t,r){return CR(function(){return Cl.liveQuery(a)},t||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(a){var t=Cl.DexieYProvider;t&&t.release(a)});const Be=new Cl("SPFamilyVenturesDB");Be.version(1).stores({settings:"++id",customers:"++id, name, email",products:"++id, name",sales:"++id, customerId, date",users:"++id, username",vendors:"++id, name, email",vendorBills:"++id, vendorId, date"});["customers","products","sales","settings","users","vendors","vendorBills"].forEach(a=>{Be[a].hook("creating",function(t,r,s){this.onsuccess=function(l){sb(a,{...r,id:l})}}),Be[a].hook("updating",function(t,r,s,l){const u={...s,...t,id:r};sb(a,u)}),Be[a].hook("deleting",function(t,r,s){OR(a,t)})});Be.on("populate",()=>{Be.settings.add({companyName:"SP FAMILY VENTURES EST ENTERPRISE",regNum:"(002905563-H)",desc1:"PEMBORONG AYAM HIDUP / AYAM PROSES",desc2:"AYAM DAGING(BROILER), AYAM KAMPUNG & AYAM TUA (TELOR)",contact:"H/P (012)627-3691",logoLeft:null,logoRight:null}),Be.users.add({username:"svanathan75",password:"sp1234"})});Be.on("ready",async()=>{try{await Be.users.count()===0&&(await Be.users.add({username:"svanathan75",password:"sp1234"}),console.log("Default user seeded via ready hook"))}catch(a){console.error("Error checking/seeding users:",a)}});function Ap(){return hr(()=>Be.settings.toArray())?.[0]||{}}const DR=["customers","products","sales","settings","vendors","vendorBills"],jR=async a=>{const t=wx(fx(lf,a));return Cx(t,async s=>{const l=s.docChanges();l.length!==0&&(await Be.transaction("rw",Be[a],async()=>{for(const u of l){const p=u.doc.data();p.id=parseInt(u.doc.id)||u.doc.id,u.type==="added"||u.type==="modified"?await Be[a].put(p):u.type==="removed"&&await Be[a].delete(p.id)}}),console.log(`Synced ${l.length} changes for ${a} from Cloud.`))})},IR=async()=>{const a=[];for(const t of DR){const r=await jR(t);a.push(r)}return()=>a.forEach(t=>t())},sb=async(a,t)=>{try{const r=bp(lf,a,String(t.id));await Nx(r,t),console.log(`Pushed ${a}/${t.id} to Cloud.`)}catch(r){console.error("Failed to push to cloud:",r)}},OR=async(a,t)=>{try{await Rx(bp(lf,a,String(t))),console.log(`Deleted ${a}/${t} from Cloud.`)}catch(r){console.error("Failed to delete from cloud:",r)}};function MR(){const a=ns();ie.useEffect(()=>{const r=IR();return()=>{r.then(s=>s&&s())}},[]);const t=[{path:"/",icon:e2,label:"Sales"},{path:"/products",icon:vh,label:"Products"},{path:"/customers",icon:_h,label:"Customers"},{path:"/vendors",icon:x2,label:"Vendors"},{path:"/vendor-bills",icon:f2,label:"Bills"},{path:"/reports",icon:bh,label:"Reports"},{path:"/settings",icon:g2,label:"Settings"}];return g.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 print:h-auto print:block",children:[g.jsx("main",{className:"flex-1 overflow-y-auto pb-20 print:pb-0 print:h-auto print:overflow-visible",children:g.jsx(xb,{})}),g.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 flex justify-around items-center z-50 no-print",children:t.map(r=>{const s=r.icon,l=a.pathname===r.path;return g.jsxs(Uh,{to:r.path,className:N2("flex flex-col items-center p-2 rounded-lg transition-colors",l?"text-blue-600":"text-gray-500 hover:text-gray-900"),children:[g.jsx(s,{size:24}),g.jsx("span",{className:"text-xs mt-1 font-medium",children:r.label})]},r.path)})})]})}function VR(a,t={}){const r={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Kuala_Lumpur",hour12:!1,...t};return new Intl.DateTimeFormat("en-MY",r).format(a)}function $r(a){const t=new Date(a.toLocaleString("en-US",{timeZone:"Asia/Kuala_Lumpur"})),r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${r}-${s}-${l}`}const kR=[{name:"KANTIN (PARKLAND)",contact:"0176335879",email:"",address:"",id:6},{name:"Kantin Empire Code Parkland",contact:"0165105419",email:"",address:"",id:7},{name:"Kantin Hossain Ali (KJawa)",contact:"0189554212",email:"",address:"",id:8},{name:"Kantin KALAM (Telok Gong)",contact:"0163040557",email:"",address:"",id:9},{name:"KANTIN KEBUN CLC ",contact:"01139307848",email:"",address:"Jln Johan Setia",id:10},{name:"Kantin Wafiq(TelokGong)",contact:"0183703384",email:"",address:"",id:11},{name:"Kantin2 Telok Gong",contact:"0173285626",email:"",address:"",id:12},{name:"KEDAI AYAM ECONSAVE (KANNAN)",contact:"01137654211",email:"",address:"",id:13},{name:"KEDAI AYAM PAMAKO",contact:"0136774960",email:"",address:"",id:14},{name:"KEDAI AYAM PANDIAN",contact:"0163567484",email:"",address:"",id:15},{name:"KEDAI AYAM PRAKASH",contact:"0124560655",email:"",address:"",id:16},{name:"KEDAI AYAM YAZID",contact:"0182166964",email:"",address:"",id:17},{name:"KANTIN MAKAN Abdullah ",contact:"0175783216",email:"",address:"Jln Universiti",id:18},{name:"KEDAI MAKAN IMRAN (GARDENIA)",contact:"001141164909",email:"",address:"",id:19},{name:"KEDAI MAKAN MEENA'S",contact:"0169643450",email:"",address:"",id:20},{name:"KEDAI MASAK Hossain (BT.8 )",contact:"+8801709143499",email:"",address:"",id:21},{name:"Kedai NK WIN ENTERPRISE",contact:"0102531902",email:"",address:"",id:22},{name:"KEDAI RUNCIT 100PLUS",contact:"01111935575",email:"",address:"",id:23},{name:"KEDAI RUNCIT B.PUTERA",contact:"0109657446",email:"",address:"",id:24},{name:"KEDAI RUNCIT DHESIGA",contact:"0162743503",email:"",address:"",id:25},{name:"KEDAI RUNCIT FORID (JLN GAMBUT)",contact:"+8801889111881",email:"",address:"",id:26},{name:"KEDAI RUNCIT MERANTI NIL",contact:"0183910436",email:"",address:"",id:27},{name:"KEDAI RUNCIT SOFIQ BT.8",contact:"01112219170",email:"",address:"",id:28},{name:"KEDAI RUNCIT W.Z LEGACY",contact:"0102652140",email:"",address:"",id:29},{name:"Kedai SJ FRESHMART",contact:"0129022533",email:"",address:"",id:30},{name:"PASAR MINI AROMA SUPERMART",contact:"01133798249",email:"",address:"",id:31},{name:"PASAR MINI SHBBIR",contact:"0149159733",email:"",address:"",id:32},{name:"PASAR MINI SR SMA",contact:"0169368535",email:"",address:"",id:33},{name:"PasarMini Berjaya(Wafiq)",contact:"0183703354",email:"",address:"",id:34},{name:"PasarMini SubangMas(Wafiq)",contact:"0183703354",email:"",address:"",id:35}],PR=[{name:"Ayam Putih (H)",price:8.6,id:8},{name:"Ayam Putih (P)",price:8.9,id:9},{name:"Ayam Gajah (H)",price:25,id:10},{name:"Ayam Tua (H)",price:6.8,id:11},{name:"Ayam Kpg Jantan (H",price:11.3,id:12},{name:"Ayam Kpg Betina (H)",price:10.5,id:13}],LR="/spfamilyventuresbook/assets/logo_company-dgHSd-ed.jpg",zR="/spfamilyventuresbook/assets/logo_poultry-RsWDEZrg.jpg",UR=kR,BR=PR.map(a=>({...a,unit:a.unit||"Kg"})),qR={id:1,companyName:"SP Family Venture EST Enterprise",regNum:"(002905563-H)",desc1:"PEMBORONG AYAM HIDUP / AYAM SEGAR (PROSES)",desc2:"AYAM DAGING (BROILER), AYAM KAMPUNG & AYAM TUA (TELOR)",contact:"H/P (012)627-3691 (Mr.SELVA)",logoLeft:LR,logoRight:zR,invoiceStart:1e4},Dx=async()=>{try{const a=await Be.customers.count(),t=await Be.products.count();if(await Be.settings.put(qR),a>0||t>0)return console.log("Database already has data. Skipping seed."),{success:!1,message:"Database already contains data. Settings updated."};await Be.customers.bulkAdd(UR),await Be.products.bulkAdd(BR);const r=await Be.customers.toArray(),s=await Be.products.toArray(),l=[],u=new Date;for(let p=0;p<15;p++){const _=new Date(u);_.setDate(u.getDate()-Math.floor(Math.random()*7));const v=r[Math.floor(Math.random()*r.length)],b=Math.floor(Math.random()*3)+1,A=[];let N=0;for(let I=0;I<b;I++){const X=s[Math.floor(Math.random()*s.length)],ue=Math.floor(Math.random()*10)+1,oe=ue*X.price;A.push({productId:X.id,qty:ue,unit:X.unit,price:X.price}),N+=oe}l.push({date:_.toISOString().split("T")[0],customerId:v.id,items:A,subtotal:N,prevBalance:0,memo:"",grandTotal:N})}return await Be.sales.bulkAdd(l),{success:!0,message:"Sample data and logos added successfully!"}}catch(a){return console.error("Error seeding database:",a),{success:!1,message:"Failed to seed data."}}},ob=async()=>{try{return await Be.delete(),await Be.open(),{success:!0,message:"Database cleared and reset."}}catch(a){return console.error("Error clearing database:",a),{success:!1,message:"Failed to clear database."}}};function FR(){const a=Ol(),t=Ap(),[r,s]=ie.useState({todaySales:0,totalSales:0,todayVendorBills:0,dailyProfit:0,customerCount:0,productCount:0}),[l,u]=ie.useState([]),[p,_]=ie.useState(!1),v=hr(()=>Be.customers.toArray()),b=hr(()=>Be.products.toArray()),A=hr(()=>Be.sales.toArray()),N=hr(()=>Be.vendorBills.toArray());ie.useEffect(()=>{if(A&&v&&b&&N){const ue=$r(new Date),oe=A.filter(xe=>xe.date===ue).reduce((xe,Pe)=>xe+(Pe.subtotal||0),0),B=A.reduce((xe,Pe)=>xe+(Pe.subtotal||0),0),L=N.filter(xe=>xe.date===ue).reduce((xe,Pe)=>xe+(Pe.total||0),0),ee=oe-L;s({todaySales:oe,totalSales:B,todayVendorBills:L,dailyProfit:ee,customerCount:v.length,productCount:b.length});const fe=[...A].sort((xe,Pe)=>new Date(Pe.date)-new Date(xe.date)).slice(0,5);u(fe)}},[A,v,b,N]);const I=async()=>{if(confirm("This will populate the database with sample data. Continue?")){_(!0);const ue=await Dx();alert(ue.message),_(!1)}},X=ue=>v?.find(oe=>oe.id===ue)?.name||"Unknown";return g.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[g.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-8 pb-32",children:g.jsxs("div",{className:"max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsxs("div",{className:"flex items-center gap-5",children:[t.logoLeft&&g.jsx("div",{className:"w-20 h-20 bg-white/10 backdrop-blur-sm rounded-2xl p-2 border border-white/20 shadow-xl flex items-center justify-center",children:g.jsx("img",{src:t.logoLeft,alt:"Logo",className:"w-full h-full object-contain drop-shadow-md"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white drop-shadow-sm",children:t.companyName||"Welcome Back!"}),g.jsx("p",{className:"text-blue-100 mt-1 font-medium opacity-90",children:"Dashboard Overview"})]})]}),g.jsx("div",{className:"text-right hidden md:block",children:g.jsx("p",{className:"text-2xl font-bold",children:VR(new Date)})})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-green-400/20 rounded-lg",children:g.jsx(yh,{size:20,className:"text-green-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Today's Sales"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.todaySales.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-blue-400/20 rounded-lg",children:g.jsx(bh,{size:20,className:"text-blue-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Total Revenue"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.totalSales.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-purple-400/20 rounded-lg",children:g.jsx(_h,{size:20,className:"text-purple-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Customers"})]}),g.jsx("p",{className:"text-2xl font-bold",children:r.customerCount})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-orange-400/20 rounded-lg",children:g.jsx(vh,{size:20,className:"text-orange-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Products"})]}),g.jsx("p",{className:"text-2xl font-bold",children:r.productCount})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"p-2 bg-red-400/20 rounded-lg",children:g.jsx(yh,{size:20,className:"text-red-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Today's Vendor Bills"})]}),g.jsxs("p",{className:"text-2xl font-bold",children:["RM ",r.todayVendorBills.toFixed(2)]})]}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:`p-2 ${r.dailyProfit>=0?"bg-green-400/20":"bg-red-400/20"} rounded-lg`,children:g.jsx(bh,{size:20,className:r.dailyProfit>=0?"text-green-300":"text-red-300"})}),g.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Daily Net Profit"})]}),g.jsxs("p",{className:`text-2xl font-bold ${r.dailyProfit>=0?"":"text-red-200"}`,children:["RM ",r.dailyProfit.toFixed(2)]})]})]})]})}),g.jsxs("div",{className:"max-w-5xl mx-auto px-4 -mt-24",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsxs("button",{onClick:()=>a("/sales/new"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-100 transition-colors",children:g.jsx(Kw,{size:32,className:"text-blue-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"New Sale"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Create a new invoice for a customer"})]}),g.jsxs("button",{onClick:()=>a("/customers"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-purple-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-100 transition-colors",children:g.jsx(_h,{size:32,className:"text-purple-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Manage Customers"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Add or edit customer details"})]}),g.jsxs("button",{onClick:()=>a("/products"),className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 flex flex-col items-center text-center group",children:[g.jsx("div",{className:"w-16 h-16 bg-orange-50 rounded-full flex items-center justify-center mb-4 group-hover:bg-orange-100 transition-colors",children:g.jsx(vh,{size:32,className:"text-orange-600"})}),g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Inventory"}),g.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Manage products and pricing"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[g.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Recent Sales"}),g.jsxs("button",{onClick:()=>a("/sales"),className:"text-blue-600 text-sm font-medium hover:underline flex items-center gap-1",children:["View All ",g.jsx(Bw,{size:16})]})]}),g.jsx("div",{className:"divide-y divide-gray-50",children:l.length>0?l.map(ue=>g.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500",children:g.jsx(Fw,{size:18})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-gray-800",children:X(ue.customerId)}),g.jsxs("p",{className:"text-xs text-gray-500",children:[$r(new Date(ue.date)),ue.memo&&g.jsxs("span",{className:"ml-2 italic text-gray-400",children:["- ",ue.memo]})]})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"font-bold text-gray-800",children:["RM ",(ue.grandTotal||0).toFixed(2)]}),g.jsxs("p",{className:"text-xs text-gray-500",children:["Inv #",ue.id]})]})]},ue.id)):g.jsx("div",{className:"p-8 text-center text-gray-500",children:"No sales found. Start by creating a new sale!"})})]}),g.jsxs("div",{className:"space-y-6",children:[r.customerCount===0&&r.productCount===0&&g.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 border border-blue-100",children:[g.jsx("h3",{className:"font-bold text-indigo-900 mb-2",children:"New here?"}),g.jsx("p",{className:"text-sm text-indigo-700 mb-4",children:"Populate your database with sample data to see how the app looks and feels."}),g.jsxs("button",{onClick:I,disabled:p,className:"w-full py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[g.jsx(lh,{size:18}),p?"Seeding...":"Load Sample Data"]})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[g.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Quick Links"}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("button",{onClick:()=>a("/settings"),className:"w-full text-left px-4 py-2 rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm transition-colors",children:"Company Settings"}),g.jsx("button",{onClick:()=>a("/sales"),className:"w-full text-left px-4 py-2 rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm transition-colors",children:"Sales History"})]})]})]})]})]})]})}const HR="modulepreload",KR=function(a){return"/spfamilyventuresbook/"+a},lb={},ub=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let b=function(A){return Promise.all(A.map(N=>Promise.resolve(N).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var p=b;document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),v=_?.nonce||_?.getAttribute("nonce");l=b(r.map(A=>{if(A=KR(A),A in lb)return;lb[A]=!0;const N=A.endsWith(".css"),I=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${I}`))return;const X=document.createElement("link");if(X.rel=N?"stylesheet":HR,N||(X.as="script"),X.crossOrigin="",X.href=A,v&&X.setAttribute("nonce",v),document.head.appendChild(X),N)return new Promise((ue,oe)=>{X.addEventListener("load",ue),X.addEventListener("error",()=>oe(new Error(`Unable to preload CSS for ${A}`)))})}))}function u(_){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=_,window.dispatchEvent(v),!v.defaultPrevented)throw _}return l.then(_=>{for(const v of _||[])v.status==="rejected"&&u(v.reason);return t().catch(u)})},GR=async()=>{try{const a=await Be.customers.toArray(),t=await Be.products.toArray(),r=await Be.sales.toArray(),s=await Be.settings.toArray(),l={version:1,timestamp:new Date().toISOString(),customers:a,products:t,sales:r,settings:s},u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),p=URL.createObjectURL(u),_=document.createElement("a");return _.href=p,_.download=`sp_sales_backup_${$r(new Date)}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(p),{success:!0,message:"Backup exported successfully."}}catch(a){return console.error("Export failed:",a),{success:!1,message:"Failed to export backup."}}},QR=async a=>new Promise((t,r)=>{const s=new FileReader;s.onload=async l=>{try{const u=JSON.parse(l.target.result);if(!u.customers||!u.products||!u.sales)throw new Error("Invalid backup file format.");await Be.transaction("rw",Be.customers,Be.products,Be.sales,Be.settings,async()=>{u.customers.length&&await Be.customers.bulkPut(u.customers),u.products.length&&await Be.products.bulkPut(u.products),u.sales.length&&await Be.sales.bulkPut(u.sales),u.settings&&u.settings.length&&await Be.settings.bulkPut(u.settings)}),t({success:!0,message:"Backup imported successfully."})}catch(u){console.error("Import failed:",u),t({success:!1,message:"Failed to import backup. Invalid file."})}},s.onerror=()=>{t({success:!1,message:"Failed to read file."})},s.readAsText(a)}),jx=ie.createContext(null),YR=({children:a})=>{const[t,r]=ie.useState(null),[s,l]=ie.useState(!0);ie.useEffect(()=>{const v=localStorage.getItem("user");v&&r(JSON.parse(v)),l(!1)},[]);const u=async(v,b)=>{try{const A=await Be.users.where("username").equals(v).first();if(A&&A.password===b){const N={id:A.id,username:A.username};return r(N),localStorage.setItem("user",JSON.stringify(N)),{success:!0}}return{success:!1,message:"Invalid username or password"}}catch(A){return console.error("Login error:",A),{success:!1,message:"Login failed"}}},p=()=>{r(null),localStorage.removeItem("user")},_=async v=>{if(!t)return{success:!1,message:"Not logged in"};try{return await Be.users.update(t.id,{password:v}),{success:!0,message:"Password updated successfully"}}catch(b){return console.error("Update password error:",b),{success:!1,message:"Failed to update password"}}};return g.jsx(jx.Provider,{value:{user:t,login:u,logout:p,updatePassword:_,loading:s},children:!s&&a})},Np=()=>ie.useContext(jx);function XR(){const a=Ap(),[t,r]=ie.useState({}),[s,l]=ie.useState(""),{user:u,updatePassword:p,logout:_}=Np(),[v,b]=ie.useState(""),[A,N]=ie.useState("");ie.useEffect(()=>{a.id&&!t.id&&r(a)},[a,t.id]);const I=oe=>{const{name:B,value:L}=oe.target;r(ee=>({...ee,[B]:L}))},X=async(oe,B)=>{const L=oe.target.files[0];if(L){const ee=new FileReader;ee.onloadend=()=>{r(fe=>({...fe,[B]:ee.result}))},ee.readAsDataURL(L)}},ue=async oe=>{oe.preventDefault();try{t.id&&(await Be.settings.put(t),l("Settings saved successfully!"),setTimeout(()=>l(""),3e3))}catch(B){console.error("Failed to save settings:",B),l("Error saving settings.")}};return t.id?g.jsxs("div",{className:"p-4 max-w-lg mx-auto pb-24",children:[g.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Company Settings"}),g.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 space-y-3",children:[g.jsx("h2",{className:"font-semibold text-gray-700 mb-2",children:"Company Details"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Company Name"}),g.jsx("input",{type:"text",name:"companyName",value:t.companyName||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Registration Number"}),g.jsx("input",{type:"text",name:"regNum",value:t.regNum||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description Line 1"}),g.jsx("input",{type:"text",name:"desc1",value:t.desc1||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description Line 2"}),g.jsx("input",{type:"text",name:"desc2",value:t.desc2||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Contact Info"}),g.jsx("input",{type:"text",name:"contact",value:t.contact||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Invoice Start Number"}),g.jsx("input",{type:"number",name:"invoiceStart",value:t.invoiceStart||"",onChange:I,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 10000"})]})]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100 space-y-4",children:[g.jsx("h2",{className:"font-semibold text-gray-700 mb-2",children:"Logos"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Left Logo (Company)"}),g.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors",children:[t.logoLeft?g.jsx("img",{src:t.logoLeft,alt:"Left Logo",className:"h-20 mx-auto object-contain mb-2"}):g.jsx("div",{className:"h-20 flex items-center justify-center text-gray-400",children:"No Logo"}),g.jsxs("label",{className:"cursor-pointer block",children:[g.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Change"}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:oe=>X(oe,"logoLeft")})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Right Logo (Poultry)"}),g.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors",children:[t.logoRight?g.jsx("img",{src:t.logoRight,alt:"Right Logo",className:"h-20 mx-auto object-contain mb-2"}):g.jsx("div",{className:"h-20 flex items-center justify-center text-gray-400",children:"No Logo"}),g.jsxs("label",{className:"cursor-pointer block",children:[g.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Change"}),g.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:oe=>X(oe,"logoRight")})]})]})]})]})]}),g.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold shadow-md hover:bg-blue-700 flex items-center justify-center gap-2",children:[g.jsx(Ib,{size:20}),"Save Settings"]}),s&&g.jsx("div",{className:`text-center p-2 rounded ${s.includes("Error")?"text-red-600 bg-red-50":"text-green-600 bg-green-50"}`,children:s})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8 mt-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[g.jsx(Ob,{size:24,className:"text-blue-600"}),"User Profile"]}),g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-gray-500",children:"Logged in as"}),g.jsx("p",{className:"font-bold text-gray-900",children:u?.username})]}),g.jsx("button",{onClick:_,className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Sign Out"})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsxs("h3",{className:"font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[g.jsx(Rb,{size:16})," Change Password"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"password",placeholder:"New Password",value:v,onChange:oe=>b(oe.target.value),className:"flex-1 p-2 border rounded-md text-sm"}),g.jsx("button",{onClick:async()=>{if(!v)return;const oe=await p(v);N(oe.message),oe.success&&b(""),setTimeout(()=>N(""),3e3)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:"Update"})]}),A&&g.jsx("p",{className:`text-xs mt-2 ${A.includes("Failed")?"text-red-600":"text-green-600"}`,children:A})]})]})})]}),g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-8",children:[g.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[g.jsx(lh,{size:24,className:"text-blue-600"}),"Data Management"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[g.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Backup & Restore"}),g.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Save your data to a file or restore from a backup. Use this to move data between devices."}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[g.jsxs("button",{onClick:async()=>{const oe=await GR();alert(oe.message)},className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[g.jsx(Bh,{size:18})," Export Data"]}),g.jsxs("label",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer",children:[g.jsx(Fh,{size:18})," Import Data",g.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:async oe=>{if(oe.target.files?.[0]&&confirm("This will merge the backup data with your current data. Continue?")){const B=await QR(oe.target.files[0]);alert(B.message),B.success&&window.location.reload()}}})]})]})]}),g.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[g.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Cloud Sync Status"}),g.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Check if your device can connect to the cloud database."}),g.jsxs("button",{onClick:async()=>{try{const{doc:oe,setDoc:B}=await ub(async()=>{const{doc:ee,setDoc:fe}=await Promise.resolve().then(()=>ER);return{doc:ee,setDoc:fe}},[]),{db:L}=await ub(async()=>{const{db:ee}=await Promise.resolve().then(()=>SR);return{db:ee}},void 0);await B(oe(L,"_connection_test","test"),{timestamp:new Date().toISOString(),device:navigator.userAgent}),alert("Connection Successful! Cloud sync is working.")}catch(oe){console.error(oe),alert("Connection Failed: "+oe.message+`

Please check your Firestore Rules in the Firebase Console.`)}},className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[g.jsx(lh,{size:18})," Test Connection"]})]})]})]}),g.jsxs("div",{className:"mt-12 border-t pt-8",children:[g.jsx("h2",{className:"text-lg font-bold text-red-600 mb-4",children:"Danger Zone"}),g.jsxs("button",{onClick:async()=>{if(confirm("WARNING: This will delete ALL data (customers, products, sales). This action cannot be undone. Are you sure?")){const oe=await ob();alert(oe.message)}},className:"w-full bg-red-50 text-red-600 border border-red-200 py-3 rounded-lg font-semibold hover:bg-red-100 flex items-center justify-center gap-2 mb-3",children:[g.jsx(Ys,{size:20}),"Clear All Data"]}),g.jsxs("button",{onClick:async()=>{if(confirm("WARNING: This will delete ALL data (customers, products, sales) and replace it with sample data. Are you sure?")){await ob();const oe=await Dx();alert(oe.message)}},className:"w-full bg-red-50 text-red-600 border border-red-200 py-3 rounded-lg font-semibold hover:bg-red-100 flex items-center justify-center gap-2",children:[g.jsx(lh,{size:20}),"Reset & Seed Sample Data"]})]})]}):g.jsx("div",{className:"p-4",children:"Loading settings..."})}function $R(){const a=hr(()=>Be.products.toArray()),[t,r]=ie.useState(!1),[s,l]=ie.useState(null),[u,p]=ie.useState(""),_=ie.useRef(null),[v,b]=ie.useState({name:"",price:""}),A=(L=null)=>{L?(l(L),b({name:L.name,price:L.price})):(l(null),b({name:"",price:""})),r(!0)},N=()=>{r(!1),l(null)},I=async L=>{L.preventDefault();try{s?await Be.products.update(s.id,{name:v.name,price:parseFloat(v.price)}):await Be.products.add({name:v.name,price:parseFloat(v.price)}),N()}catch(ee){console.error("Failed to save product:",ee),alert("Error saving product")}},X=async L=>{window.confirm("Are you sure you want to delete this product?")&&await Be.products.delete(L)},ue=()=>{const L=JSON.stringify(a,null,2),ee=new Blob([L],{type:"application/json"}),fe=URL.createObjectURL(ee),xe=document.createElement("a");xe.href=fe,xe.download="products_backup.json",document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)},oe=L=>{const ee=L.target.files[0];if(!ee)return;const fe=new FileReader;fe.onload=async xe=>{try{const Pe=JSON.parse(xe.target.result);Array.isArray(Pe)?(await Be.products.bulkPut(Pe),alert("Products imported successfully!")):alert("Invalid file format")}catch(Pe){console.error("Import failed:",Pe),alert("Failed to import products")}},fe.readAsText(ee),L.target.value=null},B=a?.filter(L=>L.name.toLowerCase().includes(u.toLowerCase()))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-4xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Products"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>_.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Fh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:oe}),g.jsxs("button",{onClick:ue,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Bh,{size:16})," Export"]}),g.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Product"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search products...",value:u,onChange:L=>p(L.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Name"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Price (RM)"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[B.map(L=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3",children:L.name}),g.jsxs("td",{className:"px-4 py-3",children:["RM ",L.price?.toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>A(L),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(qh,{size:18})}),g.jsx("button",{onClick:()=>X(L.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:18})})]})]},L.id)),B.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"px-4 py-8 text-center text-gray-500",children:"No products found. Add one to get started."})})]})]})}),t&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:s?"Edit Product":"Add Product"}),g.jsxs("form",{onSubmit:I,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),g.jsx("input",{type:"text",required:!0,value:v.name,onChange:L=>b({...v,name:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (RM)"}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:v.price,onChange:L=>b({...v,price:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function ZR(){const a=hr(()=>Be.customers.toArray()),[t,r]=ie.useState(!1),[s,l]=ie.useState(null),[u,p]=ie.useState(""),_=ie.useRef(null),[v,b]=ie.useState({name:"",contact:"",email:"",address:""}),A=(L=null)=>{L?(l(L),b({name:L.name,contact:L.contact,email:L.email||"",address:L.address||""})):(l(null),b({name:"",contact:"",email:"",address:""})),r(!0)},N=()=>{r(!1),l(null)},I=async L=>{L.preventDefault();try{s?await Be.customers.update(s.id,v):await Be.customers.add(v),N()}catch(ee){console.error("Failed to save customer:",ee),alert("Error saving customer")}},X=async L=>{window.confirm("Are you sure you want to delete this customer?")&&await Be.customers.delete(L)},ue=()=>{const L=JSON.stringify(a,null,2),ee=new Blob([L],{type:"application/json"}),fe=URL.createObjectURL(ee),xe=document.createElement("a");xe.href=fe,xe.download="customers_backup.json",document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)},oe=L=>{const ee=L.target.files[0];if(!ee)return;const fe=new FileReader;fe.onload=async xe=>{try{const Pe=JSON.parse(xe.target.result);Array.isArray(Pe)?(await Be.customers.bulkPut(Pe),alert("Customers imported successfully!")):alert("Invalid file format")}catch(Pe){console.error("Import failed:",Pe),alert("Failed to import customers")}},fe.readAsText(ee),L.target.value=null},B=a?.filter(L=>L.name.toLowerCase().includes(u.toLowerCase())||L.contact.includes(u))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Customers"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>_.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Fh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:oe}),g.jsxs("button",{onClick:ue,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Bh,{size:16})," Export"]}),g.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Customer"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search customers...",value:u,onChange:L=>p(L.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(L=>g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:L.name}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>A(L),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(qh,{size:16})}),g.jsx("button",{onClick:()=>X(L.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:16})})]})]}),g.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(jb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:L.contact})]}),L.email&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Cb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:L.email})]}),L.address&&g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Db,{size:14,className:"text-gray-400 mt-1"}),g.jsx("span",{className:"flex-1",children:L.address})]})]})]},L.id))}),B.length===0&&g.jsx("div",{className:"text-center py-12 text-gray-500",children:"No customers found. Add one to get started."}),t&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:s?"Edit Customer":"Add Customer"}),g.jsxs("form",{onSubmit:I,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),g.jsx("input",{type:"text",required:!0,value:v.name,onChange:L=>b({...v,name:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact No."}),g.jsx("input",{type:"text",required:!0,value:v.contact,onChange:L=>b({...v,contact:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),g.jsx("input",{type:"email",value:v.email,onChange:L=>b({...v,email:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),g.jsx("textarea",{value:v.address,onChange:L=>b({...v,address:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"3"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function JR(){const a=hr(()=>Be.sales.reverse().toArray()),t=hr(()=>Be.customers.toArray()),[r,s]=ie.useState(""),l=Ol(),u=b=>t?.find(A=>A.id===b)?.name||"Unknown Customer",p=b=>b?.reduce((A,N)=>A+(N.discount||0),0)||0,_=a?.filter(b=>{const A=u(b.customerId).toLowerCase(),N=$r(new Date(b.date)),I=b.memo?.toLowerCase()||"";return A.includes(r.toLowerCase())||N.includes(r)||I.includes(r.toLowerCase())})||[],v=async b=>{window.confirm("Are you sure you want to delete this sale record?")&&await Be.sales.delete(b)};return g.jsxs("div",{className:"p-4 pb-24 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Sales Dashboard"}),g.jsxs(Uh,{to:"/sales/new",className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," New Sale"]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search by customer, date, or memo...",value:r,onChange:b=>s(b.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Date"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Customer"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Memo"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Discount"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Grand Total"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[_.map(b=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3 text-sm",children:$r(new Date(b.date))}),g.jsx("td",{className:"px-4 py-3 font-medium",children:u(b.customerId)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 italic",children:b.memo||"-"}),g.jsx("td",{className:"px-4 py-3 text-right text-red-500 text-sm",children:p(b.items)>0?`RM ${p(b.items).toFixed(2)}`:"-"}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:["RM ",(b.grandTotal||0).toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>l(`/sales/${b.id}`),className:"text-blue-600 hover:text-blue-800 p-1",title:"View Invoice",children:g.jsx(Jw,{size:18})}),g.jsx("button",{onClick:()=>v(b.id),className:"text-red-600 hover:text-red-800 p-1",title:"Delete",children:g.jsx(Ys,{size:18})})]})]},b.id)),_.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"No sales found. Create a new sale to get started."})})]})]})})]})}var ph={exports:{}},WR=ph.exports,cb;function eC(){return cb||(cb=1,(function(a,t){(function(r,s){a.exports=s(Ph())})(typeof self<"u"?self:WR,function(r){return(function(){var s={155:function(ee){ee.exports=r}},l={};function u(ee){var fe=l[ee];if(fe!==void 0)return fe.exports;var xe=l[ee]={exports:{}};return s[ee](xe,xe.exports,u),xe.exports}u.d=function(ee,fe){for(var xe in fe)u.o(fe,xe)&&!u.o(ee,xe)&&Object.defineProperty(ee,xe,{enumerable:!0,get:fe[xe]})},u.o=function(ee,fe){return Object.prototype.hasOwnProperty.call(ee,fe)},u.r=function(ee){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})};var p={};u.r(p),u.d(p,{useReactToPrint:function(){return L}});var _=u(155);const v="printWindow";function b({level:ee="error",messages:fe,suppressErrors:xe=!1}){xe||(ee==="error"?console.error(fe):ee==="warning"?console.warn(fe):console.debug(fe))}function A(ee,fe){if(fe||!ee){const xe=document.getElementById(v);xe&&document.body.removeChild(xe)}}function N(ee){return ee instanceof Error?ee:new Error("Unknown Error")}function I(ee,fe){const{documentTitle:xe,onAfterPrint:Pe,onPrintError:Ye,preserveAfterPrint:M,print:O,suppressErrors:V}=fe;setTimeout(()=>{var F,q;if(ee.contentWindow){let k=function(){Pe?.(),A(M)};var J=k;if(ee.contentWindow.focus(),O)O(ee).then(k).catch(yt=>{Ye?Ye("print",N(yt)):b({messages:["An error was thrown by the specified `print` function"],suppressErrors:V})});else{if(ee.contentWindow.print){const yt=(q=(F=ee.contentDocument)===null||F===void 0?void 0:F.title)!==null&&q!==void 0?q:"",Nt=ee.ownerDocument.title;xe&&(ee.ownerDocument.title=xe,ee.contentDocument&&(ee.contentDocument.title=xe)),ee.contentWindow.print(),xe&&(ee.ownerDocument.title=Nt,ee.contentDocument&&(ee.contentDocument.title=yt))}else b({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:V});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(yt=>{var Nt,W;return((W=(Nt=navigator.userAgent)!==null&&Nt!==void 0?Nt:navigator.vendor)!==null&&W!==void 0?W:"opera"in window&&window.opera).match(yt)})?setTimeout(k,500):k()}}else b({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:V})},500)}function X(ee){const fe=[],xe=document.createTreeWalker(ee,NodeFilter.SHOW_ELEMENT,null);let Pe=xe.nextNode();for(;Pe;)fe.push(Pe),Pe=xe.nextNode();return fe}function ue(ee,fe,xe){const Pe=X(ee),Ye=X(fe);if(Pe.length===Ye.length)for(let M=0;M<Pe.length;M++){const O=Pe[M],V=Ye[M],F=O.shadowRoot;if(F!==null){const q=V.attachShadow({mode:F.mode});q.innerHTML=F.innerHTML,ue(F,q,xe)}}else b({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",ee,fe],suppressErrors:xe})}const oe=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function B(ee,fe,xe,Pe){var Ye,M,O,V,F;const{contentNode:q,clonedContentNode:J,clonedImgNodes:k,clonedVideoNodes:yt,numResourcesToLoad:Nt,originalCanvasNodes:W}=xe,{bodyClass:Ae,fonts:Ne,ignoreGlobalStyles:at,pageStyle:tt,nonce:H,suppressErrors:be,copyShadowRoots:Ie}=Pe;ee.onload=null;const Re=(Ye=ee.contentDocument)!==null&&Ye!==void 0?Ye:(M=ee.contentWindow)===null||M===void 0?void 0:M.document;if(Re){const Fe=Re.body.appendChild(J);Ie&&ue(q,Fe,!!be),Ne&&(!((O=ee.contentDocument)===null||O===void 0)&&O.fonts&&(!((V=ee.contentWindow)===null||V===void 0)&&V.FontFace)?Ne.forEach(Ge=>{const Je=new FontFace(Ge.family,Ge.source,{weight:Ge.weight,style:Ge.style});ee.contentDocument.fonts.add(Je),Je.loaded.then(()=>{fe(Je)}).catch(Ht=>{fe(Je,["Failed loading the font:",Je,"Load error:",N(Ht)])})}):(Ne.forEach(Ge=>{fe(Ge)}),b({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:be})));const $e=tt??oe,rt=Re.createElement("style");H&&(rt.setAttribute("nonce",H),Re.head.setAttribute("nonce",H)),rt.appendChild(Re.createTextNode($e)),Re.head.appendChild(rt),Ae&&Re.body.classList.add(...Ae.split(" "));const Ft=Re.querySelectorAll("canvas");for(let Ge=0;Ge<W.length;++Ge){const Je=W[Ge],Ht=Ft[Ge];if(Ht===void 0){b({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",Je],suppressErrors:be});continue}const pt=Ht.getContext("2d");pt&&pt.drawImage(Je,0,0)}for(let Ge=0;Ge<k.length;Ge++){const Je=k[Ge],Ht=Je.getAttribute("src");if(Ht){const pt=new Image;pt.onload=()=>{fe(Je)},pt.onerror=(zt,on,Yn,Rt,Mt)=>{fe(Je,["Error loading <img>",Je,"Error",Mt])},pt.src=Ht}else fe(Je,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',Je])}for(let Ge=0;Ge<yt.length;Ge++){const Je=yt[Ge];Je.preload="auto";const Ht=Je.getAttribute("poster");if(Ht){const pt=new Image;pt.onload=()=>{fe(Je)},pt.onerror=(zt,on,Yn,Rt,Mt)=>{fe(Je,["Error loading video poster",Ht,"for video",Je,"Error:",Mt])},pt.src=Ht}else Je.readyState>=2?fe(Je):Je.src?(Je.onloadeddata=()=>{fe(Je)},Je.onerror=(pt,zt,on,Yn,Rt)=>{fe(Je,["Error loading video",Je,"Error",Rt])},Je.onstalled=()=>{fe(Je,["Loading video stalled, skipping",Je])}):fe(Je,["Error loading video, `src` is empty",Je])}const Oe="select",fn=q.querySelectorAll(Oe),On=Re.querySelectorAll(Oe);for(let Ge=0;Ge<fn.length;Ge++)On[Ge].value=fn[Ge].value;if(!at){const Ge=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let Je=0,Ht=Ge.length;Je<Ht;++Je){const pt=Ge[Je];if(pt.tagName.toLowerCase()==="style"){const zt=Re.createElement(pt.tagName),on=pt.sheet;if(on){let Yn="";try{const Rt=on.cssRules.length;for(let Mt=0;Mt<Rt;++Mt)typeof on.cssRules[Mt].cssText=="string"&&(Yn+=`${on.cssRules[Mt].cssText}\r
`)}catch(Rt){b({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",pt,`Original error: ${N(Rt).message}`],level:"warning"})}zt.setAttribute("id",`react-to-print-${Je}`),H&&zt.setAttribute("nonce",H),zt.appendChild(Re.createTextNode(Yn)),Re.head.appendChild(zt)}}else if(pt.getAttribute("href"))if(pt.hasAttribute("disabled"))b({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",pt],level:"warning"}),fe(pt);else{const zt=Re.createElement(pt.tagName);for(let on=0,Yn=pt.attributes.length;on<Yn;++on){const Rt=pt.attributes[on];Rt&&zt.setAttribute(Rt.nodeName,(F=Rt.nodeValue)!==null&&F!==void 0?F:"")}zt.onload=()=>{fe(zt)},zt.onerror=(on,Yn,Rt,Mt,wn)=>{fe(zt,["Failed to load",zt,"Error:",wn])},H&&zt.setAttribute("nonce",H),Re.head.appendChild(zt)}else b({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",pt],level:"warning"}),fe(pt)}}}Nt===0&&I(ee,Pe)}function L({bodyClass:ee,contentRef:fe,copyShadowRoots:xe,documentTitle:Pe,fonts:Ye,ignoreGlobalStyles:M,nonce:O,onAfterPrint:V,onBeforePrint:F,onPrintError:q,pageStyle:J,preserveAfterPrint:k,print:yt,printIframeProps:Nt,suppressErrors:W}){return(0,_.useCallback)(Ne=>{function at(){const tt={bodyClass:ee,contentRef:fe,copyShadowRoots:xe,documentTitle:Pe,fonts:Ye,ignoreGlobalStyles:M,nonce:O,onAfterPrint:V,onPrintError:q,pageStyle:J,preserveAfterPrint:k,print:yt,suppressErrors:W},H=(function(Re){const Fe=document.createElement("iframe");return Fe.width=`${document.documentElement.clientWidth}px`,Fe.height=`${document.documentElement.clientHeight}px`,Fe.style.position="absolute",Fe.style.top=`-${document.documentElement.clientHeight+100}px`,Fe.style.left=`-${document.documentElement.clientWidth+100}px`,Fe.id=v,Fe.srcdoc="<!DOCTYPE html>",Re&&(Re.allow&&(Fe.allow=Re.allow),Re.referrerPolicy!==void 0&&(Fe.referrerPolicy=Re.referrerPolicy),Re.sandbox!==void 0&&(Fe.sandbox=Re.sandbox)),Fe})(Nt),be=(function(Re,Fe){const{contentRef:$e,fonts:rt,ignoreGlobalStyles:Ft,suppressErrors:Oe}=Fe,fn=(function({contentRef:zt,optionalContent:on,suppressErrors:Yn}){return on&&typeof on=="function"?(zt&&b({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),on()):zt?zt.current:void b({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Yn})})({contentRef:$e,optionalContent:Re,suppressErrors:Oe});if(!fn)return;const On=fn.cloneNode(!0),Ge=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Je=On.querySelectorAll("img"),Ht=On.querySelectorAll("video"),pt=rt?rt.length:0;return{contentNode:fn,clonedContentNode:On,clonedImgNodes:Je,clonedVideoNodes:Ht,numResourcesToLoad:(Ft?0:Ge.length)+Je.length+Ht.length+pt,originalCanvasNodes:fn.querySelectorAll("canvas")}})(Ne,tt);if(!be)return void b({messages:["There is nothing to print"],suppressErrors:W});const Ie=(function(Re,Fe,$e){const{suppressErrors:rt}=Re,Ft=[],Oe=[];return function(fn,On){Ft.includes(fn)?b({level:"debug",messages:["Tried to mark a resource that has already been handled",fn],suppressErrors:rt}):(On?(b({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...On],suppressErrors:rt}),Oe.push(fn)):Ft.push(fn),Ft.length+Oe.length===Fe&&I($e,Re))}})(tt,be.numResourcesToLoad,H);(function(Re,Fe,$e,rt){Re.onload=()=>{B(Re,Fe,$e,rt)},document.body.appendChild(Re)})(H,Ie,be,tt)}A(k,!0),F?F().then(()=>{at()}).catch(tt=>{q?.("onBeforePrint",N(tt))}):at()},[ee,fe,xe,Pe,Ye,M,O,V,F,q,J,k,yt,W])}return p})()})})(ph)),ph.exports}var tC=eC();const nC=({settings:a,customer:t,saleDate:r,id:s,items:l,products:u,prevBalance:p,prevBalanceMemo:_,subtotal:v,paidAmount:b,grandTotal:A})=>{const N=B=>u?.find(L=>L.id===B)?.name||"Unknown",I=l.reduce((B,L)=>B+(L.discount||0),0),X=A-(b||0),ue=parseInt(a.invoiceStart)||1e4,oe=s?ue+(parseInt(s)-1):"NEW";return g.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto print:p-0 print:w-full print:max-w-none font-sans",children:[g.jsxs("div",{className:"flex flex-col md:flex-row print:flex-row justify-between items-center md:items-start print:items-start mb-8 border-b-2 border-gray-100 pb-6 gap-4",children:[g.jsx("div",{className:"w-40 h-40 flex-shrink-0",children:a.logoLeft&&g.jsx("img",{src:a.logoLeft,alt:"Logo",className:"w-full h-full object-contain"})}),g.jsxs("div",{className:"text-center flex-1 px-4 order-first md:order-none print:order-none w-full",children:[g.jsx("h1",{className:"text-xl font-extrabold uppercase tracking-wide text-gray-900",children:a.companyName}),g.jsx("p",{className:"text-sm font-bold text-gray-600",children:a.regNum}),g.jsx("p",{className:"text-xs mt-1 text-gray-500 font-medium",children:a.desc1}),g.jsx("p",{className:"text-xs text-gray-500 font-medium",children:a.desc2}),g.jsx("p",{className:"text-sm font-bold mt-2 text-gray-800",children:a.contact})]}),g.jsx("div",{className:"w-40 h-40 flex-shrink-0 hidden md:block print:block",children:a.logoRight&&g.jsx("img",{src:a.logoRight,alt:"Poultry",className:"w-full h-full object-contain"})})]}),g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-6",children:[g.jsxs("div",{className:"w-full md:w-auto",children:[g.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Billed To"}),g.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t.name}),g.jsx("p",{className:"text-sm text-gray-600 max-w-[250px]",children:t.address}),g.jsx("p",{className:"text-sm text-gray-600",children:t.contact})]}),g.jsxs("div",{className:"text-left md:text-right w-full md:w-auto",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-400 uppercase mb-1",children:"Delivery Order / Invoice"}),g.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["#INV-",oe]}),g.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["Date: ",$r(new Date(r))]})]})]}),g.jsx("div",{className:"hidden md:block print:!block overflow-x-auto",children:g.jsxs("table",{className:"w-full mb-8 border-collapse min-w-[600px] print:!min-w-full print:!table",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[g.jsx("th",{className:"text-center py-3 px-2 text-sm font-bold text-gray-600 w-12",children:"#"}),g.jsx("th",{className:"text-left py-3 px-2 text-sm font-bold text-gray-600",children:"Item"}),g.jsx("th",{className:"text-center py-3 px-2 text-sm font-bold text-gray-600",children:"Quantity"}),g.jsx("th",{className:"text-right py-3 px-2 text-sm font-bold text-gray-600",children:"Unit Price"}),g.jsx("th",{className:"text-right py-3 px-2 text-sm font-bold text-gray-600",children:"Total"})]})}),g.jsx("tbody",{children:l.map((B,L)=>g.jsxs("tr",{className:"border-b border-gray-50",children:[g.jsx("td",{className:"text-center py-3 px-2 text-sm text-gray-600",children:L+1}),g.jsxs("td",{className:"py-3 px-2",children:[g.jsx("div",{className:"font-bold text-gray-800",children:N(parseInt(B.productId))}),B.memo&&g.jsx("div",{className:"text-xs text-gray-500 italic mt-0.5",children:B.memo}),B.discount>0&&g.jsxs("div",{className:"text-xs text-red-500 mt-0.5",children:["Disc: -",parseFloat(B.discount).toFixed(2)]})]}),g.jsxs("td",{className:"text-center py-3 px-2 text-sm text-gray-800 font-medium",children:[B.qty," ",B.unit]}),g.jsxs("td",{className:"text-right py-3 px-2 text-sm text-gray-800",children:["RM ",parseFloat(B.price).toFixed(2)]}),g.jsxs("td",{className:"text-right py-3 px-2 text-sm font-bold text-gray-800",children:["RM ",(B.qty*B.price-(B.discount||0)).toFixed(2)]})]},L))})]})}),g.jsx("div",{className:"md:hidden print:hidden space-y-4 mb-8",children:l.map((B,L)=>g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-gray-900",children:N(parseInt(B.productId))}),B.memo&&g.jsx("div",{className:"text-xs text-gray-500 italic",children:B.memo})]}),g.jsxs("div",{className:"text-xs font-bold text-gray-500 bg-white px-2 py-1 rounded border",children:["#",L+1]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-500 text-xs block",children:"Quantity"}),g.jsxs("span",{className:"font-medium",children:[B.qty," ",B.unit]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("span",{className:"text-gray-500 text-xs block",children:"Unit Price"}),g.jsxs("span",{className:"font-medium",children:["RM ",parseFloat(B.price).toFixed(2)]})]})]}),B.discount>0&&g.jsxs("div",{className:"flex justify-between text-xs text-red-500 mb-2",children:[g.jsx("span",{children:"Discount"}),g.jsxs("span",{children:["- RM ",parseFloat(B.discount).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 pt-2",children:[g.jsx("span",{className:"font-bold text-gray-600",children:"Total"}),g.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["RM ",(B.qty*B.price-(B.discount||0)).toFixed(2)]})]})]},L))}),g.jsx("div",{className:"flex justify-end mb-12",children:g.jsxs("div",{className:"w-80",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[g.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Subtotal"}),g.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["RM ",v.toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-green-700 text-white px-3 py-1.5 rounded-sm mb-1",children:[g.jsx("span",{className:"text-sm font-medium",children:"Discount"}),g.jsxs("span",{className:"text-sm font-bold",children:["- RM ",I.toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-green-700 text-white px-3 py-1.5 rounded-sm mb-2",children:[g.jsxs("span",{className:"text-sm font-medium",children:["Previous Balance ",_&&`(${_})`]}),g.jsxs("span",{className:"text-sm font-bold",children:["RM ",parseFloat(p).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[g.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Paid"}),g.jsxs("span",{className:"text-sm font-bold text-gray-800",children:["- RM ",parseFloat(b||0).toFixed(2)]})]}),g.jsxs("div",{className:"flex justify-between items-center border-t-2 border-gray-200 pt-2 px-2",children:[g.jsx("span",{className:"text-lg font-extrabold text-gray-900",children:"Balance Due"}),g.jsxs("span",{className:"text-lg font-extrabold text-gray-900",children:["RM ",X.toFixed(2)]})]})]})}),g.jsxs("div",{className:"text-center space-y-1",children:[g.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Thank you for your business!"}),g.jsx("p",{className:"text-xs text-gray-400 italic",children:"This is a computer-generated document. No signature is required."})]})]})};function hb(){const{id:a}=LE(),t=Ol(),r=Ap(),s=hr(()=>Be.customers.toArray()),l=hr(()=>Be.products.toArray()),[u,p]=ie.useState($r(new Date)),[_,v]=ie.useState(""),[b,A]=ie.useState([]),[N,I]=ie.useState(0),[X,ue]=ie.useState(""),[oe,B]=ie.useState(0),[L,ee]=ie.useState(!1),[fe,xe]=ie.useState(!1),[Pe,Ye]=ie.useState(!0),M=ie.useRef(),O=tC.useReactToPrint({contentRef:M,documentTitle:`Invoice-${a||"New"}`});ie.useEffect(()=>{a&&Be.sales.get(parseInt(a)).then(W=>{W&&(p(W.date),v(W.customerId),A(W.items),I(W.prevBalance||0),ue(W.memo||""),B(W.paidAmount||0),ee(!0))})},[a]);const V=()=>{A([...b,{productId:"",qty:1,unit:"Kg",price:0,discount:0,memo:""}])},F=(W,Ae,Ne)=>{const at=[...b];if(at[W][Ae]=Ne,Ae==="productId"){const tt=l.find(H=>H.id===parseInt(Ne));tt&&(at[W].price=tt.price)}A(at)},q=W=>{A(b.filter((Ae,Ne)=>Ne!==W))},J=()=>b.reduce((W,Ae)=>W+(Ae.qty*Ae.price-(Ae.discount||0)),0),k=()=>J()+parseFloat(N||0),yt=async(W=!1)=>{if(!_){alert("Please select a customer");return}if(b.length===0){alert("Please add at least one item");return}const Ae={date:u,customerId:parseInt(_),items:b.map(Ne=>({...Ne,productId:parseInt(Ne.productId),qty:parseFloat(Ne.qty),price:parseFloat(Ne.price),discount:parseFloat(Ne.discount||0),memo:Ne.memo||""})),subtotal:J(),prevBalance:parseFloat(N),memo:X,paidAmount:parseFloat(oe),grandTotal:k()};try{let Ne=a?parseInt(a):null;if(Ne)await Be.sales.update(Ne,Ae),alert("Sale updated!");else{if(Ne=await Be.sales.add(Ae),!W){t(`/sales/${Ne}`);return}if(!a){t(`/sales/${Ne}?print=true`);return}}W?(ee(!0),xe(!0)):ee(!0)}catch(Ne){console.error("Error saving sale:",Ne),alert("Failed to save sale")}};ie.useEffect(()=>{new URLSearchParams(window.location.search).get("print")==="true"&&L&&(window.history.replaceState({},"",window.location.pathname),xe(!0))},[L]),ie.useEffect(()=>{if(fe&&L){const W=setTimeout(()=>{O(),xe(!1)},500);return()=>clearTimeout(W)}},[fe,L]);const Nt=()=>s?.find(W=>W.id===parseInt(_))||{};return g.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 print:bg-white print:pb-0",children:[Pe&&g.jsxs("div",{className:"sticky top-0 bg-white shadow-sm p-4 flex justify-between items-center z-10 no-print",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>t("/"),className:"p-2 hover:bg-gray-100 rounded-full",children:g.jsx(zw,{size:20})}),g.jsx("h1",{className:"text-xl font-bold",children:a?"Invoice View":"New Sale"})]}),g.jsx("div",{className:"flex gap-2",children:L?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>Ye(!1),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Screenshot Mode",children:g.jsx(i2,{size:20})}),g.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 text-blue-600 font-medium hover:bg-blue-50 rounded-lg",children:"Edit"}),g.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900",children:[g.jsx(c2,{size:18})," Save as PDF"]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-600 font-medium hover:bg-gray-100 rounded-lg",children:[g.jsx($w,{size:18})," Preview"]}),g.jsxs("button",{onClick:()=>yt(!1),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[g.jsx(Ib,{size:18})," Save"]})]})})]}),!Pe&&g.jsx("button",{onClick:()=>Ye(!0),className:"fixed top-4 right-4 z-50 p-2 bg-gray-800 text-white rounded-full shadow-lg opacity-50 hover:opacity-100 transition-opacity no-print",title:"Exit Screenshot Mode",children:g.jsx(A2,{size:20})}),L?g.jsx("div",{ref:M,children:g.jsx(nC,{settings:r,customer:Nt(),saleDate:u,id:a,items:b,products:l,prevBalance:N,prevBalanceMemo:X,paidAmount:oe,subtotal:J(),grandTotal:k()})}):g.jsxs("div",{className:"max-w-5xl mx-auto p-4 space-y-6",children:[g.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",value:u,onChange:W=>p(W.target.value),className:"w-full p-2 border rounded-md"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer"}),g.jsxs("select",{value:_,onChange:W=>v(W.target.value),className:"w-full p-2 border rounded-md",children:[g.jsx("option",{value:"",children:"Select Customer"}),s?.map(W=>g.jsx("option",{value:W.id,children:W.name},W.id))]})]})]})}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[g.jsx("h2",{className:"font-semibold mb-4",children:"Items"}),g.jsxs("div",{children:[g.jsxs("div",{className:"hidden md:flex gap-2 border-b pb-2 mb-2 text-sm font-medium text-gray-600",children:[g.jsx("div",{className:"flex-1 min-w-[200px]",children:"Product"}),g.jsx("div",{className:"w-48",children:"Memo"}),g.jsx("div",{className:"w-20",children:"Qty"}),g.jsx("div",{className:"w-24",children:"Unit"}),g.jsx("div",{className:"w-24",children:"Price"}),g.jsx("div",{className:"w-24",children:"Discount"}),g.jsx("div",{className:"w-24 text-right",children:"Total"}),g.jsx("div",{className:"w-10"})]}),g.jsx("div",{className:"space-y-4 md:space-y-2",children:b.map((W,Ae)=>g.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-2 items-start border md:border-none p-4 md:p-0 rounded-lg md:rounded-none bg-gray-50 md:bg-white relative",children:[g.jsx("button",{onClick:()=>q(Ae),className:"absolute top-2 right-2 p-2 text-red-500 hover:bg-red-100 rounded-full md:hidden",children:g.jsx(Ys,{size:18})}),g.jsxs("div",{className:"w-full md:flex-1 md:min-w-[200px]",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Product"}),g.jsxs("select",{value:W.productId,onChange:Ne=>F(Ae,"productId",Ne.target.value),className:"w-full p-2 border rounded-md text-sm bg-white",children:[g.jsx("option",{value:"",children:"Select Product"}),l?.map(Ne=>g.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]})]}),g.jsxs("div",{className:"w-full md:w-48",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Memo"}),g.jsx("input",{type:"text",placeholder:"Memo",value:W.memo||"",onChange:Ne=>F(Ae,"memo",Ne.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("div",{className:"w-1/2 md:w-20",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Qty"}),g.jsx("input",{type:"number",value:W.qty,onChange:Ne=>F(Ae,"qty",Ne.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Unit"}),g.jsxs("select",{value:W.unit,onChange:Ne=>F(Ae,"unit",Ne.target.value),className:"w-full p-2 border rounded-md text-sm bg-white",children:[g.jsx("option",{value:"Kg",children:"Kg"}),g.jsx("option",{value:"Pcs",children:"Pcs"})]})]})]}),g.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Price"}),g.jsx("input",{type:"number",step:"0.01",value:W.price,onChange:Ne=>F(Ae,"price",Ne.target.value),className:"w-full p-2 border rounded-md text-sm"})]}),g.jsxs("div",{className:"w-1/2 md:w-24",children:[g.jsx("label",{className:"md:hidden text-xs font-bold text-gray-500 mb-1 block",children:"Discount"}),g.jsx("input",{type:"number",step:"0.01",value:W.discount,onChange:Ne=>F(Ae,"discount",Ne.target.value),className:"w-full p-2 border rounded-md text-sm text-red-600",placeholder:"0.00"})]})]}),g.jsxs("div",{className:"w-full md:w-24 md:text-right flex justify-between md:block items-center mt-2 md:mt-0 pt-2 md:pt-2 border-t md:border-none",children:[g.jsx("span",{className:"md:hidden text-sm font-bold text-gray-600",children:"Total:"}),g.jsx("span",{className:"font-medium text-sm",children:(W.qty*W.price-(W.discount||0)).toFixed(2)})]}),g.jsx("div",{className:"hidden md:flex w-10 justify-center",children:g.jsx("button",{onClick:()=>q(Ae),className:"p-2 text-red-500 hover:bg-red-50 rounded-full",children:g.jsx(Ys,{size:18})})})]},Ae))})]}),g.jsxs("button",{onClick:V,className:"mt-4 flex items-center gap-2 text-blue-600 font-medium hover:bg-blue-50 px-3 py-2 rounded-lg",children:[g.jsx(Ml,{size:18})," Add Item"]})]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"font-medium",children:"Subtotal"}),g.jsx("span",{className:"text-xl font-bold",children:J().toFixed(2)})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous Balance"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",placeholder:"Memo (e.g. Bal b/f)",value:X,onChange:W=>ue(W.target.value),className:"flex-1 p-2 border rounded-md"}),g.jsx("input",{type:"number",step:"0.01",placeholder:"Amount",value:N,onChange:W=>I(W.target.value),className:"w-32 p-2 border rounded-md text-right"})]})]}),g.jsxs("div",{className:"border-t pt-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Paid"}),g.jsx("div",{className:"flex justify-end",children:g.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:oe,onChange:W=>B(W.target.value),className:"w-32 p-2 border rounded-md text-right font-bold text-green-700"})})]}),g.jsxs("div",{className:"flex justify-between items-center border-t pt-4 text-lg",children:[g.jsx("span",{className:"font-bold",children:"Grand Total"}),g.jsxs("span",{className:"font-bold text-blue-600",children:["RM ",k().toFixed(2)]})]})]})]})]})}function rC(){const a=hr(()=>Be.vendors.toArray()),[t,r]=ie.useState(!1),[s,l]=ie.useState(null),[u,p]=ie.useState(""),_=ie.useRef(null),[v,b]=ie.useState({name:"",contact:"",email:"",address:""}),A=(L=null)=>{L?(l(L),b({name:L.name,contact:L.contact,email:L.email||"",address:L.address||""})):(l(null),b({name:"",contact:"",email:"",address:""})),r(!0)},N=()=>{r(!1),l(null)},I=async L=>{L.preventDefault();try{s?await Be.vendors.update(s.id,v):await Be.vendors.add(v),N()}catch(ee){console.error("Failed to save vendor:",ee),alert("Error saving vendor")}},X=async L=>{window.confirm("Are you sure you want to delete this vendor?")&&await Be.vendors.delete(L)},ue=()=>{const L=JSON.stringify(a,null,2),ee=new Blob([L],{type:"application/json"}),fe=URL.createObjectURL(ee),xe=document.createElement("a");xe.href=fe,xe.download="vendors_backup.json",document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)},oe=L=>{const ee=L.target.files[0];if(!ee)return;const fe=new FileReader;fe.onload=async xe=>{try{const Pe=JSON.parse(xe.target.result);Array.isArray(Pe)?(await Be.vendors.bulkPut(Pe),alert("Vendors imported successfully!")):alert("Invalid file format")}catch(Pe){console.error("Import failed:",Pe),alert("Failed to import vendors")}},fe.readAsText(ee),L.target.value=null},B=a?.filter(L=>L.name.toLowerCase().includes(u.toLowerCase())||L.contact.includes(u))||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Vendors"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>_.current.click(),className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Fh,{size:16})," Import"]}),g.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:oe}),g.jsxs("button",{onClick:ue,className:"flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[g.jsx(Bh,{size:16})," Export"]}),g.jsxs("button",{onClick:()=>A(),className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," Add Vendor"]})]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search vendors...",value:u,onChange:L=>p(L.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(L=>g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-2",children:[g.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:L.name}),g.jsxs("div",{className:"flex gap-1",children:[g.jsx("button",{onClick:()=>A(L),className:"text-blue-600 hover:text-blue-800 p-1",children:g.jsx(qh,{size:16})}),g.jsx("button",{onClick:()=>X(L.id),className:"text-red-600 hover:text-red-800 p-1",children:g.jsx(Ys,{size:16})})]})]}),g.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(jb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:L.contact})]}),L.email&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Cb,{size:14,className:"text-gray-400"}),g.jsx("span",{children:L.email})]}),L.address&&g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Db,{size:14,className:"text-gray-400 mt-1"}),g.jsx("span",{className:"flex-1",children:L.address})]})]})]},L.id))}),B.length===0&&g.jsx("div",{className:"text-center py-12 text-gray-500",children:"No vendors found. Add one to get started."}),t&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:s?"Edit Vendor":"Add Vendor"}),g.jsxs("form",{onSubmit:I,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),g.jsx("input",{type:"text",required:!0,value:v.name,onChange:L=>b({...v,name:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact No."}),g.jsx("input",{type:"text",required:!0,value:v.contact,onChange:L=>b({...v,contact:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),g.jsx("input",{type:"email",value:v.email,onChange:L=>b({...v,email:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),g.jsx("textarea",{value:v.address,onChange:L=>b({...v,address:L.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"3"})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function aC(){const a=hr(()=>Be.vendorBills.reverse().toArray()),t=hr(()=>Be.vendors.toArray()),[r,s]=ie.useState(""),[l,u]=ie.useState(!1),[p,_]=ie.useState(null),[v,b]=ie.useState({vendorId:"",date:$r(new Date),total:"",memo:""}),A=B=>t?.find(L=>L.id===B)?.name||"Unknown Vendor",N=(B=null)=>{B?(_(B),b({vendorId:B.vendorId,date:B.date,total:B.total,memo:B.memo||""})):(_(null),b({vendorId:"",date:$r(new Date),total:"",memo:""})),u(!0)},I=()=>{u(!1),_(null)},X=async B=>{B.preventDefault();try{p?await Be.vendorBills.update(p.id,{vendorId:parseInt(v.vendorId),date:v.date,total:parseFloat(v.total),memo:v.memo}):await Be.vendorBills.add({vendorId:parseInt(v.vendorId),date:v.date,total:parseFloat(v.total),memo:v.memo}),I()}catch(L){console.error("Failed to save vendor bill:",L),alert("Error saving vendor bill")}},ue=async B=>{window.confirm("Are you sure you want to delete this vendor bill?")&&await Be.vendorBills.delete(B)},oe=a?.filter(B=>{const L=A(B.vendorId).toLowerCase(),ee=$r(new Date(B.date)),fe=B.memo?.toLowerCase()||"";return L.includes(r.toLowerCase())||ee.includes(r)||fe.includes(r.toLowerCase())})||[];return g.jsxs("div",{className:"p-4 pb-24 max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Vendor Bills"}),g.jsxs("button",{onClick:N,className:"flex items-center gap-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-sm",children:[g.jsx(Ml,{size:18})," New Bill"]})]}),g.jsxs("div",{className:"relative mb-4",children:[g.jsx(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search by vendor, date, or memo...",value:r,onChange:B=>s(B.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:g.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[g.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Date"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Vendor"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600",children:"Memo"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Total"}),g.jsx("th",{className:"px-4 py-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),g.jsxs("tbody",{className:"divide-y divide-gray-100",children:[oe.map(B=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"px-4 py-3 text-sm",children:$r(new Date(B.date))}),g.jsx("td",{className:"px-4 py-3 font-medium",children:A(B.vendorId)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 italic",children:B.memo||"-"}),g.jsxs("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:["RM ",(B.total||0).toFixed(2)]}),g.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[g.jsx("button",{onClick:()=>N(B),className:"text-blue-600 hover:text-blue-800 p-1",title:"Edit",children:g.jsx(qh,{size:18})}),g.jsx("button",{onClick:()=>ue(B.id),className:"text-red-600 hover:text-red-800 p-1",title:"Delete",children:g.jsx(Ys,{size:18})})]})]},B.id)),oe.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No vendor bills found. Create a new bill to get started."})})]})]})}),l&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[g.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"Edit Vendor Bill":"New Vendor Bill"}),g.jsxs("form",{onSubmit:X,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),g.jsx("input",{type:"date",required:!0,value:v.date,onChange:B=>b({...v,date:B.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor"}),g.jsxs("select",{required:!0,value:v.vendorId,onChange:B=>b({...v,vendorId:B.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",children:[g.jsx("option",{value:"",children:"Select Vendor"}),t?.map(B=>g.jsx("option",{value:B.id,children:B.name},B.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount (RM)"}),g.jsxs("div",{className:"relative",children:[g.jsx(yh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),g.jsx("input",{type:"number",step:"0.01",required:!0,value:v.total,onChange:B=>b({...v,total:B.target.value}),className:"w-full pl-10 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Memo (Optional)"}),g.jsx("textarea",{value:v.memo,onChange:B=>b({...v,memo:B.target.value}),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",rows:"2",placeholder:"Notes or description..."})]}),g.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[g.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]})]})})]})}function iC(){const{user:a}=Np();return a?g.jsx(xb,{}):g.jsx(JE,{to:"/login",replace:!0})}function sC(){const[a,t]=ie.useState(""),[r,s]=ie.useState(""),[l,u]=ie.useState(""),{login:p}=Np(),_=Ol(),v=async b=>{b.preventDefault(),u("");const A=await p(a,r);A.success?_("/"):u(A.message)};return g.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),g.jsx("p",{className:"text-gray-500 mt-2",children:"Please sign in to continue"})]}),g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(Ob,{size:20,className:"text-gray-400"})}),g.jsx("input",{type:"text",value:a,onChange:b=>t(b.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your username",required:!0})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx(Rb,{size:20,className:"text-gray-400"})}),g.jsx("input",{type:"password",value:r,onChange:b=>s(b.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",required:!0})]})]}),l&&g.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 p-2 rounded",children:l}),g.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign In"})]})]})})}function oC(){const[a,t]=ie.useState({start:$r(new Date(new Date().getFullYear(),new Date().getMonth(),1)),end:$r(new Date)}),[r,s]=ie.useState("sales"),l=hr(async()=>(await Be.sales.where("date").between(a.start,a.end,!0,!0).toArray()).sort((b,A)=>new Date(A.date)-new Date(b.date)),[a]),u=hr(()=>Be.products.toArray()),p=hr(()=>Be.customers.toArray()),_=ie.useMemo(()=>{if(!l||!u||!p)return null;const v={revenue:0,paid:0,balance:0,count:l.length},b={},A={};return l.forEach(N=>{v.revenue+=N.subtotal||0,v.paid+=N.paidAmount||0,v.balance+=(N.grandTotal||0)-(N.paidAmount||0),N.items.forEach(I=>{b[I.productId]||(b[I.productId]={id:I.productId,name:u.find(X=>X.id===I.productId)?.name||"Unknown",qty:0,revenue:0,unit:I.unit}),b[I.productId].qty+=parseFloat(I.qty)||0,b[I.productId].revenue+=I.qty*I.price-(I.discount||0)}),A[N.customerId]||(A[N.customerId]={id:N.customerId,name:p.find(I=>I.id===N.customerId)?.name||"Unknown",count:0,total:0}),A[N.customerId].count+=1,A[N.customerId].total+=N.subtotal||0}),{summary:v,products:Object.values(b).sort((N,I)=>I.revenue-N.revenue),customers:Object.values(A).sort((N,I)=>I.total-N.total)}},[l,u,p]);return _?g.jsxs("div",{className:"p-4 max-w-6xl mx-auto pb-24",children:[g.jsxs("h1",{className:"text-2xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[g.jsx(bh,{className:"text-blue-600"})," Reports & Analytics"]}),g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6 flex flex-col md:flex-row gap-4 items-end md:items-center justify-between",children:[g.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Start Date"}),g.jsx("input",{type:"date",value:a.start,onChange:v=>t(b=>({...b,start:v.target.value})),className:"p-2 border rounded-md text-sm w-full"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"End Date"}),g.jsx("input",{type:"date",value:a.end,onChange:v=>t(b=>({...b,end:v.target.value})),className:"p-2 border rounded-md text-sm w-full"})]})]}),g.jsxs("div",{className:"flex gap-4 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[g.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-green-600 font-bold uppercase",children:"Revenue"}),g.jsxs("p",{className:"text-lg font-bold text-green-900",children:["RM ",_.summary.revenue.toFixed(2)]})]}),g.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase",children:"Paid"}),g.jsxs("p",{className:"text-lg font-bold text-blue-900",children:["RM ",_.summary.paid.toFixed(2)]})]}),g.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100 min-w-[120px]",children:[g.jsx("p",{className:"text-xs text-red-600 font-bold uppercase",children:"Balance"}),g.jsxs("p",{className:"text-lg font-bold text-red-900",children:["RM ",_.summary.balance.toFixed(2)]})]})]})]}),g.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[g.jsxs("button",{onClick:()=>s("sales"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="sales"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(yh,{size:16})," Sales"]}),g.jsxs("button",{onClick:()=>s("products"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="products"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(vh,{size:16})," Products"]}),g.jsxs("button",{onClick:()=>s("customers"),className:`px-4 py-2 font-medium text-sm flex items-center gap-2 ${r==="customers"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[g.jsx(_h,{size:16})," Customers"]})]}),g.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r==="sales"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Date"}),g.jsx("th",{className:"p-3",children:"Customer"}),g.jsx("th",{className:"p-3 text-right",children:"Total"}),g.jsx("th",{className:"p-3 text-right",children:"Paid"}),g.jsx("th",{className:"p-3 text-right",children:"Balance"})]})}),g.jsxs("tbody",{className:"divide-y",children:[l.map(v=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3",children:$r(new Date(v.date))}),g.jsx("td",{className:"p-3 font-medium",children:p?.find(b=>b.id===v.customerId)?.name||"Unknown"}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",(v.grandTotal||0).toFixed(2)]}),g.jsxs("td",{className:"p-3 text-right text-green-600",children:["RM ",(v.paidAmount||0).toFixed(2)]}),g.jsxs("td",{className:"p-3 text-right text-red-600",children:["RM ",((v.grandTotal||0)-(v.paidAmount||0)).toFixed(2)]})]},v.id)),l.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:"No sales found in this period."})})]})]})}),r==="products"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Product Name"}),g.jsx("th",{className:"p-3 text-center",children:"Units Sold"}),g.jsx("th",{className:"p-3 text-right",children:"Total Revenue"})]})}),g.jsxs("tbody",{className:"divide-y",children:[_.products.map(v=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3 font-medium",children:v.name}),g.jsxs("td",{className:"p-3 text-center",children:[v.qty.toFixed(2)," ",v.unit]}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",v.revenue.toFixed(2)]})]},v.id)),_.products.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"p-8 text-center text-gray-500",children:"No product data available."})})]})]})}),r==="customers"&&g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full text-sm text-left",children:[g.jsx("thead",{className:"bg-gray-50 text-gray-600 font-bold border-b",children:g.jsxs("tr",{children:[g.jsx("th",{className:"p-3",children:"Customer Name"}),g.jsx("th",{className:"p-3 text-center",children:"Orders"}),g.jsx("th",{className:"p-3 text-right",children:"Total Spent"})]})}),g.jsxs("tbody",{className:"divide-y",children:[_.customers.map(v=>g.jsxs("tr",{className:"hover:bg-gray-50",children:[g.jsx("td",{className:"p-3 font-medium",children:v.name}),g.jsx("td",{className:"p-3 text-center",children:v.count}),g.jsxs("td",{className:"p-3 text-right font-bold",children:["RM ",v.total.toFixed(2)]})]},v.id)),_.customers.length===0&&g.jsx("tr",{children:g.jsx("td",{colSpan:"3",className:"p-8 text-center text-gray-500",children:"No customer data available."})})]})]})})]})]}):g.jsx("div",{className:"p-8 text-center",children:"Loading reports..."})}function lC(){return g.jsx(YR,{children:g.jsx(ww,{basename:"/spfamilyventuresbook",children:g.jsxs(ew,{children:[g.jsx(Yr,{path:"/login",element:g.jsx(sC,{})}),g.jsx(Yr,{element:g.jsx(iC,{}),children:g.jsxs(Yr,{path:"/",element:g.jsx(MR,{}),children:[g.jsx(Yr,{index:!0,element:g.jsx(FR,{})}),g.jsx(Yr,{path:"sales",element:g.jsx(JR,{})}),g.jsx(Yr,{path:"sales/new",element:g.jsx(hb,{})}),g.jsx(Yr,{path:"sales/:id",element:g.jsx(hb,{})}),g.jsx(Yr,{path:"products",element:g.jsx($R,{})}),g.jsx(Yr,{path:"customers",element:g.jsx(ZR,{})}),g.jsx(Yr,{path:"vendors",element:g.jsx(rC,{})}),g.jsx(Yr,{path:"vendor-bills",element:g.jsx(aC,{})}),g.jsx(Yr,{path:"reports",element:g.jsx(oC,{})}),g.jsx(Yr,{path:"settings",element:g.jsx(XR,{})})]})})]})})})}class uC extends So.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("Uncaught error:",t,r)}render(){return this.state.hasError?g.jsxs("div",{className:"p-8 bg-red-50 text-red-900 min-h-screen",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong."}),g.jsxs("details",{className:"whitespace-pre-wrap",children:[this.state.error&&this.state.error.toString(),g.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}iE.createRoot(document.getElementById("root")).render(g.jsx(So.StrictMode,{children:g.jsx(uC,{children:g.jsx(lC,{})})}));
